WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-frontend:split_react', location = 'react.js' */
(window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73=window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73||[]).push([[25],{551:function(e,t,r){"use strict";r.r(t);var n=r(68),i=r.n(n),o=r(15);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object(o.a)("react",()=>function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({default:i.a},n))}},[[551,0,3,4,1]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-editor-plugin:split_vendors~core~page-editor-quit-dialog', location = 'vendors~core~page-editor-quit-dialog.js' */
(window.atlassianWebpackJsonp1126d6c3ec4535e33734b1025bd581ff=window.atlassianWebpackJsonp1126d6c3ec4535e33734b1025bd581ff||[]).push([["vendors~core~page-editor-quit-dialog"],{0:function(e,t,o){"use strict";(function(t){e.exports="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this}).call(this,o(45))},45:function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"==typeof window&&(o=window)}e.exports=o}}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-editor-plugin:split_vendors~core', location = 'vendors~core.js' */
/*! For license information please see vendors~core.js.LICENSE.txt */
(window.atlassianWebpackJsonp1126d6c3ec4535e33734b1025bd581ff=window.atlassianWebpackJsonp1126d6c3ec4535e33734b1025bd581ff||[]).push([["vendors~core"],{21:function(e,t,r){var n;"undefined"!=typeof self&&self,void 0===(n=function(){return function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,r=function(e,r,n,o){var a=n;return r.replace(t,(function(e,t,r,n,i){t=t||n,a&&(t+":html"in a?(a=a[t+":html"],o=!0):t in a&&(a=a[t]),i&&"function"==typeof a&&(a=a()))})),null!=a&&a!==n||(a=e),a=String(a),o||(a=i.escape(a)),a},n=function(t){return this.template=this.template.replace(e,(function(e,n){return r(e,n,t,!0)})),this},o=function(t){return this.template=this.template.replace(e,(function(e,n){return r(e,n,t)})),this},a=function(){return this.template},i=function(e){function t(){return t.template}return t.template=String(e),t.toString=t.valueOf=a,t.fill=o,t.fillHtml=n,t},l={},s=[],d=function(e){return document.querySelector('script[title="'+e+'"]')};i.load=function(e){if(e=String(e),!l.hasOwnProperty(e)){s.length>=1e3&&delete l[s.shift()],s.push(e);var t=d(e);t&&(l[e]=t.text)}return this(l[e])};var c={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;","`":"&#96;"},u=new RegExp("["+Object.keys(c).join("")+"]","g");function m(e){return String(e||"").replace(u,(function(e){return c[e]}))}return i.escape=m,i}()}.call(t,r,t,e))||(e.exports=n)},28:function(e,t,r){"use strict";e.exports=function(e,t){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)||t?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},30:function(e,t,r){"use strict";t.decode=t.parse=r(51),t.encode=t.stringify=r(52)},36:function(e,t,r){"use strict";var n=["interactive","complete"],o=function(e,t){return new Promise((function(r){e&&"function"!=typeof e&&(t=e,e=null),t=t||window.document;var o=function(){return r(void(e&&setTimeout(e)))};-1!==n.indexOf(t.readyState)?o():t.addEventListener("DOMContentLoaded",o)}))};o.resume=function(e){return function(t){return o(e).then((function(){return t}))}},t.a=o},39:function(e,t,r){r(40)},40:function(e,t){function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ModelManager"),t=e=>t=>{return i=typeof(r=t),(null===r?"null":"object"===i&&Array.isArray(r)?"array":"object"===i&&(l=n=r,(o=String).prototype.isPrototypeOf(l)||(null===(a=n.constructor)||void 0===a?void 0:a.name)===o.name)?"string":i)===e;var r,n,o,a,i,l},r=e=>t=>typeof t===e,o=e=>t=>e===t,a=t("string"),i=t("object"),l=t("array"),s=o(null),d=r("boolean"),c=o(void 0),u=e=>!(e=>null==e)(e),m=r("function"),f=r("number"),g=()=>{},p=e=>()=>e,v=e=>e,h=(e,t)=>e===t;function b(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=r.concat(n);return e.apply(null,a)}}var y=e=>t=>!e(t),C=e=>e(),w=p(!1),S=p(!0);class x{constructor(e,t){this.tag=e,this.value=t}static some(e){return new x(!0,e)}static none(){return x.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?x.some(e(this.value)):x.none()}bind(e){return this.tag?e(this.value):x.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:x.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return u(e)?x.some(e):x.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}x.singletonNone=new x(!1);var k,E,N,_,T=Array.prototype.slice,D=Array.prototype.indexOf,R=Array.prototype.push,O=(e,t)=>{return r=e,n=t,D.call(r,n)>-1;var r,n},A=(e,t)=>{for(var r=0,n=e.length;r<n;r++){if(t(e[r],r))return!0}return!1},B=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(t(n));return r},P=(e,t)=>{for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n},L=(e,t)=>{for(var r=0,n=e.length;r<n;r++){t(e[r],r)}},M=(e,t)=>{for(var r=[],n=[],o=0,a=e.length;o<a;o++){var i=e[o];(t(i,o)?r:n).push(i)}return{pass:r,fail:n}},I=(e,t)=>{for(var r=[],n=0,o=e.length;n<o;n++){var a=e[n];t(a,n)&&r.push(a)}return r},F=(e,t,r)=>(((e,t)=>{for(var r=e.length-1;r>=0;r--)t(e[r],r)})(e,((e,n)=>{r=t(r,e,n)})),r),j=(e,t,r)=>(L(e,((e,n)=>{r=t(r,e,n)})),r),U=(e,t)=>((e,t,r)=>{for(var n=0,o=e.length;n<o;n++){var a=e[n];if(t(a,n))return x.some(a);if(r(a,n))break}return x.none()})(e,t,w),z=(e,t)=>{for(var r=0,n=e.length;r<n;r++){if(t(e[r],r))return x.some(r)}return x.none()},H=e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!l(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);R.apply(t,e[r])}return t},$=(e,t)=>H(P(e,t)),W=(e,t)=>{for(var r=0,n=e.length;r<n;++r){if(!0!==t(e[r],r))return!1}return!0},q=(e,t)=>{for(var r={},n=0,o=e.length;n<o;n++){var a=e[n];r[String(a)]=t(a,n)}return r},V=(e,t)=>t>=0&&t<e.length?x.some(e[t]):x.none(),K=e=>V(e,0),G=e=>V(e,e.length-1),Y=(e,t)=>{for(var r=0;r<e.length;r++){var n=t(e[r],r);if(n.isSome())return n}return x.none()},X=Object.keys,Q=Object.hasOwnProperty,J=(e,t)=>{for(var r=X(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}},Z=(e,t)=>ee(e,((e,r)=>({k:r,v:t(e,r)}))),ee=(e,t)=>{var r={};return J(e,((e,n)=>{var o=t(e,n);r[o.k]=o.v})),r},te=(e,t)=>{var r={};return((e,t,r,n)=>{J(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))})(e,t,(e=>(t,r)=>{e[r]=t})(r),g),r},re=(e,t)=>{var r=[];return J(e,((e,n)=>{r.push(t(e,n))})),r},ne=e=>re(e,v),oe=(e,t)=>Q.call(e,t),ae="undefined"!=typeof window?window:Function("return this;")(),ie=(e,t)=>((e,t)=>{for(var r=null!=t?t:ae,n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r})(e.split("."),t),le=(e,t)=>{var r=((e,t)=>ie(e,t))(e,t);if(null==r)throw new Error(e+" not available on this browser");return r},se=Object.getPrototypeOf,de=e=>{var t=ie("ownerDocument.defaultView",e);return i(e)&&((e=>le("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(se(e).constructor.name))},ce=e=>e.dom.nodeName.toLowerCase(),ue=e=>e.dom.nodeType,me=e=>t=>ue(t)===e,fe=e=>8===ue(e)||"#comment"===ce(e),ge=e=>pe(e)&&de(e.dom),pe=me(1),ve=me(3),he=me(9),be=me(11),ye=e=>t=>pe(t)&&ce(t)===e,Ce=(e,t,r)=>{if(!(a(r)||d(r)||f(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},we=(e,t,r)=>{Ce(e.dom,t,r)},Se=(e,t)=>{var r=e.dom;J(t,((e,t)=>{Ce(r,t,e)}))},xe=(e,t)=>{var r=e.dom.getAttribute(t);return null===r?void 0:r},ke=(e,t)=>x.from(xe(e,t)),Ee=(e,t)=>{e.dom.removeAttribute(t)},Ne=e=>j(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),_e=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Te={fromHtml:(e,t)=>{var r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){var n="HTML does not have a single root node";throw console.error(n,e),new Error(n)}return _e(r.childNodes[0])},fromTag:(e,t)=>{var r=(t||document).createElement(e);return _e(r)},fromText:(e,t)=>{var r=(t||document).createTextNode(e);return _e(r)},fromDom:_e,fromPoint:(e,t,r)=>x.from(e.dom.elementFromPoint(t,r)).map(_e)},De=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;var n=r;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Re=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Oe=(e,t)=>{var r=void 0===t?document:t.dom;return Re(r)?x.none():x.from(r.querySelector(e)).map(Te.fromDom)},Ae=(e,t)=>e.dom===t.dom,Be=(e,t)=>{var r=e.dom,n=t.dom;return r!==n&&r.contains(n)},Pe=De,Le=e=>Te.fromDom(e.dom.ownerDocument),Me=e=>he(e)?e:Le(e),Ie=e=>x.from(e.dom.parentNode).map(Te.fromDom),Fe=e=>x.from(e.dom.parentElement).map(Te.fromDom),je=(e,t)=>{for(var r=m(t)?t:w,n=e.dom,o=[];null!==n.parentNode&&void 0!==n.parentNode;){var a=n.parentNode,i=Te.fromDom(a);if(o.push(i),!0===r(i))break;n=a}return o},Ue=e=>x.from(e.dom.previousSibling).map(Te.fromDom),ze=e=>x.from(e.dom.nextSibling).map(Te.fromDom),He=e=>P(e.dom.childNodes,Te.fromDom),$e=(e,t)=>{var r=e.dom.childNodes;return x.from(r[t]).map(Te.fromDom)},We=(e,t)=>{Ie(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},qe=(e,t)=>{ze(e).fold((()=>{Ie(e).each((e=>{Ke(e,t)}))}),(e=>{We(e,t)}))},Ve=(e,t)=>{var r=(e=>$e(e,0))(e);r.fold((()=>{Ke(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))},Ke=(e,t)=>{e.dom.appendChild(t.dom)},Ge=(e,t)=>{We(e,t),Ke(t,e)},Ye=(e,t)=>{L(t,((r,n)=>{var o=0===n?e:t[n-1];qe(o,r)}))},Xe=(e,t)=>{L(t,(t=>{Ke(e,t)}))},Qe=e=>{e.dom.textContent="",L(He(e),(e=>{Je(e)}))},Je=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Ze=e=>{var t=He(e);t.length>0&&Ye(e,t),Je(e)},et=(e,t)=>Te.fromDom(e.dom.cloneNode(t)),tt=e=>et(e,!1),rt=e=>et(e,!0),nt=(e,t)=>{var r=Te.fromTag(t),n=Ne(e);return Se(r,n),r},ot=["tfoot","thead","tbody","colgroup"],at=(e,t,r)=>({element:e,rowspan:t,colspan:r}),it=(e,t,r)=>({element:e,cells:t,section:r}),lt=(e,t,r)=>({element:e,isNew:t,isLocked:r}),st=(e,t,r,n)=>({element:e,cells:t,section:r,isNew:n}),dt=m(Element.prototype.attachShadow)&&m(Node.prototype.getRootNode),ct=p(dt),ut=dt?e=>Te.fromDom(e.dom.getRootNode()):Me,mt=e=>{var t,r=ut(e);return be(t=r)&&u(t.dom.host)?x.some(r):x.none()},ft=e=>Te.fromDom(e.dom.host),gt=e=>u(e.dom.shadowRoot),pt=e=>{var t=ve(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var r,n,o=t.ownerDocument;return mt(Te.fromDom(t)).fold((()=>o.body.contains(t)),(r=pt,n=ft,e=>r(n(e))))},vt=e=>{var t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return Te.fromDom(t)},ht=(e,t)=>{var r=[];return L(He(e),(e=>{t(e)&&(r=r.concat([e])),r=r.concat(ht(e,t))})),r},bt=(e,t,r)=>((e,t,r)=>I(je(e,r),t))(e,(e=>De(e,t)),r),yt=(e,t)=>((e,t)=>I(He(e),t))(e,(e=>De(e,t))),Ct=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return Re(r)?[]:P(r.querySelectorAll(e),Te.fromDom)})(t,e),wt=(e,t,r,n,o)=>e(r,n)?x.some(r):m(o)&&o(r)?x.none():t(r,n,o),St=(e,t,r)=>{for(var n=e.dom,o=m(r)?r:w;n.parentNode;){n=n.parentNode;var a=Te.fromDom(n);if(t(a))return x.some(a);if(o(a))break}return x.none()},xt=(e,t,r)=>wt(((e,t)=>t(e)),St,e,t,r),kt=(e,t,r)=>St(e,(e=>De(e,t)),r),Et=(e,t)=>((e,t)=>U(e.dom.childNodes,(e=>t(Te.fromDom(e)))).map(Te.fromDom))(e,(e=>De(e,t))),Nt=(e,t)=>Oe(t,e),_t=(e,t,r)=>wt(((e,t)=>De(e,t)),kt,e,t,r),Tt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return e.exists((e=>r(e,t)))},Dt=e=>{for(var t=[],r=e=>{t.push(e)},n=0;n<e.length;n++)e[n].each(r);return t},Rt=(e,t)=>e?x.some(t):x.none(),Ot=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,At=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=e.indexOf(t,r);return-1!==o&&(!!c(n)||o+t.length<=n)},Bt=(e,t)=>Ot(e,t,0),Pt=(e,t)=>Ot(e,t,e.length-t.length),Lt=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),Mt=e=>e.length>0,It=e=>void 0!==e.style&&m(e.style.getPropertyValue),Ft=(e,t,r)=>{if(!a(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);It(e)&&e.style.setProperty(t,r)},jt=(e,t,r)=>{var n=e.dom;Ft(n,t,r)},Ut=(e,t)=>{var r=e.dom;J(t,((e,t)=>{Ft(r,t,e)}))},zt=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||pt(e)?n:Ht(r,t)},Ht=(e,t)=>It(e)?e.style.getPropertyValue(t):"",$t=(e,t)=>{var r=e.dom,n=Ht(r,t);return x.from(n).filter((e=>e.length>0))},Wt=(e,t)=>{((e,t)=>{It(e)&&e.style.removeProperty(t)})(e.dom,t),Tt(ke(e,"style").map(Lt),"")&&Ee(e,"style")},qt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ke(e,t).map((e=>parseInt(e,10))).getOr(r)},Vt=(e,t)=>qt(e,t,1),Kt=e=>ye("col")(e)?qt(e,"span",1)>1:Vt(e,"colspan")>1,Gt=e=>Vt(e,"rowspan")>1,Yt=(e,t)=>parseInt(zt(e,t),10),Xt=p(10),Qt=p(10),Jt=(e,t)=>Zt(e,t,S),Zt=(e,t,r)=>$(He(e),(e=>De(e,t)?r(e)?[e]:[]:Zt(e,t,r))),er=(e,t)=>function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;return r(t)?x.none():O(e,ce(t))?x.some(t):kt(t,e.join(","),(e=>De(e,"table")||r(e)))}(["td","th"],e,t),tr=e=>Jt(e,"th,td"),rr=e=>De(e,"colgroup")?yt(e,"col"):$(ar(e),(e=>yt(e,"col"))),nr=(e,t)=>_t(e,"table",t),or=e=>Jt(e,"tr"),ar=e=>nr(e).fold(p([]),(e=>yt(e,"colgroup"))),ir=(e,t)=>P(e,(e=>{if("colgroup"===ce(e)){var r=P(rr(e),(e=>{var t=qt(e,"span",1);return at(e,1,t)}));return it(e,r,"colgroup")}var n=P(tr(e),(e=>{var t=qt(e,"rowspan",1),r=qt(e,"colspan",1);return at(e,t,r)}));return it(e,n,t(e))})),lr=e=>Ie(e).map((e=>{var t=ce(e);return(e=>O(ot,e))(t)?t:"tbody"})).getOr("tbody"),sr=e=>{var t=or(e),r=[...ar(e),...t];return ir(r,lr)},dr=e=>{var t,r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t=e.apply(null,o)}return t}},cr=()=>ur(0,0),ur=(e,t)=>({major:e,minor:t}),mr={nu:ur,detect:(e,t)=>{var r=String(t).toLowerCase();return 0===e.length?cr():((e,t)=>{var r=((e,t)=>{for(var r=0;r<e.length;r++){var n=e[r];if(n.test(t))return n}})(e,t);if(!r)return{major:0,minor:0};var n=e=>Number(t.replace(r,"$"+e));return ur(n(1),n(2))})(e,r)},unknown:cr},fr=(e,t)=>{var r=String(t).toLowerCase();return U(e,(e=>e.search(r)))},gr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pr=e=>t=>At(t,e),vr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>At(e,"edge/")&&At(e,"chrome")&&At(e,"safari")&&At(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,gr],search:e=>At(e,"chrome")&&!At(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>At(e,"msie")||At(e,"trident")},{name:"Opera",versionRegexes:[gr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pr("firefox")},{name:"Safari",versionRegexes:[gr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(At(e,"safari")||At(e,"mobile/"))&&At(e,"applewebkit")}],hr=[{name:"Windows",search:pr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>At(e,"iphone")||At(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:pr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pr("linux"),versionRegexes:[]},{name:"Solaris",search:pr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],br={browsers:p(vr),oses:p(hr)},yr="Edge",Cr="Chromium",wr="Opera",Sr="Firefox",xr="Safari",kr=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(yr),isChromium:n(Cr),isIE:n("IE"),isOpera:n(wr),isFirefox:n(Sr),isSafari:n(xr)}},Er={unknown:()=>kr({current:void 0,version:mr.unknown()}),nu:kr,edge:p(yr),chromium:p(Cr),ie:p("IE"),opera:p(wr),firefox:p(Sr),safari:p(xr)},Nr="Windows",_r="Android",Tr="Linux",Dr="macOS",Rr="Solaris",Or="FreeBSD",Ar="ChromeOS",Br=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(Nr),isiOS:n("iOS"),isAndroid:n(_r),isMacOS:n(Dr),isLinux:n(Tr),isSolaris:n(Rr),isFreeBSD:n(Or),isChromeOS:n(Ar)}},Pr={unknown:()=>Br({current:void 0,version:mr.unknown()}),nu:Br,windows:p(Nr),ios:p("iOS"),android:p(_r),linux:p(Tr),macos:p(Dr),solaris:p(Rr),freebsd:p(Or),chromeos:p(Ar)},Lr=(e,t,r)=>{var n=br.browsers(),o=br.oses(),a=t.bind((e=>((e,t)=>Y(t.brands,(t=>{var r=t.brand.toLowerCase();return U(e,(e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:mr.nu(parseInt(t.version,10),0)})))})))(n,e))).orThunk((()=>((e,t)=>fr(e,t).map((e=>{var r=mr.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(n,e))).fold(Er.unknown,Er.nu),i=((e,t)=>fr(e,t).map((e=>{var r=mr.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(o,e).fold(Pr.unknown,Pr.nu),l=((e,t,r,n)=>{var o=e.isiOS()&&!0===/ipad/i.test(r),a=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),l=i||n("(pointer:coarse)"),s=o||!a&&i&&n("(min-device-width:768px)"),d=a||i&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),u=!d&&!s&&!c;return{isiPad:p(o),isiPhone:p(a),isTablet:p(s),isPhone:p(d),isTouch:p(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:p(c),isDesktop:p(u)}})(i,a,e,r);return{browser:a,os:i,deviceType:l}},Mr=e=>window.matchMedia(e).matches,Ir=dr((()=>Lr(navigator.userAgent,x.from(navigator.userAgentData),Mr))),Fr=()=>Ir(),jr=(e,t)=>{var r=r=>{var n=t(r);if(n<=0||null===n){var o=zt(r,e);return parseFloat(o)||0}return n},n=(e,t)=>j(t,((t,r)=>{var n=zt(e,r),o=void 0===n?0:parseInt(n,10);return isNaN(o)?t:t+o}),0);return{set:(t,r)=>{if(!f(r)&&!r.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+r);var n=t.dom;It(n)&&(n.style[e]=r+"px")},get:r,getOuter:r,aggregate:n,max:(e,t,r)=>{var o=n(e,r);return t>o?t-o:0}}},Ur=(e,t)=>(e=>{var t=parseFloat(e);return isNaN(t)?x.none():x.some(t)})(e).getOr(t),zr=(e,t,r)=>Ur(zt(e,t),r),Hr=(e,t)=>{var r=e.dom,n=r.getBoundingClientRect().width||r.offsetWidth;return"border-box"===t?n:((e,t,r,n)=>t-zr(e,`padding-${r}`,0)-zr(e,`padding-${n}`,0)-zr(e,`border-${r}-width`,0)-zr(e,`border-${n}-width`,0))(e,n,"left","right")},$r=jr("width",(e=>e.dom.offsetWidth)),Wr=e=>$r.get(e),qr=e=>$r.getOuter(e),Vr=e=>Hr(e,"content-box"),Kr=e=>zr(e,"width",e.dom.offsetWidth),Gr=(e,t,r)=>{var n=e.cells,o=n.slice(0,t),a=n.slice(t),i=o.concat(r).concat(a);return Qr(e,i)},Yr=(e,t,r)=>Gr(e,t,[r]),Xr=(e,t,r)=>{e.cells[t]=r},Qr=(e,t)=>st(e.element,t,e.section,e.isNew),Jr=(e,t)=>e.cells[t],Zr=(e,t)=>Jr(e,t).element,en=e=>e.cells.length,tn=e=>{var t=M(e,(e=>"colgroup"===e.section));return{rows:t.fail,cols:t.pass}},rn=(e,t,r)=>{var n=P(e.cells,r);return st(t(e.element),n,e.section,!0)},nn="data-snooker-locked-cols",on=e=>ke(e,nn).bind((e=>x.from(e.match(/\d+/g)))).map((e=>q(e,S))),an=e=>{var t=j(tn(e).rows,((e,t)=>(L(t.cells,((t,r)=>{t.isLocked&&(e[r]=!0)})),e)),{}),r=re(t,((e,t)=>parseInt(t,10)));return((e,t)=>{var r=T.call(e,0);return r.sort(t),r})(r)},ln=(e,t)=>e+","+t,sn=(e,t)=>{var r=$(e.all,(e=>e.cells));return I(r,t)},dn=e=>{var t={},r=[],n=K(e).map((e=>e.element)).bind(nr).bind(on).getOr({}),o=0,a=0,i=0,l=M(e,(e=>"colgroup"===e.section)),s=l.pass,d=l.fail;L(d,(e=>{var l=[];L(e.cells,(e=>{for(var r=0;void 0!==t[ln(i,r)];)r++;for(var o=((e,t)=>oe(e,t)&&void 0!==e[t]&&null!==e[t])(n,r.toString()),s=((e,t,r,n,o,a)=>({element:e,rowspan:t,colspan:r,row:n,column:o,isLocked:a}))(e.element,e.rowspan,e.colspan,i,r,o),d=0;d<e.colspan;d++)for(var c=0;c<e.rowspan;c++){var u=r+d,m=ln(i+c,u);t[m]=s,a=Math.max(a,u+1)}l.push(s)})),o++,r.push(it(e.element,l,e.section)),i++}));var c=G(s).map((e=>{var t=(e=>{var t={},r=0;return L(e.cells,(e=>{var n=e.colspan;B(n,(o=>{var a=r+o;t[a]=((e,t,r)=>({element:e,colspan:t,column:r}))(e.element,n,a)})),r+=n})),t})(e),r=((e,t)=>({element:e,columns:t}))(e.element,ne(t));return{colgroups:[r],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),u=c.columns,m=c.colgroups,f=((e,t)=>({rows:e,columns:t}))(o,a);return{grid:f,access:t,all:r,columns:u,colgroups:m}},cn={fromTable:e=>{var t=sr(e);return dn(t)},generate:dn,getAt:(e,t,r)=>x.from(e.access[ln(t,r)]),findItem:(e,t,r)=>{var n=sn(e,(e=>r(t,e.element)));return n.length>0?x.some(n[0]):x.none()},filterItems:sn,justCells:e=>$(e.all,(e=>e.cells)),justColumns:e=>ne(e.columns),hasColumns:e=>X(e.columns).length>0,getColumnAt:(e,t)=>x.from(e.columns[t])},un=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,r=e.grid,n=B(r.columns,v),o=B(r.rows,v);return P(n,(r=>mn((()=>$(o,(t=>cn.getAt(e,t,r).filter((e=>e.column===r)).toArray()))),(e=>1===e.colspan&&t(e.element)),(()=>cn.getAt(e,0,r)))))},mn=(e,t,r)=>{var n=e();return U(n,t).orThunk((()=>x.from(n[0]).orThunk(r))).map((e=>e.element))},fn=e=>{var t=e.grid,r=B(t.rows,v),n=B(t.columns,v);return P(r,(t=>mn((()=>$(n,(r=>cn.getAt(e,t,r).filter((e=>e.row===t)).fold(p([]),(e=>[e]))))),(e=>1===e.rowspan),(()=>cn.getAt(e,t,0)))))},gn=(e,t)=>{if(t<0||t>=e.length-1)return x.none();var r=e[t].fold((()=>{var r=(e=>{var t=T.call(e,0);return t.reverse(),t})(e.slice(0,t));return Y(r,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>x.some({value:e,delta:0}))),n=e[t+1].fold((()=>{var r=e.slice(t+1);return Y(r,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>x.some({value:e,delta:1})));return r.bind((e=>n.map((t=>{var r=t.delta+e.delta;return Math.abs(t.value-e.value)/r}))))},pn=(e,t)=>r=>"rtl"===vn(r)?t:e,vn=e=>"rtl"===zt(e,"direction")?"rtl":"ltr",hn=jr("height",(e=>{var t=e.dom;return pt(e)?t.getBoundingClientRect().height:t.offsetHeight})),bn=e=>hn.get(e),yn=e=>hn.getOuter(e),Cn=e=>zr(e,"height",e.dom.offsetHeight),wn=(e,t)=>({left:e,top:t,translate:(r,n)=>wn(e+r,t+n)}),Sn=wn,xn=(e,t)=>void 0!==e?e:void 0!==t?t:0,kn=e=>{var t=e.dom.ownerDocument,r=t.body,n=t.defaultView,o=t.documentElement;if(r===e.dom)return Sn(r.offsetLeft,r.offsetTop);var a=xn(null==n?void 0:n.pageYOffset,o.scrollTop),i=xn(null==n?void 0:n.pageXOffset,o.scrollLeft),l=xn(o.clientTop,r.clientTop),s=xn(o.clientLeft,r.clientLeft);return En(e).translate(i-s,a-l)},En=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?Sn(r.offsetLeft,r.offsetTop):pt(e)?(e=>{var t=e.getBoundingClientRect();return Sn(t.left,t.top)})(t):Sn(0,0)},Nn=(e,t)=>({row:e,y:t}),_n=(e,t)=>({col:e,x:t}),Tn=e=>kn(e).left+qr(e),Dn=e=>kn(e).left,Rn=(e,t)=>_n(e,Dn(t)),On=(e,t)=>_n(e,Tn(t)),An=e=>kn(e).top,Bn=(e,t)=>Nn(e,An(t)),Pn=(e,t)=>Nn(e,An(t)+yn(t)),Ln=(e,t,r)=>{if(0===r.length)return[];var n=P(r.slice(1),((t,r)=>t.map((t=>e(r,t))))),o=r[r.length-1].map((e=>t(r.length-1,e)));return n.concat([o])},Mn={delta:v,positions:e=>Ln(Bn,Pn,e),edge:An},In={delta:v,edge:Dn,positions:e=>Ln(Rn,On,e)},Fn={delta:e=>-e,edge:Tn,positions:e=>Ln(On,Rn,e)},jn=pn(In,Fn),Un={delta:(e,t)=>jn(t).delta(e,t),positions:(e,t)=>jn(t).positions(e,t),edge:e=>jn(e).edge(e)},zn={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Hn=(k="[0-9]+",E="[eE][+-]?"+k,N=e=>`(?:${e})?`,_=["Infinity",k+"\\."+N(k)+N(E),"\\."+k+N(E),k+N(E)].join("|"),new RegExp(`^([+-]?(?:${_}))(.*)$`)),$n=(e,t)=>x.from(Hn.exec(e)).bind((e=>{var r=Number(e[1]),n=e[2];return((e,t)=>A(t,(t=>A(zn[t],(t=>e===t)))))(n,t)?x.some({value:r,unit:n}):x.none()})),Wn=/(\d+(\.\d+)?)%/,qn=/(\d+(\.\d+)?)px|em/,Vn=ye("col"),Kn=(e,t,r)=>{var n=Fe(e).getOrThunk((()=>vt(Le(e))));return t(e)/r(n)*100},Gn=(e,t)=>{jt(e,"width",t+"px")},Yn=(e,t)=>{jt(e,"width",t+"%")},Xn=(e,t)=>{jt(e,"height",t+"px")},Qn=(e,t,r,n)=>{var o=parseFloat(e);return Pt(e,"%")&&"table"!==ce(t)?((e,t,r,n)=>{var o=nr(e).map((e=>{var n=r(e);return Math.floor(t/100*n)})).getOr(t);return n(e,o),o})(t,o,r,n):o},Jn=e=>{var t=(e=>Cn(e)+"px")(e);return t?Qn(t,e,bn,Xn):bn(e)},Zn=(e,t)=>$t(e,t).orThunk((()=>ke(e,t).map((e=>e+"px")))),eo=e=>Zn(e,"width"),to=e=>Kn(e,Wr,Vr),ro=e=>Vn(e)?Wr(e):Kr(e),no=e=>((e,t,r)=>r(e)/Vt(e,t))(e,"rowspan",Jn),oo=(e,t,r)=>{jt(e,"width",t+r)},ao=e=>Kn(e,Wr,Vr)+"%",io=p(Wn),lo=ye("col"),so=e=>eo(e).getOrThunk((()=>ro(e)+"px")),co=e=>{return(t=e,Zn(t,"height")).getOrThunk((()=>no(e)+"px"));var t},uo=(e,t,r,n,o,a)=>e.filter(n).fold((()=>a(gn(r,t))),(e=>o(e))),mo=(e,t,r,n)=>{var o=un(e),a=cn.hasColumns(e)?(e=>P(cn.justColumns(e),(e=>x.from(e.element))))(e):o,i=[x.some(Un.edge(t))].concat(P(Un.positions(o,t),(e=>e.map((e=>e.x))))),l=y(Kt);return P(a,((e,t)=>uo(e,t,i,l,(e=>{if((e=>{var t=Fr().browser,r=t.isChromium()||t.isFirefox();return!lo(e)||r})(e))return r(e);var a,s,d=(a=o[t],s=v,null!=a?s(a):x.none());return uo(d,t,i,l,(e=>n(x.some(Wr(e)))),n)}),n)))},fo=e=>e.map((e=>e+"px")).getOr(""),go=(e,t,r)=>mo(e,t,ro,(e=>e.getOrThunk(r.minCellWidth))),po=(e,t,r,n,o)=>{var a=fn(e),i=[x.some(r.edge(t))].concat(P(r.positions(a,t),(e=>e.map((e=>e.y)))));return P(a,((e,t)=>uo(e,t,i,y(Gt),n,o)))},vo=(e,t)=>()=>pt(e)?t(e):parseFloat($t(e,"width").getOr("0")),ho=e=>{var t=vo(e,Wr),r=p(0);return{width:t,pixelWidth:t,getWidths:(t,r)=>go(t,e,r),getCellDelta:r,singleColumnWidth:p([0]),minCellWidth:r,setElementWidth:g,adjustTableWidth:g,isRelative:!0,label:"none"}},bo=e=>{var t=vo(e,(e=>parseFloat(ao(e)))),r=vo(e,Wr);return{width:t,pixelWidth:r,getWidths:(t,r)=>((e,t,r)=>mo(e,t,to,(e=>e.fold((()=>r.minCellWidth()),(e=>e/r.pixelWidth()*100)))))(t,e,r),getCellDelta:e=>e/r()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>Xt()/r()*100,setElementWidth:Yn,adjustTableWidth:r=>{var n=t();Yn(e,n+r/100*n)},isRelative:!0,label:"percent"}},yo=e=>{var t=vo(e,Wr);return{width:t,pixelWidth:t,getWidths:(t,r)=>go(t,e,r),getCellDelta:v,singleColumnWidth:(e,t)=>[Math.max(Xt(),e+t)-e],minCellWidth:Xt,setElementWidth:Gn,adjustTableWidth:r=>{var n=t()+r;Gn(e,n)},isRelative:!1,label:"pixel"}},Co=e=>eo(e).fold((()=>ho(e)),(t=>((e,t)=>null!==io().exec(t)?bo(e):yo(e))(e,t))),wo=yo,So=bo,xo=(e,t,r)=>{var n=e[r].element,o=Te.fromTag("td");Ke(o,Te.fromTag("br")),(t?Ke:Ve)(n,o)},ko=(e,t)=>{var r=e=>De(e.element,t),n=rt(e),o=sr(n),a=Co(e),i=cn.generate(o),l=((e,t)=>{var r=e.grid.columns,n=e.grid.rows,o=r,a=0,i=0,l=[],s=[];return J(e.access,(e=>{if(l.push(e),t(e)){s.push(e);var r=e.row,d=r+e.rowspan-1,c=e.column,u=c+e.colspan-1;r<n?n=r:d>a&&(a=d),c<o?o=c:u>i&&(i=u)}})),((e,t,r,n,o,a)=>({minRow:e,minCol:t,maxRow:r,maxCol:n,allCells:o,selectedCells:a}))(n,o,a,i,l,s)})(i,r),s="th:not("+t+"),td:not("+t+")",d=Zt(n,"th,td",(e=>De(e,s)));L(d,Je),((e,t,r,n)=>{for(var o=I(e,(e=>"colgroup"!==e.section)),a=t.grid.columns,i=t.grid.rows,l=0;l<i;l++)for(var s=!1,d=0;d<a;d++)l<r.minRow||l>r.maxRow||d<r.minCol||d>r.maxCol||(cn.getAt(t,l,d).filter(n).isNone()?xo(o,s,l):s=!0)})(o,i,l,r);var c=((e,t,r,n)=>{if(0===n.minCol&&t.grid.columns===n.maxCol+1)return 0;var o=go(t,e,r),a=j(o,((e,t)=>e+t),0),i=j(o.slice(n.minCol,n.maxCol+1),((e,t)=>e+t),0),l=i/a*r.pixelWidth()-r.pixelWidth();return r.getCellDelta(l)})(e,cn.fromTable(e),a,l);return((e,t,r,n)=>{J(r.columns,(e=>{(e.column<t.minCol||e.column>t.maxCol)&&Je(e.element)}));var o=I(Jt(e,"tr"),(e=>0===e.dom.childElementCount));L(o,Je),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||L(Jt(e,"th,td"),(e=>{Ee(e,"rowspan"),Ee(e,"colspan")})),Ee(e,nn),Ee(e,"data-snooker-col-series"),Co(e).adjustTableWidth(n)})(n,l,i,c),n},Eo=((e,t)=>{var r=t=>e(t)?x.from(t.dom.nodeValue):x.none();return{get:n=>{if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return r(n).getOr("")},getOption:r,set:(r,n)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=n}}})(ve,"text"),No=e=>Eo.get(e),_o=e=>Eo.getOption(e),To=(e,t)=>Eo.set(e,t),Do=e=>"img"===ce(e)?1:_o(e).fold((()=>He(e).length),(e=>e.length)),Ro=["img","br"],Oo=e=>_o(e).filter((e=>0!==e.trim().length||e.indexOf("Â ")>-1)).isSome()||O(Ro,ce(e))||(e=>ge(e)&&"false"===xe(e,"contenteditable"))(e),Ao=e=>{return t=Oo,(r=e=>{for(var n=0;n<e.childNodes.length;n++){var o=Te.fromDom(e.childNodes[n]);if(t(o))return x.some(o);var a=r(e.childNodes[n]);if(a.isSome())return a}return x.none()})(e.dom);var t,r},Bo=e=>Po(e,Oo),Po=(e,t)=>{var r=e=>{for(var n=He(e),o=n.length-1;o>=0;o--){var a=n[o];if(t(a))return x.some(a);var i=r(a);if(i.isSome())return i}return x.none()};return r(e)},Lo={scope:["row","col"]},Mo=e=>()=>{var t=Te.fromTag("td",e.dom);return Ke(t,Te.fromTag("br",e.dom)),t},Io=e=>()=>Te.fromTag("col",e.dom),Fo=e=>()=>Te.fromTag("colgroup",e.dom),jo=e=>()=>Te.fromTag("tr",e.dom),Uo=(e,t,r)=>{var n=((e,t)=>{var r=nt(e,t),n=He(rt(e));return Xe(r,n),r})(e,t);return J(r,((e,t)=>{null===e?Ee(n,t):we(n,t,e)})),n},zo=e=>e,Ho=(e,t,r)=>{var n=(e,t)=>{var r,n,o,a;r=e.element,n=t,o=r.dom,a=n.dom,It(o)&&It(a)&&(a.style.cssText=o.style.cssText),Wt(t,"height"),1!==e.colspan&&Wt(t,"width")};return{col:r=>{var o=Te.fromTag(ce(r.element),t.dom);return n(r,o),e(r.element,o),o},colgroup:Fo(t),row:jo(t),cell:o=>{var a=Te.fromTag(ce(o.element),t.dom),i=r.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),l=i.length>0?((e,t,r)=>Ao(e).map((n=>{var o=r.join(","),a=bt(n,o,(t=>Ae(t,e)));return F(a,((e,t)=>{var r=tt(t);return Ke(e,r),r}),t)})).getOr(t))(o.element,a,i):a;return Ke(l,Te.fromTag("br")),n(o,a),((e,t)=>{J(Lo,((r,n)=>ke(e,n).filter((e=>O(r,e))).each((e=>we(t,n,e)))))})(o.element,a),e(o.element,a),a},replace:Uo,colGap:Io(t),gap:Mo(t)}},$o=e=>({col:Io(e),colgroup:Fo(e),row:jo(e),cell:Mo(e),replace:zo,colGap:Io(e),gap:Mo(e)}),Wo=e=>t=>t.options.get(e),qo="100%",Vo=e=>{var t,r=e.dom,n=null!==(t=r.getParent(e.selection.getStart(),r.isBlock))&&void 0!==t?t:e.getBody();return Vr(Te.fromDom(n))+"px"},Ko=e=>x.from(e.options.get("table_clone_elements")),Go=Wo("table_header_type"),Yo=Wo("table_column_resizing"),Xo=e=>"preservetable"===Yo(e),Qo=e=>"resizetable"===Yo(e),Jo=Wo("table_sizing_mode"),Zo=e=>"relative"===Jo(e),ea=e=>"fixed"===Jo(e),ta=e=>"responsive"===Jo(e),ra=Wo("table_resize_bars"),na=Wo("table_style_by_css"),oa=Wo("table_merge_content_on_paste"),aa=e=>{var t=e.options,r=t.get("table_default_attributes");return t.isSet("table_default_attributes")?r:((e,t)=>ta(e)||na(e)?t:ea(e)?n(n({},t),{},{width:Vo(e)}):n(n({},t),{},{width:qo}))(e,r)},ia=e=>{var t=e.options,r=t.get("table_default_styles");return t.isSet("table_default_styles")?r:((e,t)=>ta(e)||!na(e)?t:ea(e)?n(n({},t),{},{width:Vo(e)}):n(n({},t),{},{width:qo}))(e,r)},la=Wo("table_use_colgroups"),sa=e=>_t(e,"[contenteditable]"),da=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return pt(e)?e.dom.isContentEditable:sa(e).fold(p(t),(e=>"true"===ca(e)))},ca=e=>e.dom.contentEditable,ua=e=>Te.fromDom(e.getBody()),ma=e=>t=>Ae(t,ua(e)),fa=e=>{Ee(e,"data-mce-style");var t=e=>Ee(e,"data-mce-style");L(tr(e),t),L(rr(e),t),L(or(e),t)},ga=e=>Te.fromDom(e.selection.getStart()),pa=e=>e.getBoundingClientRect().width,va=e=>e.getBoundingClientRect().height,ha=e=>xt(e,ye("table")).exists(da),ba=(e,t)=>{var r=t.column,n=t.column+t.colspan-1,o=t.row,a=t.row+t.rowspan-1;return r<=e.finishCol&&n>=e.startCol&&o<=e.finishRow&&a>=e.startRow},ya=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Ca=(e,t,r)=>{var n=cn.findItem(e,t,Ae),o=cn.findItem(e,r,Ae);return n.bind((e=>o.map((t=>{return r=e,n=t,o=Math.min(r.row,n.row),a=Math.min(r.column,n.column),i=Math.max(r.row+r.rowspan-1,n.row+n.rowspan-1),l=Math.max(r.column+r.colspan-1,n.column+n.colspan-1),{startRow:o,startCol:a,finishRow:i,finishCol:l};var r,n,o,a,i,l}))))},wa=(e,t,r)=>Ca(e,t,r).bind((t=>((e,t)=>{for(var r=!0,n=b(ya,t),o=t.startRow;o<=t.finishRow;o++)for(var a=t.startCol;a<=t.finishCol;a++)r=r&&cn.getAt(e,o,a).exists(n);return r?x.some(t):x.none()})(e,t))),Sa=(e,t,r)=>Ca(e,t,r).map((t=>{var r=cn.filterItems(e,b(ba,t));return P(r,(e=>e.element))})),xa=(e,t)=>cn.findItem(e,t,((e,t)=>Be(t,e))).map((e=>e.element)),ka=(e,t,r)=>nr(e).bind((n=>((e,t,r,n)=>cn.findItem(e,t,Ae).bind((t=>{var o=r>0?t.row+t.rowspan-1:t.row,a=n>0?t.column+t.colspan-1:t.column;return cn.getAt(e,o+r,a+n).map((e=>e.element))})))(_a(n),e,t,r))),Ea=(e,t,r)=>{var n=_a(e);return Sa(n,t,r)},Na=(e,t,r,n,o)=>{var a=_a(e),i=Ae(e,r)?x.some(t):xa(a,t),l=Ae(e,o)?x.some(n):xa(a,n);return i.bind((e=>l.bind((t=>Sa(a,e,t)))))},_a=cn.fromTable,Ta=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Da=()=>({up:p({selector:kt,closest:_t,predicate:St,all:je}),down:p({selector:Ct,predicate:ht}),styles:p({get:zt,getRaw:$t,set:jt,remove:Wt}),attrs:p({get:xe,set:we,remove:Ee,copyTo:(e,t)=>{var r=Ne(e);Se(t,r)}}),insert:p({before:We,after:qe,afterAll:Ye,append:Ke,appendAll:Xe,prepend:Ve,wrap:Ge}),remove:p({unwrap:Ze,remove:Je}),create:p({nu:Te.fromTag,clone:e=>Te.fromDom(e.dom.cloneNode(!1)),text:Te.fromText}),query:p({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:Ue,nextSibling:ze}),property:p({children:He,name:ce,parent:Ie,document:e=>Me(e).dom,isText:ve,isComment:fe,isElement:pe,isSpecial:e=>{var t=ce(e);return O(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>pe(e)?ke(e,"lang"):x.none(),getText:No,setText:To,isBoundary:e=>!!pe(e)&&("body"===ce(e)||O(Ta,ce(e))),isEmptyTag:e=>!!pe(e)&&O(["br","img","hr","input"],ce(e)),isNonEditable:e=>pe(e)&&"false"===xe(e,"contenteditable")}),eq:Ae,is:Pe}),Ra=(e,t,r,n)=>{var o=t(e,r);return F(n,((r,n)=>{var o=t(e,n);return Oa(e,r,o)}),o)},Oa=(e,t,r)=>t.bind((t=>r.filter(b(e.eq,t)))),Aa=(e,t,r)=>r.length>0?((e,t,r,n)=>n(e,t,r[0],r.slice(1)))(e,t,r,Ra):x.none(),Ba=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w,o=[t].concat(e.up().all(t)),a=[r].concat(e.up().all(r)),i=e=>z(e,n).fold((()=>e),(t=>e.slice(0,t+1))),l=i(o),s=i(a),d=U(l,(t=>A(s,((e,t)=>b(e.eq,t))(e,t))));return{firstpath:l,secondpath:s,shared:d}},Pa=Da(),La=(e,t)=>Aa(Pa,((t,r)=>e(r)),t),Ma=e=>kt(e,"table"),Ia=(e,t,r)=>{var n=e=>t=>void 0!==r&&r(t)||Ae(t,e);return Ae(e,t)?x.some({boxes:x.some([e]),start:e,finish:t}):Ma(e).bind((o=>Ma(t).bind((a=>{if(Ae(o,a))return x.some({boxes:Ea(o,e,t),start:e,finish:t});if(Be(o,a)){var i=bt(t,"td,th",n(o)),l=i.length>0?i[i.length-1]:t;return x.some({boxes:Na(o,e,o,t,a),start:e,finish:l})}if(Be(a,o)){var s=bt(e,"td,th",n(a)),d=s.length>0?s[s.length-1]:e;return x.some({boxes:Na(a,e,o,t,a),start:e,finish:d})}return((e,t,r)=>Ba(Pa,e,t,r))(e,t).shared.bind((i=>_t(i,"table",r).bind((r=>{var i=bt(t,"td,th",n(r)),l=i.length>0?i[i.length-1]:t,s=bt(e,"td,th",n(r)),d=s.length>0?s[s.length-1]:e;return x.some({boxes:Na(r,e,o,t,a),start:d,finish:l})}))))}))))},Fa=(e,t)=>{var r=Ct(e,t);return r.length>0?x.some(r):x.none()},ja=(e,t,r)=>Nt(e,t).bind((t=>Nt(e,r).bind((e=>La(Ma,[t,e]).map((r=>({first:t,last:e,table:r}))))))),Ua=(e,t,r,n,o)=>((e,t)=>U(e,(e=>De(e,t))))(e,o).bind((e=>ka(e,t,r).bind((e=>((e,t)=>kt(e,"table").bind((r=>Nt(r,t).bind((t=>Ia(t,e).bind((e=>e.boxes.map((t=>({boxes:t,start:e.start,finish:e.finish}))))))))))(e,n))))),za=(e,t)=>Fa(e,t),Ha=(e,t,r)=>ja(e,t,r).bind((t=>{var r=t=>Ae(e,t),n="thead,tfoot,tbody,table",o=kt(t.first,n,r),a=kt(t.last,n,r);return o.bind((e=>a.bind((r=>Ae(e,r)?((e,t,r)=>{var n=_a(e);return wa(n,t,r)})(t.table,t.first,t.last):x.none()))))})),$a=v,Wa=e=>{var t=(e,t)=>ke(e,t).exists((e=>parseInt(e,10)>1));return e.length>0&&W(e,(e=>t(e,"rowspan")||t(e,"colspan")))?x.some(e):x.none()},qa=(e,t,r)=>t.length<=1?x.none():Ha(e,r.firstSelectedSelector,r.lastSelectedSelector).map((e=>({bounds:e,cells:t}))),Va="data-mce-selected",Ka="td["+Va+"],th["+Va+"]",Ga="["+Va+"]",Ya="data-mce-first-selected",Xa="td["+Ya+"],th["+Ya+"]",Qa="data-mce-last-selected",Ja="td["+Qa+"],th["+Qa+"]",Za=Ga,ei={selected:Va,selectedSelector:Ka,firstSelected:Ya,firstSelectedSelector:Xa,lastSelected:Qa,lastSelectedSelector:Ja},ti=(e,t,r)=>({element:r,mergable:qa(t,e,ei),unmergable:Wa(e),selection:$a(e)}),ri=e=>(t,r)=>{var n,o=ce(t),a="col"===o||"colgroup"===o?nr(n=t).bind((e=>za(e,ei.firstSelectedSelector))).fold(p(n),(e=>e[0])):t;return _t(a,e,r)},ni=ri("th,td,caption"),oi=ri("th,td"),ai=e=>{return t=e.model.table.getSelectedCells(),P(t,Te.fromDom);var t},ii=(e,t)=>{e.on("BeforeGetContent",(t=>{if(!0===t.selection){var r=(e=>I(ai(e),(e=>De(e,ei.selectedSelector))))(e);r.length>=1&&(r=>{t.preventDefault(),(e=>nr(e[0]).map((e=>{var t=ko(e,Za);return fa(t),[t]})))(r).each((r=>{t.content="text"===t.format?(e=>P(e,(e=>e.dom.innerText)).join(""))(r):((e,t)=>P(t,(t=>e.selection.serializer.serialize(t.dom,{}))).join(""))(e,r)}))})(r)}})),e.on("BeforeSetContent",(r=>{if(!0===r.selection&&!0===r.paste){var n=ai(e);K(n).each((n=>{nr(n).each((o=>{var a,i,l,s=I((a=r.content,(l=(i||document).createElement("div")).innerHTML=a,He(Te.fromDom(l))),(e=>"meta"!==ce(e))),d=ye("table");if(oa(e)&&1===s.length&&d(s[0])){r.preventDefault();var c=Te.fromDom(e.getDoc()),u=$o(c),m=((e,t,r)=>({element:e,clipboard:t,generators:r}))(n,s[0],u);t.pasteCells(o,m).each((()=>{e.focus()}))}}))}))}}))},li=(e,t)=>({element:e,offset:t}),si=(e,t,r)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?r(t).bind((t=>si(e,t,r).orThunk((()=>x.some(t))))):x.none(),di=(e,t)=>e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length,ci=(e,t)=>{var r=si(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(r))return li(r,di(e,r));var n=e.property().children(r);return n.length>0?ci(e,n[n.length-1]):li(r,di(e,r))},ui=ci,mi=Da(),fi=(e,t)=>{if(!Kt(e)){var r=(e=>eo(e).bind((e=>$n(e,["fixed","relative","empty"]))))(e);r.each((r=>{var n=r.value/2;oo(e,n,r.unit),oo(t,n,r.unit)}))}},gi=e=>P(e,p(0)),pi=(e,t,r,n,o)=>o(e.slice(0,t)).concat(n).concat(o(e.slice(r))),vi=e=>(t,r,n,o)=>{if(e(n)){var a=Math.max(o,t[r]-Math.abs(n)),i=Math.abs(a-t[r]);return n>=0?i:-i}return n},hi=vi((e=>e<0)),bi=vi(S),yi=()=>{var e=(e,t,r,n)=>{var o=(100+r)/100,a=Math.max(n,(e[t]+r)/o);return P(e,((e,r)=>(r===t?a:e/o)-e))},t=(t,r,n,o,a,i)=>i?e(t,r,o,a):((e,t,r,n,o)=>{var a=hi(e,t,n,o);return pi(e,t,r+1,[a,0],gi)})(t,r,n,o,a);return{resizeTable:(e,t)=>e(t),clampTableDelta:hi,calcLeftEdgeDeltas:t,calcMiddleDeltas:(e,r,n,o,a,i,l)=>t(e,n,o,a,i,l),calcRightEdgeDeltas:(t,r,n,o,a,i)=>{if(i)return e(t,n,o,a);var l=hi(t,n,o,a);return gi(t.slice(0,n)).concat([l])},calcRedestributedWidths:(e,t,r,n)=>{if(n){var o=(t+r)/t,a=P(e,(e=>e/o));return{delta:100*o-100,newSizes:a}}return{delta:r,newSizes:e}}}},Ci=()=>{var e=(e,t,r,n,o)=>{var a=bi(e,n>=0?r:t,n,o);return pi(e,t,r+1,[a,-a],gi)};return{resizeTable:(e,t,r)=>{r&&e(t)},clampTableDelta:(e,t,r,n,o)=>{if(o){if(r>=0)return r;var a=j(e,((e,t)=>e+t-n),0);return Math.max(-a,r)}return hi(e,t,r,n)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,r,n,o,a,i)=>e(t,n,o,a,i),calcRightEdgeDeltas:(e,t,r,n,o,a)=>{if(a)return gi(e);var i=n/e.length;return P(e,p(i))},calcRedestributedWidths:(e,t,r,n)=>({delta:0,newSizes:e})}},wi=e=>cn.fromTable(e).grid,Si=ye("th"),xi=e=>W(e,(e=>Si(e.element))),ki=(e,t)=>e&&t?"sectionCells":e?"section":"cells",Ei=e=>{var t="thead"===e.section,r=Tt(Ni(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||r?{type:"header",subType:ki(t,r)}:{type:"body"}},Ni=e=>{var t=I(e,(e=>Si(e.element)));return 0===t.length?x.some("td"):t.length===e.length?x.some("th"):x.none()},_i=(e,t,r)=>lt(r(e.element,t),!0,e.isLocked),Ti=(e,t)=>e.section!==t?st(e.element,e.cells,t,e.isNew):e,Di=()=>({transformRow:Ti,transformCell:(e,t,r)=>{var n=r(e.element,t),o="td"!==ce(n)?((e,t)=>{var r=nt(e,t);qe(e,r);var n=He(e);return Xe(r,n),Je(e),r})(n,"td"):n;return lt(o,e.isNew,e.isLocked)}}),Ri=()=>({transformRow:Ti,transformCell:_i}),Oi=()=>({transformRow:(e,t)=>Ti(e,"thead"===t?"tbody":t),transformCell:_i}),Ai=(e,t)=>{var r=(e=>Y(e.all,(e=>{var t=Ei(e);return"header"===t.type?x.from(t.subType):x.none()})))(cn.fromTable(e)).getOr(t);switch(r){case"section":return Di();case"sectionCells":return Ri();case"cells":return Oi()}},Bi=Di,Pi=Ri,Li=Oi,Mi=()=>({transformRow:v,transformCell:_i}),Ii=(e,t,r,n)=>{r===n?Ee(e,t):we(e,t,r)},Fi=(e,t,r)=>{G(yt(e,t)).fold((()=>Ve(e,r)),(e=>qe(e,r)))},ji=(e,t)=>{var r=[],n=[],o=e=>P(e,(e=>{e.isNew&&r.push(e.element);var t=e.element;return Qe(t),L(e.cells,(e=>{e.isNew&&n.push(e.element),Ii(e.element,"colspan",e.colspan,1),Ii(e.element,"rowspan",e.rowspan,1),Ke(t,e.element)})),t})),a=e=>$(e,(e=>P(e.cells,(e=>(Ii(e.element,"span",e.colspan,1),e.element))))),i=(t,r)=>{var n=((e,t)=>{var r=Et(e,t).getOrThunk((()=>{var r=Te.fromTag(t,Le(e).dom);return"thead"===t?Fi(e,"caption,colgroup",r):"colgroup"===t?Fi(e,"caption",r):Ke(e,r),r}));return Qe(r),r})(e,r),i=("colgroup"===r?a:o)(t);Xe(n,i)},l=(t,r)=>{t.length>0?i(t,r):(t=>{Et(e,t).each(Je)})(r)},s=[],d=[],c=[],u=[];return L(t,(e=>{switch(e.section){case"thead":s.push(e);break;case"tbody":d.push(e);break;case"tfoot":c.push(e);break;case"colgroup":u.push(e)}})),l(u,"colgroup"),l(s,"thead"),l(d,"tbody"),l(c,"tfoot"),{newRows:r,newCells:n}},Ui=(e,t)=>{if(0===e.length)return 0;var r=e[0];return z(e,(e=>!t(r.element,e.element))).getOr(e.length)},zi=(e,t,r,n)=>{var o=((e,t)=>e[t])(e,t),a="colgroup"===o.section,i=Ui(o.cells.slice(r),n),l=a?1:Ui(((e,t)=>P(e,(e=>Jr(e,t))))(e.slice(t),r),n);return{colspan:i,rowspan:l}},Hi=(e,t)=>{var r=P(e,(e=>P(e.cells,w)));return P(e,((n,o)=>{var a=$(n.cells,((n,a)=>{if(!1===r[o][a]){var i=zi(e,o,a,t);return((e,t,n,o)=>{for(var a=e;a<e+n;a++)for(var i=t;i<t+o;i++)r[a][i]=!0})(o,a,i.rowspan,i.colspan),[(l=n.element,s=i.rowspan,d=i.colspan,c=n.isNew,{element:l,rowspan:s,colspan:d,isNew:c})]}return[];var l,s,d,c}));return((e,t,r,n)=>({element:e,cells:t,section:r,isNew:n}))(n.element,a,n.section,n.isNew)}))},$i=(e,t,r)=>{var n=[];L(e.colgroups,(o=>{for(var a=[],i=0;i<e.grid.columns;i++){var l=cn.getColumnAt(e,i).map((e=>lt(e.element,r,!1))).getOrThunk((()=>lt(t.colGap(),!0,!1)));a.push(l)}n.push(st(o.element,a,"colgroup",r))}));for(var o=0;o<e.grid.rows;o++){for(var a=[],i=0;i<e.grid.columns;i++){var l=cn.getAt(e,o,i).map((e=>lt(e.element,r,e.isLocked))).getOrThunk((()=>lt(t.gap(),!0,!1)));a.push(l)}var s=e.all[o],d=st(s.element,a,s.section,r);n.push(d)}return n},Wi=e=>Hi(e,Ae),qi=(e,t)=>Y(e.all,(e=>U(e.cells,(e=>Ae(t,e.element))))),Vi=(e,t,r)=>{var n=P(t.selection,(t=>er(t).bind((t=>qi(e,t))).filter(r))),o=Dt(n);return Rt(o.length>0,o)},Ki=(e,t,r,n,o)=>(a,i,l,s)=>{var d=cn.fromTable(a),c=x.from(null==s?void 0:s.section).getOrThunk(Mi);return t(d,i).map((t=>{var r=((e,t)=>$i(e,t,!1))(d,l),n=e(r,t,Ae,o(l),c),a=an(n.grid);return{info:t,grid:Wi(n.grid),cursor:n.cursor,lockedColumns:a}})).bind((e=>{var t=ji(a,e.grid),o=x.from(null==s?void 0:s.sizing).getOrThunk((()=>Co(a))),i=x.from(null==s?void 0:s.resize).getOrThunk(Ci);return r(a,e.grid,e.info,{sizing:o,resize:i,section:c}),n(a),Ee(a,nn),e.lockedColumns.length>0&&we(a,nn,e.lockedColumns.join(",")),x.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))},Gi=(e,t)=>Vi(e,t,S).map((e=>({cells:e,generators:t.generators,clipboard:t.clipboard}))),Yi=(e,t)=>Vi(e,t,S),Xi=(e,t)=>Vi(e,t,(e=>!e.isLocked)),Qi=(e,t)=>W(t,(t=>((e,t)=>qi(e,t).exists((e=>!e.isLocked)))(e,t))),Ji=(e,t,r,n)=>{for(var o=tn(e).rows,a=!0,i=0;i<o.length;i++)for(var l=0;l<en(o[0]);l++){var s=o[i],d=Jr(s,l),c=r(d.element,t);c&&!a?Xr(s,l,lt(n(),!0,d.isLocked)):c&&(a=!1)}return e},Zi=(e,t,r,n)=>{var o=tn(e).rows;if(t>0&&t<o.length){var a=((e,t)=>j(e,((e,r)=>A(e,(e=>t(e.element,r.element)))?e:e.concat([r])),[]))(o[t-1].cells,r);L(a,(e=>{for(var a=x.none(),i=t;i<o.length;i++)for(var l=function(t){var l=o[i],s=Jr(l,t);r(s.element,e.element)&&(a.isNone()&&(a=x.some(n())),a.each((e=>{Xr(l,t,lt(e,!0,s.isLocked))})))},s=0;s<en(o[0]);s++)l(s)}))}return e},el=e=>{var t=t=>t(e),r=p(e),n=()=>o,o={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:S,isError:w,map:t=>rl.value(t(e)),mapError:n,bind:t,exists:t,forall:t,getOr:r,or:n,getOrThunk:r,orThunk:n,getOrDie:r,each:t=>{t(e)},toOptional:()=>x.some(e)};return o},tl=e=>{var t,r=()=>n,n={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:w,isError:S,map:r,mapError:t=>rl.error(t(e)),bind:r,exists:w,forall:S,getOr:v,or:v,getOrThunk:C,orThunk:C,getOrDie:(t=String(e),()=>{throw new Error(t)}),each:g,toOptional:x.none};return n},rl={value:el,error:tl,fromOption:(e,t)=>e.fold((()=>tl(t)),el)},nl=(e,t)=>({rowDelta:0,colDelta:en(e[0])-en(t[0])}),ol=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),al=(e,t,r,n)=>{var o="colgroup"===t.section?r.col:r.cell;return B(e,(e=>lt(o(),!0,n(e))))},il=(e,t,r,n)=>{var o=e[e.length-1];return e.concat(B(t,(()=>{var e="colgroup"===o.section?r.colgroup:r.row,t=rn(o,e,v),a=al(t.cells.length,t,r,(e=>oe(n,e.toString())));return Qr(t,a)})))},ll=(e,t,r,n)=>P(e,(e=>{var o=al(t,e,r,w);return Gr(e,n,o)})),sl=(e,t,r)=>{var n=t.colDelta<0?ll:v,o=t.rowDelta<0?il:v,a=an(e),i=en(e[0]),l=A(a,(e=>e===i-1)),s=n(e,Math.abs(t.colDelta),r,l?i-1:i),d=an(s);return o(s,Math.abs(t.rowDelta),r,q(d,S))},dl=(e,t,r,n)=>{var o=b(n,Jr(e[t],r).element),a=e[t];return e.length>1&&en(a)>1&&(r>0&&o(Zr(a,r-1))||r<a.cells.length-1&&o(Zr(a,r+1))||t>0&&o(Zr(e[t-1],r))||t<e.length-1&&o(Zr(e[t+1],r)))},cl=(e,t,r)=>I(r,(r=>r>=e.column&&r<=en(t[0])+e.column)),ul=(e,t,r,o,a)=>{var i=an(t),l=((e,t,r)=>{var n=en(t[0]),o=tn(t).cols.length+e.row,a=B(n-e.column,(t=>t+e.column)),i=U(a,(e=>W(r,(t=>t!==e)))).getOr(n-1);return{row:o,column:i}})(e,t,i),s=tn(r).rows,d=cl(l,s,i),c=((e,t,r)=>{if(e.row>=t.length||e.column>en(t[0]))return rl.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);var n=t.slice(e.row),o=n[0].cells.slice(e.column),a=en(r[0]),i=r.length;return rl.value({rowDelta:n.length-i,colDelta:o.length-a})})(l,t,s);return c.map((e=>{var r=n(n({},e),{},{colDelta:e.colDelta-d.length}),i=sl(t,r,o),c=an(i),u=cl(l,s,c);return((e,t,r,n,o,a)=>{for(var i=e.row,l=e.column,s=i+r.length,d=l+en(r[0])+a.length,c=q(a,S),u=i;u<s;u++)for(var m=0,f=l;f<d;f++)if(c[f])m++;else{dl(t,u,f,o)&&Ji(t,Zr(t[u],f),o,n.cell);var g=f-l-m,p=Jr(r[u-i],g),v=p.element,h=n.replace(v);Xr(t[u],f,lt(h,!0,p.isLocked))}return t})(l,i,s,o,a,u)}))},ml=(e,t,r,n,o)=>{((e,t,r,n)=>{t>0&&t<e[0].cells.length&&L(e,(e=>{for(var o=e.cells[t-1],a=0,i=n();e.cells.length>t+a&&r(o.element,e.cells[t+a].element);)Xr(e,t+a,lt(i,!0,e.cells[t+a].isLocked)),a++}))})(t,e,o,n.cell);var a=ol(r,t),i=sl(r,a,n),l=ol(t,i),s=sl(t,l,n);return P(s,((t,r)=>Gr(t,e,i[r].cells)))},fl=(e,t,r,o,a)=>{Zi(t,e,a,o.cell);var i=an(t),l=nl(t,r),s=n(n({},l),{},{colDelta:l.colDelta-i.length}),d=sl(t,s,o),c=tn(d),u=c.cols,m=c.rows,f=an(d),g=nl(r,t),p=n(n({},g),{},{colDelta:g.colDelta+f.length}),v=((e,t,r)=>P(e,(e=>j(r,((r,n)=>{var o=al(1,e,t,S)[0];return Yr(r,n,o)}),e))))(r,o,f),h=sl(v,p,o);return[...u,...m.slice(0,e),...h,...m.slice(e,m.length)]},gl=(e,t,r,n,o)=>{var a=tn(e),i=a.rows,l=a.cols,s=i.slice(0,t),d=i.slice(t),c=((e,t,r,n)=>rn(e,(e=>n(e,r)),t))(i[r],((e,r)=>t>0&&t<i.length&&n(Zr(i[t-1],r),Zr(i[t],r))?Jr(i[t],r):lt(o(e.element,n),!0,e.isLocked)),n,o);return[...l,...s,c,...d]},pl=(e,t,r,n,o)=>P(e,(e=>{var a=t>0&&t<en(e)&&n(Zr(e,t-1),Zr(e,t)),i=((e,t,r,n,o,a,i)=>{if("colgroup"!==r&&n)return Jr(e,t);var l=Jr(e,o);return lt(i(l.element,a),!0,!1)})(e,t,e.section,a,r,n,o);return Yr(e,t,i)})),vl=(e,t,r,n)=>((e,t,r,n)=>void 0!==Zr(e[t],r)&&t>0&&n(Zr(e[t-1],r),Zr(e[t],r)))(e,t,r,n)||((e,t,r)=>t>0&&r(Zr(e,t-1),Zr(e,t)))(e[t],r,n),hl=(e,t,r,n)=>{var o=e=>(e=>"row"===e?Gt(t):Kt(t))(e)?`${e}group`:e;return e?Si(t)?o(r):null:n&&Si(t)?o("row"===r?"col":"row"):null},bl=(e,t,r)=>lt(r(e.element,t),!0,e.isLocked),yl=(e,t,r,n,o,a,i)=>P(e,((e,l)=>((e,t)=>{var r=e.cells,n=P(r,t);return st(e.element,n,e.section,e.isNew)})(e,((e,s)=>{if((e=>A(t,(t=>r(e.element,t.element))))(e)){var d=i(e,l,s)?o(e,r,n):e;return a(d,l,s).each((e=>{var t,r;t=d.element,r={scope:x.from(e)},J(r,((e,r)=>{e.fold((()=>{Ee(t,r)}),(e=>{Ce(t.dom,r,e)}))}))})),d}return e})))),Cl=(e,t,r)=>$(e,((n,o)=>vl(e,o,t,r)?[]:[Jr(n,t)])),wl=(e,t,r,n,o)=>{var a=tn(e).rows,i=$(t,(e=>Cl(a,e,n))),l=P(a,(e=>xi(e.cells))),s=((e,t)=>W(t,v)&&xi(e)?S:(e,r,n)=>!("th"===ce(e.element)&&t[r]))(i,l),d=((e,t)=>(r,n)=>x.some(hl(e,r.element,"row",t[n])))(r,l);return yl(e,i,n,o,bl,d,s)},Sl=(e,t,r,n,o,a,i)=>{var l=tn(e),s=l.cols,d=l.rows,c=d[t[0]],u=$(t,(e=>((e,t,r)=>{var n=e[t];return $(n.cells,((n,o)=>vl(e,t,o,r)?[]:[n]))})(d,e,o))),m=P(c.cells,((e,t)=>xi(Cl(d,t,o)))),f=[...d];L(t,(e=>{f[e]=i.transformRow(d[e],r)}));var g=[...s,...f],p=((e,t)=>W(t,v)&&xi(e.cells)?S:(e,r,n)=>!("th"===ce(e.element)&&t[n]))(c,m),h=((e,t)=>(r,n,o)=>x.some(hl(e,r.element,"col",t[o])))(n,m);return yl(g,u,o,a,i.transformCell,h,p)},xl=(e,t,r,n)=>{var o=tn(e).rows,a=P(t,(e=>Jr(o[e.row],e.column)));return yl(e,a,r,n,bl,x.none,S)},kl=e=>{if(!l(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],r={};return L(e,((n,o)=>{var a=X(n);if(1!==a.length)throw new Error("one and only one name per case");var i=a[0],s=n[i];if(void 0!==r[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!l(s))throw new Error("case arguments must be an array");t.push(i),r[i]=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var l=n.length;if(l!==s.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+s.length+" ("+s+"), got "+l);return{fold:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+r.length);return r[o].apply(null,n)},match:e=>{var r=X(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!W(t,(e=>O(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:i,params:n})}}}})),r},El=kl([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Nl=n({},El),_l=(e,t,r,n,o)=>{var a=e.slice(0),i=((e,t)=>0===e.length?Nl.none():1===e.length?Nl.only(0):0===t?Nl.left(0,1):t===e.length-1?Nl.right(t-1,t):t>0&&t<e.length-1?Nl.middle(t-1,t,t+1):Nl.none())(e,t),l=p(P(a,p(0)));return i.fold(l,(e=>n.singleColumnWidth(a[e],r)),((e,t)=>o.calcLeftEdgeDeltas(a,e,t,r,n.minCellWidth(),n.isRelative)),((e,t,i)=>o.calcMiddleDeltas(a,e,t,i,r,n.minCellWidth(),n.isRelative)),((e,t)=>o.calcRightEdgeDeltas(a,e,t,r,n.minCellWidth(),n.isRelative)))},Tl=(e,t,r)=>{for(var n=0,o=e;o<t;o++)n+=void 0!==r[o]?r[o]:0;return n},Dl=(e,t)=>{var r=cn.justCells(e);return P(r,(e=>{var r=Tl(e.row,e.row+e.rowspan,t);return{element:e.element,height:r,rowspan:e.rowspan}}))},Rl=(e,t)=>cn.hasColumns(e)?((e,t)=>{var r=cn.justColumns(e);return P(r,((e,r)=>({element:e.element,width:t[r],colspan:e.colspan})))})(e,t):((e,t)=>{var r=cn.justCells(e);return P(r,(e=>{var r=Tl(e.column,e.column+e.colspan,t);return{element:e.element,width:r,colspan:e.colspan}}))})(e,t),Ol=(e,t,r)=>{var n=Rl(e,t);L(n,(e=>{r.setElementWidth(e.element,e.width)}))},Al=(e,t,r,n,o)=>{var a=cn.fromTable(e),i=o.getCellDelta(t),l=o.getWidths(a,o),s=r===a.grid.columns-1,d=n.clampTableDelta(l,r,i,o.minCellWidth(),s),c=_l(l,r,d,o,n),u=P(c,((e,t)=>e+l[t]));Ol(a,u,o),n.resizeTable(o.adjustTableWidth,d,s)},Bl=(e,t,r,n)=>{var o=cn.fromTable(e),a=((e,t,r)=>po(e,t,r,no,(e=>e.getOrThunk(Qt))))(o,e,n),i=P(a,((e,n)=>r===n?Math.max(t+e,Qt()):e)),l=Dl(o,i),s=((e,t)=>P(e.all,((e,r)=>({element:e.element,height:t[r]}))))(o,i);L(s,(e=>{Xn(e.element,e.height)})),L(l,(e=>{Xn(e.element,e.height)}));var d=F(i,((e,t)=>e+t),0);Xn(e,d)},Pl=e=>j(e,((e,t)=>A(e,(e=>e.column===t.column))?e:e.concat([t])),[]).sort(((e,t)=>e.column-t.column)),Ll=ye("col"),Ml=ye("colgroup"),Il=e=>"tr"===ce(e)||Ml(e),Fl=e=>({element:e,colspan:qt(e,"colspan",1),rowspan:qt(e,"rowspan",1)}),jl=e=>ke(e,"scope").map((e=>e.substr(0,3))),Ul=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fl,r=r=>{if(Il(r))return Ml((o={element:r}).element)?e.colgroup(o):e.row(o);var o,a=r,i=(t=>Ll(t.element)?e.col(t):e.cell(t))(t(a));return n=x.some({item:a,replacement:i}),i},n=x.none();return{getOrInit:(e,t)=>n.fold((()=>r(e)),(n=>t(e,n.item)?n.replacement:r(e)))}},zl=e=>t=>{var r=[],n=n=>{var o="td"===e?{scope:null}:{},a=t.replace(n,e,o);return r.push({item:n,sub:a}),a};return{replaceOrInit:(e,t)=>{if(Il(e)||Ll(e))return e;var o=e;return((e,t)=>U(r,(r=>t(r.item,e))))(o,t).fold((()=>n(o)),(r=>t(e,r.item)?r.sub:n(o)))}}},Hl=e=>({unmerge:t=>{var r=jl(t);return r.each((e=>we(t,"scope",e))),()=>{var n=e.cell({element:t,colspan:1,rowspan:1});return Wt(n,"width"),Wt(t,"width"),r.each((e=>we(n,"scope",e))),n}},merge:e=>(Wt(e[0],"width"),(()=>{var t=Dt(P(e,jl));if(0===t.length)return x.none();var r=t[0],n=["row","col"];return A(t,(e=>e!==r&&O(n,e)))?x.none():x.from(r)})().fold((()=>Ee(e[0],"scope")),(t=>we(e[0],"scope",t+"group"))),p(e[0]))}),$l=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Wl=Da(),ql=e=>((e,t)=>{var r=e.property().name(t);return O($l,r)})(Wl,e),Vl=e=>((e,t)=>{var r=e.property().name(t);return O(["ol","ul"],r)})(Wl,e),Kl=e=>((e,t)=>O(["br","img","hr","input"],e.property().name(t)))(Wl,e),Gl=e=>{var t,r=ye("br"),n=e=>Bo(e).bind((t=>{var n=ze(t).map((e=>!!ql(e)||!!Kl(e)&&"img"!==ce(e))).getOr(!1);return Ie(t).map((o=>!0===n||(e=>"li"===ce(e)||St(e,Vl).isSome())(o)||r(t)||ql(o)&&!Ae(e,o)?[]:[Te.fromTag("br")]))})).getOr([]),o=(t=$(e,(e=>{var t=He(e);return(e=>W(e,(e=>r(e)||ve(e)&&0===No(e).trim().length)))(t)?[]:t.concat(n(e))})),0===t.length?[Te.fromTag("br")]:t);Qe(e[0]),Xe(e[0],o)},Yl=e=>da(e,!0),Xl=e=>{0===tr(e).length&&Je(e)},Ql=(e,t)=>({grid:e,cursor:t}),Jl=(e,t,r)=>{var n,o,a=tn(e).rows;return x.from(null===(o=null===(n=a[t])||void 0===n?void 0:n.cells[r])||void 0===o?void 0:o.element).filter(Yl).orThunk((()=>(e=>Y(e,(e=>Y(e.cells,(e=>{var t=e.element;return Rt(Yl(t),t)})))))(a)))},Zl=(e,t,r)=>{var n=Jl(e,t,r);return Ql(e,n)},es=e=>j(e,((e,t)=>A(e,(e=>e.row===t.row))?e:e.concat([t])),[]).sort(((e,t)=>e.row-t.row)),ts=(e,t)=>(r,n,o,a,i)=>{var l=es(n),s=P(l,(e=>e.row)),d=Sl(r,s,e,t,o,a.replaceOrInit,i);return Zl(d,n[0].row,n[0].column)},rs=ts("thead",!0),ns=ts("tbody",!1),os=ts("tfoot",!1),as=(e,t,r)=>{var n=((e,t)=>ir(e,(()=>t)))(e,r.section),o=cn.generate(n);return $i(o,t,!0)},is=(e,t,r,n)=>((e,t,r,n)=>{var o=cn.generate(t),a=n.getWidths(o,n);Ol(o,a,n)})(0,t,0,n.sizing),ls=(e,t,r,n)=>((e,t,r,n,o)=>{var a=cn.generate(t),i=n.getWidths(a,n),l=n.pixelWidth(),s=o.calcRedestributedWidths(i,l,r.pixelDelta,n.isRelative),d=s.newSizes,c=s.delta;Ol(a,d,n),n.adjustTableWidth(c)})(0,t,r,n.sizing,n.resize),ss=(e,t)=>A(t,(e=>0===e.column&&e.isLocked)),ds=(e,t)=>A(t,(t=>t.column+t.colspan>=e.grid.columns&&t.isLocked)),cs=(e,t)=>{var r=un(e),n=Pl(t);return j(n,((e,t)=>e+r[t.column].map(qr).getOr(0)),0)},us=e=>(t,r)=>Yi(t,r).filter((r=>!(e?ss:ds)(t,r))).map((e=>({details:e,pixelDelta:cs(t,e)}))),ms=e=>(t,r)=>Gi(t,r).filter((r=>!(e?ss:ds)(t,r.cells))),fs=zl("th"),gs=zl("td"),ps=Ki(((e,t,r,n)=>{var o=t[0].row,a=es(t),i=F(a,((e,t)=>({grid:gl(e.grid,o,t.row+e.delta,r,n.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return Zl(i,o,t[0].column)}),Yi,g,g,Ul),vs=Ki(((e,t,r,n)=>{var o=es(t),a=o[o.length-1],i=a.row+a.rowspan,l=F(o,((e,t)=>gl(e,i,t.row,r,n.getOrInit)),e);return Zl(l,i,t[0].column)}),Yi,g,g,Ul),hs=Ki(((e,t,r,n)=>{var o=t.details,a=Pl(o),i=a[0].column,l=F(a,((e,t)=>({grid:pl(e.grid,i,t.column+e.delta,r,n.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return Zl(l,o[0].row,i)}),us(!0),ls,g,Ul),bs=Ki(((e,t,r,n)=>{var o=t.details,a=o[o.length-1],i=a.column+a.colspan,l=Pl(o),s=F(l,((e,t)=>pl(e,i,t.column,r,n.getOrInit)),e);return Zl(s,o[0].row,i)}),us(!1),ls,g,Ul),ys=Ki(((e,t,r,n)=>{var o=Pl(t.details),a=((e,t)=>$(e,(e=>{var r=e.cells,n=F(t,((e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e),r);return n.length>0?[st(e.element,n,e.section,e.isNew)]:[]})))(e,P(o,(e=>e.column))),i=a.length>0?a[0].cells.length-1:0;return Zl(a,o[0].row,Math.min(o[0].column,i))}),((e,t)=>Xi(e,t).map((t=>({details:t,pixelDelta:-cs(e,t)})))),ls,Xl,Ul),Cs=Ki(((e,t,r,n)=>{var o=es(t),a=((e,t,r)=>{var n=tn(e),o=n.rows;return[...n.cols,...o.slice(0,t),...o.slice(r+1)]})(e,o[0].row,o[o.length-1].row),i=a.length>0?a.length-1:0;return Zl(a,Math.min(t[0].row,i),t[0].column)}),Yi,g,Xl,Ul),ws=Ki(((e,t,r,n)=>{var o=Pl(t),a=P(o,(e=>e.column)),i=wl(e,a,!0,r,n.replaceOrInit);return Zl(i,t[0].row,t[0].column)}),Xi,g,g,fs),Ss=Ki(((e,t,r,n)=>{var o=Pl(t),a=P(o,(e=>e.column)),i=wl(e,a,!1,r,n.replaceOrInit);return Zl(i,t[0].row,t[0].column)}),Xi,g,g,gs),xs=Ki(rs,Xi,g,g,fs),ks=Ki(ns,Xi,g,g,gs),Es=Ki(os,Xi,g,g,gs),Ns=Ki(((e,t,r,n)=>{var o=xl(e,t,r,n.replaceOrInit);return Zl(o,t[0].row,t[0].column)}),Xi,g,g,fs),_s=Ki(((e,t,r,n)=>{var o=xl(e,t,r,n.replaceOrInit);return Zl(o,t[0].row,t[0].column)}),Xi,g,g,gs),Ts=Ki(((e,t,r,n)=>{var o=t.cells;Gl(o);var a=((e,t,r,n)=>{var o=tn(e).rows;if(0===o.length)return e;for(var a=t.startRow;a<=t.finishRow;a++)for(var i=t.startCol;i<=t.finishCol;i++){var l=o[a],s=Jr(l,i).isLocked;Xr(l,i,lt(n(),!1,s))}return e})(e,t.bounds,0,n.merge(o));return Ql(a,x.from(o[0]))}),((e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>Qi(e,t.cells)))),is,g,Hl),Ds=Ki(((e,t,r,n)=>{var o=F(t,((e,t)=>Ji(e,t,r,n.unmerge(t))),e);return Ql(o,x.from(t[0]))}),((e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>Qi(e,t)))),is,g,Hl),Rs=Ki(((e,t,r,n)=>{var o=((e,t)=>{var r=cn.fromTable(e);return $i(r,t,!0)})(t.clipboard,t.generators),a=((e,t)=>({row:e,column:t}))(t.row,t.column);return ul(a,e,o,t.generators,r).fold((()=>Ql(e,x.some(t.element))),(e=>Zl(e,t.row,t.column)))}),((e,t)=>er(t.element).bind((r=>qi(e,r).map((e=>n(n({},e),{},{generators:t.generators,clipboard:t.clipboard})))))),is,g,Ul),Os=Ki(((e,t,r,n)=>{var o=tn(e).rows,a=t.cells[0].column,i=o[t.cells[0].row],l=as(t.clipboard,t.generators,i),s=ml(a,e,l,t.generators,r);return Zl(s,t.cells[0].row,t.cells[0].column)}),ms(!0),g,g,Ul),As=Ki(((e,t,r,n)=>{var o=tn(e).rows,a=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,i=o[t.cells[0].row],l=as(t.clipboard,t.generators,i),s=ml(a,e,l,t.generators,r);return Zl(s,t.cells[0].row,t.cells[0].column)}),ms(!1),g,g,Ul),Bs=Ki(((e,t,r,n)=>{var o=tn(e).rows,a=t.cells[0].row,i=o[a],l=as(t.clipboard,t.generators,i),s=fl(a,e,l,t.generators,r);return Zl(s,t.cells[0].row,t.cells[0].column)}),Gi,g,g,Ul),Ps=Ki(((e,t,r,n)=>{var o=tn(e).rows,a=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,i=o[t.cells[0].row],l=as(t.clipboard,t.generators,i),s=fl(a,e,l,t.generators,r);return Zl(s,t.cells[0].row,t.cells[0].column)}),Gi,g,g,Ul),Ls=(e,t)=>{var r=cn.fromTable(e);return Yi(r,t).bind((e=>{var t=e[e.length-1],n=e[0].column,o=t.column+t.colspan,a=H(P(r.all,(e=>I(e.cells,(e=>e.column>=n&&e.column<o)))));return Ni(a)})).getOr("")},Ms=(e,t)=>{var r=cn.fromTable(e);return Yi(r,t).bind(Ni).getOr("")},Is=(e,t)=>{var r=cn.fromTable(e);return Yi(r,t).bind((e=>{var t=e[e.length-1],n=e[0].row,o=t.row+t.rowspan;return(e=>{var t=P(e,(e=>Ei(e).type)),r=O(t,"header"),n=O(t,"footer");if(r||n){var o=O(t,"body");return!r||o||n?r||o||!n?x.none():x.some("footer"):x.some("header")}return x.some("body")})(r.all.slice(n,o))})).getOr("")},Fs=(e,t)=>e.dispatch("NewRow",{node:t}),js=(e,t)=>e.dispatch("NewCell",{node:t}),Us=(e,t,r)=>{e.dispatch("TableModified",n(n({},r),{},{table:t}))},zs={structure:!1,style:!0},Hs={structure:!0,style:!1},$s={structure:!0,style:!0},Ws=(e,t)=>Zo(e)?So(t):ea(e)?wo(t):Co(t),qs=(e,t,r)=>{var n=e=>"table"===ce(ua(e)),o=Ko(e),a=Qo(e)?g:fi,i=t=>{switch(Go(e)){case"section":return Bi();case"sectionCells":return Pi();case"cells":return Li();default:return Ai(t,"section")}},l=(t,n)=>n.cursor.fold((()=>{var n=tr(t);return K(n).filter(pt).map((n=>{r.clearSelectedCells(t.dom);var o=e.dom.createRng();return o.selectNode(n.dom),e.selection.setRng(o),we(n,"data-mce-selected","1"),o}))}),(n=>{var o=ui(mi,n),a=e.dom.createRng();return a.setStart(o.element.dom,o.offset),a.setEnd(o.element.dom,o.offset),e.selection.setRng(a),r.clearSelectedCells(t.dom),x.some(a)})),s=(r,n,a,s)=>function(d,c){var u=arguments.length>2&&void 0!==arguments[2]&&arguments[2];fa(d);var m=Te.fromDom(e.getDoc()),f=Ho(a,m,o),g={sizing:Ws(e,d),resize:Qo(e)?yi():Ci(),section:i(d)};return n(d)?r(d,c,f,g).bind((r=>{t.refresh(d.dom),L(r.newRows,(t=>{Fs(e,t.dom)})),L(r.newCells,(t=>{js(e,t.dom)}));var n=l(d,r);return pt(d)&&(fa(d),u||Us(e,d.dom,s)),n.map((e=>({rng:e,effect:s})))})):x.none()},d=s(Cs,(t=>!n(e)||wi(t).rows>1),g,Hs),c=s(ys,(t=>!n(e)||wi(t).columns>1),g,Hs);return{deleteRow:d,deleteColumn:c,insertRowsBefore:s(ps,S,g,Hs),insertRowsAfter:s(vs,S,g,Hs),insertColumnsBefore:s(hs,S,a,Hs),insertColumnsAfter:s(bs,S,a,Hs),mergeCells:s(Ts,S,g,Hs),unmergeCells:s(Ds,S,g,Hs),pasteColsBefore:s(Os,S,g,Hs),pasteColsAfter:s(As,S,g,Hs),pasteRowsBefore:s(Bs,S,g,Hs),pasteRowsAfter:s(Ps,S,g,Hs),pasteCells:s(Rs,S,g,$s),makeCellsHeader:s(Ns,S,g,Hs),unmakeCellsHeader:s(_s,S,g,Hs),makeColumnsHeader:s(ws,S,g,Hs),unmakeColumnsHeader:s(Ss,S,g,Hs),makeRowsHeader:s(xs,S,g,Hs),makeRowsBody:s(ks,S,g,Hs),makeRowsFooter:s(Es,S,g,Hs),getTableRowType:Is,getTableCellType:Ms,getTableColType:Ls}},Vs=(e,t,r)=>{var n=qt(e,t,1);1===r||n<=1?Ee(e,t):we(e,t,Math.min(r,n))},Ks=(e,t)=>r=>{var n=r.column+r.colspan-1,o=r.column;return n>=e&&o<t},Gs=(e,t)=>{var r=cn.fromTable(e);return Xi(r,t).map((e=>{var t=e[e.length-1],n=e[0].column,o=t.column+t.colspan,a=((e,t,r)=>{if(cn.hasColumns(e)){var n=I(cn.justColumns(e),Ks(t,r)),o=P(n,(e=>{var n=rt(e.element);return Vs(n,"span",r-t),n})),a=Te.fromTag("colgroup");return Xe(a,o),[a]}return[]})(r,n,o),i=((e,t,r)=>P(e.all,(e=>{var n=I(e.cells,Ks(t,r)),o=P(n,(e=>{var n=rt(e.element);return Vs(n,"colspan",r-t),n})),a=Te.fromTag("tr");return Xe(a,o),a})))(r,n,o);return[...a,...i]}))},Ys=(e,t,r)=>{var o=cn.fromTable(e);return Yi(o,t).bind((e=>{var t=$i(o,r,!1),a=tn(t).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),i=$(a,(e=>{var t=I(e.cells,(e=>!e.isLocked));return t.length>0?[n(n({},e),{},{cells:t})]:[]})),l=Wi(i);return Rt(l.length>0,l)})).map((e=>(e=>P(e,(e=>{var t=tt(e.element);return L(e.cells,(e=>{var r=rt(e.element);Ii(r,"colspan",e.colspan,1),Ii(r,"rowspan",e.rowspan,1),Ke(t,r)})),t})))(e)))},Xs=kl([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Qs=(e,t,r)=>{var n=r.substring(0,r.length-e.length),o=parseFloat(n);return n===o.toString()?t(o):Xs.invalid(r)},Js=n(n({},Xs),{},{from:e=>Pt(e,"%")?Qs("%",Xs.percent,e):Pt(e,"px")?Qs("px",Xs.pixels,e):Xs.invalid(e)}),Zs=(e,t,r)=>e.fold((()=>t),(e=>((e,t,r)=>{var n=r/t;return P(e,(e=>Js.from(e).fold((()=>e),(e=>e*n+"px"),(e=>e/100*r+"px"))))})(t,r,e)),(e=>((e,t)=>P(e,(e=>Js.from(e).fold((()=>e),(e=>e/t*100+"%"),(e=>e+"%")))))(t,r))),ed=(e,t,r)=>{var n=Js.from(r),o=W(e,(e=>"0px"===e))?((e,t)=>{var r=e.fold((()=>p("")),(e=>p(e/t+"px")),(()=>p(100/t+"%")));return B(t,r)})(n,e.length):Zs(n,e,t);return nd(o)},td=(e,t)=>0===e.length?t:F(e,((e,t)=>Js.from(t).fold(p(0),v,v)+e),0),rd=(e,t)=>Js.from(e).fold(p(e),(e=>e+t+"px"),(e=>e+t+"%")),nd=e=>{if(0===e.length)return e;var t=F(e,((e,t)=>{var r=Js.from(t).fold((()=>({value:t,remainder:0})),(e=>((e,t)=>{var r=Math.floor(e);return{value:r+t,remainder:e-r}})(e,"px")),(e=>({value:e+"%",remainder:0})));return{output:[r.value].concat(e.output),remainder:e.remainder+r.remainder}}),{output:[],remainder:0}),r=t.output;return r.slice(0,r.length-1).concat([rd(r[r.length-1],Math.round(t.remainder))])},od=Js.from,ad=e=>od(e).fold(p("px"),p("px"),p("%")),id=(e,t,r)=>{var n=cn.fromTable(e),o=n.all,a=cn.justCells(n),i=cn.justColumns(n);t.each((t=>{var r=ad(t),o=Wr(e),l=((e,t)=>mo(e,t,so,fo))(n,e),s=ed(l,o,t);cn.hasColumns(n)?((e,t,r)=>{L(t,((t,n)=>{var o=td([e[n]],Xt());jt(t.element,"width",o+r)}))})(s,i,r):((e,t,r)=>{L(t,(t=>{var n=e.slice(t.column,t.colspan+t.column),o=td(n,Xt());jt(t.element,"width",o+r)}))})(s,a,r),jt(e,"width",t)})),r.each((t=>{var r=ad(t),i=bn(e),l=((e,t,r)=>po(e,t,r,co,fo))(n,e,Mn);((e,t,r,n)=>{L(r,(t=>{var r=e.slice(t.row,t.rowspan+t.row),o=td(r,Qt());jt(t.element,"height",o+n)})),L(t,((t,r)=>{jt(t.element,"height",e[r])}))})(ed(l,i,t),o,a,r),jt(e,"height",t)}))},ld=e=>eo(e).exists((e=>Wn.test(e))),sd=e=>eo(e).exists((e=>qn.test(e))),dd=e=>eo(e).isNone(),cd=e=>{Ee(e,"width")},ud=e=>{var t=ao(e);id(e,x.some(t),x.none()),cd(e)},md=e=>{var t=(e=>Wr(e)+"px")(e);id(e,x.some(t),x.none()),cd(e)},fd=e=>{Wt(e,"width");var t=rr(e),r=t.length>0?t:tr(e);L(r,(e=>{Wt(e,"width"),cd(e)})),cd(e)},gd={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},pd=e=>{var t=Te.fromTag("colgroup");return B(e,(()=>Ke(t,Te.fromTag("col")))),t},vd=(e,t,r,n)=>B(e,(e=>((e,t,r,n)=>{for(var o=Te.fromTag("tr"),a=0;a<e;a++){var i=n<t||a<r?Te.fromTag("th"):Te.fromTag("td");a<r&&we(i,"scope","row"),n<t&&we(i,"scope","col"),Ke(i,Te.fromTag("br")),Ke(o,i)}return o})(t,r,n,e))),hd=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},bd=(e,t,r,n,o)=>{var i=ia(e),l={styles:i,attributes:aa(e),colGroups:la(e)};return e.undoManager.ignore((()=>{var a=function(e,t,r,n,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:gd,i=Te.fromTag("table"),l="cells"!==o;Ut(i,a.styles),Se(i,a.attributes),a.colGroups&&Ke(i,pd(t));var s=Math.min(e,r);if(l&&r>0){var d=Te.fromTag("thead");Ke(i,d);var c=vd(r,t,"sectionCells"===o?s:0,n);Xe(d,c)}var u=Te.fromTag("tbody");Ke(i,u);var m=vd(l?e-s:e,t,l?0:r,n);return Xe(u,m),i}(r,t,o,n,Go(e),l);we(a,"data-mce-id","__mce");var i=(e=>{var t=Te.fromTag("div"),r=Te.fromDom(e.dom.cloneNode(!0));return Ke(t,r),(e=>e.dom.innerHTML)(t)})(a);e.insertContent(i),e.addVisual()})),Nt(ua(e),'table[data-mce-id="__mce"]').map((t=>(ea(e)?md(t):ta(e)?fd(t):(Zo(e)||(e=>a(e)&&-1!==e.indexOf("%"))(i.width))&&ud(t),fa(t),Ee(t,"data-mce-id"),((e,t)=>{L(Ct(t,"tr"),(t=>{Fs(e,t.dom),L(Ct(t,"th,td"),(t=>{js(e,t.dom)}))}))})(e,t),((e,t)=>{Nt(t,"td,th").each(b(hd,e))})(e,t),t.dom))).getOrNull()},yd=tinymce.util.Tools.resolve("tinymce.FakeClipboard"),Cd="x-tinymce/dom-table-",wd=Cd+"rows",Sd=Cd+"columns",xd=e=>{var t=yd.FakeClipboardItem(e);yd.write([t])},kd=e=>{var t,r=null!==(t=yd.read())&&void 0!==t?t:[];return Y(r,(t=>x.from(t.getType(e))))},Ed=e=>{kd(e).isSome()&&yd.clear()},Nd=e=>{e.fold(Td,(e=>xd({[wd]:e})))},_d=()=>kd(wd),Td=()=>Ed(wd),Dd=e=>{e.fold(Od,(e=>xd({[Sd]:e})))},Rd=()=>kd(Sd),Od=()=>Ed(Sd),Ad=e=>ni(ga(e),ma(e)).filter(ha),Bd=(e,t)=>{var r=ma(e),n=e=>nr(e,r),o=t=>(e=>oi(ga(e),ma(e)).filter(ha))(e).bind((e=>n(e).map((r=>t(r,e))))),l=t=>{e.focus()},s=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o(((n,o)=>{var a=ti(ai(e),n,o);t(n,a,r).each(l)}))},d=()=>o(((t,r)=>{var n=ti(ai(e),t,r),o=Ho(g,Te.fromDom(e.getDoc()),x.none());return Ys(t,n,o)})),c=()=>o(((t,r)=>{var n=ti(ai(e),t,r);return Gs(t,n)})),u=(t,r)=>r().each((r=>{var n=P(r,(e=>rt(e)));o(((r,o)=>{var a=$o(Te.fromDom(e.getDoc())),i=((e,t,r,n)=>({selection:$a(e),clipboard:r,generators:n}))(ai(e),0,n,a);t(r,i).each(l)}))})),m=e=>(t,r)=>((e,t)=>oe(e,t)?x.from(e[t]):x.none())(r,"type").each((t=>{s(e(t),r.no_events)}));J({mceTableSplitCells:()=>s(t.unmergeCells),mceTableMergeCells:()=>s(t.mergeCells),mceTableInsertRowBefore:()=>s(t.insertRowsBefore),mceTableInsertRowAfter:()=>s(t.insertRowsAfter),mceTableInsertColBefore:()=>s(t.insertColumnsBefore),mceTableInsertColAfter:()=>s(t.insertColumnsAfter),mceTableDeleteCol:()=>s(t.deleteColumn),mceTableDeleteRow:()=>s(t.deleteRow),mceTableCutCol:()=>c().each((e=>{Dd(e),s(t.deleteColumn)})),mceTableCutRow:()=>d().each((e=>{Nd(e),s(t.deleteRow)})),mceTableCopyCol:()=>c().each((e=>Dd(e))),mceTableCopyRow:()=>d().each((e=>Nd(e))),mceTablePasteColBefore:()=>u(t.pasteColsBefore,Rd),mceTablePasteColAfter:()=>u(t.pasteColsAfter,Rd),mceTablePasteRowBefore:()=>u(t.pasteRowsBefore,_d),mceTablePasteRowAfter:()=>u(t.pasteRowsAfter,_d),mceTableDelete:()=>Ad(e).each((t=>{nr(t,r).filter(y(r)).each((t=>{var r=Te.fromText("");if(qe(t,r),Je(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{var n=e.dom.createRng();n.setStart(r.dom,0),n.setEnd(r.dom,0),e.selection.setRng(n),e.nodeChanged()}}))})),mceTableCellToggleClass:(t,r)=>{o((t=>{var n=ai(e),o=W(n,(t=>e.formatter.match("tablecellclass",{value:r},t.dom))),a=o?e.formatter.remove:e.formatter.apply;L(n,(e=>a("tablecellclass",{value:r},e.dom))),Us(e,t.dom,zs)}))},mceTableToggleClass:(t,r)=>{o((t=>{e.formatter.toggle("tableclass",{value:r},t.dom),Us(e,t.dom,zs)}))},mceTableToggleCaption:()=>{Ad(e).each((t=>{nr(t,r).each((r=>{Et(r,"caption").fold((()=>{var t=Te.fromTag("caption");Ke(t,Te.fromText("Caption")),((e,t,r)=>{$e(e,r).fold((()=>{Ke(e,t)}),(e=>{We(e,t)}))})(r,t,0),e.selection.setCursorLocation(t.dom,0)}),(n=>{ye("caption")(t)&&Oe("td",r).each((t=>e.selection.setCursorLocation(t.dom,0))),Je(n)})),Us(e,r.dom,Hs)}))}))},mceTableSizingMode:(t,n)=>(t=>Ad(e).each((n=>{ta(e)||ea(e)||Zo(e)||nr(n,r).each((r=>{"relative"!==t||ld(r)?"fixed"!==t||sd(r)?"responsive"!==t||dd(r)||fd(r):md(r):ud(r),fa(r),Us(e,r.dom,Hs)}))})))(n),mceTableCellType:m((e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader)),mceTableColType:m((e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader)),mceTableRowType:m((e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}}))},((t,r)=>e.addCommand(r,t))),e.addCommand("mceInsertTable",((t,r)=>{!function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e=>f(e)&&e>0;if(o(t)&&o(r)){var a=n.headerRows||0,i=n.headerColumns||0;return bd(e,r,t,i,a)}console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")}(e,r.rows,r.columns,r.options)})),e.addCommand("mceTableApplyCellStyle",((t,r)=>{var o=e=>"tablecell"+e.toLowerCase().replace("-","");if(i(r)){var l=I(ai(e),ha);if(0!==l.length){var s=te(r,((t,r)=>e.formatter.has(o(r))&&a(t)));(e=>{for(var t in e)if(Q.call(e,t))return!1;return!0})(s)||(J(s,((t,r)=>{var n=o(r);L(l,(r=>{""===t?e.formatter.remove(n,{value:null},r.dom,!0):e.formatter.apply(n,{value:t},r.dom)}))})),n(l[0]).each((t=>Us(e,t.dom,zs))))}}}))},Pd=kl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ld={before:Pd.before,on:Pd.on,after:Pd.after,cata:(e,t,r,n)=>e.fold(t,r,n),getStart:e=>e.fold(v,v,v)},Md=(e,t)=>({selection:e,kill:t}),Id=(e,t)=>{var r=e.document.createRange();return r.selectNode(t.dom),r},Fd=(e,t)=>{var r=e.document.createRange();return jd(r,t),r},jd=(e,t)=>e.selectNodeContents(t.dom),Ud=(e,t,r)=>{var n,o=e.document.createRange();return n=o,t.fold((e=>{n.setStartBefore(e.dom)}),((e,t)=>{n.setStart(e.dom,t)}),(e=>{n.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,r)=>{e.setEnd(t.dom,r)}),(t=>{e.setEndAfter(t.dom)}))})(o,r),o},zd=(e,t,r,n,o)=>{var a=e.document.createRange();return a.setStart(t.dom,r),a.setEnd(n.dom,o),a},Hd=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),$d=kl([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Wd=(e,t,r)=>t(Te.fromDom(r.startContainer),r.startOffset,Te.fromDom(r.endContainer),r.endOffset),qd=(e,t)=>{var r=((e,t)=>t.match({domRange:e=>({ltr:p(e),rtl:x.none}),relative:(t,r)=>({ltr:dr((()=>Ud(e,t,r))),rtl:dr((()=>x.some(Ud(e,r,t))))}),exact:(t,r,n,o)=>({ltr:dr((()=>zd(e,t,r,n,o))),rtl:dr((()=>x.some(zd(e,n,o,t,r))))})}))(e,t);return((e,t)=>{var r=t.ltr();return r.collapsed?t.rtl().filter((e=>!1===e.collapsed)).map((e=>$d.rtl(Te.fromDom(e.endContainer),e.endOffset,Te.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>Wd(0,$d.ltr,r))):Wd(0,$d.ltr,r)})(0,r)},Vd=(e,t)=>qd(e,t).match({ltr:(t,r,n,o)=>{var a=e.document.createRange();return a.setStart(t.dom,r),a.setEnd(n.dom,o),a},rtl:(t,r,n,o)=>{var a=e.document.createRange();return a.setStart(n.dom,o),a.setEnd(t.dom,r),a}});$d.ltr,$d.rtl;var Kd=(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n}),Gd=(e,t,r,n)=>({start:Ld.on(e,t),finish:Ld.on(r,n)}),Yd=(e,t)=>{var r=Vd(e,t);return Kd(Te.fromDom(r.startContainer),r.startOffset,Te.fromDom(r.endContainer),r.endOffset)},Xd=Gd,Qd=(e,t,r,n,o)=>Ae(r,n)?x.none():Ia(r,n,t).bind((t=>{var n=t.boxes.getOr([]);return n.length>1?(o(e,n,t.start,t.finish),x.some(Md(x.some(Xd(r,0,r,Do(r))),!0))):x.none()})),Jd=(e,t)=>({item:e,mode:t}),Zd=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ec;return e.property().parent(t).map((e=>Jd(e,n)))},ec=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tc;return r.sibling(e,t).map((e=>Jd(e,n)))},tc=function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,a=t.property().children(r);return n.first(a).map((e=>Jd(e,o)))},rc=[{current:Zd,next:ec,fallback:x.none()},{current:ec,next:tc,fallback:x.some(Zd)},{current:tc,next:tc,fallback:x.some(ec)}],nc=function e(t,r,n,o){return U(arguments.length>4&&void 0!==arguments[4]?arguments[4]:rc,(e=>e.current===n)).bind((n=>n.current(t,r,o,n.next).orThunk((()=>n.fallback.bind((n=>e(t,r,n,o)))))))},oc=()=>({sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?x.some(e[e.length-1]):x.none()}),ac=()=>({sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?x.some(e[0]):x.none()}),ic=(e,t,r,n,o,a)=>nc(e,t,n,o).bind((t=>a(t.item)?x.none():r(t.item)?x.some(t.item):ic(e,t.item,r,t.mode,o,a))),lc=e=>t=>0===e.property().children(t).length,sc=(e,t,r,n)=>ic(e,t,r,ec,oc(),n),dc=(e,t,r,n)=>ic(e,t,r,ec,ac(),n),cc=Da(),uc=(e,t)=>((e,t,r)=>sc(e,t,lc(e),r))(cc,e,t),mc=(e,t)=>((e,t,r)=>dc(e,t,lc(e),r))(cc,e,t),fc=kl([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),gc=e=>_t(e,"tr"),pc=n(n({},fc),{},{verify:(e,t,r,n,o,a,i)=>_t(n,"td,th",i).bind((r=>_t(t,"td,th",i).map((t=>Ae(r,t)?Ae(n,r)&&Do(r)===o?a(t):fc.none("in same cell"):La(gc,[r,t]).fold((()=>((e,t,r)=>{var n=e.getRect(t),o=e.getRect(r);return o.right>n.left&&o.left<n.right})(e,t,r)?fc.success():a(t)),(e=>a(t))))))).getOr(fc.none("default")),cata:(e,t,r,n,o)=>e.fold(t,r,n,o)}),vc=(e,t)=>z(e,b(Ae,t)),hc=ye("br"),bc=(e,t,r)=>t(e,r).bind((e=>ve(e)&&0===No(e).trim().length?bc(e,t,r):x.some(e))),yc=(e,t,r,n)=>((e,t)=>$e(e,t).filter(hc).orThunk((()=>$e(e,t-1).filter(hc))))(t,r).bind((t=>n.traverse(t).fold((()=>bc(t,n.gather,e).map(n.relative)),(e=>(e=>Ie(e).bind((t=>{var r=He(t);return vc(r,e).map((n=>((e,t,r,n)=>({parent:e,children:t,element:r,index:n}))(t,r,e,n)))})))(e).map((e=>Ld.on(e.parent,e.index))))))),Cc=(e,t,r,n)=>{var o=hc(t)?((e,t,r)=>r.traverse(t).orThunk((()=>bc(t,r.gather,e))).map(r.relative))(e,t,n):yc(e,t,r,n);return o.map((e=>({start:e,finish:e})))},wc=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),Sc=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),xc=(e,t,r)=>({left:e.left+t,top:e.top+r,right:e.right+t,bottom:e.bottom+r}),kc=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),Ec=(e,t)=>x.some(e.getRect(t)),Nc=(e,t,r)=>pe(t)?Ec(e,t).map(kc):ve(t)?((e,t,r)=>r>=0&&r<Do(t)?e.getRangedRect(t,r,t,r+1):r>0?e.getRangedRect(t,r-1,t,r):x.none())(e,t,r).map(kc):x.none(),_c=(e,t)=>pe(t)?Ec(e,t).map(kc):ve(t)?e.getRangedRect(t,0,t,Do(t)).map(kc):x.none(),Tc=kl([{none:[]},{retry:["caret"]}]),Dc=(e,t,r)=>xt(t,ql).fold(w,(t=>_c(e,t).exists((e=>((e,t)=>e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right)(r,e))))),Rc={point:e=>e.bottom,adjuster:(e,t,r,n,o)=>{var a=wc(o,5);return Math.abs(r.bottom-n.bottom)<1||r.top>o.bottom?Tc.retry(a):r.top===o.bottom?Tc.retry(wc(o,1)):Dc(e,t,o)?Tc.retry(xc(a,5,0)):Tc.none()},move:wc,gather:mc},Oc=(e,t,r,n,o)=>0===o?x.some(n):((e,t,r)=>e.elementFromPoint(t,r).filter((e=>"table"===ce(e))).isSome())(e,n.left,t.point(n))?((e,t,r,n,o)=>Oc(e,t,r,t.move(n,5),o))(e,t,r,n,o-1):e.situsFromPoint(n.left,t.point(n)).bind((a=>a.start.fold(x.none,(a=>_c(e,a).bind((i=>t.adjuster(e,a,i,r,n).fold(x.none,(n=>Oc(e,t,r,n,o-1))))).orThunk((()=>x.some(n)))),x.none))),Ac=(e,t,r)=>{var n=e.move(r,5),o=Oc(t,e,r,n,100).getOr(n);return((e,t,r)=>e.point(t)>r.getInnerHeight()?x.some(e.point(t)-r.getInnerHeight()):e.point(t)<0?x.some(-e.point(t)):x.none())(e,o,t).fold((()=>t.situsFromPoint(o.left,e.point(o))),(r=>(t.scrollBy(0,r),t.situsFromPoint(o.left,e.point(o)-r))))},Bc={tryUp:b(Ac,{point:e=>e.top,adjuster:(e,t,r,n,o)=>{var a=Sc(o,5);return Math.abs(r.top-n.top)<1||r.bottom<o.top?Tc.retry(a):r.bottom===o.top?Tc.retry(Sc(o,1)):Dc(e,t,o)?Tc.retry(xc(a,5,0)):Tc.none()},move:Sc,gather:uc}),tryDown:b(Ac,Rc),getJumpSize:p(5)},Pc=(e,t,r)=>e.getSelection().bind((n=>Cc(t,n.finish,n.foffset,r).fold((()=>x.some(li(n.finish,n.foffset))),(o=>{var a=e.fromSitus(o);return(e=>pc.cata(e,(e=>x.none()),(()=>x.none()),(e=>x.some(li(e,0))),(e=>x.some(li(e,Do(e))))))(pc.verify(e,n.finish,n.foffset,a.finish,a.foffset,r.failure,t))})))),Lc=(e,t,r,n,o,a)=>0===a?x.none():Fc(e,t,r,n,o).bind((i=>{var l=e.fromSitus(i),s=pc.verify(e,r,n,l.finish,l.foffset,o.failure,t);return pc.cata(s,(()=>x.none()),(()=>x.some(i)),(i=>Ae(r,i)&&0===n?Mc(e,r,n,Sc,o):Lc(e,t,i,0,o,a-1)),(i=>Ae(r,i)&&n===Do(i)?Mc(e,r,n,wc,o):Lc(e,t,i,Do(i),o,a-1)))})),Mc=(e,t,r,n,o)=>Nc(e,t,r).bind((t=>Ic(e,o,n(t,Bc.getJumpSize())))),Ic=(e,t,r)=>{var n=Fr().browser;return n.isChromium()||n.isSafari()||n.isFirefox()?t.retry(e,r):x.none()},Fc=(e,t,r,n,o)=>Nc(e,r,n).bind((t=>Ic(e,o,t))),jc=(e,t)=>{return St(e,(e=>Ie(e).exists((e=>Ae(e,t)))),r).isSome();var r},Uc=(e,t,r,n,o)=>_t(n,"td,th",t).bind((n=>_t(n,"table",t).bind((a=>jc(o,a)?((e,t,r)=>Pc(e,t,r).bind((n=>Lc(e,t,n.element,n.offset,r,20).map(e.fromSitus))))(e,t,r).bind((e=>_t(e.finish,"td,th",t).map((t=>({start:n,finish:t,range:e}))))):x.none())))),zc=(e,t,r,n,o,a)=>a(n,t).orThunk((()=>Uc(e,t,r,n,o).map((e=>{var t=e.range;return Md(x.some(Xd(t.start,t.soffset,t.finish,t.foffset)),!0)})))),Hc=(e,t)=>_t(e,"tr",t).bind((e=>_t(e,"table",t).bind((r=>{var n=Ct(r,"tr");return Ae(e,n[0])?((e,t,r)=>sc(cc,e,t,r))(r,(e=>Bo(e).isSome()),t).map((e=>{var t=Do(e);return Md(x.some(Xd(e,t,e,t)),!0)})):x.none()})))),$c=(e,t)=>_t(e,"tr",t).bind((e=>_t(e,"table",t).bind((r=>{var n=Ct(r,"tr");return Ae(e,n[n.length-1])?((e,t,r)=>dc(cc,e,t,r))(r,(e=>Ao(e).isSome()),t).map((e=>Md(x.some(Xd(e,0,e,0)),!0))):x.none()})))),Wc=(e,t,r,n,o,a,i)=>Uc(e,r,n,o,a).bind((e=>Qd(t,r,e.start,e.finish,i))),qc=e=>{var t=e;return{get:()=>t,set:e=>{t=e}}},Vc=()=>{var e=(e=>{var t=qc(x.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(x.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(x.some(e))}}})(g);return n(n({},e),{},{on:t=>e.get().each(t)})},Kc=(e,t)=>_t(e,"td,th",t),Gc=e=>Fe(e).exists(da),Yc={traverse:ze,gather:mc,relative:Ld.before,retry:Bc.tryDown,failure:pc.failedDown},Xc={traverse:Ue,gather:uc,relative:Ld.before,retry:Bc.tryUp,failure:pc.failedUp},Qc=e=>t=>t===e,Jc=Qc(38),Zc=Qc(40),eu=e=>e>=37&&e<=40,tu={isBackward:Qc(37),isForward:Qc(39)},ru={isBackward:Qc(39),isForward:Qc(37)},nu=kl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ou={domRange:nu.domRange,relative:nu.relative,exact:nu.exact,exactFromRange:e=>nu.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{var t,r=(e=>e.match({domRange:e=>Te.fromDom(e.startContainer),relative:(e,t)=>Ld.getStart(e),exact:(e,t,r,n)=>e}))(e);return t=r,Te.fromDom(Me(t).dom.defaultView)},range:Kd},au=(e,t,r)=>{var n,o;return x.from(null===(o=(n=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(n,t,r)).bind((t=>{if(null===t.offsetNode)return x.none();var r=e.dom.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),x.some(r)}))},iu=(e,t,r)=>{var n,o;return x.from(null===(o=(n=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(n,t,r))},lu=document.caretPositionFromPoint?au:document.caretRangeFromPoint?iu:x.none,su=(e,t)=>{var r=ce(e);return"input"===r?Ld.after(e):O(["br","img"],r)?0===t?Ld.before(e):Ld.after(e):Ld.on(e,t)},du=(e,t,r,n)=>{var o=((e,t,r,n)=>{var o=Le(e).dom.createRange();return o.setStart(e.dom,t),o.setEnd(r.dom,n),o})(e,t,r,n),a=Ae(e,r)&&t===n;return o.collapsed&&!a},cu=e=>x.from(e.getSelection()),uu=(e,t)=>{cu(e).each((e=>{e.removeAllRanges(),e.addRange(t)}))},mu=(e,t,r,n,o)=>{var a=zd(e,t,r,n,o);uu(e,a)},fu=(e,t)=>qd(e,t).match({ltr:(t,r,n,o)=>{mu(e,t,r,n,o)},rtl:(t,r,n,o)=>{cu(e).each((a=>{if(a.setBaseAndExtent)a.setBaseAndExtent(t.dom,r,n.dom,o);else if(a.extend)try{((e,t,r,n,o,a)=>{t.collapse(r.dom,n),t.extend(o.dom,a)})(0,a,t,r,n,o)}catch(a){mu(e,n,o,t,r)}else mu(e,n,o,t,r)}))}}),gu=(e,t,r,n,o)=>{var a=((e,t,r,n)=>{var o=su(e,t),a=su(r,n);return ou.relative(o,a)})(t,r,n,o);fu(e,a)},pu=(e,t,r)=>{var n=((e,t)=>{var r=e.fold(Ld.before,su,Ld.after),n=t.fold(Ld.before,su,Ld.after);return ou.relative(r,n)})(t,r);fu(e,n)},vu=e=>{if(e.rangeCount>0){var t=e.getRangeAt(0),r=e.getRangeAt(e.rangeCount-1);return x.some(Kd(Te.fromDom(t.startContainer),t.startOffset,Te.fromDom(r.endContainer),r.endOffset))}return x.none()},hu=e=>{if(null===e.anchorNode||null===e.focusNode)return vu(e);var t=Te.fromDom(e.anchorNode),r=Te.fromDom(e.focusNode);return du(t,e.anchorOffset,r,e.focusOffset)?x.some(Kd(t,e.anchorOffset,r,e.focusOffset)):vu(e)},bu=function(e,t){var r=(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?Fd:Id)(e,t);uu(e,r)},yu=e=>(e=>cu(e).filter((e=>e.rangeCount>0)).bind(hu))(e).map((e=>ou.exact(e.start,e.soffset,e.finish,e.foffset))),Cu=(e,t)=>(e=>{var t=e.getClientRects(),r=t.length>0?t[0]:e.getBoundingClientRect();return r.width>0||r.height>0?x.some(r).map(Hd):x.none()})(Vd(e,t)),wu=(e,t,r)=>((e,t,r)=>{var n=Te.fromDom(e.document);return lu(n,t,r).map((e=>Kd(Te.fromDom(e.startContainer),e.startOffset,Te.fromDom(e.endContainer),e.endOffset)))})(e,t,r),Su=e=>({elementFromPoint:(t,r)=>Te.fromPoint(Te.fromDom(e.document),t,r),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(t,r,n,o)=>{var a=ou.exact(t,r,n,o);return Cu(e,a)},getSelection:()=>yu(e).map((t=>Yd(e,t))),fromSitus:t=>{var r=ou.relative(t.start,t.finish);return Yd(e,r)},situsFromPoint:(t,r)=>wu(e,t,r).map((e=>Gd(e.start,e.soffset,e.finish,e.foffset))),clearSelection:()=>{(e=>{cu(e).each((e=>e.removeAllRanges()))})(e)},collapseSelection:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];yu(e).each((r=>r.fold((e=>e.collapse(t)),((r,n)=>{var o=t?r:n;pu(e,o,o)}),((r,n,o,a)=>{var i=t?r:o,l=t?n:a;gu(e,i,l,i,l)}))))},setSelection:t=>{gu(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,r)=>{pu(e,t,r)},selectNode:t=>{bu(e,t,!1)},selectContents:t=>{bu(e,t)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>{var t,r,n,o;return(t=Te.fromDom(e.document),r=void 0!==t?t.dom:document,n=r.body.scrollLeft||r.documentElement.scrollLeft,o=r.body.scrollTop||r.documentElement.scrollTop,Sn(n,o)).top},scrollBy:(t,r)=>{((e,t,r)=>{var n=(void 0!==r?r.dom:document).defaultView;n&&n.scrollBy(e,t)})(t,r,Te.fromDom(e.document))}}),xu=(e,t)=>({rows:e,cols:t}),ku=(e,t,r,n)=>{var o=((e,t,r,n)=>{var o=Vc(),a=o.clear,i=a=>{o.on((o=>{n.clearBeforeUpdate(t),Kc(a.target,r).each((i=>{Ia(o,i,r).each((r=>{var o=r.boxes.getOr([]);if(1===o.length){var l=o[0],s="false"===ca(l),d=Tt(sa(a.target),l,Ae);s&&d&&(n.selectRange(t,o,l,l),e.selectContents(l))}else o.length>1&&(n.selectRange(t,o,r.start,r.finish),e.selectContents(i))}))}))}))};return{clearstate:a,mousedown:e=>{n.clear(t),Kc(e.target,r).filter(Gc).each(o.set)},mouseover:e=>{i(e)},mouseup:e=>{i(e),a()}}})(Su(e),t,r,n);return{clearstate:o.clearstate,mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},Eu=e=>xt(e,ge).exists(da),Nu=(e,t)=>Eu(e)||Eu(t),_u=(e,t,r,n)=>{var o=Su(e),a=()=>(n.clear(t),x.none());return{keydown:(e,i,l,s,d,c)=>{var u=e.raw,m=u.which,f=!0===u.shiftKey,g=Fa(t,n.selectedSelector).fold((()=>(eu(m)&&!f&&n.clearBeforeUpdate(t),eu(m)&&f&&!Nu(i,s)?x.none:Zc(m)&&f?b(Wc,o,t,r,Yc,s,i,n.selectRange):Jc(m)&&f?b(Wc,o,t,r,Xc,s,i,n.selectRange):Zc(m)?b(zc,o,r,Yc,s,i,$c):Jc(m)?b(zc,o,r,Xc,s,i,Hc):x.none)),(e=>{var r=r=>()=>{var a=Y(r,(r=>((e,t,r,n,o)=>Ua(n,e,t,o.firstSelectedSelector,o.lastSelectedSelector).map((e=>(o.clearBeforeUpdate(r),o.selectRange(r,e.boxes,e.start,e.finish),e.boxes))))(r.rows,r.cols,t,e,n)));return a.fold((()=>ja(t,n.firstSelectedSelector,n.lastSelectedSelector).map((e=>{var r=Zc(m)||c.isForward(m)?Ld.after:Ld.before;return o.setRelativeSelection(Ld.on(e.first,0),r(e.table)),n.clear(t),Md(x.none(),!0)}))),(e=>x.some(Md(x.none(),!0))))};return eu(m)&&f&&!Nu(i,s)?x.none:Zc(m)&&f?r([xu(1,0)]):Jc(m)&&f?r([xu(-1,0)]):c.isBackward(m)&&f?r([xu(0,-1),xu(-1,0)]):c.isForward(m)&&f?r([xu(0,1),xu(1,0)]):eu(m)&&!f?a:x.none}));return g()},keyup:(e,o,a,i,l)=>Fa(t,n.selectedSelector).fold((()=>{var s=e.raw,d=s.which;return!0===s.shiftKey&&eu(d)&&Nu(o,i)?((e,t,r,n,o,a,i)=>Ae(r,o)&&n===a?x.none():_t(r,"td,th",t).bind((r=>_t(o,"td,th",t).bind((n=>Qd(e,t,r,n,i))))))(t,r,o,a,i,l,n.selectRange):x.none()}),x.none)}},Tu=(e,t)=>{var r=xe(e,t);return void 0===r||""===r?[]:r.split(" ")},Du=e=>void 0!==e.dom.classList,Ru=(e,t)=>((e,t,r)=>{var n=Tu(e,t).concat([r]);return we(e,t,n.join(" ")),!0})(e,"class",t),Ou=(e,t)=>{Du(e)?e.dom.classList.add(t):Ru(e,t)},Au=(e,t)=>Du(e)&&e.dom.classList.contains(t),Bu=(e,t,r)=>{var n=t=>{Ee(t,e.selected),Ee(t,e.firstSelected),Ee(t,e.lastSelected)},o=t=>{we(t,e.selected,"1")},a=e=>{i(e),r()},i=t=>{var r=Ct(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`);L(r,n)};return{clearBeforeUpdate:i,clear:a,selectRange:(r,n,i,l)=>{a(r),L(n,o),we(i,e.firstSelected,"1"),we(l,e.lastSelected,"1"),t(n,i,l)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},Pu=()=>({tag:"none"}),Lu=e=>({tag:"multiple",elements:e}),Mu=e=>({tag:"single",element:e}),Iu=(e,t,r)=>{var n=cn.fromTable(e);return Yi(n,t).map((e=>{var t=$i(n,r,!1),o=tn(t).rows,a=((e,t)=>{var r=e.slice(0,t[t.length-1].row+1),n=Wi(r);return $(n,(e=>{var r=e.cells.slice(0,t[t.length-1].column+1);return P(r,(e=>e.element))}))})(o,e),i=((e,t)=>{var r=e.slice(t[0].row+t[0].rowspan-1,e.length),n=Wi(r);return $(n,(e=>{var r=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return P(r,(e=>e.element))}))})(o,e);return{upOrLeftCells:a,downOrRightCells:i}}))},Fu=e=>{var t,r,n=Te.fromDom((e=>{if(ct()&&u(e.target)){var t=Te.fromDom(e.target);if(pe(t)&&gt(t)&&e.composed&&e.composedPath){var r=e.composedPath();if(r)return K(r)}}return x.from(e.target)})(e).getOr(e.target)),o=()=>e.stopPropagation(),a=()=>e.preventDefault(),i=(t=a,r=o,function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t(r.apply(null,n))});return((e,t,r,n,o,a,i)=>({target:e,x:t,y:r,stop:n,prevent:o,kill:a,raw:i}))(n,e.clientX,e.clientY,o,a,i,e)},ju=(e,t,r,n,o)=>{var a=((e,t)=>r=>{e(r)&&t(Fu(r))})(r,n);return e.dom.addEventListener(t,a,o),{unbind:b(Uu,e,t,a,o)}},Uu=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},zu=S,Hu=(e,t,r)=>((e,t,r,n)=>ju(e,t,r,n,!1))(e,t,zu,r),$u=Fu,Wu=e=>!Au(Te.fromDom(e.target),"ephox-snooker-resizer-bar"),qu=(e,t)=>{var r=((e,t,r)=>({get:()=>za(e(),r).fold((()=>t().fold(Pu,Mu)),Lu)}))((()=>Te.fromDom(e.getBody())),(()=>oi(ga(e),ma(e))),ei.selectedSelector),n=Bu(ei,((t,r,n)=>{nr(r).each((o=>{var a=Ko(e),i=Ho(g,Te.fromDom(e.getDoc()),a),l=ai(e),s=Iu(o,{selection:l},i);((e,t,r,n,o)=>{e.dispatch("TableSelectionChange",{cells:t,start:r,finish:n,otherCells:o})})(e,t,r,n,s)}))}),(()=>(e=>{e.dispatch("TableSelectionClear")})(e)));e.on("init",(r=>{var o=e.getWin(),a=ua(e),i=ma(e),l=ku(o,a,i,n),s=_u(o,a,i,n),d=((e,t,r,n)=>{var o=Su(e);return(e,a)=>{n.clearBeforeUpdate(t),Ia(e,a,r).each((e=>{var r=e.boxes.getOr([]);n.selectRange(t,r,e.start,e.finish),o.selectContents(a),o.collapseSelection()}))}})(o,a,i,n);e.on("TableSelectorChange",(e=>d(e.start,e.finish)));var c,u,m=(t,r)=>{(e=>!0===e.raw.shiftKey)(t)&&(r.kill&&t.kill(),r.selection.each((t=>{var r=ou.relative(t.start,t.finish),n=Vd(o,r);e.selection.setRng(n)})))},f=e=>0===e.button,p=(c=qc(Te.fromDom(a)),u=qc(0),{touchEnd:e=>{var t=Te.fromDom(e.target);if(ye("td")(t)||ye("th")(t)){var r=c.get(),n=u.get();Ae(r,t)&&e.timeStamp-n<300&&(e.preventDefault(),d(t,t))}c.set(t),u.set(e.timeStamp)}});e.on("dragstart",(e=>{l.clearstate()})),e.on("mousedown",(e=>{f(e)&&Wu(e)&&l.mousedown($u(e))})),e.on("mouseover",(e=>{var t;void 0!==(t=e).buttons&&0==(1&t.buttons)||!Wu(e)||l.mouseover($u(e))})),e.on("mouseup",(e=>{f(e)&&Wu(e)&&l.mouseup($u(e))})),e.on("touchend",p.touchEnd),e.on("keyup",(t=>{var r=$u(t);if(r.raw.shiftKey&&eu(r.raw.which)){var n=e.selection.getRng(),o=Te.fromDom(n.startContainer),a=Te.fromDom(n.endContainer);s.keyup(r,o,n.startOffset,a,n.endOffset).each((e=>{m(r,e)}))}})),e.on("keydown",(r=>{var n=$u(r);t.hide();var o=e.selection.getRng(),a=Te.fromDom(o.startContainer),i=Te.fromDom(o.endContainer),l=pn(tu,ru)(Te.fromDom(e.selection.getStart()));s.keydown(n,a,o.startOffset,i,o.endOffset,l).each((e=>{m(n,e)})),t.show()})),e.on("NodeChange",(()=>{var t=e.selection,r=Te.fromDom(t.getStart()),o=Te.fromDom(t.getEnd());La(nr,[r,o]).fold((()=>n.clear(a)),g)}))})),e.on("PreInit",(()=>{e.serializer.addTempAttr(ei.firstSelected),e.serializer.addTempAttr(ei.lastSelected)}));return{getSelectedCells:()=>((e,t,r,n)=>{switch(e.tag){case"none":return t();case"single":return n(e.element);case"multiple":return r(e.elements)}})(r.get(),p([]),(e=>P(e,(e=>e.dom))),(e=>[e.dom])),clearSelectedCells:e=>n.clear(Te.fromDom(e))}},Vu=e=>{var t=[];return{bind:e=>{if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=I(t,(t=>t!==e))},trigger:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var a={};L(e,((e,t)=>{a[e]=n[t]})),L(t,(e=>{e(a)}))}}},Ku=e=>({registry:Z(e,(e=>({bind:e.bind,unbind:e.unbind}))),trigger:Z(e,(e=>e.trigger))}),Gu=e=>e.slice(0).sort(),Yu=(e,t,r)=>{if(0===t.length)throw new Error("You must specify at least one required field.");var n;return((e,t)=>{if(!l(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");L(t,(t=>{if(!a(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")}))})("required",t),n=Gu(t),U(n,((e,t)=>t<n.length-1&&e===n[t+1])).each((e=>{throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")})),n=>{var o=X(n);W(t,(e=>O(o,e)))||((e,t)=>{throw new Error("All required keys ("+Gu(e).join(", ")+") were not specified. Specified keys were: "+Gu(t).join(", ")+".")})(t,o),e(t,o);var a=I(t,(e=>!r.validate(n[e],e)));return a.length>0&&((e,t)=>{throw new Error("All values need to be of type: "+t+". Keys ("+Gu(e).join(", ")+") were not.")})(a,r.label),n}},Xu=(e,t)=>{var r=I(t,(t=>!O(e,t)));r.length>0&&(e=>{throw new Error("Unsupported keys for object: "+Gu(e).join(", "))})(r)},Qu=e=>((e,t)=>Yu(e,t,{validate:m,label:"function"}))(Xu,e),Ju=Qu(["compare","extract","mutate","sink"]),Zu=Qu(["element","start","stop","destroy"]),em=Qu(["forceDrop","drop","move","delayDrop"]),tm=()=>{var e=x.none(),t=Ku({move:Vu(["info"])});return{onEvent:(r,n)=>{n.extract(r).each((r=>{var o=((t,r)=>{var n=e.map((e=>t.compare(e,r)));return e=x.some(r),n})(n,r);o.each((e=>{t.trigger.move(e)}))}))},reset:()=>{e=x.none()},events:t.registry}},rm=()=>{var e,t=(e=Ku({move:Vu(["info"])}),{onEvent:g,reset:g,events:e.registry}),r=tm(),n=t;return{on:()=>{n.reset(),n=r},off:()=>{n.reset(),n=t},isOn:()=>n===r,onEvent:(e,t)=>{n.onEvent(e,t)},events:r.events}},nm=(e,t,r)=>{var n,o,a,i,l=!1,d=Ku({start:Vu([]),stop:Vu([])}),c=rm(),u=()=>{g.stop(),c.isOn()&&(c.off(),d.trigger.stop())},m=(n=u,o=200,a=null,{cancel:i=()=>{s(a)||(clearTimeout(a),a=null)},throttle:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i(),a=setTimeout((()=>{a=null,n.apply(null,t)}),o)}});c.events.move.bind((r=>{t.mutate(e,r.info)}));var f=e=>function(){if(l){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.apply(null,r)}},g=t.sink(em({forceDrop:u,drop:f(u),move:f((e=>{m.cancel(),c.onEvent(e,t)})),delayDrop:f(m.throttle)}),r);return{element:g.element,go:e=>{g.start(e),c.on(),d.trigger.start()},on:()=>{l=!0},off:()=>{l=!1},isActive:()=>l,destroy:()=>{g.destroy()},events:d.registry}},om=e=>{var t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},am=om("ephox-dragster").resolve,im=Ju({compare:(e,t)=>Sn(t.left-e.left,t.top-e.top),extract:e=>x.some(Sn(e.x,e.y)),sink:(e,t)=>{var r=(e=>{var t=n({layerClass:am("blocker")},e),r=Te.fromTag("div");return we(r,"role","presentation"),Ut(r,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Ou(r,am("blocker")),Ou(r,t.layerClass),{element:p(r),destroy:()=>{Je(r)}}})(t),o=Hu(r.element(),"mousedown",e.forceDrop),a=Hu(r.element(),"mouseup",e.drop),i=Hu(r.element(),"mousemove",e.move),l=Hu(r.element(),"mouseout",e.delayDrop);return Zu({element:r.element,start:e=>{Ke(e,r.element())},stop:()=>{Je(r.element())},destroy:()=>{r.destroy(),a.unbind(),i.unbind(),l.unbind(),o.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}}),lm=om("ephox-snooker").resolve,sm=()=>{var e=Ku({drag:Vu(["xDelta","yDelta","target"])}),t=x.none(),r=(()=>{var e=Ku({drag:Vu(["xDelta","yDelta"])});return{mutate:(t,r)=>{e.trigger.drag(t,r)},events:e.registry}})();r.events.drag.bind((r=>{t.each((t=>{e.trigger.drag(r.xDelta,r.yDelta,t)}))}));return{assign:e=>{t=x.some(e)},get:()=>t,mutate:r.mutate,events:e.registry}},dm=lm("resizer-bar"),cm=lm("resizer-rows"),um=lm("resizer-cols"),mm=e=>{var t=Ct(e.parent(),"."+dm);L(t,Je)},fm=(e,t,r)=>{var n=e.origin();L(t,(t=>{t.each((t=>{var o=r(n,t);Ou(o,dm),Ke(e.parent(),o)}))}))},gm=(e,t,r,n)=>{fm(e,t,((e,t)=>{var o,a,i,l,s,d,c=(o=t.col,a=t.x-e.left,i=r.top-e.top,l=7,s=n,d=Te.fromTag("div"),Ut(d,{position:"absolute",left:a-l/2+"px",top:i+"px",height:s+"px",width:l+"px"}),Se(d,{"data-column":o,role:"presentation"}),d);return Ou(c,um),c}))},pm=(e,t,r,n)=>{fm(e,t,((e,t)=>{var o=((e,t,r,n,o)=>{var a=Te.fromTag("div");return Ut(a,{position:"absolute",left:t+"px",top:r-o/2+"px",height:o+"px",width:n+"px"}),Se(a,{"data-row":e,role:"presentation"}),a})(t.row,r.left-e.left,t.y-e.top,n,7);return Ou(o,cm),o}))},vm=(e,t,r,n,o)=>{var a=kn(r),i=t.isResizable,l=n.length>0?Mn.positions(n,r):[],s=l.length>0?((e,t)=>$(e.all,((e,r)=>t(e.element)?[r]:[])))(e,i):[],d=I(l,((e,t)=>A(s,(e=>t===e))));pm(t,d,a,qr(r));var c=o.length>0?Un.positions(o,r):[],u=c.length>0?((e,t)=>{var r=[];return B(e.grid.columns,(n=>{var o=cn.getColumnAt(e,n).map((e=>e.element));o.forall(t)&&r.push(n)})),I(r,(r=>{var n=cn.filterItems(e,(e=>e.column===r));return W(n,(e=>t(e.element)))}))})(e,i):[],m=I(c,((e,t)=>A(u,(e=>t===e))));gm(t,m,a,yn(r))},hm=(e,t)=>{if(mm(e),e.isResizable(t)){var r=cn.fromTable(t),n=fn(r),o=un(r);vm(r,e,t,n,o)}},bm=(e,t)=>{var r=Ct(e.parent(),"."+dm);L(r,t)},ym=e=>{bm(e,(e=>{jt(e,"display","none")}))},Cm=e=>{bm(e,(e=>{jt(e,"display","block")}))},wm=lm("resizer-bar-dragging"),Sm=e=>{var t=sm(),r=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!==(t=r.mode)&&void 0!==t?t:im;return nm(e,n,r)}(t,{}),n=x.none(),o=(e,t)=>x.from(xe(e,t));t.events.drag.bind((e=>{o(e.target,"data-row").each((t=>{var r=Yt(e.target,"top");jt(e.target,"top",r+e.yDelta+"px")})),o(e.target,"data-column").each((t=>{var r=Yt(e.target,"left");jt(e.target,"left",r+e.xDelta+"px")}))}));var a=(e,t)=>Yt(e,t)-qt(e,"data-initial-"+t,0);r.events.stop.bind((()=>{t.get().each((t=>{n.each((r=>{o(t,"data-row").each((e=>{var n=a(t,"top");Ee(t,"data-initial-top"),c.trigger.adjustHeight(r,n,parseInt(e,10))})),o(t,"data-column").each((e=>{var n=a(t,"left");Ee(t,"data-initial-left"),c.trigger.adjustWidth(r,n,parseInt(e,10))})),hm(e,r)}))}))}));var i=(n,o)=>{c.trigger.startAdjust(),t.assign(n),we(n,"data-initial-"+o,Yt(n,o)),Ou(n,wm),jt(n,"opacity","0.2"),r.go(e.parent())},l=Hu(e.parent(),"mousedown",(e=>{var t;t=e.target,Au(t,cm)&&i(e.target,"top"),(e=>Au(e,um))(e.target)&&i(e.target,"left")})),s=t=>Ae(t,e.view()),d=Hu(e.view(),"mouseover",(t=>{var o;(o=t.target,_t(o,"table",s).filter(da)).fold((()=>{pt(t.target)&&mm(e)}),(t=>{r.isActive()&&(n=x.some(t),hm(e,t))}))})),c=Ku({adjustHeight:Vu(["table","delta","row"]),adjustWidth:Vu(["table","delta","column"]),startAdjust:Vu([])});return{destroy:()=>{l.unbind(),d.unbind(),r.destroy(),mm(e)},refresh:t=>{hm(e,t)},on:r.on,off:r.off,hideBars:b(ym,e),showBars:b(Cm,e),events:c.registry}},xm=(e,t,r)=>{var n=Mn,o=Un,a=Sm(e),i=Ku({beforeResize:Vu(["table","type"]),afterResize:Vu(["table","type"]),startDrag:Vu([])});return a.events.adjustHeight.bind((e=>{var t=e.table;i.trigger.beforeResize(t,"row");var r=n.delta(e.delta,t);Bl(t,r,e.row,n),i.trigger.afterResize(t,"row")})),a.events.startAdjust.bind((e=>{i.trigger.startDrag()})),a.events.adjustWidth.bind((e=>{var n=e.table;i.trigger.beforeResize(n,"col");var a=o.delta(e.delta,n),l=r(n);Al(n,a,e.column,t,l),i.trigger.afterResize(n,"col")})),{on:a.on,off:a.off,refreshBars:a.refresh,hideBars:a.hideBars,showBars:a.showBars,destroy:a.destroy,events:i.registry}},km=(e,t)=>{var r=he(e)?(e=>Te.fromDom(Me(e).dom.documentElement))(e):e;return{parent:p(r),view:p(e),origin:p(Sn(0,0)),isResizable:t}},Em=(e,t,r)=>({parent:p(t),view:p(e),origin:p(Sn(0,0)),isResizable:r}),Nm=()=>{var e=Te.fromTag("div");return Ut(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ke(vt(Te.fromDom(document)),e),e},_m=e=>u(e)&&"TABLE"===e.nodeName,Tm="bar-",Dm=e=>"false"!==xe(e,"data-mce-resize"),Rm=e=>{var t,r,n=Vc(),o=Vc(),a=Vc(),i=t=>Ws(e,t),l=()=>Xo(e)?Ci():yi(),s=(n,o,a)=>{var s=Pt(o,"e");if(""===r&&ud(n),a!==t&&""!==r){jt(n,"width",r);var d=l(),c=i(n),u=Xo(e)||s?(e=>wi(e).columns)(n)-1:0;Al(n,a-t,u,d,c)}else if((e=>/^(\d+(\.\d+)?)%$/.test(e))(r)){var m=parseFloat(r.replace("%",""));jt(n,"width",a*m/t+"%")}(e=>/^(\d+(\.\d+)?)px$/.test(e))(r)&&(e=>{var t=cn.fromTable(e);cn.hasColumns(t)||L(tr(e),(e=>{var t=zt(e,"width");jt(e,"width",t),Ee(e,"width")}))})(n)},d=()=>{o.on((e=>{e.destroy()})),a.on((t=>{((e,t)=>{e.inline&&Je(t.parent())})(e,t)}))};e.on("init",(()=>{var t=((e,t)=>e.inline?Em(Te.fromDom(e.getBody()),Nm(),t):km(Te.fromDom(e.getDoc()),t))(e,Dm);if(a.set(t),(e=>{var t=e.options.get("object_resizing");return O(t.split(","),"table")})(e)&&ra(e)){var r=l(),s=xm(t,r,i);s.on(),s.events.startDrag.bind((t=>{n.set(e.selection.getRng())})),s.events.beforeResize.bind((t=>{var r=t.table.dom;((e,t,r,n,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:n,origin:o})})(e,r,pa(r),va(r),Tm+t.type)})),s.events.afterResize.bind((t=>{var r=t.table,o=r.dom;fa(r),n.on((t=>{e.selection.setRng(t),e.focus()})),((e,t,r,n,o)=>{e.dispatch("ObjectResized",{target:t,width:r,height:n,origin:o})})(e,o,pa(o),va(o),Tm+t.type),e.undoManager.add()})),o.set(s)}})),e.on("ObjectResizeStart",(n=>{var o=n.target;if(_m(o)){var a=Te.fromDom(o);L(e.dom.select(".mce-clonedresizable"),(t=>{e.dom.addClass(t,"mce-"+Yo(e)+"-columns")})),!sd(a)&&ea(e)?md(a):!ld(a)&&Zo(e)&&ud(a),dd(a)&&Bt(n.origin,Tm)&&ud(a),t=n.width,r=ta(e)?"":((e,t)=>{var r=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return x.from(r).filter(Mt)})(e,o).getOr("")}})),e.on("ObjectResized",(t=>{var r=t.target;if(_m(r)){var n=Te.fromDom(r),o=t.origin;Bt(o,"corner-")&&s(n,o,t.width),fa(n),Us(e,n.dom,zs)}})),e.on("SwitchMode",(()=>{o.on((t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()}))})),e.on("dragstart dragend",(e=>{o.on((t=>{"dragstart"===e.type?(t.hideBars(),t.off()):(t.on(),t.showBars())}))})),e.on("remove",(()=>{d()}));return{refresh:e=>{o.on((t=>t.refreshBars(Te.fromDom(e))))},hide:()=>{o.on((e=>e.hideBars()))},show:()=>{o.on((e=>e.showBars()))}}},Om=e=>{(e=>{var t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{var t=O(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{var t=O(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0}),t("table_merge_content_on_paste",{processor:"boolean",default:!0})})(e);var t=Rm(e),r=qu(e,t),n=qs(e,t,r);return Bd(e,n),((e,t)=>{var r=ma(e),n=t=>oi(ga(e)).bind((n=>nr(n,r).map((r=>{var o=ti(ai(e),r,n);return t(r,o)})))).getOr("");J({mceTableRowType:()=>n(t.getTableRowType),mceTableCellType:()=>n(t.getTableCellType),mceTableColType:()=>n(t.getTableColType)},((t,r)=>e.addQueryValueHandler(r,t)))})(e,n),ii(e,n),{getSelectedCells:r.getSelectedCells,clearSelectedCells:r.clearSelectedCells}},Am=e=>({table:Om(e)});e.add("dom",Am)}()},41:function(e,t,r){r(42)},42:function(e,t){function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=e=>t=>{return i=typeof(r=t),(null===r?"null":"object"===i&&Array.isArray(r)?"array":"object"===i&&(l=n=r,(o=String).prototype.isPrototypeOf(l)||(null===(a=n.constructor)||void 0===a?void 0:a.name)===o.name)?"string":i)===e;var r,n,o,a,i,l},o=e=>t=>typeof t===e,a=r("string"),i=r("array"),l=o("boolean"),s=(e=void 0,t=>e===t),d=e=>!(e=>null==e)(e),c=o("function"),u=o("number"),m=()=>{},f=e=>()=>e,g=e=>e,p=(e,t)=>e===t;function v(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=r.concat(n);return e.apply(null,a)}}var h=e=>{e()},b=f(!1),y=f(!0);class C{constructor(e,t){this.tag=e,this.value=t}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return d(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);var w=Object.keys,S=Object.hasOwnProperty,x=(e,t)=>{for(var r=w(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}},k=(e,t)=>{var r,n={};return((e,t,r,n)=>{x(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))})(e,t,(r=n,(e,t)=>{r[t]=e}),m),n},E=e=>((e,t)=>{var r=[];return x(e,((e,n)=>{r.push(t(e,n))})),r})(e,g),N=e=>w(e).length,_=(e,t)=>T(e,t)?C.from(e[t]):C.none(),T=(e,t)=>S.call(e,t),D=(e,t)=>T(e,t)&&void 0!==e[t]&&null!==e[t],R=Array.prototype.indexOf,O=Array.prototype.push,A=(e,t)=>((e,t)=>R.call(e,t))(e,t)>-1,B=(e,t)=>{for(var r=0,n=e.length;r<n;r++){if(t(e[r],r))return!0}return!1},P=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(t(n));return r},L=(e,t)=>{for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n},M=(e,t)=>{for(var r=0,n=e.length;r<n;r++){t(e[r],r)}},I=(e,t)=>{for(var r=[],n=0,o=e.length;n<o;n++){var a=e[n];t(a,n)&&r.push(a)}return r},F=(e,t,r)=>(M(e,((e,n)=>{r=t(r,e,n)})),r),j=(e,t)=>((e,t,r)=>{for(var n=0,o=e.length;n<o;n++){var a=e[n];if(t(a,n))return C.some(a);if(r(a,n))break}return C.none()})(e,t,b),U=(e,t)=>(e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!i(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);O.apply(t,e[r])}return t})(L(e,t)),z=(e,t)=>{for(var r=0,n=e.length;r<n;++r){if(!0!==t(e[r],r))return!1}return!0},H=(e,t)=>t>=0&&t<e.length?C.some(e[t]):C.none(),$=(e,t)=>{for(var r=0;r<e.length;r++){var n=t(e[r],r);if(n.isSome())return n}return C.none()},W=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},q={fromHtml:(e,t)=>{var r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){var n="HTML does not have a single root node";throw console.error(n,e),new Error(n)}return W(r.childNodes[0])},fromTag:(e,t)=>{var r=(t||document).createElement(e);return W(r)},fromText:(e,t)=>{var r=(t||document).createTextNode(e);return W(r)},fromDom:W,fromPoint:(e,t,r)=>C.from(e.dom.elementFromPoint(t,r)).map(W)},V=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;var n=r;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},K=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,G=(e,t)=>e.dom===t.dom,Y=V;"undefined"!=typeof window?window:Function("return this;")();var X,Q=e=>e.dom.nodeName.toLowerCase(),J=e=>e.dom.nodeType,Z=e=>t=>J(t)===e,ee=e=>8===J(e)||"#comment"===Q(e),te=Z(1),re=Z(3),ne=Z(9),oe=Z(11),ae=e=>t=>te(t)&&Q(t)===e,ie=e=>{return ne(e)?e:(t=e,q.fromDom(t.dom.ownerDocument));var t},le=e=>C.from(e.dom.parentNode).map(q.fromDom),se=(e,t)=>{for(var r=c(t)?t:b,n=e.dom,o=[];null!==n.parentNode&&void 0!==n.parentNode;){var a=n.parentNode,i=q.fromDom(a);if(o.push(i),!0===r(i))break;n=a}return o},de=e=>C.from(e.dom.previousSibling).map(q.fromDom),ce=e=>C.from(e.dom.nextSibling).map(q.fromDom),ue=e=>L(e.dom.childNodes,q.fromDom),me=e=>((e,t)=>{var r=e.dom.childNodes;return C.from(r[t]).map(q.fromDom)})(e,0),fe=c(Element.prototype.attachShadow)&&c(Node.prototype.getRootNode),ge=fe?e=>q.fromDom(e.dom.getRootNode()):ie,pe=e=>{var t,r=ge(e);return oe(t=r)&&d(t.dom.host)?C.some(r):C.none()},ve=e=>q.fromDom(e.dom.host),he=e=>{var t=re(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var r,n,o=t.ownerDocument;return pe(q.fromDom(t)).fold((()=>o.body.contains(t)),(r=he,n=ve,e=>r(n(e))))},be=(e,t,r,n,o)=>e(r,n)?C.some(r):c(o)&&o(r)?C.none():t(r,n,o),ye=(e,t,r)=>{for(var n=e.dom,o=c(r)?r:b;n.parentNode;){n=n.parentNode;var a=q.fromDom(n);if(t(a))return C.some(a);if(o(a))break}return C.none()},Ce=(e,t,r)=>ye(e,(e=>V(e,t)),r),we=(e,t)=>((e,t)=>j(e.dom.childNodes,(e=>t(q.fromDom(e)))).map(q.fromDom))(e,(e=>V(e,t))),Se=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return K(r)?C.none():C.from(r.querySelector(e)).map(q.fromDom)})(t,e),xe=(e,t,r)=>be(((e,t)=>V(e,t)),Ce,e,t,r),ke=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return he(e)?e.dom.isContentEditable:(t=e,xe(t,"[contenteditable]")).fold(f(r),(e=>"true"===Ee(e)))},Ee=e=>e.dom.contentEditable,Ne=e=>t=>G(t,(e=>q.fromDom(e.getBody()))(e)),_e=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,Te=e=>q.fromDom(e.selection.getStart()),De=e=>{return(t=e,r=ae("table"),be(((e,t)=>t(e)),ye,t,r,n)).forall(ke);var t,r,n},Re=(e,t)=>{var r=[];return M(ue(e),(e=>{t(e)&&(r=r.concat([e])),r=r.concat(Re(e,t))})),r},Oe=(e,t)=>((e,t)=>I(ue(e),t))(e,(e=>V(e,t))),Ae=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return K(r)?[]:L(r.querySelectorAll(e),q.fromDom)})(t,e),Be=(e,t,r)=>{if(!(a(r)||l(r)||u(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},Pe=(e,t,r)=>{Be(e.dom,t,r)},Le=(e,t)=>{var r=e.dom.getAttribute(t);return null===r?void 0:r},Me=(e,t)=>C.from(Le(e,t)),Ie=(e,t)=>{e.dom.removeAttribute(t)},Fe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;return e.exists((e=>r(e,t)))},je=(e,t,r)=>e.isSome()&&t.isSome()?C.some(r(e.getOrDie(),t.getOrDie())):C.none(),Ue=(e,t)=>((e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t)(e,t,0),ze=(X=/^\s+|\s+$/g,e=>e.replace(X,"")),He=e=>e.length>0,$e=function(e){var t=parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:10);return isNaN(t)?C.none():C.some(t)},We=e=>void 0!==e.style&&c(e.style.getPropertyValue),qe=(e,t,r)=>{((e,t,r)=>{if(!a(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);We(e)&&e.style.setProperty(t,r)})(e.dom,t,r)},Ve=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||he(e)?n:Ke(r,t)},Ke=(e,t)=>We(e)?e.style.getPropertyValue(t):"",Ge=(e,t)=>{var r=e.dom,n=Ke(r,t);return C.from(n).filter((e=>e.length>0))},Ye=(e,t)=>{((e,t)=>{We(e)&&e.style.removeProperty(t)})(e.dom,t),Fe(Me(e,"style").map(ze),"")&&Ie(e,"style")},Xe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Me(e,t).map((e=>parseInt(e,10))).getOr(r)},Qe=(e,t)=>Je(e,t,y),Je=(e,t,r)=>U(ue(e),(e=>V(e,t)?r(e)?[e]:[]:Je(e,t,r))),Ze=["tfoot","thead","tbody","colgroup"],et=(e,t,r)=>({element:e,rowspan:t,colspan:r}),tt=(e,t,r)=>({element:e,cells:t,section:r}),rt=(e,t)=>function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return r(t)?C.none():A(e,Q(t))?C.some(t):Ce(t,e.join(","),(e=>V(e,"table")||r(e)))}(["td","th"],e,t),nt=(e,t)=>xe(e,"table",t),ot=e=>Qe(e,"tr"),at=e=>nt(e).fold(f([]),(e=>Oe(e,"colgroup"))),it=(e,t)=>L(e,(e=>{if("colgroup"===Q(e)){var r=L((e=>V(e,"colgroup")?Oe(e,"col"):U(at(e),(e=>Oe(e,"col"))))(e),(e=>{var t=Xe(e,"span",1);return et(e,1,t)}));return tt(e,r,"colgroup")}var n=L((e=>Qe(e,"th,td"))(e),(e=>{var t=Xe(e,"rowspan",1),r=Xe(e,"colspan",1);return et(e,t,r)}));return tt(e,n,t(e))})),lt=e=>le(e).map((e=>{var t=Q(e);return(e=>A(Ze,e))(t)?t:"tbody"})).getOr("tbody"),st=e=>Me(e,"data-snooker-locked-cols").bind((e=>C.from(e.match(/\d+/g)))).map((e=>((e,t)=>{for(var r={},n=0,o=e.length;n<o;n++){var a=e[n];r[String(a)]=t(a,n)}return r})(e,y))),dt=(e,t)=>e+","+t,ct=(e,t)=>{var r=U(e.all,(e=>e.cells));return I(r,t)},ut=e=>{var t,r={},n=[],o=(t=e,H(t,0)).map((e=>e.element)).bind(nt).bind(st).getOr({}),a=0,i=0,l=0,s=((e,t)=>{for(var r=[],n=[],o=0,a=e.length;o<a;o++){var i=e[o];(t(i,o)?r:n).push(i)}return{pass:r,fail:n}})(e,(e=>"colgroup"===e.section)),d=s.pass,c=s.fail;M(c,(e=>{var t=[];M(e.cells,(e=>{for(var n=0;void 0!==r[dt(l,n)];)n++;for(var a=D(o,n.toString()),s=((e,t,r,n,o,a)=>({element:e,rowspan:t,colspan:r,row:n,column:o,isLocked:a}))(e.element,e.rowspan,e.colspan,l,n,a),d=0;d<e.colspan;d++)for(var c=0;c<e.rowspan;c++){var u=n+d,m=dt(l+c,u);r[m]=s,i=Math.max(i,u+1)}t.push(s)})),a++,n.push(tt(e.element,t,e.section)),l++}));var u=(e=>H(e,e.length-1))(d).map((e=>{var t=(e=>{var t={},r=0;return M(e.cells,(e=>{var n=e.colspan;P(n,(o=>{var a=r+o;t[a]=((e,t,r)=>({element:e,colspan:t,column:r}))(e.element,n,a)})),r+=n})),t})(e),r=((e,t)=>({element:e,columns:t}))(e.element,E(t));return{colgroups:[r],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),m=u.columns,f=u.colgroups,g=((e,t)=>({rows:e,columns:t}))(a,i);return{grid:g,access:r,all:n,columns:m,colgroups:f}},mt=e=>{var t=(e=>{var t=ot(e),r=[...at(e),...t];return it(r,lt)})(e);return ut(t)},ft=(e,t,r)=>C.from(e.access[dt(t,r)]),gt=(e,t,r)=>{var n=ct(e,(e=>r(t,e.element)));return n.length>0?C.some(n[0]):C.none()},pt=e=>U(e.all,(e=>e.cells)),vt=(e,t)=>C.from(e.columns[t]),ht=tinymce.util.Tools.resolve("tinymce.util.Tools"),bt=(e,t,r)=>{for(var n,o=e.select("td,th",t),a=0;a<o.length;a++){var i=e.getStyle(o[a],r);if(s(n)&&(n=i),n!==i)return""}return n},yt=(e,t,r)=>{ht.each("left center right".split(" "),(n=>{n!==r&&e.formatter.remove("align"+n,{},t)})),r&&e.formatter.apply("align"+r,{},t)},Ct=(e,t,r)=>{e.dispatch("TableModified",n(n({},r),{},{table:t}))},wt=(e,t)=>{return(r=e,n=parseFloat(r),isNaN(n)?C.none():C.some(n)).getOr(t);var r,n},St=(e,t,r)=>wt(Ve(e,t),r),xt=(e,t)=>{var r=e.dom,n=r.getBoundingClientRect().width||r.offsetWidth;return"border-box"===t?n:((e,t,r,n)=>t-St(e,`padding-${r}`,0)-St(e,`padding-${n}`,0)-St(e,`border-${r}-width`,0)-St(e,`border-${n}-width`,0))(e,n,"left","right")},kt=e=>xt(e,"content-box"),Et=tinymce.util.Tools.resolve("tinymce.Env"),Nt=P(5,(e=>{var t=`${e+1}px`;return{title:t,value:t}})),_t=L(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],(e=>({title:e,value:e.toLowerCase()}))),Tt="100%",Dt=e=>{var t,r=e.dom,n=null!==(t=r.getParent(e.selection.getStart(),r.isBlock))&&void 0!==t?t:e.getBody();return kt(q.fromDom(n))+"px"},Rt=e=>t=>t.options.get(e),Ot=Rt("table_sizing_mode"),At=Rt("table_border_widths"),Bt=Rt("table_border_styles"),Pt=Rt("table_cell_advtab"),Lt=Rt("table_row_advtab"),Mt=Rt("table_advtab"),It=Rt("table_appearance_options"),Ft=Rt("table_grid"),jt=Rt("table_style_by_css"),Ut=Rt("table_cell_class_list"),zt=Rt("table_row_class_list"),Ht=Rt("table_class_list"),$t=Rt("table_toolbar"),Wt=Rt("table_background_color_map"),qt=Rt("table_border_color_map"),Vt=e=>"fixed"===Ot(e),Kt=e=>"responsive"===Ot(e),Gt=e=>{var t=e.options,r=t.get("table_default_styles");return t.isSet("table_default_styles")?r:((e,t)=>Kt(e)||!jt(e)?t:Vt(e)?n(n({},t),{},{width:Dt(e)}):n(n({},t),{},{width:Tt}))(e,r)},Yt=e=>{var t=e.options,r=t.get("table_default_attributes");return t.isSet("table_default_attributes")?r:((e,t)=>Kt(e)||jt(e)?t:Vt(e)?n(n({},t),{},{width:Dt(e)}):n(n({},t),{},{width:Tt}))(e,r)},Xt=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Qt=(e,t,r)=>{var n=gt(e,t,G),o=gt(e,r,G);return n.bind((e=>o.map((t=>{return r=e,n=t,o=Math.min(r.row,n.row),a=Math.min(r.column,n.column),i=Math.max(r.row+r.rowspan-1,n.row+n.rowspan-1),l=Math.max(r.column+r.colspan-1,n.column+n.colspan-1),{startRow:o,startCol:a,finishRow:i,finishCol:l};var r,n,o,a,i,l}))))},Jt=(e,t,r)=>Qt(e,t,r).bind((t=>((e,t)=>{for(var r=!0,n=v(Xt,t),o=t.startRow;o<=t.finishRow;o++)for(var a=t.startCol;a<=t.finishCol;a++)r=r&&ft(e,o,a).exists(n);return r?C.some(t):C.none()})(e,t))),Zt=mt,er=(e,t)=>{le(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},tr=(e,t)=>{ce(e).fold((()=>{le(e).each((e=>{nr(e,t)}))}),(e=>{er(e,t)}))},rr=(e,t)=>{me(e).fold((()=>{nr(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))},nr=(e,t)=>{e.dom.appendChild(t.dom)},or=(e,t)=>{er(e,t),nr(t,e)},ar=(e,t)=>{M(t,((r,n)=>{var o=0===n?e:t[n-1];tr(o,r)}))},ir=(e,t)=>{M(t,(t=>{nr(e,t)}))},lr=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},sr=e=>{var t=ue(e);t.length>0&&ar(e,t),lr(e)},dr=((e,t)=>{var r=t=>e(t)?C.from(t.dom.nodeValue):C.none();return{get:n=>{if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return r(n).getOr("")},getOption:r,set:(r,n)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=n}}})(re,"text"),cr=e=>dr.get(e),ur=(e,t)=>dr.set(e,t),mr=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],fr=(e,t,r,n)=>{var o,a,i=t(e,r);return o=(r,n)=>{var o=t(e,n);return gr(e,r,o)},a=i,((e,t)=>{for(var r=e.length-1;r>=0;r--)t(e[r],r)})(n,((e,t)=>{a=o(a,e,t)})),a},gr=(e,t,r)=>t.bind((t=>r.filter(v(e.eq,t)))),pr=(e,t,r)=>r.length>0?((e,t,r,n)=>n(e,t,r[0],r.slice(1)))(e,t,r,fr):C.none(),vr={up:f({selector:Ce,closest:xe,predicate:ye,all:se}),down:f({selector:Ae,predicate:Re}),styles:f({get:Ve,getRaw:Ge,set:qe,remove:Ye}),attrs:f({get:Le,set:Pe,remove:Ie,copyTo:(e,t)=>{((e,t)=>{var r=e.dom;x(t,((e,t)=>{Be(r,t,e)}))})(t,F(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}))}}),insert:f({before:er,after:tr,afterAll:ar,append:nr,appendAll:ir,prepend:rr,wrap:or}),remove:f({unwrap:sr,remove:lr}),create:f({nu:q.fromTag,clone:e=>q.fromDom(e.dom.cloneNode(!1)),text:q.fromText}),query:f({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:de,nextSibling:ce}),property:f({children:ue,name:Q,parent:le,document:e=>ie(e).dom,isText:re,isComment:ee,isElement:te,isSpecial:e=>{var t=Q(e);return A(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>te(e)?Me(e,"lang"):C.none(),getText:cr,setText:ur,isBoundary:e=>!!te(e)&&("body"===Q(e)||A(mr,Q(e))),isEmptyTag:e=>!!te(e)&&A(["br","img","hr","input"],Q(e)),isNonEditable:e=>te(e)&&"false"===Le(e,"contenteditable")}),eq:G,is:Y},hr=e=>Ce(e,"table"),br=(e,t,r)=>Se(e,t).bind((t=>Se(e,r).bind((e=>{return(r=hr,n=[t,e],pr(vr,((e,t)=>r(t)),n)).map((r=>({first:t,last:e,table:r})));var r,n})))),yr=(e,t)=>((e,t)=>{var r=Ae(e,t);return r.length>0?C.some(r):C.none()})(e,t),Cr=(e,t,r)=>br(e,t,r).bind((t=>{var r=t=>G(e,t),n="thead,tfoot,tbody,table",o=Ce(t.first,n,r),a=Ce(t.last,n,r);return o.bind((e=>a.bind((r=>G(e,r)?((e,t,r)=>{var n=Zt(e);return Jt(n,t,r)})(t.table,t.first,t.last):C.none()))))})),wr=e=>L(e,q.fromDom),Sr="data-mce-selected",xr="data-mce-first-selected",kr="data-mce-last-selected",Er={selected:Sr,selectedSelector:"td["+Sr+"],th["+Sr+"]",firstSelected:xr,firstSelectedSelector:"td["+xr+"],th["+xr+"]",lastSelected:kr,lastSelectedSelector:"td["+kr+"],th["+kr+"]"},Nr=e=>(t,r)=>{var n,o=Q(t),a="col"===o||"colgroup"===o?nt(n=t).bind((e=>yr(e,Er.firstSelectedSelector))).fold(f(n),(e=>e[0])):t;return xe(a,e,r)},_r=Nr("th,td,caption"),Tr=Nr("th,td"),Dr=e=>wr(e.model.table.getSelectedCells()),Rr=(e,t)=>{var r=Tr(e),n=r.bind((e=>nt(e))).map((e=>ot(e)));return je(r,n,((e,r)=>I(r,(r=>B(wr(r.dom.cells),(r=>"1"===Le(r,t)||G(r,e))))))).getOr([])},Or=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Ar=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Br=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Pr=e=>{return(t=e,r="#",Ue(t,r)?((e,t)=>e.substring(t))(t,r.length):t).toUpperCase();var t,r},Lr=e=>(e=>Ar.test(e)||Br.test(e))(e)?C.some({value:Pr(e)}):C.none(),Mr=e=>{var t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},Ir=e=>(e=>({value:Pr(e)}))(Mr(e.red)+Mr(e.green)+Mr(e.blue)),Fr=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,jr=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Ur=(e,t,r,n)=>({red:e,green:t,blue:r,alpha:n}),zr=(e,t,r,n)=>{var o=parseInt(e,10),a=parseInt(t,10),i=parseInt(r,10),l=parseFloat(n);return Ur(o,a,i,l)},Hr=e=>{if("transparent"===e)return C.some(Ur(0,0,0,0));var t=Fr.exec(e);if(null!==t)return C.some(zr(t[1],t[2],t[3],"1"));var r=jr.exec(e);return null!==r?C.some(zr(r[1],r[2],r[3],r[4])):C.none()},$r=e=>{var t=e;return{get:()=>t,set:e=>{t=e}}},Wr=()=>{return e=e=>e.unbind(),t=$r(C.none()),r=()=>t.get().each(e),{clear:()=>{r(),t.set(C.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(C.some(e))}};var e,t,r},qr=(e,t,r)=>n=>{var o=Wr(),a=!He(r),i=()=>{var i=Dr(e),l=n=>e.formatter.match(t,{value:r},n.dom,a);a?(n.setActive(!B(i,l)),o.set(e.formatter.formatChanged(t,(e=>n.setActive(!e)),!0))):(n.setActive(z(i,l)),o.set(e.formatter.formatChanged(t,n.setActive,!1,{value:r})))};return e.initialized?i():e.on("init",i),o.clear},Vr=e=>D(e,"menu"),Kr=e=>L(e,(e=>{var t=e.text||e.title||"";return Vr(e)?{text:t,items:Kr(e.menu)}:{text:t,value:e.value}})),Gr=(e,t,r,n)=>L(t,(t=>{var o=t.text||t.title;return Vr(t)?{type:"nestedmenuitem",text:o,getSubmenuItems:()=>Gr(e,t.menu,r,n)}:{text:o,type:"togglemenuitem",onAction:()=>n(t.value),onSetup:qr(e,r,t.value)}})),Yr=(e,t)=>r=>{e.execCommand("mceTableApplyCellStyle",!1,{[t]:r})},Xr=e=>U(e,(e=>Vr(e)?[n(n({},e),{},{menu:Xr(e.menu)})]:He(e.value)?[e]:[])),Qr=(e,t,r,n)=>o=>o(Gr(e,t,r,n)),Jr=(e,t,r)=>{var n=L(t,(e=>{return{text:e.title,value:"#"+(t=e.value,Lr(t).orThunk((()=>Hr(t).map(Ir))).getOrThunk((()=>{var e=document.createElement("canvas");e.height=1,e.width=1;var r=e.getContext("2d");r.clearRect(0,0,e.width,e.height),r.fillStyle="#FFFFFF",r.fillStyle=t,r.fillRect(0,0,1,1);var n=r.getImageData(0,0,1,1).data,o=n[0],a=n[1],i=n[2],l=n[3];return Ir(Ur(o,a,i,l))}))).value,type:"choiceitem"};var t}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:n.length>0?n:void 0,allowCustomColors:!1},onAction:t=>{var n="remove"===t.value?"":t.value;e.execCommand("mceTableApplyCellStyle",!1,{[r]:n})}}]},Zr=e=>()=>{var t="header"===e.queryCommandValue("mceTableRowType")?"body":"header";e.execCommand("mceTableRowType",!1,{type:t})},en=e=>()=>{var t="th"===e.queryCommandValue("mceTableColType")?"td":"th";e.execCommand("mceTableColType",!1,{type:t})},tn=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Or}],rn=e=>tn.concat((e=>{var t=Kr(Ut(e));return t.length>0?C.some({name:"class",type:"listbox",label:"Class",items:t}):C.none()})(e).toArray()),nn=(e,t)=>{var r=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Kr(Bt(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(r):r}},on=(e,t)=>{var r=e.dom;return{setAttrib:(e,n)=>{r.setAttrib(t,e,n)},setStyle:(e,n)=>{r.setStyle(t,e,n)},setFormat:(r,n)=>{""===n?e.formatter.remove(r,{value:null},t,!0):e.formatter.apply(r,{value:n},t)}}},an=ae("th"),ln=(e,t)=>e&&t?"sectionCells":e?"section":"cells",sn=e=>{var t=I(e,(e=>an(e.element)));return 0===t.length?C.some("td"):t.length===e.length?C.some("th"):C.none()},dn=e=>{var t=L(e,(e=>(e=>{var t="thead"===e.section,r=Fe(sn(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||r?{type:"header",subType:ln(t,r)}:{type:"body"}})(e).type)),r=A(t,"header"),n=A(t,"footer");if(r||n){var o=A(t,"body");return!r||o||n?r||o||!n?C.none():C.some("footer"):C.some("header")}return C.some("body")},cn=(e,t)=>$(e.all,(e=>j(e.cells,(e=>G(t,e.element))))),un=(e,t,r)=>{var n,o,a=(e=>{for(var t=[],r=e=>{t.push(e)},n=0;n<e.length;n++)e[n].each(r);return t})(L(t.selection,(t=>rt(t).bind((t=>cn(e,t))).filter(r))));return n=a.length>0,o=a,n?C.some(o):C.none()},mn=(e,t)=>un(e,t,y),fn=(e,t)=>z(t,(t=>((e,t)=>cn(e,t).exists((e=>!e.isLocked)))(e,t))),gn=(e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>fn(e,t.cells))),pn=(e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>fn(e,t))),vn=e=>{if(!i(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],r={};return M(e,((n,o)=>{var a=w(n);if(1!==a.length)throw new Error("one and only one name per case");var l=a[0],s=n[l];if(void 0!==r[l])throw new Error("duplicate key detected:"+l);if("cata"===l)throw new Error("cannot have a case named cata (sorry)");if(!i(s))throw new Error("case arguments must be an array");t.push(l),r[l]=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.length;if(i!==s.length)throw new Error("Wrong number of arguments to case "+l+". Expected "+s.length+" ("+s+"), got "+i);return{fold:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+r.length);return r[o].apply(null,n)},match:e=>{var r=w(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!z(t,(e=>A(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[l].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:l,params:n})}}}})),r};n({},vn([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]));var hn=(e,t)=>{var r=mt(e);return mn(r,t).bind((e=>{var t=e[e.length-1],n=e[0].row,o=t.row+t.rowspan,a=r.all.slice(n,o);return dn(a)})).getOr("")},bn=e=>{return Ue(e,"rgb")?Hr(t=e).map(Ir).map((e=>"#"+e.value)).getOr(t):e;var t},yn=e=>{var t=q.fromDom(e);return{borderwidth:Ge(t,"border-width").getOr(""),borderstyle:Ge(t,"border-style").getOr(""),bordercolor:Ge(t,"border-color").map(bn).getOr(""),backgroundcolor:Ge(t,"background-color").map(bn).getOr("")}},Cn=e=>{var t=e[0],r=e.slice(1);return M(r,(e=>{M(w(t),(r=>{x(e,((e,n)=>{var o=t[r];""!==o&&r===n&&o!==e&&(t[r]="")}))}))})),t},wn=(e,t,r,n)=>j(e,(e=>!s(r.formatter.matchNode(n,t+e)))).getOr(""),Sn=v(wn,["left","center","right"],"align"),xn=v(wn,["top","middle","bottom"],"valign"),kn=e=>nt(q.fromDom(e)).map((t=>{var r={selection:wr(e.cells)};return hn(t,r)})).getOr(""),En=(e,t)=>{var r=mt(e),n=pt(r),o=I(n,(e=>B(t,(t=>G(e.element,t)))));return L(o,(e=>({element:e.element.dom,column:vt(r,e.column).map((e=>e.element.dom))})))},Nn=(e,t,r,n)=>{var o=1===t.length;M(t,(t=>{var a=t.element,i=o?y:n,l=on(e,a);((e,t,r,n)=>{n("scope")&&e.setAttrib("scope",r.scope),n("class")&&e.setAttrib("class",r.class),n("height")&&e.setStyle("height",_e(r.height)),n("width")&&t.setStyle("width",_e(r.width))})(l,t.column.map((t=>on(e,t))).getOr(l),r,i),Pt(e)&&((e,t,r)=>{r("backgroundcolor")&&e.setFormat("tablecellbackgroundcolor",t.backgroundcolor),r("bordercolor")&&e.setFormat("tablecellbordercolor",t.bordercolor),r("borderstyle")&&e.setFormat("tablecellborderstyle",t.borderstyle),r("borderwidth")&&e.setFormat("tablecellborderwidth",_e(t.borderwidth))})(l,r,i),n("halign")&&yt(e,a,r.halign),n("valign")&&((e,t,r)=>{ht.each("top middle bottom".split(" "),(n=>{n!==r&&e.formatter.remove("valign"+n,{},t)})),r&&e.formatter.apply("valign"+r,{},t)})(e,a,r.valign)}))},_n=(e,t,r,n)=>{var o=n.getData();n.close(),e.undoManager.transact((()=>{((e,t,r,n)=>{var o=k(n,((e,t)=>r[t]!==e));N(o)>0&&t.length>=1&&nt(t[0]).each((r=>{var a=En(r,t),i=N(k(o,((e,t)=>"scope"!==t&&"celltype"!==t)))>0,l=T(o,"celltype");(i||T(o,"scope"))&&Nn(e,a,n,v(T,o)),l&&((e,t)=>{e.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})})(e,n),Ct(e,r.dom,{structure:l,style:i})}))})(e,t,r,o),e.focus()}))},Tn=(e,t)=>{var r=nt(t[0]).map((r=>L(En(r,t),(t=>((e,t,r,o)=>{var a,i=e.dom,l=(e,t)=>i.getStyle(e,t)||i.getAttrib(e,t);return n({width:l(o.getOr(t),"width"),height:l(t,"height"),scope:i.getAttrib(t,"scope"),celltype:(a=t,a.nodeName.toLowerCase()),class:i.getAttrib(t,"class",""),halign:Sn(e,t),valign:xn(e,t)},r?yn(t):{})})(e,t.element,Pt(e),t.column)))));return Cn(r.getOrDie())},Dn=e=>{var t=Dr(e);if(0!==t.length){var r=Tn(e,t),n={type:"tabpanel",tabs:[{title:"General",name:"general",items:rn(e)},nn(e,"cell")]},o={type:"panel",items:[{type:"grid",columns:2,items:rn(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:Pt(e)?n:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:v(_n,e,t,r)})}},Rn=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],On=e=>Rn.concat((e=>{var t=Kr(zt(e));return t.length>0?C.some({name:"class",type:"listbox",label:"Class",items:t}):C.none()})(e).toArray()),An=(e,t,r,n)=>{var o=1===t.length?y:n;M(t,(t=>{var a=on(e,t);((e,t,r)=>{r("class")&&e.setAttrib("class",t.class),r("height")&&e.setStyle("height",_e(t.height))})(a,r,o),Lt(e)&&((e,t,r)=>{r("backgroundcolor")&&e.setStyle("background-color",t.backgroundcolor),r("bordercolor")&&e.setStyle("border-color",t.bordercolor),r("borderstyle")&&e.setStyle("border-style",t.borderstyle)})(a,r,o),n("align")&&yt(e,t,r.align)}))},Bn=(e,t,r,n)=>{var o=n.getData();n.close(),e.undoManager.transact((()=>{((e,t,r,n)=>{var o=k(n,((e,t)=>r[t]!==e));if(N(o)>0){var a=T(o,"type"),i=!a||N(o)>1;i&&An(e,t,n,v(T,o)),a&&((e,t)=>{e.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})})(e,n),nt(q.fromDom(t[0])).each((t=>Ct(e,t.dom,{structure:a,style:i})))}})(e,t,r,o),e.focus()}))},Pn=e=>{var t=Rr(Te(e),Er.selected);if(0!==t.length){var r=L(t,(t=>((e,t,r)=>{var o=e.dom;return n({height:o.getStyle(t,"height")||o.getAttrib(t,"height"),class:o.getAttrib(t,"class",""),type:kn(t),align:Sn(e,t)},r?yn(t):{})})(e,t.dom,Lt(e)))),o=Cn(r),a={type:"tabpanel",tabs:[{title:"General",name:"general",items:On(e)},nn(e,"row")]},i={type:"panel",items:[{type:"grid",columns:2,items:On(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:Lt(e)?a:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:v(Bn,e,L(t,(e=>e.dom)),o)})}},Ln=(e,t,r)=>{var n=r?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=It(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],a=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return n.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(o).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(a)},Mn=(e,t,r,n)=>{if("TD"===t.tagName||"TH"===t.tagName)a(r)&&d(n)?e.setStyle(t,r,n):e.setStyles(t,r);else if(t.children)for(var o=0;o<t.children.length;o++)Mn(e,t.children[o],r,n)},In=(e,t,r,o)=>{var a=e.dom,i={},l={},d=jt(e),c=Mt(e);if(s(r.class)||(i.class=r.class),l.height=_e(r.height),d?l.width=_e(r.width):a.getAttrib(t,"width")&&(i.width=(e=>e?e.replace(/px$/,""):"")(r.width)),d?(l["border-width"]=_e(r.border),l["border-spacing"]=_e(r.cellspacing)):(i.border=r.border,i.cellpadding=r.cellpadding,i.cellspacing=r.cellspacing),d&&t.children){var u={};if(o.border&&(u["border-width"]=_e(r.border)),o.cellpadding&&(u.padding=_e(r.cellpadding)),c&&o.bordercolor&&(u["border-color"]=r.bordercolor),!(e=>{for(var t in e)if(S.call(e,t))return!1;return!0})(u))for(var m=0;m<t.children.length;m++)Mn(a,t.children[m],u)}if(c){var f=r;l["background-color"]=f.backgroundcolor,l["border-color"]=f.bordercolor,l["border-style"]=f.borderstyle}a.setStyles(t,n(n({},Gt(e)),l)),a.setAttribs(t,n(n({},Yt(e)),i))},Fn=(e,t,r,n)=>{var o=e.dom,a=n.getData(),i=k(a,((e,t)=>r[t]!==e));n.close(),""===a.class&&delete a.class,e.undoManager.transact((()=>{if(!t){var r=$e(a.cols).getOr(1),n=$e(a.rows).getOr(1);e.execCommand("mceInsertTable",!1,{rows:n,columns:r}),t=Tr(Te(e),Ne(e)).bind((t=>nt(t,Ne(e)))).map((e=>e.dom)).getOrDie()}if(N(i)>0){var l={border:T(i,"border"),bordercolor:T(i,"bordercolor"),cellpadding:T(i,"cellpadding")};In(e,t,a,l);var s=o.select("caption",t)[0];(s&&!a.caption||!s&&a.caption)&&e.execCommand("mceTableToggleCaption"),yt(e,t,a.align)}if(e.focus(),e.addVisual(),N(i)>0){var d=T(i,"caption"),c=!d||N(i)>1;Ct(e,t,{structure:d,style:c})}}))},jn=(e,t)=>{var r,o=e.dom,a=((e,t)=>{var r,o,a,i=Gt(e),l=Yt(e),s=t?{borderstyle:_(i,"border-style").getOr(""),bordercolor:bn(_(i,"border-color").getOr("")),backgroundcolor:bn(_(i,"background-color").getOr(""))}:{};return n(n(n(n(n(n({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),i),l),s),(a=i["border-width"],jt(e)&&a?{border:a}:_(l,"border").fold((()=>({})),(e=>({border:e}))))),(r=_(i,"border-spacing").or(_(l,"cellspacing")).fold((()=>({})),(e=>({cellspacing:e}))),o=_(i,"border-padding").or(_(l,"cellpadding")).fold((()=>({})),(e=>({cellpadding:e}))),n(n({},r),o)))})(e,Mt(e));t?(a.cols="1",a.rows="1",Mt(e)&&(a.borderstyle="",a.bordercolor="",a.backgroundcolor="")):(r=o.getParent(e.selection.getStart(),"table",e.getBody()))?a=((e,t,r)=>{var o=e.dom,a=jt(e)?o.getStyle(t,"border-spacing")||o.getAttrib(t,"cellspacing"):o.getAttrib(t,"cellspacing")||o.getStyle(t,"border-spacing"),i=jt(e)?bt(o,t,"padding")||o.getAttrib(t,"cellpadding"):o.getAttrib(t,"cellpadding")||bt(o,t,"padding");return n({width:o.getStyle(t,"width")||o.getAttrib(t,"width"),height:o.getStyle(t,"height")||o.getAttrib(t,"height"),cellspacing:null!=a?a:"",cellpadding:null!=i?i:"",border:((t,r)=>{var n=Ge(q.fromDom(r),"border-width");return jt(e)&&n.isSome()?n.getOr(""):t.getAttrib(r,"border")||bt(e.dom,r,"border-width")||bt(e.dom,r,"border")||""})(o,t),caption:!!o.select("caption",t)[0],class:o.getAttrib(t,"class",""),align:Sn(e,t)},r?yn(t):{})})(e,r,Mt(e)):Mt(e)&&(a.borderstyle="",a.bordercolor="",a.backgroundcolor="");var i=Kr(Ht(e));i.length>0&&a.class&&(a.class=a.class.replace(/\s*mce\-item\-table\s*/g,""));var l={type:"grid",columns:2,items:Ln(e,i,t)},s=Mt(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[l]},nn(e,"table")]}:{type:"panel",items:[l]};e.windowManager.open({title:"Table Properties",size:"normal",body:s,onSubmit:v(Fn,e,r,a),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a})},Un=e=>{x({mceTableProps:v(jn,e,!1),mceTableRowProps:v(Pn,e),mceTableCellProps:v(Dn,e),mceInsertTableDialog:v(jn,e,!0)},((t,r)=>e.addCommand(r,(()=>{return r=t,void(De(Te(e))&&r());var r}))))},zn=g,Hn=e=>{var t=(e,t)=>Me(e,t).exists((e=>parseInt(e,10)>1));return e.length>0&&z(e,(e=>t(e,"rowspan")||t(e,"colspan")))?C.some(e):C.none()},$n=(e,t,r)=>t.length<=1?C.none():Cr(e,r.firstSelectedSelector,r.lastSelectedSelector).map((e=>({bounds:e,cells:t}))),Wn=e=>{var t=$r(C.none()),r=$r([]),n=C.none(),o=ae("caption"),a=e=>n.forall((t=>!t[e])),i=()=>_r((e=>q.fromDom(e.selection.getEnd()))(e),Ne(e)),l=()=>_r(Te(e),Ne(e)).bind((t=>{return r=je(nt(t),i().bind(nt),((r,n)=>G(r,n)?o(t)?C.some((e=>({element:e,mergable:C.none(),unmergable:C.none(),selection:[e]}))(t)):C.some(((e,t,r)=>({element:r,mergable:$n(t,e,Er),unmergable:Hn(e),selection:zn(e)}))(Dr(e),r,t)):C.none())),r.bind(g);var r})),s=e=>nt(e.element).map((t=>{var r=mt(t),n=mn(r,e).getOr([]),o=F(n,((e,t)=>(t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=r.grid.columns&&(e.onLast=!0)),e)),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:gn(r,e).isSome(),unmergeable:pn(r,e).isSome(),locked:o}})),d=()=>{t.set((e=>{var t,r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t=e.apply(null,o)}return t}})(l)()),n=t.get().bind(s),M(r.get(),h)},c=e=>(e(),r.set(r.get().concat([e])),()=>{r.set(I(r.get(),(t=>t!==e)))}),u=(r,n)=>c((()=>t.get().fold((()=>{r.setEnabled(!1)}),(t=>{r.setEnabled(!n(t)&&e.selection.isEditable())})))),m=(r,n,o)=>c((()=>t.get().fold((()=>{r.setEnabled(!1),r.setActive(!1)}),(t=>{r.setEnabled(!n(t)&&e.selection.isEditable()),r.setActive(o(t))})))),f=e=>n.exists((t=>t.locked[e])),p=(t,r)=>n=>m(n,(e=>o(e.element)),(()=>e.queryCommandValue(t)===r)),v=p("mceTableRowType","header"),y=p("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",d),{onSetupTable:e=>u(e,(e=>!1)),onSetupCellOrRow:e=>u(e,(e=>o(e.element))),onSetupColumn:e=>t=>u(t,(t=>o(t.element)||f(e))),onSetupPasteable:e=>t=>u(t,(t=>o(t.element)||e().isNone())),onSetupPasteableColumn:(e,t)=>r=>u(r,(r=>o(r.element)||e().isNone()||f(t))),onSetupMergeable:e=>u(e,(e=>a("mergeable"))),onSetupUnmergeable:e=>u(e,(e=>a("unmergeable"))),resetTargets:d,onSetupTableWithCaption:t=>m(t,b,(t=>nt(t.element,Ne(e)).exists((e=>we(e,"caption").isSome())))),onSetupTableRowHeaders:v,onSetupTableColumnHeaders:y,targets:t.get}},qn=tinymce.util.Tools.resolve("tinymce.FakeClipboard"),Vn="x-tinymce/dom-table-",Kn=Vn+"rows",Gn=Vn+"columns",Yn=e=>{var t,r=null!==(t=qn.read())&&void 0!==t?t:[];return $(r,(t=>C.from(t.getType(e))))},Xn=()=>Yn(Kn),Qn=()=>Yn(Gn),Jn=e=>t=>{var r=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",r),r(),()=>{e.off("NodeChange",r)}},Zn=e=>t=>{var r=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",r),r(),()=>{e.off("NodeChange",r)}},eo=e=>{var t=Wn(e);(e=>{var t=e.options.register;t("table_border_widths",{processor:"object[]",default:Nt}),t("table_border_styles",{processor:"object[]",default:_t}),t("table_cell_advtab",{processor:"boolean",default:!0}),t("table_row_advtab",{processor:"boolean",default:!0}),t("table_advtab",{processor:"boolean",default:!0}),t("table_appearance_options",{processor:"boolean",default:!0}),t("table_grid",{processor:"boolean",default:!Et.deviceType.isTouch()}),t("table_cell_class_list",{processor:"object[]",default:[]}),t("table_row_class_list",{processor:"object[]",default:[]}),t("table_class_list",{processor:"object[]",default:[]}),t("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),t("table_background_color_map",{processor:"object[]",default:[]}),t("table_border_color_map",{processor:"object[]",default:[]})})(e),Un(e),((e,t)=>{var r=t=>()=>e.execCommand(t),o=(t,o)=>!!e.queryCommandSupported(o.command)&&(e.ui.registry.addMenuItem(t,n(n({},o),{},{onAction:c(o.onAction)?o.onAction:r(o.command)})),!0),a=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addToggleMenuItem(t,n(n({},o),{},{onAction:c(o.onAction)?o.onAction:r(o.command)}))},i=t=>{e.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},l=[o("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:t.onSetupCellOrRow}),o("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:t.onSetupCellOrRow}),o("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:t.onSetupCellOrRow}),o("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:t.onSetupCellOrRow}),o("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:t.onSetupCellOrRow}),o("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:t.onSetupCellOrRow}),o("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:t.onSetupPasteable(Xn)}),o("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:t.onSetupPasteable(Xn)})],s=[o("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:t.onSetupColumn("onFirst")}),o("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:t.onSetupColumn("onLast")}),o("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:t.onSetupColumn("onAny")}),o("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:t.onSetupColumn("onAny")}),o("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:t.onSetupColumn("onAny")}),o("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:t.onSetupPasteableColumn(Qn,"onFirst")}),o("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:t.onSetupPasteableColumn(Qn,"onLast")})],d=[o("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:t.onSetupCellOrRow}),o("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:t.onSetupMergeable}),o("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:t.onSetupUnmergeable})];Ft(e)?e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:i}],onSetup:Zn(e)}):e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:r("mceInsertTableDialog"),onSetup:Zn(e)}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:r("mceInsertTableDialog"),onSetup:Zn(e)}),o("tableprops",{text:"Table properties",onSetup:t.onSetupTable,command:"mceTableProps"}),o("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,command:"mceTableDelete"}),A(l,!0)&&e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:f("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),A(s,!0)&&e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:f("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),A(d,!0)&&e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:f("tablecellprops tablemergecells tablesplitcells")}),e.ui.registry.addContextMenu("table",{update:()=>(t.resetTargets(),t.targets().fold(f(""),(e=>"caption"===Q(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable")))});var u=Xr(Ht(e));0!==u.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Gr(e,u,"tableclass",(t=>e.execCommand("mceTableToggleClass",!1,t))),onSetup:t.onSetupTable});var m=Xr(Ut(e));0!==m.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Gr(e,m,"tablecellclass",(t=>e.execCommand("mceTableCellToggleClass",!1,t))),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Gr(e,Or,"tablecellverticalalign",Yr(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Gr(e,At(e),"tablecellborderwidth",Yr(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Gr(e,Bt(e),"tablecellborderstyle",Yr(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Jr(e,Wt(e),"background-color"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Jr(e,qt(e),"border-color"),onSetup:t.onSetupCellOrRow})),a("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),a("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Zr(e),onSetup:t.onSetupTableRowHeaders}),a("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:en(e),onSetup:t.onSetupTableRowHeaders})})(e,t),((e,t)=>{e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Jn(e),fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});var r=t=>()=>e.execCommand(t),o=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addButton(t,n(n({},o),{},{onAction:c(o.onAction)?o.onAction:r(o.command)}))},a=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addToggleButton(t,n(n({},o),{},{onAction:c(o.onAction)?o.onAction:r(o.command)}))};o("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:t.onSetupTable}),o("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:t.onSetupTable}),o("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),o("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:t.onSetupMergeable}),o("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),o("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),o("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),o("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),o("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),o("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),o("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),o("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),o("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:t.onSetupCellOrRow}),o("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:t.onSetupCellOrRow}),o("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:t.onSetupPasteable(Xn)}),o("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:t.onSetupPasteable(Xn)}),o("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:t.onSetupColumn("onAny")}),o("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:t.onSetupColumn("onAny")}),o("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:t.onSetupPasteableColumn(Qn,"onFirst")}),o("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:t.onSetupPasteableColumn(Qn,"onLast")}),o("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Jn(e)});var i=Xr(Ht(e));0!==i.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Qr(e,i,"tableclass",(t=>e.execCommand("mceTableToggleClass",!1,t))),onSetup:t.onSetupTable});var l=Xr(Ut(e));0!==l.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Qr(e,l,"tablecellclass",(t=>e.execCommand("mceTableCellToggleClass",!1,t))),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Qr(e,Or,"tablecellverticalalign",Yr(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Qr(e,At(e),"tablecellborderwidth",Yr(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Qr(e,Bt(e),"tablecellborderstyle",Yr(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:t=>t(Jr(e,Wt(e),"background-color")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:t=>t(Jr(e,qt(e),"border-color")),onSetup:t.onSetupCellOrRow})),a("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),a("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Zr(e),onSetup:t.onSetupTableRowHeaders}),a("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:en(e),onSetup:t.onSetupTableColumnHeaders})})(e,t),(e=>{var t=$t(e);t.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t=>e.dom.is(t,"table")&&e.getBody().contains(t)&&e.dom.isEditable(t.parentNode),items:t,scope:"node",position:"node"})})(e)};t.add("table",eo)}()},43:function(e,t,r){r(44)},44:function(e,t){function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=e=>t=>{return i=typeof(r=t),(null===r?"null":"object"===i&&Array.isArray(r)?"array":"object"===i&&(l=n=r,(o=String).prototype.isPrototypeOf(l)||(null===(a=n.constructor)||void 0===a?void 0:a.name)===o.name)?"string":i)===e;var r,n,o,a,i,l},o=e=>t=>typeof t===e,a=t("string"),i=t("object"),l=t("array"),s=o("boolean"),d=e=>!(e=>null==e)(e),c=o("function"),u=o("number"),m=()=>{},f=(e,t)=>e===t;var g,p=e=>t=>!e(t),v=(g=!1,()=>g);class h{constructor(e,t){this.tag=e,this.value=t}static some(e){return new h(!0,e)}static none(){return h.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?h.some(e(this.value)):h.none()}bind(e){return this.tag?e(this.value):h.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:h.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return d(e)?h.some(e):h.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}h.singletonNone=new h(!1);var b=Array.prototype.slice,y=Array.prototype.indexOf,C=Array.prototype.push,w=(e,t)=>{return r=e,n=t,y.call(r,n)>-1;var r,n},S=(e,t)=>{for(var r=0,n=e.length;r<n;r++){if(t(e[r],r))return!0}return!1},x=(e,t)=>{for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n},k=(e,t)=>{for(var r=0,n=e.length;r<n;r++){t(e[r],r)}},E=(e,t)=>{for(var r=[],n=0,o=e.length;n<o;n++){var a=e[n];t(a,n)&&r.push(a)}return r},N=(e,t,r)=>(k(e,((e,n)=>{r=t(r,e,n)})),r),_=(e,t,r)=>{for(var n=0,o=e.length;n<o;n++){var a=e[n];if(t(a,n))return h.some(a);if(r(a,n))break}return h.none()},T=(e,t)=>_(e,t,v),D=(e,t)=>(e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!l(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);C.apply(t,e[r])}return t})(x(e,t)),R=e=>{var t=b.call(e,0);return t.reverse(),t},O=(e,t)=>t>=0&&t<e.length?h.some(e[t]):h.none(),A=e=>O(e,0),B=e=>O(e,e.length-1),P=(e,t)=>{for(var r=[],n=c(t)?e=>S(r,(r=>t(r,e))):e=>w(r,e),o=0,a=e.length;o<a;o++){var i=e[o];n(i)||r.push(i)}return r},L=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return e.exists((e=>r(e,t)))},M=(e,t,r)=>e.isSome()&&t.isSome()?h.some(r(e.getOrDie(),t.getOrDie())):h.none(),I=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},F={fromHtml:(e,t)=>{var r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){var n="HTML does not have a single root node";throw console.error(n,e),new Error(n)}return I(r.childNodes[0])},fromTag:(e,t)=>{var r=(t||document).createElement(e);return I(r)},fromText:(e,t)=>{var r=(t||document).createTextNode(e);return I(r)},fromDom:I,fromPoint:(e,t,r)=>h.from(e.dom.elementFromPoint(t,r)).map(I)},j=(e,t)=>e.dom===t.dom,U=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;var n=r;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")};"undefined"!=typeof window?window:Function("return this;")();var z,H,$=e=>e.dom.nodeName.toLowerCase(),W=e=>e.dom.nodeType,q=(z=1,e=>W(e)===z),V=e=>t=>q(t)&&$(t)===e,K=e=>h.from(e.dom.parentNode).map(F.fromDom),G=e=>x(e.dom.childNodes,F.fromDom),Y=(e,t)=>{var r=e.dom.childNodes;return h.from(r[t]).map(F.fromDom)},X=e=>Y(e,0),Q=e=>Y(e,e.dom.childNodes.length-1),J=(e,t,r)=>{for(var n=e.dom,o=c(r)?r:v;n.parentNode;){n=n.parentNode;var a=F.fromDom(n);if(t(a))return h.some(a);if(o(a))break}return h.none()},Z=(e,t,r)=>((e,t,r,n,o)=>e(r,n)?h.some(r):c(o)&&o(r)?h.none():t(r,n,o))(((e,t)=>t(e)),J,e,t,r),ee=(e,t)=>{K(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},te=(e,t)=>{var r=(e=>h.from(e.dom.nextSibling).map(F.fromDom))(e);r.fold((()=>{K(e).each((e=>{re(e,t)}))}),(e=>{ee(e,t)}))},re=(e,t)=>{e.dom.appendChild(t.dom)},ne=(e,t)=>{k(t,(t=>{re(e,t)}))},oe=e=>{e.dom.textContent="",k(G(e),(e=>{ae(e)}))},ae=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},ie=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),le=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),se=tinymce.util.Tools.resolve("tinymce.util.VK"),de=e=>x(e,F.fromDom),ce=Object.keys,ue=(e,t)=>{for(var r=ce(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}},me=(e,t)=>{var r,n={};return((e,t,r,n)=>{ue(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))})(e,t,(r=n,(e,t)=>{r[t]=e}),m),n},fe=(e,t)=>{var r=e.dom;ue(t,((e,t)=>{((e,t,r)=>{if(!(a(r)||s(r)||u(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")})(r,t,e)}))},ge=e=>N(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),pe=e=>((e,t)=>F.fromDom(e.dom.cloneNode(t)))(e,!0),ve=(e,t)=>{var r=((e,t)=>{var r=F.fromTag(t),n=ge(e);return fe(r,n),r})(e,t);te(e,r);var n=G(e);return ne(r,n),ae(e),r},he=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),be=tinymce.util.Tools.resolve("tinymce.util.Tools"),ye=e=>t=>d(t)&&t.nodeName.toLowerCase()===e,Ce=e=>t=>d(t)&&e.test(t.nodeName),we=e=>d(e)&&3===e.nodeType,Se=e=>d(e)&&1===e.nodeType,xe=Ce(/^(OL|UL|DL)$/),ke=Ce(/^(OL|UL)$/),Ee=ye("ol"),Ne=Ce(/^(LI|DT|DD)$/),_e=Ce(/^(DT|DD)$/),Te=Ce(/^(TH|TD)$/),De=ye("br"),Re=(e,t)=>d(t)&&t.nodeName in e.schema.getTextBlockElements(),Oe=(e,t)=>d(e)&&e.nodeName in t,Ae=(e,t)=>d(t)&&t.nodeName in e.schema.getVoidElements(),Be=(e,t,r)=>{var n=e.isEmpty(t);return!(r&&e.select("span[data-mce-type=bookmark]",t).length>0)&&n},Pe=(e,t)=>e.isChildOf(t,e.getRoot()),Le=e=>t=>t.options.get(e),Me=Le("lists_indent_on_tab"),Ie=Le("forced_root_block"),Fe=Le("forced_root_block_attrs"),je=(e,t)=>{var r,n,o=e.dom,a=e.schema.getBlockElements(),i=o.createFragment(),l=Ie(e),s=Fe(e),d=!1;for(n=o.create(l,s),Oe(t.firstChild,a)||i.appendChild(n);r=t.firstChild;){var c=r.nodeName;d||"SPAN"===c&&"bookmark"===r.getAttribute("data-mce-type")||(d=!0),Oe(r,a)?(i.appendChild(r),n=null):(n||(n=o.create(l,s),i.appendChild(n)),n.appendChild(r))}return!d&&n&&n.appendChild(o.create("br",{"data-mce-bogus":"1"})),i},Ue=he.DOM,ze=V("dd"),He=V("dt"),$e=(e,t)=>{var r;ze(t)?ve(t,"dt"):He(t)&&(r=t,h.from(r.dom.parentElement).map(F.fromDom)).each((r=>((e,t,r)=>{var n=Ue.select('span[data-mce-type="bookmark"]',t),o=je(e,r),a=Ue.createRng();a.setStartAfter(r),a.setEndAfter(t);for(var i=a.extractContents(),l=i.firstChild;l;l=l.firstChild)if("LI"===l.nodeName&&e.dom.isEmpty(l)){Ue.remove(l);break}e.dom.isEmpty(i)||Ue.insertAfter(i,t),Ue.insertAfter(o,t);var s=r.parentElement;s&&Be(e.dom,s)&&(e=>{var t=e.parentNode;t&&be.each(n,(e=>{t.insertBefore(e,r.parentNode)})),Ue.remove(e)})(s),Ue.remove(r),Be(e.dom,t)&&Ue.remove(t)})(e,r.dom,t.dom)))},We=e=>{He(e)&&ve(e,"dd")},qe=(e,t)=>{if(we(e))return{container:e,offset:t};var r=ie.getNode(e,t);return we(r)?{container:r,offset:t>=e.childNodes.length?r.data.length:0}:r.previousSibling&&we(r.previousSibling)?{container:r.previousSibling,offset:r.previousSibling.data.length}:r.nextSibling&&we(r.nextSibling)?{container:r.nextSibling,offset:0}:{container:e,offset:t}},Ve=e=>{var t=e.cloneRange(),r=qe(e.startContainer,e.startOffset);t.setStart(r.container,r.offset);var n=qe(e.endContainer,e.endOffset);return t.setEnd(n.container,n.offset),t},Ke=["OL","UL","DL"],Ge=Ke.join(","),Ye=(e,t)=>{var r=t||e.selection.getStart(!0);return e.dom.getParent(r,Ge,Ze(e,r))},Xe=e=>{var t=Ye(e),r=e.selection.getSelectedBlocks();return((e,t)=>d(e)&&1===t.length&&t[0]===e)(t,r)?(e=>E(e.querySelectorAll(Ge),xe))(t):E(r,(e=>xe(e)&&t!==e))},Qe=e=>{var t=e.selection.getSelectedBlocks();return E(((e,t)=>{var r=be.map(t,(t=>e.dom.getParent(t,"li,dd,dt",Ze(e,t))||t));return P(r)})(e,t),Ne)},Je=(e,t)=>{var r=e.dom.getParents(t,"TD,TH");return r.length>0?r[0]:e.getBody()},Ze=(e,t)=>{var r=e.dom.getParents(t,e.dom.isBlock),n=T(r,(t=>{return r=e.schema,!xe(n=t)&&!Ne(n)&&S(Ke,(e=>r.isValidChild(n.nodeName,e)));var r,n}));return n.getOr(e.getBody())},et=(e,t)=>{var r=e.dom.getParents(t,"ol,ul",Ze(e,t));return B(r)},tt=e=>{var t=(e=>{var t=et(e,e.selection.getStart()),r=E(e.selection.getSelectedBlocks(),ke);return t.toArray().concat(r)})(e),r=(e=>{var t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",Ze(e,t))})(e);return T(r,(e=>{return t=F.fromDom(e),K(t).exists((e=>Ne(e.dom)&&X(e).exists((e=>!xe(e.dom)))&&Q(e).exists((e=>!xe(e.dom)))));var t})).fold((()=>rt(e,t)),(e=>[e]))},rt=(e,t)=>{var r=x(t,(t=>et(e,t).getOr(t)));return P(r)},nt=e=>/\btox\-/.test(e.className),ot=(e,t)=>_(e,xe,Te).exists((e=>e.nodeName===t&&!nt(e))),at=(e,t)=>null!==t&&!e.dom.isEditable(t),it=(e,t)=>{var r=e.dom.getParent(t,"ol,ul,dl");return at(e,r)},lt=(e,t)=>{var r=e.selection.getNode();return t({parents:e.dom.getParents(r),element:r}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},st=(e,t)=>{var r=(t||document).createDocumentFragment();return k(e,(e=>{r.appendChild(e.dom)})),F.fromDom(r)},dt=(e,t,r)=>e.dispatch("ListMutation",{action:t,element:r}),ct=(H=/^\s+|\s+$/g,e=>e.replace(H,"")),ut=(e,t,r)=>{if(!a(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);(e=>void 0!==e.style&&c(e.style.getPropertyValue))(e)&&e.style.setProperty(t,r)},mt=(e,t,r)=>{var n=e.dom;ut(n,t,r)},ft=e=>U(e,"OL,UL"),gt=e=>X(e).exists(ft),pt=e=>"listAttributes"in e,vt=e=>"isComment"in e,ht=e=>e.depth>0,bt=e=>e.isSelected,yt=e=>{var t=G(e),r=Q(e).exists(ft)?t.slice(0,-1):t;return x(r,pe)},Ct=(e,t)=>{re(e.item,t.list)},wt=(e,t)=>{var r={list:F.fromTag(t,e),item:F.fromTag("li",e)};return re(r.list,r.item),r},St=(e,t,r)=>{var n=t.slice(0,r.depth);return B(n).each((t=>{if(pt(r)){var n=((e,t,r)=>{var n=F.fromTag("li",e);return fe(n,t),ne(n,r),n})(e,r.itemAttributes,r.content);((e,t)=>{re(e.list,t),e.item=t})(t,n),((e,t)=>{$(e.list)!==t.listType&&(e.list=ve(e.list,t.listType)),fe(e.list,t.listAttributes)})(t,r)}else if((e=>"isInPreviousLi"in e)(r)){if(r.isInPreviousLi){var o=((e,t,r,n)=>{var o=F.fromTag(n,e);return fe(o,t),ne(o,r),o})(e,r.attributes,r.content,r.type);re(t.item,o)}}else{var a=F.fromHtml(`\x3c!--${r.content}--\x3e`);re(t.list,a)}})),n},xt=(e,t,r)=>{var n,o=((e,t,r)=>{for(var n=[],o=0;o<r;o++)n.push(wt(e,t.listType));return n})(e,r,r.depth-t.length);return(e=>{for(var t=1;t<e.length;t++)Ct(e[t-1],e[t])})(o),((e,t)=>{for(var r=0;r<e.length-1;r++)mt(e[r].item,"list-style-type","none");B(e).each((e=>{fe(e.list,t.listAttributes),fe(e.item,t.itemAttributes),ne(e.item,t.content)}))})(o,r),n=o,M(B(t),A(n),Ct),t.concat(o)},kt=(e,t)=>{var r=h.none(),n=N(t,((t,n,o)=>pt(n)?n.depth>t.length?xt(e,t,n):St(e,t,n):0===o&&vt(n)?(r=h.some(n),t):St(e,t,n)),[]);return r.each((e=>{var t=F.fromHtml(`\x3c!--${e.content}--\x3e`);A(n).each((e=>{((e,t)=>{X(e).fold((()=>{re(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))})(e.list,t)}))})),A(n).map((e=>e.list))},Et=(e,t)=>{pt(e)&&pt(t)&&(e.listType=t.listType,e.listAttributes=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},t.listAttributes))},Nt=e=>(k(e,((t,r)=>{((e,t)=>{var r=e[t].depth,n=e=>e.depth===r&&!e.dirty,o=e=>e.depth<r;return _(R(e.slice(0,t)),n,o).orThunk((()=>_(e.slice(t+1),n,o)))})(e,r).fold((()=>{t.dirty&&pt(t)&&(e=>{e.listAttributes=me(e.listAttributes,((e,t)=>"start"!==t))})(t)}),(e=>Et(t,e)))})),e),_t=(e,t,r,n)=>{var o,a;if(8===W(a=n)||"#comment"===$(a))return[{depth:e+1,content:null!==(o=n.dom.nodeValue)&&void 0!==o?o:"",dirty:!1,isSelected:!1,isComment:!0}];t.each((e=>{j(e.start,n)&&r.set(!0)}));var i=((e,t,r)=>K(e).filter(q).map((n=>({depth:t,dirty:!1,isSelected:r,content:yt(e),itemAttributes:ge(e),listAttributes:ge(n),listType:$(n),isInPreviousLi:!1}))))(n,e,r.get());t.each((e=>{j(e.end,n)&&r.set(!1)}));var l=Q(n).filter(ft).map((n=>Dt(e,t,r,n))).getOr([]);return i.toArray().concat(l)},Tt=(e,t,r,n)=>X(n).filter(ft).fold((()=>_t(e,t,r,n)),(o=>{var a=N(G(n),((n,o,a)=>{if(0===a)return n;var i=_t(e,t,r,o).map((e=>((e,t,r)=>pt(e)?{depth:e.depth,dirty:e.dirty,content:e.content,isSelected:e.isSelected,type:t,attributes:e.itemAttributes,isInPreviousLi:r}:e)(e,o.dom.nodeName.toLowerCase(),!0)));return n.concat(i)}),[]);return Dt(e,t,r,o).concat(a)})),Dt=(e,t,r,n)=>D(G(n),(n=>(ft(n)?Dt:Tt)(e+1,t,r,n))),Rt=(e,t)=>D(((e,t)=>{if(0===e.length)return[];for(var r=t(e[0]),n=[],o=[],a=0,i=e.length;a<i;a++){var l=e[a],s=t(l);s!==r&&(n.push(o),o=[]),r=s,o.push(l)}return 0!==o.length&&n.push(o),n})(t,ht),(t=>A(t).exists(ht)?((e,t)=>{var r=Nt(t);return kt(e.contentDocument,r).toArray()})(e,t):((e,t)=>{var r=Nt(t);return x(r,(t=>{var r=vt(t)?st([F.fromHtml(`\x3c!--${t.content}--\x3e`)]):st(t.content);return F.fromDom(je(e,r.dom))}))})(e,t))),Ot=(e,t,r)=>{var n=((e,t)=>{var r=(e=>{var t=!1;return{get:()=>t,set:e=>{t=e}}})();return x(e,(e=>({sourceList:e,entries:Dt(0,t,r,e)})))})(t,(e=>{var t=x(Qe(e),F.fromDom);return M(T(t,p(gt)),T(R(t),p(gt)),((e,t)=>({start:e,end:t})))})(e));k(n,(t=>{((e,t)=>{k(E(e,bt),(e=>((e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0})(t,e)))})(t.entries,r);var n,o=Rt(e,t.entries);k(o,(t=>{dt(e,"Indent"===r?"IndentList":"OutdentList",t.dom)})),n=t.sourceList,k(o,(e=>{ee(n,e)})),ae(t.sourceList)}))},At=(e,t)=>{var r=de(tt(e)),n=de((e=>E(Qe(e),_e))(e)),o=!1;if(r.length||n.length){var a=e.selection.getBookmark();Ot(e,r,t),((e,t,r)=>{k(r,"Indent"===t?We:t=>$e(e,t))})(e,t,n),e.selection.moveToBookmark(a),e.selection.setRng(Ve(e.selection.getRng())),e.nodeChanged(),o=!0}return o},Bt=(e,t)=>!(e=>{var t=Ye(e);return at(e,t)})(e)&&At(e,t),Pt=e=>Bt(e,"Indent"),Lt=e=>Bt(e,"Outdent"),Mt=e=>Bt(e,"Flatten"),It=e=>"\ufeff"===e,Ft=(e,t)=>{return r=e,n=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=r.concat(n);return e.apply(null,a)}}(j,t),J(r,n,o).isSome();var r,n,o},jt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Ut=he.DOM,zt=e=>{var t={},r=r=>{var n=e[r?"startContainer":"endContainer"],o=e[r?"startOffset":"endOffset"];if(Se(n)){var a=Ut.create("span",{"data-mce-type":"bookmark"});n.hasChildNodes()?(o=Math.min(o,n.childNodes.length-1),r?n.insertBefore(a,n.childNodes[o]):Ut.insertAfter(a,n.childNodes[o])):n.appendChild(a),n=a,o=0}t[r?"startContainer":"endContainer"]=n,t[r?"startOffset":"endOffset"]=o};return r(!0),e.collapsed||r(),t},Ht=e=>{var t=t=>{var r=e[t?"startContainer":"endContainer"],n=e[t?"startOffset":"endOffset"];if(r){if(Se(r)&&r.parentNode){var o=r;n=(e=>{for(var t,r=null===(t=e.parentNode)||void 0===t?void 0:t.firstChild,n=0;r;){if(r===e)return n;Se(r)&&"bookmark"===r.getAttribute("data-mce-type")||n++,r=r.nextSibling}return-1})(r),r=r.parentNode,Ut.remove(o),!r.hasChildNodes()&&Ut.isBlock(r)&&r.appendChild(Ut.create("br"))}e[t?"startContainer":"endContainer"]=r,e[t?"startOffset":"endOffset"]=n}};t(!0),t();var r=Ut.createRng();return r.setStart(e.startContainer,e.startOffset),e.endContainer&&r.setEnd(e.endContainer,e.endOffset),Ve(r)},$t=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Wt=(e,t)=>{be.each(t,((t,r)=>{e.setAttribute(r,t)}))},qt=(e,t,r)=>{((e,t,r)=>{var n=r["list-style-type"]?r["list-style-type"]:null;e.setStyle(t,"list-style-type",n)})(e,t,r),((e,t,r)=>{Wt(t,r["list-attributes"]),be.each(e.select("li",t),(e=>{Wt(e,r["list-item-attributes"])}))})(e,t,r)},Vt=(e,t)=>d(t)&&!Oe(t,e.schema.getBlockElements()),Kt=(e,t,r,n)=>{var o=t[r?"startContainer":"endContainer"],a=t[r?"startOffset":"endOffset"];Se(o)&&(o=o.childNodes[Math.min(a,o.childNodes.length-1)]||o),!r&&De(o.nextSibling)&&(o=o.nextSibling);var i=(t,r)=>{for(var o,a,i=new le(t,(t=>{for(;!e.dom.isBlock(t)&&t.parentNode&&n!==t;)t=t.parentNode;return t})(t)),l=r?"next":"prev";a=i[l]();)if(!Ae(e,a)&&!It(a.textContent)&&0!==(null===(o=a.textContent)||void 0===o?void 0:o.length))return h.some(a);return h.none()};if(r&&we(o))if(It(o.textContent))o=i(o,!1).getOr(o);else for(null!==o.parentNode&&Vt(e,o.parentNode)&&(o=o.parentNode);null!==o.previousSibling&&(Vt(e,o.previousSibling)||we(o.previousSibling));)o=o.previousSibling;if(!r&&we(o))if(It(o.textContent))o=i(o,!0).getOr(o);else for(null!==o.parentNode&&Vt(e,o.parentNode)&&(o=o.parentNode);null!==o.nextSibling&&(Vt(e,o.nextSibling)||we(o.nextSibling));)o=o.nextSibling;for(;o.parentNode!==n;){var l=o.parentNode;if(Re(e,o))return o;if(/^(TD|TH)$/.test(l.nodeName))return o;o=l}return o},Gt=(e,t,r)=>{var n=e.selection.getRng(),o="LI",a=Ze(e,((e,t)=>{var r=e.selection.getStart(!0),n=Kt(e,t,!0,e.getBody());return Ft(F.fromDom(n),F.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:r})(e,n)),i=e.dom;if("false"!==i.getContentEditable(e.selection.getNode())){"DL"===(t=t.toUpperCase())&&(o="DT");var l=zt(n),s=E(((e,t,r)=>{for(var n,o=[],a=e.dom,i=Kt(e,t,!0,r),l=Kt(e,t,!1,r),s=[],d=i;d&&(s.push(d),d!==l);d=d.nextSibling);return be.each(s,(t=>{var i;if(Re(e,t))return o.push(t),void(n=null);if(a.isBlock(t)||De(t))return De(t)&&a.remove(t),void(n=null);var l=t.nextSibling;jt.isBookmarkNode(t)&&(xe(l)||Re(e,l)||!l&&t.parentNode===r)?n=null:(n||(n=a.create("p"),null===(i=t.parentNode)||void 0===i||i.insertBefore(n,t),o.push(n)),n.appendChild(t))})),o})(e,n,a),e.dom.isEditable);be.each(s,(n=>{var a,l=n.previousSibling,s=n.parentNode;Ne(s)||(l&&xe(l)&&l.nodeName===t&&((e,t,r)=>{var n=e.getStyle(t,"list-style-type"),o=r?r["list-style-type"]:"";return n===(null===o?"":o)})(i,l,r)?(a=l,n=i.rename(n,o),l.appendChild(n)):(a=i.create(t),s.insertBefore(a,n),a.appendChild(n),n=i.rename(n,o)),((e,t,r)=>{be.each(r,(r=>e.setStyle(t,r,"")))})(i,n,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),qt(i,a,r),Xt(e.dom,a))})),e.selection.setRng(Ht(l))}},Yt=(e,t,r)=>{return((e,t)=>xe(e)&&e.nodeName===(null==t?void 0:t.nodeName))(t,r)&&((e,t,r)=>e.getStyle(t,"list-style-type",!0)===e.getStyle(r,"list-style-type",!0))(e,t,r)&&(n=r,t.className===n.className);var n},Xt=(e,t)=>{var r,n=t.nextSibling;if(Yt(e,t,n)){for(var o=n;r=o.firstChild;)t.appendChild(r);e.remove(o)}if(n=t.previousSibling,Yt(e,t,n)){for(var a=n;r=a.lastChild;)t.insertBefore(r,t.firstChild);e.remove(a)}},Qt=(e,t,r,n)=>{if(t.nodeName!==r){var o=e.dom.rename(t,r);qt(e.dom,o,n),dt(e,$t(r),o)}else qt(e.dom,t,n),dt(e,$t(r),t)},Jt=(e,t,r,n)=>{if(t.classList.forEach(((e,r,n)=>{e.startsWith("tox-")&&(n.remove(e),0===n.length&&t.removeAttribute("class"))})),t.nodeName!==r){var o=e.dom.rename(t,r);qt(e.dom,o,n),dt(e,$t(r),o)}else qt(e.dom,t,n),dt(e,$t(r),t)},Zt=e=>"list-style-type"in e,er=(e,t,r)=>{var n=Ye(e);if(!it(e,n)){var o=Xe(e),a=i(r)?r:{};o.length>0?((e,t,r,n,o)=>{var a=xe(t);if(!a||t.nodeName!==n||Zt(o)||nt(t)){Gt(e,n,o);var i=zt(e.selection.getRng()),l=a?[t,...r]:r,s=a&&nt(t)?Jt:Qt;be.each(l,(t=>{s(e,t,n,o)})),e.selection.setRng(Ht(i))}else Mt(e)})(e,n,o,t,a):((e,t,r,n)=>{if(t!==e.getBody())if(t)if(t.nodeName!==r||Zt(n)||nt(t)){var o=zt(e.selection.getRng());nt(t)&&t.classList.forEach(((e,r,n)=>{e.startsWith("tox-")&&(n.remove(e),0===n.length&&t.removeAttribute("class"))})),qt(e.dom,t,n);var a=e.dom.rename(t,r);Xt(e.dom,a),e.selection.setRng(Ht(o)),Gt(e,r,n),dt(e,$t(r),a)}else Mt(e);else Gt(e,r,n),dt(e,$t(r),t)})(e,n,t,a)}},tr=he.DOM,rr=(e,t)=>{var r=be.grep(e.select("ol,ul",t));be.each(r,(t=>{((e,t)=>{var r=t.parentElement;if(r&&"LI"===r.nodeName&&r.firstChild===t){var n=r.previousSibling;n&&"LI"===n.nodeName?(n.appendChild(t),Be(e,r)&&tr.remove(r)):tr.setStyle(r,"listStyleType","none")}if(xe(r)){var o=r.previousSibling;o&&"LI"===o.nodeName&&o.appendChild(t)}})(e,t)}))},nr=(e,t,r,n)=>{var o=t.startContainer,a=t.startOffset;if(we(o)&&(r?a<o.data.length:a>0))return o;var i=e.schema.getNonEmptyElements();Se(o)&&(o=ie.getNode(o,a));var l=new le(o,n);r&&((e,t)=>!!De(t)&&e.isBlock(t.nextSibling)&&!De(t.previousSibling))(e.dom,o)&&l.next();for(var s=r?l.next.bind(l):l.prev2.bind(l);o=s();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(i[o.nodeName])return o;if(we(o)&&o.data.length>0)return o}return null},or=(e,t)=>{var r=t.childNodes;return 1===r.length&&!xe(r[0])&&e.isBlock(r[0])},ar=(e,t,r)=>{var n,o=or(e,r)?r.firstChild:r;if(((e,t)=>{or(e,t)&&e.remove(t.firstChild,!0)})(e,t),!Be(e,t,!0))for(;n=t.firstChild;)o.appendChild(n)},ir=(e,t,r)=>{var n,o=t.parentNode;if(Pe(e,t)&&Pe(e,r)){xe(r.lastChild)&&(n=r.lastChild),o===r.lastChild&&De(o.previousSibling)&&e.remove(o.previousSibling);var a=r.lastChild;a&&De(a)&&t.hasChildNodes()&&e.remove(a),Be(e,r,!0)&&oe(F.fromDom(r)),ar(e,t,r),n&&r.appendChild(n);var i,l,s,d,c=(i=F.fromDom(r),l=F.fromDom(t),s=i.dom,d=l.dom,s!==d&&s.contains(d))?e.getParents(t,xe,r):[];e.remove(t),k(c,(t=>{Be(e,t)&&t!==e.getRoot()&&e.remove(t)}))}},lr=(e,t,r,n)=>{var o=e.dom;if(o.isEmpty(n))((e,t,r)=>{oe(F.fromDom(r)),ir(e.dom,t,r),e.selection.setCursorLocation(r,0)})(e,r,n);else{var a=zt(t);ir(o,r,n),e.selection.setRng(Ht(a))}},sr=(e,t)=>{var r=e.dom,n=e.selection,o=n.getStart(),a=Je(e,o),i=r.getParent(n.getStart(),"LI",a);if(i){var l=i.parentElement;if(l===e.getBody()&&Be(r,l))return!0;var s=Ve(n.getRng()),d=r.getParent(nr(e,s,t,a),"LI",a);if(d&&d!==i)return e.undoManager.transact((()=>{var r,n;t?lr(e,s,d,i):(null===(n=(r=i).parentNode)||void 0===n?void 0:n.firstChild)===r?Lt(e):((e,t,r,n)=>{var o=zt(t);ir(e.dom,r,n);var a=Ht(o);e.selection.setRng(a)})(e,s,i,d)})),!0;if(!d&&!t&&0===s.startOffset&&0===s.endOffset)return e.undoManager.transact((()=>{Mt(e)})),!0}return!1},dr=(e,t)=>{var r=e.dom,n=e.selection.getStart(),o=Je(e,n),a=r.getParent(n,r.isBlock,o);if(a&&r.isEmpty(a)){var i=Ve(e.selection.getRng()),l=r.getParent(nr(e,i,t,o),"LI",o);if(l){var s=e=>w(["td","th","caption"],$(e)),d=e=>e.dom===o;return!!function(e,t){return M(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:f).getOr(e.isNone()&&t.isNone())}(Z(F.fromDom(l),s,d),Z(F.fromDom(i.startContainer),s,d),j)&&(e.undoManager.transact((()=>{var n=l.parentNode;((e,t,r)=>{var n=e.getParent(t.parentNode,e.isBlock,r);e.remove(t),n&&e.isEmpty(n)&&e.remove(n)})(r,a,o),Xt(r,n),e.selection.select(l,!0),e.selection.collapse(t)})),!0)}}return!1},cr=e=>{var t=e.selection.getStart(),r=Je(e,t);return e.dom.getParent(t,"LI,DT,DD",r)||Qe(e).length>0},ur=(e,t)=>{var r=e.selection;return!it(e,r.getNode())&&(r.isCollapsed()?((e,t)=>sr(e,t)||dr(e,t))(e,t):(e=>!!cr(e)&&(e.undoManager.transact((()=>{e.execCommand("Delete"),rr(e.dom,e.getBody())})),!0))(e))},mr=e=>{var t=R(ct(e).split("")),r=x(t,((e,t)=>{var r=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*r}));return N(r,((e,t)=>e+t),0)},fr=e=>{if(--e<0)return"";var t=e%26,r=Math.floor(e/26);return fr(r)+String.fromCharCode("A".charCodeAt(0)+t)},gr=e=>{var t,r,n=Ye(e);Ee(n)&&!it(e,n)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:(t={start:e.dom.getAttrib(n,"start","1"),listStyleType:h.from(e.dom.getStyle(n,"list-style-type"))},r=parseInt(t.start,10),L(t.listStyleType,"upper-alpha")?fr(r):L(t.listStyleType,"lower-alpha")?fr(r).toLowerCase():t.start)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{(e=>{switch((e=>/^[0-9]+$/.test(e)?2:/^[A-Z]+$/.test(e)?0:(e=>/^[a-z]+$/.test(e))(e)?1:e.length>0?4:3)(e)){case 2:return h.some({listStyleType:h.none(),start:e});case 0:return h.some({listStyleType:h.some("upper-alpha"),start:mr(e).toString()});case 1:return h.some({listStyleType:h.some("lower-alpha"),start:mr(e).toString()});case 3:return h.some({listStyleType:h.none(),start:""});case 4:return h.none()}})(t.getData().start).each((t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})})),t.close()}})},pr=(e,t)=>()=>{var r=Ye(e);return d(r)&&r.nodeName===t},vr=e=>{e.addCommand("mceListProps",(()=>{gr(e)}))},hr=e=>{e.on("BeforeExecCommand",(t=>{var r=t.command.toLowerCase();"indent"===r?Pt(e):"outdent"===r&&Lt(e)})),e.addCommand("InsertUnorderedList",((t,r)=>{er(e,"UL",r)})),e.addCommand("InsertOrderedList",((t,r)=>{er(e,"OL",r)})),e.addCommand("InsertDefinitionList",((t,r)=>{er(e,"DL",r)})),e.addCommand("RemoveList",(()=>{Mt(e)})),vr(e),e.addCommand("mceListUpdate",((t,r)=>{i(r)&&((e,t)=>{var r=Ye(e);null===r||it(e,r)||e.undoManager.transact((()=>{i(t.styles)&&e.dom.setStyles(r,t.styles),i(t.attrs)&&ue(t.attrs,((t,n)=>e.dom.setAttrib(r,n,t)))}))})(e,r)})),e.addQueryStateHandler("InsertUnorderedList",pr(e,"UL")),e.addQueryStateHandler("InsertOrderedList",pr(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",pr(e,"DL"))},br=tinymce.util.Tools.resolve("tinymce.html.Node"),yr=e=>3===e.type,Cr=e=>0===e.length,wr=e=>{var t=(t,r)=>{var n=br.create("li");k(t,(e=>n.append(e))),r?e.insert(n,r,!0):e.append(n)},r=N(e.children(),((e,r)=>yr(r)?[...e,r]:Cr(e)||yr(r)?e:(t(e,r),[])),[]);Cr(r)||t(r)},Sr=e=>{Me(e)&&(e=>{e.on("keydown",(t=>{t.keyCode!==se.TAB||se.metaKeyPressed(t)||e.undoManager.transact((()=>{(t.shiftKey?Lt(e):Pt(e))&&t.preventDefault()}))}))})(e),(e=>{e.on("ExecCommand",(t=>{var r=t.command.toLowerCase();"delete"!==r&&"forwarddelete"!==r||!cr(e)||rr(e.dom,e.getBody())})),e.on("keydown",(t=>{t.keyCode===se.BACKSPACE?ur(e,!1)&&t.preventDefault():t.keyCode===se.DELETE&&ur(e,!0)&&t.preventDefault()}))})(e)},xr=(e,t)=>r=>(r.setEnabled(e.selection.isEditable()),lt(e,(n=>{r.setActive(ot(n.parents,t)),r.setEnabled(!it(e,n.element)&&e.selection.isEditable())}))),kr=(e,t)=>r=>lt(e,(n=>r.setEnabled(ot(n.parents,t)&&!it(e,n.element))));e.add("lists",(e=>((e=>{(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})})(e),(e=>{e.on("PreInit",(()=>{e.parser.addNodeFilter("ul,ol",(e=>k(e,wr)))}))})(e),e.hasPlugin("rtc",!0)?vr(e):(Sr(e),hr(e)),(e=>{var t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:xr(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:xr(e,"UL")}))})(e),(e=>{var t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:kr(e,"OL")};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>{var r=Ye(e,t);return Ee(r)?["listprops"]:[]}})})(e),(e=>({backspaceDelete:t=>{ur(e,t)}}))(e))))}()},51:function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,a){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var l=/\+/g;e=e.split(t);var s=1e3;a&&"number"==typeof a.maxKeys&&(s=a.maxKeys);var d=e.length;s>0&&d>s&&(d=s);for(var c=0;c<d;++c){var u,m,f,g,p=e[c].replace(l,"%20"),v=p.indexOf(r);v>=0?(u=p.substr(0,v),m=p.substr(v+1)):(u=p,m=""),f=decodeURIComponent(u),g=decodeURIComponent(m),n(i,f)?o(i[f])?i[f].push(g):i[f]=[i[f],g]:i[f]=g}return i};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},52:function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,l){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?a(i(e),(function(i){var l=encodeURIComponent(n(i))+r;return o(e[i])?a(e[i],(function(e){return l+encodeURIComponent(n(e))})).join(t):l+encodeURIComponent(n(e[i]))})).join(t):l?encodeURIComponent(n(l))+r+encodeURIComponent(n(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},7:function(e,t,r){var n=["uid"];function o(){"use strict";o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function c(e,t,r,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new N(o||[]);return n(i,"_invoke",{value:S(e,r,l)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var m={};function f(){}function g(){}function p(){}var v={};d(v,i,(function(){return this}));var h=Object.getPrototypeOf,b=h&&h(h(_([])));b&&b!==t&&r.call(b,i)&&(v=b);var y=p.prototype=f.prototype=Object.create(v);function C(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,l){var s=u(e[n],e,a);if("throw"!==s.type){var d=s.arg,c=d.value;return c&&"object"==typeof c&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(c).then((function(e){d.value=e,i(d)}),(function(e){return o("throw",e,i,l)}))}l(s.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return T()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var l=x(i,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,m;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return g.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:g,configurable:!0}),g.displayName=d(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,d(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},C(w.prototype),d(w.prototype,l,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(c(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(y),d(y,s,"Generator"),d(y,i,(function(){return this})),d(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=_,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:_(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),m}},e}function a(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return f(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||m()}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){return f(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||p(e,t)||m()}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e){if(Array.isArray(e))return e}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=p(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}function p(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(){"use strict";var t=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},r=function(e){return{eq:e}},s=r((function(e,t){return e===t})),c=function(e){return r((function(t,r){if(t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e.eq(t[o],r[o]))return!1;return!0}))},m=function(e,t){return function(e,t){return r((function(r,n){return e.eq(t(r),t(n))}))}(c(e),(function(e){return function(e,t){return Array.prototype.slice.call(e).sort(t)}(e,t)}))},f=function(e){return r((function(t,r){var n=Object.keys(t),o=Object.keys(r);if(!m(s).eq(n,o))return!1;for(var a=n.length,i=0;i<a;i++){var l=n[i];if(!e.eq(t[l],r[l]))return!1}return!0}))},p=r((function(e,r){if(e===r)return!0;var n=t(e);return n===t(r)&&(function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(n)?e===r:"array"===n?c(p).eq(e,r):"object"===n&&f(p).eq(e,r))})),v=Object.getPrototypeOf,h=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},b=e=>t=>{return n=typeof(r=t),(null===r?"null":"object"===n&&Array.isArray(r)?"array":"object"===n&&h(r,String,((e,t)=>t.isPrototypeOf(e)))?"string":n)===e;var r,n},y=e=>t=>typeof t===e,C=e=>t=>e===t,w=(e,t)=>x(e)&&h(e,t,((e,t)=>v(e)===t)),S=b("string"),x=b("object"),k=e=>w(e,Object),E=b("array"),N=C(null),_=y("boolean"),T=C(void 0),D=e=>null==e,R=e=>!D(e),O=y("function"),A=y("number"),B=(e,t)=>{if(E(e)){for(var r=0,n=e.length;r<n;++r)if(!t(e[r]))return!1;return!0}return!1},P=()=>{},L=(e,t)=>function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e(t.apply(null,n))},M=(e,t)=>r=>e(t(r)),I=e=>()=>e,F=e=>e,j=(e,t)=>e===t;function U(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=r.concat(n);return e.apply(null,a)}}var z=e=>t=>!e(t),H=e=>()=>{throw new Error(e)},$=e=>e(),W=e=>{e()},q=I(!1),V=I(!0);class K{constructor(e,t){this.tag=e,this.value=t}static some(e){return new K(!0,e)}static none(){return K.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?K.some(e(this.value)):K.none()}bind(e){return this.tag?e(this.value):K.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:K.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return R(e)?K.some(e):K.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}K.singletonNone=new K(!1);var G=Array.prototype.slice,Y=Array.prototype.indexOf,X=Array.prototype.push,Q=(e,t)=>Y.call(e,t),J=(e,t)=>Q(e,t)>-1,Z=(e,t)=>{for(var r=0,n=e.length;r<n;r++){if(t(e[r],r))return!0}return!1},ee=(e,t)=>{for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n},te=(e,t)=>{for(var r=0,n=e.length;r<n;r++){t(e[r],r)}},re=(e,t)=>{for(var r=e.length-1;r>=0;r--){t(e[r],r)}},ne=(e,t)=>{for(var r=[],n=[],o=0,a=e.length;o<a;o++){var i=e[o];(t(i,o)?r:n).push(i)}return{pass:r,fail:n}},oe=(e,t)=>{for(var r=[],n=0,o=e.length;n<o;n++){var a=e[n];t(a,n)&&r.push(a)}return r},ae=(e,t,r)=>(re(e,((e,n)=>{r=t(r,e,n)})),r),ie=(e,t,r)=>(te(e,((e,n)=>{r=t(r,e,n)})),r),le=(e,t,r)=>{for(var n=0,o=e.length;n<o;n++){var a=e[n];if(t(a,n))return K.some(a);if(r(a,n))break}return K.none()},se=(e,t)=>le(e,t,q),de=(e,t)=>{for(var r=0,n=e.length;r<n;r++){if(t(e[r],r))return K.some(r)}return K.none()},ce=e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!E(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);X.apply(t,e[r])}return t},ue=(e,t)=>ce(ee(e,t)),me=(e,t)=>{for(var r=0,n=e.length;r<n;++r){if(!0!==t(e[r],r))return!1}return!0},fe=e=>{var t=G.call(e,0);return t.reverse(),t},ge=(e,t)=>oe(e,(e=>!J(t,e))),pe=(e,t)=>{for(var r={},n=0,o=e.length;n<o;n++){var a=e[n];r[String(a)]=t(a,n)}return r},ve=(e,t)=>{var r=G.call(e,0);return r.sort(t),r},he=(e,t)=>t>=0&&t<e.length?K.some(e[t]):K.none(),be=e=>he(e,0),ye=e=>he(e,e.length-1),Ce=O(Array.from)?Array.from:e=>G.call(e),we=(e,t)=>{for(var r=0;r<e.length;r++){var n=t(e[r],r);if(n.isSome())return n}return K.none()},Se=Object.keys,xe=Object.hasOwnProperty,ke=(e,t)=>{for(var r=Se(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}},Ee=(e,t)=>Ne(e,((e,r)=>({k:r,v:t(e,r)}))),Ne=(e,t)=>{var r={};return ke(e,((e,n)=>{var o=t(e,n);r[o.k]=o.v})),r},_e=e=>(t,r)=>{e[r]=t},Te=(e,t,r,n)=>{ke(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))},De=(e,t)=>{var r={};return Te(e,t,_e(r),P),r},Re=(e,t)=>{var r=[];return ke(e,((e,n)=>{r.push(t(e,n))})),r},Oe=e=>Re(e,F),Ae=(e,t)=>Be(e,t)?K.from(e[t]):K.none(),Be=(e,t)=>xe.call(e,t),Pe=(e,t)=>Be(e,t)&&void 0!==e[t]&&null!==e[t],Le=e=>{var t={};return te(e,(e=>{t[e]={}})),Se(t)},Me=e=>void 0!==e.length,Ie=Array.isArray,Fe=(e,t,r)=>{if(!e)return!1;if(r=r||e,Me(e)){for(var n=0,o=e.length;n<o;n++)if(!1===t.call(r,e[n],n,e))return!1}else for(var a in e)if(Be(e,a)&&!1===t.call(r,e[a],a,e))return!1;return!0},je=(e,t)=>{var r=[];return Fe(e,((n,o)=>{r.push(t(n,o,e))})),r},Ue=(e,t)=>{var r=[];return Fe(e,((n,o)=>{t&&!t(n,o,e)||r.push(n)})),r},ze=(e,t,r,n)=>{for(var o=T(r)?e[0]:r,a=0;a<e.length;a++)o=t.call(n,o,e[a],a);return o},He=(e,t,r)=>{for(var n=0,o=e.length;n<o;n++)if(t.call(r,e[n],n,e))return n;return-1},$e=e=>e[e.length-1],We=e=>{var t,r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t=e.apply(null,o)}return t}},qe=()=>Ve(0,0),Ve=(e,t)=>({major:e,minor:t}),Ke={nu:Ve,detect:(e,t)=>{var r=String(t).toLowerCase();return 0===e.length?qe():((e,t)=>{var r=((e,t)=>{for(var r=0;r<e.length;r++){var n=e[r];if(n.test(t))return n}})(e,t);if(!r)return{major:0,minor:0};var n=e=>Number(t.replace(r,"$"+e));return Ve(n(1),n(2))})(e,r)},unknown:qe},Ge=(e,t)=>{var r=String(t).toLowerCase();return se(e,(e=>e.search(r)))},Ye=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,Xe=(e,t)=>Je(e,t)?((e,t)=>e.substring(t))(e,t.length):e,Qe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=e.indexOf(t,r);return-1!==o&&(!!T(n)||o+t.length<=n)},Je=(e,t)=>Ye(e,t,0),Ze=(e,t)=>Ye(e,t,e.length-t.length),et=e=>t=>t.replace(e,""),tt=et(/^\s+|\s+$/g),rt=et(/^\s+/g),nt=et(/\s+$/g),ot=e=>e.length>0,at=e=>!ot(e),it=function(e){var t=parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:10);return isNaN(t)?K.none():K.some(t)},lt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,st=e=>t=>Qe(t,e),dt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Qe(e,"edge/")&&Qe(e,"chrome")&&Qe(e,"safari")&&Qe(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,lt],search:e=>Qe(e,"chrome")&&!Qe(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Qe(e,"msie")||Qe(e,"trident")},{name:"Opera",versionRegexes:[lt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:st("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:st("firefox")},{name:"Safari",versionRegexes:[lt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Qe(e,"safari")||Qe(e,"mobile/"))&&Qe(e,"applewebkit")}],ct=[{name:"Windows",search:st("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Qe(e,"iphone")||Qe(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:st("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:st("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:st("linux"),versionRegexes:[]},{name:"Solaris",search:st("sunos"),versionRegexes:[]},{name:"FreeBSD",search:st("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:st("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ut={browsers:I(dt),oses:I(ct)},mt="Edge",ft="Chromium",gt="Opera",pt="Firefox",vt="Safari",ht=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(mt),isChromium:n(ft),isIE:n("IE"),isOpera:n(gt),isFirefox:n(pt),isSafari:n(vt)}},bt={unknown:()=>ht({current:void 0,version:Ke.unknown()}),nu:ht,edge:I(mt),chromium:I(ft),ie:I("IE"),opera:I(gt),firefox:I(pt),safari:I(vt)},yt="Windows",Ct="Android",wt="Linux",St="macOS",xt="Solaris",kt="FreeBSD",Et="ChromeOS",Nt=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(yt),isiOS:n("iOS"),isAndroid:n(Ct),isMacOS:n(St),isLinux:n(wt),isSolaris:n(xt),isFreeBSD:n(kt),isChromeOS:n(Et)}},_t={unknown:()=>Nt({current:void 0,version:Ke.unknown()}),nu:Nt,windows:I(yt),ios:I("iOS"),android:I(Ct),linux:I(wt),macos:I(St),solaris:I(xt),freebsd:I(kt),chromeos:I(Et)},Tt=(e,t,r)=>{var n=ut.browsers(),o=ut.oses(),a=t.bind((e=>((e,t)=>we(t.brands,(t=>{var r=t.brand.toLowerCase();return se(e,(e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:Ke.nu(parseInt(t.version,10),0)})))})))(n,e))).orThunk((()=>((e,t)=>Ge(e,t).map((e=>{var r=Ke.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(n,e))).fold(bt.unknown,bt.nu),i=((e,t)=>Ge(e,t).map((e=>{var r=Ke.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(o,e).fold(_t.unknown,_t.nu),l=((e,t,r,n)=>{var o=e.isiOS()&&!0===/ipad/i.test(r),a=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),l=i||n("(pointer:coarse)"),s=o||!a&&i&&n("(min-device-width:768px)"),d=a||i&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),u=!d&&!s&&!c;return{isiPad:I(o),isiPhone:I(a),isTablet:I(s),isPhone:I(d),isTouch:I(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:I(c),isDesktop:I(u)}})(i,a,e,r);return{browser:a,os:i,deviceType:l}},Dt=e=>window.matchMedia(e).matches,Rt=We((()=>Tt(navigator.userAgent,K.from(navigator.userAgentData),Dt))),Ot=()=>Rt(),At=navigator.userAgent,Bt=Ot(),Pt=Bt.browser,Lt=Bt.os,Mt=Bt.deviceType,It=-1!==At.indexOf("Windows Phone"),Ft={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Pt.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Pt.isIE(),windowsPhone:It,browser:{current:Pt.current,version:Pt.version,isChromium:Pt.isChromium,isEdge:Pt.isEdge,isFirefox:Pt.isFirefox,isIE:Pt.isIE,isOpera:Pt.isOpera,isSafari:Pt.isSafari},os:{current:Lt.current,version:Lt.version,isAndroid:Lt.isAndroid,isChromeOS:Lt.isChromeOS,isFreeBSD:Lt.isFreeBSD,isiOS:Lt.isiOS,isLinux:Lt.isLinux,isMacOS:Lt.isMacOS,isSolaris:Lt.isSolaris,isWindows:Lt.isWindows},deviceType:{isDesktop:Mt.isDesktop,isiPad:Mt.isiPad,isiPhone:Mt.isiPhone,isPhone:Mt.isPhone,isTablet:Mt.isTablet,isTouch:Mt.isTouch,isWebView:Mt.isWebView}},jt=/^\s*|\s*$/g,Ut=e=>D(e)?"":(""+e).replace(jt,""),zt={trim:Ut,isArray:Ie,is:(e,t)=>t?!("array"!==t||!Ie(e))||typeof e===t:void 0!==e,toArray:e=>{if(Ie(e))return e;for(var t=[],r=0,n=e.length;r<n;r++)t[r]=e[r];return t},makeMap:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S(e)?e.split(t||","):e||[],o=n.length;o--;)r[n[o]]={};return r},each:Fe,map:je,grep:Ue,inArray:(e,t)=>{if(e)for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},hasOwn:Be,extend:function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++){var r=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];for(var n in r)if(Be(r,n)){var o=r[n];void 0!==o&&(e[n]=o)}}return e},walk:function e(t,r,n,o){o=o||this,t&&(n&&(t=t[n]),Fe(t,((t,a)=>!1!==r.call(o,t,a,n)&&(e(t,r,n,o),!0))))},resolve:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=e.split("."),n=0,o=r.length;n<o&&(t=t[r[n]]);n++);return t},explode:(e,t)=>E(e)?e:""===e?[]:je(e.split(t||","),Ut),_addCacheSuffix:e=>{var t=Ft.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Ht=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j;return e.exists((e=>r(e,t)))},$t=function(e,t){return Wt(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:j).getOr(e.isNone()&&t.isNone())},Wt=(e,t,r)=>e.isSome()&&t.isSome()?K.some(r(e.getOrDie(),t.getOrDie())):K.none(),qt=(e,t)=>e?K.some(t):K.none(),Vt="undefined"!=typeof window?window:Function("return this;")(),Kt=(e,t)=>((e,t)=>{for(var r=null!=t?t:Vt,n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r})(e.split("."),t),Gt=(e,t)=>{var r=((e,t)=>Kt(e,t))(e,t);if(null==r)throw new Error(e+" not available on this browser");return r},Yt=Object.getPrototypeOf,Xt=e=>{var t=Kt("ownerDocument.defaultView",e);return x(e)&&((e=>Gt("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Yt(e).constructor.name))},Qt=e=>e.dom.nodeName.toLowerCase(),Jt=e=>e.dom.nodeType,Zt=e=>t=>Jt(t)===e,er=e=>tr(e)&&Xt(e.dom),tr=Zt(1),rr=Zt(3),nr=Zt(9),or=Zt(11),ar=e=>t=>tr(t)&&Qt(t)===e,ir=(e,t,r)=>{if(!(S(r)||_(r)||A(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},lr=(e,t,r)=>{ir(e.dom,t,r)},sr=(e,t)=>{var r=e.dom;ke(t,((e,t)=>{ir(r,t,e)}))},dr=(e,t)=>{var r=e.dom.getAttribute(t);return null===r?void 0:r},cr=(e,t)=>K.from(dr(e,t)),ur=(e,t)=>{var r=e.dom;return!(!r||!r.hasAttribute)&&r.hasAttribute(t)},mr=(e,t)=>{e.dom.removeAttribute(t)},fr=e=>ie(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),gr=(e,t)=>{var r=dr(e,t);return void 0===r||""===r?[]:r.split(" ")},pr=e=>void 0!==e.dom.classList,vr=e=>gr(e,"class"),hr=(e,t)=>((e,t,r)=>{var n=gr(e,t).concat([r]);return lr(e,t,n.join(" ")),!0})(e,"class",t),br=(e,t)=>((e,t,r)=>{var n=oe(gr(e,t),(e=>e!==r));return n.length>0?lr(e,t,n.join(" ")):mr(e,t),!1})(e,"class",t),yr=(e,t)=>{pr(e)?e.dom.classList.add(t):hr(e,t)},Cr=e=>{0===(pr(e)?e.dom.classList:vr(e)).length&&mr(e,"class")},wr=(e,t)=>{pr(e)?e.dom.classList.remove(t):br(e,t);Cr(e)},Sr=(e,t)=>{var r=pr(e)?e.dom.classList.toggle(t):((e,t)=>J(vr(e),t)?br(e,t):hr(e,t))(e,t);return Cr(e),r},xr=(e,t)=>pr(e)&&e.dom.classList.contains(t),kr=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Er={fromHtml:(e,t)=>{var r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){var n="HTML does not have a single root node";throw console.error(n,e),new Error(n)}return kr(r.childNodes[0])},fromTag:(e,t)=>{var r=(t||document).createElement(e);return kr(r)},fromText:(e,t)=>{var r=(t||document).createTextNode(e);return kr(r)},fromDom:kr,fromPoint:(e,t,r)=>K.from(e.dom.elementFromPoint(t,r)).map(kr)},Nr=(e,t)=>{var r=[],n=e=>(r.push(e),t(e)),o=t(e);do{o=o.bind(n)}while(o.isSome());return r},_r=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;var n=r;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Tr=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Dr=(e,t)=>e.dom===t.dom,Rr=(e,t)=>{var r=e.dom,n=t.dom;return r!==n&&r.contains(n)},Or=e=>Er.fromDom(e.dom.ownerDocument),Ar=e=>nr(e)?e:Or(e),Br=e=>Er.fromDom(Ar(e).dom.defaultView),Pr=e=>K.from(e.dom.parentNode).map(Er.fromDom),Lr=e=>K.from(e.dom.parentElement).map(Er.fromDom),Mr=(e,t)=>{for(var r=O(t)?t:q,n=e.dom,o=[];null!==n.parentNode&&void 0!==n.parentNode;){var a=n.parentNode,i=Er.fromDom(a);if(o.push(i),!0===r(i))break;n=a}return o},Ir=e=>K.from(e.dom.previousSibling).map(Er.fromDom),Fr=e=>K.from(e.dom.nextSibling).map(Er.fromDom),jr=e=>fe(Nr(e,Ir)),Ur=e=>Nr(e,Fr),zr=e=>ee(e.dom.childNodes,Er.fromDom),Hr=(e,t)=>{var r=e.dom.childNodes;return K.from(r[t]).map(Er.fromDom)},$r=e=>Hr(e,0),Wr=e=>Hr(e,e.dom.childNodes.length-1),qr=e=>e.dom.childNodes.length,Vr=e=>or(e)&&R(e.dom.host),Kr=O(Element.prototype.attachShadow)&&O(Node.prototype.getRootNode),Gr=I(Kr),Yr=Kr?e=>Er.fromDom(e.dom.getRootNode()):Ar,Xr=e=>Vr(e)?e:(e=>{var t=e.dom.head;if(null==t)throw new Error("Head is not available yet");return Er.fromDom(t)})(Ar(e)),Qr=e=>Er.fromDom(e.dom.host),Jr=e=>{if(Gr()&&R(e.target)){var t=Er.fromDom(e.target);if(tr(t)&&Zr(t)&&e.composed&&e.composedPath){var r=e.composedPath();if(r)return be(r)}}return K.from(e.target)},Zr=e=>R(e.dom.shadowRoot),en=e=>{var t=rr(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var r=t.ownerDocument;return(e=>{var t=Yr(e);return Vr(t)?K.some(t):K.none()})(Er.fromDom(t)).fold((()=>r.body.contains(t)),M(en,Qr))},tn=(e,t,r,n,o)=>e(r,n)?K.some(r):O(o)&&o(r)?K.none():t(r,n,o),rn=(e,t,r)=>{for(var n=e.dom,o=O(r)?r:q;n.parentNode;){n=n.parentNode;var a=Er.fromDom(n);if(t(a))return K.some(a);if(o(a))break}return K.none()},nn=(e,t,r)=>tn(((e,t)=>t(e)),rn,e,t,r),on=(e,t)=>se(e.dom.childNodes,(e=>t(Er.fromDom(e)))).map(Er.fromDom),an=(e,t,r)=>rn(e,(e=>_r(e,t)),r),ln=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return Tr(r)?K.none():K.from(r.querySelector(e)).map(Er.fromDom)})(t,e),sn=(e,t,r)=>tn(((e,t)=>_r(e,t)),an,e,t,r),dn=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return en(e)?e.dom.isContentEditable:(t=e,sn(t,"[contenteditable]")).fold(I(r),(e=>"true"===cn(e)))},cn=e=>e.dom.contentEditable,un=e=>void 0!==e.style&&O(e.style.getPropertyValue),mn=(e,t,r)=>{if(!S(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);un(e)&&e.style.setProperty(t,r)},fn=(e,t,r)=>{var n=e.dom;mn(n,t,r)},gn=(e,t)=>{var r=e.dom;ke(t,((e,t)=>{mn(r,t,e)}))},pn=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||en(e)?n:vn(r,t)},vn=(e,t)=>un(e)?e.style.getPropertyValue(t):"",hn=(e,t)=>{var r=e.dom,n=vn(r,t);return K.from(n).filter((e=>e.length>0))},bn=e=>{var t={},r=e.dom;if(un(r))for(var n=0;n<r.style.length;n++){var o=r.style.item(n);t[o]=r.style[o]}return t},yn=(e,t)=>{((e,t)=>{un(e)&&e.style.removeProperty(t)})(e.dom,t),Ht(cr(e,"style").map(tt),"")&&mr(e,"style")},Cn=(e,t)=>{Pr(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},wn=(e,t)=>{Fr(e).fold((()=>{Pr(e).each((e=>{xn(e,t)}))}),(e=>{Cn(e,t)}))},Sn=(e,t)=>{$r(e).fold((()=>{xn(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))},xn=(e,t)=>{e.dom.appendChild(t.dom)},kn=(e,t)=>{Cn(e,t),xn(t,e)},En=(e,t)=>{te(t,(t=>{xn(e,t)}))},Nn=e=>{e.dom.textContent="",te(zr(e),(e=>{_n(e)}))},_n=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Tn=e=>{var t,r,n=zr(e);n.length>0&&(t=e,te(r=n,((e,n)=>{var o=0===n?t:r[n-1];wn(o,e)}))),_n(e)},Dn=e=>ee(e,Er.fromDom),Rn=e=>e.dom.innerHTML,On=(e,t)=>{var r=Or(e).dom,n=Er.fromDom(r.createDocumentFragment()),o=((e,t)=>{var r=(t||document).createElement("div");return r.innerHTML=e,zr(Er.fromDom(r))})(t,r);En(n,o),Nn(e),xn(e,n)},An=(e,t)=>r=>{e(r)&&t((e=>{var t=Er.fromDom(Jr(e).getOr(e.target)),r=()=>e.stopPropagation(),n=()=>e.preventDefault(),o=L(n,r);return((e,t,r,n,o,a,i)=>({target:e,x:t,y:r,stop:n,prevent:o,kill:a,raw:i}))(t,e.clientX,e.clientY,r,n,o,e)})(r))},Bn=(e,t,r,n)=>((e,t,r,n,o)=>{var a=An(r,n);return e.dom.addEventListener(t,a,o),{unbind:U(Pn,e,t,a,o)}})(e,t,r,n,!1),Pn=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},Ln=(e,t)=>({left:e,top:t,translate:(r,n)=>Ln(e+r,t+n)}),Mn=Ln,In=(e,t)=>void 0!==e?e:void 0!==t?t:0,Fn=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?Mn(r.offsetLeft,r.offsetTop):en(e)?(e=>{var t=e.getBoundingClientRect();return Mn(t.left,t.top)})(t):Mn(0,0)},jn=e=>{var t=void 0!==e?e.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,n=t.body.scrollTop||t.documentElement.scrollTop;return Mn(r,n)},Un=(e,t,r)=>{var n=(void 0!==r?r.dom:document).defaultView;n&&n.scrollTo(e,t)},zn=(e,t)=>{Ot().browser.isSafari()&&O(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Hn=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),$n=e=>{var t=void 0===e?window:e,r=t.document,n=jn(Er.fromDom(r));return(e=>{var t=void 0===e?window:e;return Ot().browser.isFirefox()?K.none():K.from(t.visualViewport)})(t).fold((()=>{var e=t.document.documentElement,r=e.clientWidth,o=e.clientHeight;return Hn(n.left,n.top,r,o)}),(e=>Hn(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height)))},Wn=(e,t)=>{var r=[];return te(zr(e),(e=>{t(e)&&(r=r.concat([e])),r=r.concat(Wn(e,t))})),r},qn=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return Tr(r)?[]:ee(r.querySelectorAll(e),Er.fromDom)})(t,e),Vn=(e,t,r)=>an(e,t,r).isSome();class Kn{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,t,r,n){if(e){if(!n&&e[t])return e[t];if(e!==this.rootNode){var o=e[r];if(o)return o;for(var a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(o=a[r])return o}}}findPreviousNode(e,t){if(e){var r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!t)for(var n=r.lastChild;n;n=n.lastChild)if(!n.lastChild)return n;return r}var o=e.parentNode;if(o&&o!==this.rootNode)return o}}}var Gn,Yn,Xn=e=>t=>!!t&&t.nodeType===e,Qn=e=>!!e&&!Object.getPrototypeOf(e),Jn=Xn(1),Zn=e=>{var t=e.toLowerCase();return e=>R(e)&&e.nodeName.toLowerCase()===t},eo=e=>{var t=e.map((e=>e.toLowerCase()));return e=>{if(e&&e.nodeName){var r=e.nodeName.toLowerCase();return J(t,r)}return!1}},to=(e,t)=>{var r=t.toLowerCase().split(" ");return t=>{if(Jn(t)){var n=t.ownerDocument.defaultView;if(n)for(var o=0;o<r.length;o++){var a=n.getComputedStyle(t,null);if((a?a.getPropertyValue(e):null)===r[o])return!0}}return!1}},ro=e=>t=>Jn(t)&&t.hasAttribute(e),no=e=>Jn(e)&&e.hasAttribute("data-mce-bogus"),oo=e=>Jn(e)&&"TABLE"===e.tagName,ao=e=>t=>{if(Jn(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},io=eo(["textarea","input"]),lo=Xn(3),so=Xn(4),co=Xn(7),uo=Xn(8),mo=Xn(9),fo=Xn(11),go=Zn("br"),po=Zn("img"),vo=ao("true"),ho=ao("false"),bo=eo(["td","th"]),yo=eo(["td","th","caption"]),Co=eo(["video","audio","object","embed"]),wo=Zn("li"),So=Zn("details"),xo=Zn("summary"),ko="\ufeff",Eo="Â ",No=e=>e===ko,_o=((e,t)=>{var r=t=>e(t)?K.from(t.dom.nodeValue):K.none();return{get:n=>{if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return r(n).getOr("")},getOption:r,set:(r,n)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=n}}})(rr,"text"),To=e=>_o.get(e),Do=e=>_o.getOption(e),Ro=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),Oo=e=>{var t;return r=>(t=t||pe(e,V),Be(t,Qt(r)))},Ao=Oo(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Bo=e=>tr(e)&&!Ao(e),Po=e=>tr(e)&&"br"===Qt(e),Lo=Oo(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Mo=Oo(["ul","ol","dl"]),Io=Oo(["li","dd","dt"]),Fo=Oo(["thead","tbody","tfoot"]),jo=Oo(["td","th"]),Uo=Oo(["pre","script","textarea","style"]),zo=Oo(Ro),Ho=e=>zo(e)||Bo(e),$o=e=>{var t=qn(e,"br"),r=oe((e=>{for(var t=[],r=e.dom;r;)t.push(Er.fromDom(r)),r=r.lastChild;return t})(e).slice(-1),Po);t.length===r.length&&te(r,_n)},Wo=()=>{var e=Er.fromTag("br");return lr(e,"data-mce-bogus","1"),e},qo=e=>{Nn(e),xn(e,Wo())},Vo=e=>{Wr(e).each((t=>{Ir(t).each((r=>{Ao(e)&&Po(t)&&Ao(r)&&_n(t)}))}))},Ko=ko,Go=No,Yo=e=>e.replace(/\uFEFF/g,""),Xo=Jn,Qo=lo,Jo=e=>(Qo(e)&&(e=e.parentNode),Xo(e)&&e.hasAttribute("data-mce-caret")),Zo=e=>Qo(e)&&Go(e.data),ea=e=>Jo(e)||Zo(e),ta=e=>e.firstChild!==e.lastChild||!go(e.firstChild),ra=e=>{var t=e.container();return!!lo(t)&&(t.data.charAt(e.offset())===Ko||e.isAtStart()&&Zo(t.previousSibling))},na=e=>{var t=e.container();return!!lo(t)&&(t.data.charAt(e.offset()-1)===Ko||e.isAtEnd()&&Zo(t.nextSibling))},oa=e=>Qo(e)&&e.data[0]===Ko,aa=e=>Qo(e)&&e.data[e.data.length-1]===Ko,ia=e=>{return e&&e.hasAttribute("data-mce-caret")?(r=e.getElementsByTagName("br"),n=r[r.length-1],no(n)&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n)),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null;var t,r,n},la=e=>Jo(e.startContainer),sa=vo,da=ho,ca=go,ua=lo,ma=eo(["script","style","textarea"]),fa=eo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),ga=eo(["table"]),pa=ea,va=e=>!pa(e)&&(ua(e)?!ma(e.parentNode):fa(e)||ca(e)||ga(e)||ha(e)),ha=e=>!(e=>Jn(e)&&"true"===e.getAttribute("unselectable"))(e)&&da(e),ba=(e,t)=>va(e)&&((e,t)=>{for(var r=e.parentNode;r&&r!==t;r=r.parentNode){if(ha(r))return!1;if(sa(r))return!0}return!0})(e,t),ya=/^[ \t\r\n]*$/,Ca=e=>ya.test(e),wa=e=>{var t,r=g(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(!No(n))return!1}}catch(e){r.e(e)}finally{r.f()}return!0},Sa=e=>"\n"===e||"\r"===e,xa=function(e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=((e,t)=>t<=0?"":new Array(t+1).join(e))(" ",arguments.length>1&&void 0!==arguments[1]?arguments[1]:4),o=e.replace(/\t/g,n),a=ie(o,((e,n)=>(e=>-1!==" \f\t\v".indexOf(e))(n)||n===Eo?e.pcIsSpace||""===e.str&&t||e.str.length===o.length-1&&r||((e,t)=>t<e.length&&t>=0&&Sa(e[t]))(o,e.str.length+1)?{pcIsSpace:!1,str:e.str+Eo}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:Sa(n),str:e.str+n}),{pcIsSpace:!1,str:""});return a.str},ka=(e,t)=>lo(e)&&Ca(e.data)&&!((e,t)=>{var r=Er.fromDom(t),n=Er.fromDom(e);return Vn(n,"pre,code",U(Dr,r))})(e,t),Ea=(e,t)=>va(e)&&!ka(e,t)||(e=>Jn(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")))(e)||Na(e),Na=ro("data-mce-bookmark"),_a=ro("data-mce-bogus"),Ta=(Gn="data-mce-bogus",Yn="all",e=>Jn(e)&&e.getAttribute(Gn)===Yn),Da=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return((e,t)=>{var r=0;if(Ea(e,e))return!1;var n=e.firstChild;if(!n)return!0;var o=new Kn(n,e);do{if(t){if(Ta(n)){n=o.next(!0);continue}if(_a(n)){n=o.next();continue}}if(go(n))r++,n=o.next();else{if(Ea(n,e))return!1;n=o.next()}}while(n);return r<=1})(e.dom,t)},Ra="data-mce-block",Oa=e=>(e=>oe(Se(e),(e=>!/[A-Z]/.test(e))))(e).join(","),Aa=(e,t)=>R(t.querySelector(e))?(t.setAttribute(Ra,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Ra),!1),Ba=(e,t)=>{var r=Oa(e.getTransparentElements()),n=Oa(e.getBlockElements());return oe(t.querySelectorAll(r),(e=>Aa(n,e)))},Pa=(e,t)=>{for(var r,n=t?"lastChild":"firstChild",o=e[n];o;o=o[n])if(Da(Er.fromDom(o)))return void(null===(r=o.parentNode)||void 0===r||r.removeChild(o))},La=(e,t,r)=>{var n=e.getBlockElements(),o=Er.fromDom(t),a=e=>Qt(e)in n,i=e=>Dr(e,o);te(Dn(r),(t=>{rn(t,a,i).each((r=>{var n=((e,t)=>oe(zr(e),t))(t,(t=>a(t)&&!e.isValidChild(Qt(r),Qt(t))));if(n.length>0){var o=Lr(r);te(n,(e=>{rn(e,a,i).each((t=>{((e,t)=>{var r=document.createRange(),n=e.parentNode;if(n){r.setStartBefore(e),r.setEndBefore(t);var o=r.extractContents();Pa(o,!0),r.setStartAfter(t),r.setEndAfter(e);var a=r.extractContents();Pa(a,!1),Da(Er.fromDom(o))||n.insertBefore(o,e),Da(Er.fromDom(t))||n.insertBefore(t,e),Da(Er.fromDom(a))||n.insertBefore(a,e),n.removeChild(e)}})(t.dom,e.dom)}))})),o.each((t=>Ba(e,t.dom)))}}))}))},Ma=(e,t)=>{var r=Ba(e,t);La(e,t,r),((e,t,r)=>{te([...r,...za(e,t)?[t]:[]],(t=>te(qn(Er.fromDom(t),t.nodeName.toLowerCase()),(t=>{Ha(e,t.dom)&&Tn(t)}))))})(e,t,r)},Ia=(e,t)=>{if(Ua(e,t)){var r=Oa(e.getBlockElements());Aa(r,t)}},Fa=e=>e.hasAttribute(Ra),ja=(e,t)=>Be(e.getTransparentElements(),t),Ua=(e,t)=>Jn(t)&&ja(e,t.nodeName),za=(e,t)=>Ua(e,t)&&Fa(t),Ha=(e,t)=>Ua(e,t)&&!Fa(t),$a=(e,t)=>1===t.type&&ja(e,t.name)&&S(t.attr(Ra)),Wa=Ot().browser,qa=e=>se(e,tr),Va=(e,t)=>e.children&&J(e.children,t),Ka=(e,t,r)=>{var n=0,o=0,a=e.ownerDocument;if(r=r||e,t){if(r===e&&t.getBoundingClientRect&&"static"===pn(Er.fromDom(e),"position")){var i=t.getBoundingClientRect();return{x:n=i.left+(a.documentElement.scrollLeft||e.scrollLeft)-a.documentElement.clientLeft,y:o=i.top+(a.documentElement.scrollTop||e.scrollTop)-a.documentElement.clientTop}}for(var l=t;l&&l!==r&&l.nodeType&&!Va(l,r);){var s=l;n+=s.offsetLeft||0,o+=s.offsetTop||0,l=s.offsetParent}for(l=t.parentNode;l&&l!==r&&l.nodeType&&!Va(l,r);)n-=l.scrollLeft||0,o-=l.scrollTop||0,l=l.parentNode;o+=(e=>Wa.isFirefox()&&"table"===Qt(e)?qa(zr(e)).filter((e=>"caption"===Qt(e))).bind((e=>qa(Ur(e)).map((t=>{var r=t.dom.offsetTop,n=e.dom.offsetTop,o=e.dom.offsetHeight;return r<=n?-o:0})))).getOr(0):0)(Er.fromDom(t))}return{x:n,y:o}},Ga=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=0,n={},o=Er.fromDom(e),a=Ar(o),i=e=>new Promise(((i,l)=>{var s,d=zt._addCacheSuffix(e),c=(e=>Ae(n,e).getOrThunk((()=>({id:"mce-u"+r++,passed:[],failed:[],count:0}))))(d);n[d]=c,c.count++;var u=(e,t)=>{te(e,W),c.status=t,c.passed=[],c.failed=[],s&&(s.onload=null,s.onerror=null,s=null)},m=()=>u(c.passed,2),f=()=>u(c.failed,3);if(i&&c.passed.push(i),l&&c.failed.push(l),1!==c.status)if(2!==c.status)if(3!==c.status){c.status=1;var g,p=Er.fromTag("link",a.dom);sr(p,{rel:"stylesheet",type:"text/css",id:c.id}),t.contentCssCors&&lr(p,"crossOrigin","anonymous"),t.referrerPolicy&&lr(p,"referrerpolicy",t.referrerPolicy),(s=p.dom).onload=m,s.onerror=f,g=p,xn(Xr(o),g),lr(p,"href",d)}else f();else m()})),l=e=>{var t=zt._addCacheSuffix(e);Ae(n,t).each((e=>{var r,a;0===--e.count&&(delete n[t],r=e.id,a=Xr(o),ln(a,"#"+r).each(_n))}))};return{load:i,loadAll:e=>Promise.allSettled(ee(e,(e=>i(e).then(I(e))))).then((e=>{var t=ne(e,(e=>"fulfilled"===e.status));return t.fail.length>0?Promise.reject(ee(t.fail,(e=>e.reason))):ee(t.pass,(e=>e.value))})),unload:l,unloadAll:e=>{te(e,(e=>{l(e)}))},_setReferrerPolicy:e=>{t.referrerPolicy=e},_setContentCssCors:e=>{t.contentCssCors=e}}},Ya=(()=>{var e=new WeakMap;return{forElement:(t,r)=>{var n=Yr(t).dom;return K.from(e.get(n)).getOrThunk((()=>{var t=Ga(n,r);return e.set(n,t),t}))}}})(),Xa=(e,t)=>R(e)&&(Ea(e,t)||Bo(Er.fromDom(e))),Qa=e=>(e=>"span"===e.nodeName.toLowerCase())(e)&&"bookmark"===e.getAttribute("data-mce-type"),Ja=(e,t)=>lo(e)&&e.data.length>0&&((e,t)=>{var r=new Kn(e,t).prev(!1),n=new Kn(e,t).next(!1),o=T(r)||Xa(r,t),a=T(n)||Xa(n,t);return o&&a})(e,t),Za=(e,t,r)=>{var n,o=r||t;if(Jn(t)&&Qa(t))return t;for(var a=t.childNodes,i=a.length-1;i>=0;i--)Za(e,a[i],o);if(Jn(t)){var l=t.childNodes;1===l.length&&Qa(l[0])&&(null===(n=t.parentNode)||void 0===n||n.insertBefore(l[0],t))}return(e=>fo(e)||mo(e))(t)||Ea(t,o)||(e=>!!Jn(e)&&e.childNodes.length>0)(t)||Ja(t,o)||e.remove(t),t},ei=zt.makeMap,ti=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ri=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ni=/[<>&\"\']/g,oi=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ai={128:"â¬",130:"â",131:"Æ",132:"â",133:"â¦",134:"â ",135:"â¡",136:"Ë",137:"â°",138:"Å ",139:"â¹",140:"Å",142:"Å½",145:"â",146:"â",147:"â",148:"â",149:"â¢",150:"â",151:"â",152:"Ë",153:"â¢",154:"Å¡",155:"âº",156:"Å",158:"Å¾",159:"Å¸"},ii={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},li={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},si=(e,t)=>{var r={};if(e){var n=e.split(",");t=t||10;for(var o=0;o<n.length;o+=2){var a=String.fromCharCode(parseInt(n[o],t));if(!ii[a]){var i="&"+n[o+1]+";";r[a]=i,r[i]=a}}return r}},di=si("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ci=(e,t)=>e.replace(t?ti:ri,(e=>ii[e]||e)),ui=(e,t)=>e.replace(t?ti:ri,(e=>e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":ii[e]||"&#"+e.charCodeAt(0)+";")),mi=(e,t,r)=>{var n=r||di;return e.replace(t?ti:ri,(e=>ii[e]||n[e]||e))},fi={encodeRaw:ci,encodeAllRaw:e=>(""+e).replace(ni,(e=>ii[e]||e)),encodeNumeric:ui,encodeNamed:mi,getEncodeFunc:(e,t)=>{var r=si(t)||di,n=ei(e.replace(/\+/g,","));return n.named&&n.numeric?(e,t)=>e.replace(t?ti:ri,(e=>void 0!==ii[e]?ii[e]:void 0!==r[e]?r[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";")):n.named?t?(e,t)=>mi(e,t,r):mi:n.numeric?ui:ci},decode:e=>e.replace(oi,((e,t)=>t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):ai[t]||String.fromCharCode(t):li[e]||di[e]||(e=>{var t=Er.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e})(e)))},gi=(e,t)=>(e=zt.trim(e))?e.split(t||" "):[],pi=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),vi=(e,t)=>{var r=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ue(gi(t,","),(t=>{var n=r.exec(t);if(n){var o=n[1],a=n[2],i=n[3],l=n[4],s=n[5],d={attributes:{},attributesOrder:[]};if(e.each((e=>((e,t)=>{ke(e.attributes,((e,r)=>{t.attributes[r]=e})),t.attributesOrder.push(...e.attributesOrder)})(e,d))),"#"===o?d.paddEmpty=!0:"-"===o&&(d.removeEmpty=!0),"!"===l&&(d.removeEmptyAttrs=!0),s&&((e,t)=>{var r=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,n=/[*?+]/,o=t.attributes,a=t.attributesOrder;te(gi(e,"|"),(e=>{var i=r.exec(e);if(i){var l={},s=i[1],d=i[2].replace(/[\\:]:/g,":"),c=i[3],u=i[4];if("!"===s&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(d),l.required=!0),"-"===s)return delete o[d],void a.splice(zt.inArray(a,d),1);if(c&&("="===c?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:d,value:u}),l.defaultValue=u):"~"===c?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:d,value:u}),l.forcedValue=u):"<"===c&&(l.validValues=zt.makeMap(u,"?"))),n.test(d)){var m=l;t.attributePatterns=t.attributePatterns||[],m.pattern=pi(d),t.attributePatterns.push(m)}else o[d]||a.push(d),o[d]=l}}))})(s,d),i&&(d.outputName=a),"@"===a){if(!e.isNone())return[];e=K.some(d)}return[i?{name:a,element:d,aliasName:i}:{name:a,element:d}]}return[]}))},hi={},bi=zt.makeMap,yi=zt.each,Ci=zt.extend,wi=zt.explode,Si=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=bi(e," ",bi(e.toUpperCase()," "));return Ci(r,t)},xi=e=>Si("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),ki=(e,t)=>{if(e){var r={};return S(e)&&(e={"*":e}),yi(e,((e,n)=>{r[n]=r[n.toUpperCase()]="map"===t?bi(e,/[, ]/):wi(e,/[, ]/)})),r}},Ei=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={},n={},o=[],a={},i={},l=(e,r,n)=>{var o=t[e];if(o)return bi(o,/[, ]/,bi(o.toUpperCase(),/[, ]/));var a=hi[e];return a||(a=Si(r,n),hi[e]=a),a},s=null!==(e=t.schema)&&void 0!==e?e:"html5",d=(e=>{var t=(e=>{var t,r,n,o;return t="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",n=[n,"acronym applet basefont big font strike tt"].join(" "),o=[r=[r,"center dir isindex noframes"].join(" "),n].join(" ")),o=o||[r,n].join(" "),{globalAttributes:t,blockContent:r,phrasingContent:n,flowContent:o}})(e),r=t.globalAttributes,n=t.phrasingContent,o=t.flowContent,a={},i=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=gi(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""),o=gi(e),i=o.length;i--;){var l=gi([r,t].join(" "));a[o[i]]={attributes:pe(l,I({})),attributesOrder:l,children:pe(n,I({}))}}},l=(e,t)=>{for(var r=gi(e),n=gi(t),o=r.length;o--;)for(var i=a[r[o]],l=0,s=n.length;l<s;l++)i.attributes[n[l]]={},i.attributesOrder.push(n[l])};"html5-strict"!==e&&(te(gi("acronym applet basefont big font strike tt"),(e=>{i(e,"",n)})),te(gi("center dir isindex noframes"),(e=>{i(e,"",o)})));return i("html","manifest","head body"),i("head","","base command link meta noscript script style title"),i("title hr noscript br"),i("base","href target"),i("link","href rel media hreflang type sizes hreflang"),i("meta","name http-equiv content charset"),i("style","media type scoped"),i("script","src async defer type charset"),i("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),i("dd div","",o),i("address dt caption","","html4"===e?n:o),i("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),i("blockquote","cite",o),i("ol","reversed start type","li"),i("ul","","li"),i("li","value",o),i("dl","","dt dd"),i("a","href target rel media hreflang type","html4"===e?n:o),i("q","cite",n),i("ins del","cite datetime",o),i("img","src sizes srcset alt usemap ismap width height"),i("iframe","src name width height",o),i("embed","src type width height"),i("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),i("param","name value"),i("map","name",[o,"area"].join(" ")),i("area","alt coords shape href target rel media hreflang type"),i("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),i("colgroup","span","col"),i("col","span"),i("tbody thead tfoot","","tr"),i("tr","","td th"),i("td","colspan rowspan headers",o),i("th","colspan rowspan headers scope abbr",o),i("form","accept-charset action autocomplete enctype method name novalidate target",o),i("fieldset","disabled form name",[o,"legend"].join(" ")),i("label","form for",n),i("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),i("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?o:n),i("select","disabled form multiple name required size","option optgroup"),i("optgroup","disabled label","option"),i("option","disabled label selected value"),i("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),i("menu","type label",[o,"li"].join(" ")),i("noscript","",o),"html4"!==e&&(i("wbr"),i("ruby","",[n,"rt rp"].join(" ")),i("figcaption","",o),i("mark rt rp summary bdi","",n),i("canvas","width height",o),i("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),i("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),i("picture","","img source"),i("source","src srcset type media sizes"),i("track","kind src srclang label default"),i("datalist","",[n,"option"].join(" ")),i("article section nav aside main header footer","",o),i("hgroup","","h1 h2 h3 h4 h5 h6"),i("figure","",[o,"figcaption"].join(" ")),i("time","datetime",n),i("dialog","open",o),i("command","type label icon disabled checked radiogroup command"),i("output","for form name",n),i("progress","value max",n),i("meter","value min max low high optimum",n),i("details","open",[o,"summary"].join(" ")),i("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(l("script","language xml:space"),l("style","xml:space"),l("object","declare classid code codebase codetype archive standby align border hspace vspace"),l("embed","align name hspace vspace"),l("param","valuetype type"),l("a","charset name rev shape coords"),l("br","clear"),l("applet","codebase archive code object alt name width height align hspace vspace"),l("img","name longdesc align border hspace vspace"),l("iframe","longdesc frameborder marginwidth marginheight scrolling align"),l("font basefont","size color face"),l("input","usemap align"),l("select"),l("textarea"),l("h1 h2 h3 h4 h5 h6 div p legend caption","align"),l("ul","type compact"),l("li","type"),l("ol dl menu dir","compact"),l("pre","width xml:space"),l("hr","align noshade size width"),l("isindex","prompt"),l("table","summary width frame rules cellspacing cellpadding align bgcolor"),l("col","width align char charoff valign"),l("colgroup","width align char charoff valign"),l("thead","align char charoff valign"),l("tr","align char charoff valign bgcolor"),l("th","axis align char charoff valign nowrap bgcolor width height"),l("form","accept"),l("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),l("tfoot","align char charoff valign"),l("tbody","align char charoff valign"),l("area","nohref"),l("body","background bgcolor text link vlink alink")),"html4"!==e&&(l("input button select textarea","autofocus"),l("input textarea","placeholder"),l("a","download"),l("link script img","crossorigin"),l("img","loading"),l("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==e&&te([a.video,a.audio],(e=>{delete e.children.audio,delete e.children.video})),te(gi("a form meter progress dfn"),(e=>{a[e]&&delete a[e].children[e]})),delete a.caption.children.table,delete a.script,a})(s);!1===t.verify_html&&(t.valid_elements="*[*]");var c=ki(t.valid_styles),u=ki(t.invalid_styles,"map"),m=ki(t.valid_classes,"map"),f=l("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=l("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),p=l("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),v=l("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),h="td th iframe video audio object script code",b=l("non_empty_elements",h+" pre",p),y=l("move_caret_before_on_enter_elements",h+" table",p),C=l("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),w=l("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",C),S=l("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),x=l("transparent_elements","a ins del canvas map");yi("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),(e=>{i[e]=new RegExp("</"+e+"[^>]*>","gi")}));var k=e=>{var t=K.from(r["@"]),n=/[*?+]/;te(vi(t,null!=e?e:""),(e=>{var t=e.name,a=e.element,i=e.aliasName;if(i&&(r[i]=a),n.test(t)){var l=a;l.pattern=pi(t),o.push(l)}else r[t]=a}))},E=e=>{o=[],te(Se(r),(e=>{delete r[e]})),k(e)},N=e=>{delete hi.text_block_elements,delete hi.block_elements,te((e=>{var t=/^(~)?(.+)$/;return ue(gi(e,","),(e=>{var r=t.exec(e);if(r){var n="~"===r[1];return[{inline:n,cloneName:n?"span":"div",name:r[2]}]}return[]}))})(null!=e?e:""),(e=>{var t=e.inline,o=e.name,i=e.cloneName;if(n[o]=n[i],a[o]=i,b[o.toUpperCase()]={},b[o]={},t||(w[o.toUpperCase()]={},w[o]={}),!r[o]){var l=r[i];delete(l=Ci({},l)).removeEmptyAttrs,delete l.removeEmpty,r[o]=l}ke(n,((e,t)=>{e[i]&&(n[t]=e=Ci({},n[t]),e[o]=e[i])}))}))},_=e=>{te((e=>{var t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ue(gi(e,","),(e=>{var r=t.exec(e);if(r){var n=r[1],o=n?(e=>"-"===e?"remove":"add")(n):"replace";return[{operation:o,name:r[2],validChildren:gi(r[3],"|")}]}return[]}))})(null!=e?e:""),(e=>{var t=e.operation,r=e.name,o=e.validChildren,a="replace"===t?{"#comment":{}}:n[r];te(o,(e=>{"remove"===t?delete a[e]:a[e]={}})),n[r]=a}))},T=e=>{var t=r[e];if(t)return t;for(var n=o.length;n--;){var a=o[n];if(a.pattern.test(e))return a}};t.valid_elements?(E(t.valid_elements),yi(d,((e,t)=>{n[t]=e.children}))):(yi(d,((e,t)=>{r[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},n[t]=e.children})),yi(gi("strong/b em/i"),(e=>{var t=gi(e,"/");r[t[1]].outputName=t[0]})),yi(S,((e,n)=>{r[n]&&(t.padd_empty_block_inline_children&&(r[n].paddInEmptyBlock=!0),r[n].removeEmpty=!0)})),yi(gi("ol ul blockquote a table tbody"),(e=>{r[e]&&(r[e].removeEmpty=!0)})),yi(gi("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),(e=>{r[e]&&(r[e].paddEmpty=!0)})),yi(gi("span"),(e=>{r[e].removeEmptyAttrs=!0}))),N(t.custom_elements),_(t.valid_children),k(t.extended_valid_elements),_("+ol[ul|ol],+ul[ul|ol]"),yi({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},((e,t)=>{r[t]&&(r[t].parentsRequired=gi(e))})),t.invalid_elements&&yi(wi(t.invalid_elements),(e=>{r[e]&&delete r[e]})),T("span")||k("span[!data-mce-type|*]");var D=I(c),R=I(u),O=I(m),A=I(v),B=I(w),P=I(C),L=I(S),M=I(Object.seal(p)),F=I(g),j=I(b),U=I(y),z=I(f),H=I(x),$=I(Object.seal(i)),W=I(a);return{type:s,children:n,elements:r,getValidStyles:D,getValidClasses:O,getBlockElements:B,getInvalidStyles:R,getVoidElements:M,getTextBlockElements:P,getTextInlineElements:L,getBoolAttrs:A,getElementRule:T,getSelfClosingElements:F,getNonEmptyElements:j,getMoveCaretBeforeOnEnterElements:U,getWhitespaceElements:z,getTransparentElements:H,getSpecialElements:$,isValidChild:(e,t)=>{var r=n[e.toLowerCase()];return!(!r||!r[t.toLowerCase()])},isValid:(e,t)=>{var r=T(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;var n=r.attributePatterns;if(n)for(var o=n.length;o--;)if(n[o].pattern.test(t))return!0}return!1},getCustomElements:W,addValidElements:k,setValidElements:E,addCustomElements:N,addValidChildren:_}},Ni=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,l={},s=ko;n&&(e=n.getValidStyles(),t=n.getInvalidStyles());for(var d="\\\" \\' \\; \\: ; : \ufeff".split(" "),c=0;c<d.length;c++)l[d[c]]=s+c,l[s+c]=d[c];var u={parse:e=>{var t,n,d,c,m={},f=!1,g=r.url_converter,p=r.url_converter_scope||u,v=(e,t,r)=>{var n=m[e+"-top"+t];if(n){var o=m[e+"-right"+t];if(o){var a=m[e+"-bottom"+t];if(a){var i=m[e+"-left"+t];if(i){for(var l=[n,o,a,i],s=l.length-1;s--&&l[s]===l[s+1];);s>-1&&r||(m[e+t]=-1===s?l[0]:l.join(" "),delete m[e+"-top"+t],delete m[e+"-right"+t],delete m[e+"-bottom"+t],delete m[e+"-left"+t])}}}}},h=e=>{var t=m[e];if(t){for(var r=t.indexOf(",")>-1?[t]:t.split(" "),n=r.length;n--;)if(r[n]!==r[0])return!1;return m[e]=r[0],!0}},b=e=>(f=!0,l[e]),y=(e,t)=>(f&&(e=e.replace(/\uFEFF[0-9]/g,(e=>l[e]))),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e),C=e=>String.fromCharCode(parseInt(e.slice(1),16)),w=e=>e.replace(/\\[0-9a-f]+/gi,C),S=(e,t,n,o,a,i)=>{if(a=a||i)return"'"+(a=y(a)).replace(/\'/g,"\\'")+"'";if(t=y(t||n||o||""),!r.allow_script_urls){var l=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(l))return"";if(!r.allow_svg_data_urls&&/^data:image\/svg/i.test(l))return""}return g&&(t=g.call(p,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')"};if(e){var x;for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,b).replace(/\"[^\"]+\"|\'[^\']+\'/g,(e=>e.replace(/[;:]/g,b)));x=a.exec(e);){a.lastIndex=x.index+x[0].length;var k=x[1].replace(i,"").toLowerCase(),E=x[2].replace(i,"");if(k&&E){if(k=w(k),E=w(E),-1!==k.indexOf(s)||-1!==k.indexOf('"'))continue;if(!r.allow_script_urls&&("behavior"===k||/expression\s*\(|\/\*|\*\//.test(E)))continue;"font-weight"===k&&"700"===E?E="bold":"color"!==k&&"background-color"!==k||(E=E.toLowerCase()),E=E.replace(o,S),m[k]=f?y(E,!0):E}}v("border","",!0),v("border","-width"),v("border","-color"),v("border","-style"),v("padding",""),v("margin",""),t="border",d="border-style",c="border-color",h(n="border-width")&&h(d)&&h(c)&&(m[t]=m[n]+" "+m[d]+" "+m[c],delete m[n],delete m[d],delete m[c]),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}return m},serialize:(r,n)=>{var o="",a=(e,t)=>{var n=t[e];if(n)for(var a=0,i=n.length;a<i;a++){var l=n[a],s=r[l];s&&(o+=(o.length>0?" ":"")+l+": "+s+";")}};return n&&e?(a("*",e),a(n,e)):ke(r,((e,r)=>{e&&((e,r)=>{if(!t||!r)return!0;var n=t["*"];return!(n&&n[e]||(n=t[r])&&n[e])})(r,n)&&(o+=(o.length>0?" ":"")+r+": "+e+";")})),o}};return u},_i={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Ti=e=>D(e.preventDefault)||(e=>e instanceof Event||O(e.initEvent))(e),Di=(e,t)=>{var r=null!=t?t:{};for(var n in e)Be(_i,n)||(r[n]=e[n]);return R(e.composedPath)&&(r.composedPath=()=>e.composedPath()),R(e.getModifierState)&&(r.getModifierState=t=>e.getModifierState(t)),r},Ri=(e,t,r,n)=>{var o,a=Di(t,n);return a.type=e,D(a.target)&&(a.target=null!==(o=a.srcElement)&&void 0!==o?o:r),Ti(t)&&(a.preventDefault=()=>{a.defaultPrevented=!0,a.isDefaultPrevented=V,O(t.preventDefault)&&t.preventDefault()},a.stopPropagation=()=>{a.cancelBubble=!0,a.isPropagationStopped=V,O(t.stopPropagation)&&t.stopPropagation()},a.stopImmediatePropagation=()=>{a.isImmediatePropagationStopped=V,a.stopPropagation()},(e=>e.isDefaultPrevented===V||e.isDefaultPrevented===q)(a)||(a.isDefaultPrevented=!0===a.defaultPrevented?V:q,a.isPropagationStopped=!0===a.cancelBubble?V:q,a.isImmediatePropagationStopped=q)),a},Oi=/^(?:mouse|contextmenu)|click/,Ai=(e,t,r,n)=>{e.addEventListener(t,r,n||!1)},Bi=(e,t,r,n)=>{e.removeEventListener(t,r,n||!1)},Pi=(e,t)=>{var r=Ri(e.type,e,document,t);if((e=>R(e)&&Oi.test(e.type))(e)&&T(e.pageX)&&!T(e.clientX)){var n=r.target.ownerDocument||document,o=n.documentElement,a=n.body,i=r;i.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return r},Li=(e,t,r)=>{var n=e.document,o={type:"ready"};if(r.domLoaded)t(o);else{var a=()=>{Bi(e,"DOMContentLoaded",a),Bi(e,"load",a),r.domLoaded||(r.domLoaded=!0,t(o)),e=null};"complete"===n.readyState||"interactive"===n.readyState&&n.body?a():Ai(e,"DOMContentLoaded",a),r.domLoaded||Ai(e,"load",a)}};class Mi{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,r,n){var o,a,i=this,l=window,s=e=>{i.executeHandlers(Pi(e||l.event),a)};if(!e||lo(e)||uo(e))return r;e[i.expando]?a=e[i.expando]:(a=i.count++,e[i.expando]=a,i.events[a]={}),n=n||e;for(var d=t.split(" "),c=d.length;c--;){var u=d[c],m=s,f=!1,g=!1;"DOMContentLoaded"===u&&(u="ready"),i.domLoaded&&"ready"===u&&"complete"===e.readyState?r.call(n,Pi({type:u})):(i.hasFocusIn||"focusin"!==u&&"focusout"!==u||(f=!0,g="focusin"===u?"focus":"blur",m=e=>{var t=Pi(e||l.event);t.type="focus"===t.type?"focusin":"focusout",i.executeHandlers(t,a)}),(o=i.events[a][u])?"ready"===u&&i.domLoaded?r(Pi({type:u})):o.push({func:r,scope:n}):(i.events[a][u]=o=[{func:r,scope:n}],o.fakeName=g,o.capture=f,o.nativeHandler=m,"ready"===u?Li(e,m,i):Ai(e,g||u,m,f)))}return e=o=null,r}unbind(e,t,r){if(!e||lo(e)||uo(e))return this;var n=e[this.expando];if(n){var o=this.events[n];if(t)for(var a=t.split(" "),i=a.length;i--;){var l=a[i],s=o[l];if(s){if(r)for(var d=s.length;d--;)if(s[d].func===r){var c=s.nativeHandler,u=s.fakeName,m=s.capture,f=s.slice(0,d).concat(s.slice(d+1));f.nativeHandler=c,f.fakeName=u,f.capture=m,o[l]=f}r&&0!==s.length||(delete o[l],Bi(e,s.fakeName||l,s.nativeHandler,s.capture))}}else ke(o,((t,r)=>{Bi(e,t.fakeName||r,t.nativeHandler,t.capture)})),o={};for(var g in o)if(Be(o,g))return this;delete this.events[n];try{delete e[this.expando]}catch(t){e[this.expando]=null}}return this}fire(e,t,r){return this.dispatch(e,t,r)}dispatch(e,t,r){if(!e||lo(e)||uo(e))return this;var n=Pi({type:t,target:e},r);do{var o=e[this.expando];o&&this.executeHandlers(n,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!n.isPropagationStopped());return this}clean(e){if(!e||lo(e)||uo(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);for(var t=e.getElementsByTagName("*"),r=t.length;r--;)(e=t[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){var r=this.events[t],n=r&&r[e.type];if(n)for(var o=0,a=n.length;o<a;o++){var i=n[o];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Mi.Event=new Mi;var Ii=zt.each,Fi=zt.grep,ji="data-mce-style",Ui=zt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),zi=(e,t,r)=>{D(r)||""===r?mr(e,t):lr(e,t,r)},Hi=e=>e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),$i=(e,t)=>{var r=0;if(e)for(var n=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){var a=o.nodeType;(!t||!lo(o)||a!==n&&o.data.length)&&(r++,n=a)}return r},Wi=(e,t)=>{var r=dr(t,"style"),n=e.serialize(e.parse(r),Qt(t));zi(t,ji,n)},qi=(e,t,r)=>{var n=Hi(t);D(r)||""===r?yn(e,n):fn(e,n,((e,t)=>A(e)?Be(Ui,t)?e+"":e+"px":e)(r,n))},Vi=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},o=window,a={},i=0,l=Ya.forElement(Er.fromDom(t),{contentCssCors:r.contentCssCors,referrerPolicy:r.referrerPolicy}),s=[],d=r.schema?r.schema:Ei({}),c=Ni({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope},r.schema),m=r.ownEvents?new Mi:Mi.Event,f=d.getBlockElements(),g=e=>e&&t&&S(e)?t.getElementById(e):e,p=e=>{var t=g(e);return R(t)?Er.fromDom(t):null},v=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=p(e);if(R(o)&&tr(o)){var a=G[t];r=a&&a.get?a.get(o.dom,t):dr(o,t)}return R(r)?r:n},h=e=>{var t=g(e);return D(t)?[]:t.attributes},b=(e,t,n)=>{T(e,(e=>{if(Jn(e)){var o=Er.fromDom(e),a=""===n?null:n,i=dr(o,t),l=G[t];l&&l.set?l.set(o.dom,a,t):zi(o,t,a),i!==a&&r.onSetAttrib&&r.onSetAttrib({attrElm:o.dom,attrName:t,attrValue:a})}}))},y=()=>r.root_element||t.body,C=(e,r)=>Ka(t.body,g(e),r),w=(e,t,r)=>{var n=g(e);if(!D(n)&&Jn(n))return r?pn(Er.fromDom(n),Hi(t)):("float"===(t=t.replace(/-(\D)/g,((e,t)=>t.toUpperCase())))&&(t="cssFloat"),n.style?n.style[t]:void 0)},x=e=>{var t=g(e);if(!t)return{w:0,h:0};var r=w(t,"width"),n=w(t,"height");return r&&-1!==r.indexOf("px")||(r="0"),n&&-1!==n.indexOf("px")||(n="0"),{w:parseInt(r,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},k=(e,t)=>{if(!e)return!1;var r=E(e)?e:[e];return Z(r,(e=>_r(Er.fromDom(e),t)))},N=(e,t,r,n)=>{var o=[],a=g(e);n=void 0===n;var i=r||("BODY"!==y().nodeName?y().parentNode:null);if(S(t))if("*"===t)t=Jn;else{var l=t;t=e=>k(e,l)}for(;a&&!(a===i||D(a.nodeType)||mo(a)||fo(a));){if(!t||t(a)){if(!n)return[a];o.push(a)}a=a.parentNode}return n?o:null},_=(e,t,r)=>{var n=t;if(e){S(t)&&(n=e=>k(e,t));for(var o=e[r];o;o=o[r])if(O(n)&&n(o))return o}return null},T=function(e,t,r){var n=null!=r?r:this;if(E(e)){var o=[];return Ii(e,((e,r)=>{var a=g(e);a&&o.push(t.call(n,a,r))})),o}var a=g(e);return!!a&&t.call(n,a)},A=(e,t)=>{T(e,(e=>{ke(t,((t,r)=>{b(e,r,t)}))}))},B=(e,t)=>{T(e,(e=>{var r=Er.fromDom(e);On(r,t)}))},L=(e,r,n,o,a)=>T(e,(e=>{var i=S(r)?t.createElement(r):r;return R(n)&&A(i,n),o&&(!S(o)&&o.nodeType?i.appendChild(o):S(o)&&B(i,o)),a?i:e.appendChild(i)})),M=(e,r,n)=>L(t.createElement(e),e,r,n,!0),F=fi.encodeAllRaw,j=(e,t)=>T(e,(e=>{var r=Er.fromDom(e);return t&&te(zr(r),(e=>{rr(e)&&0===e.dom.length?_n(e):Cn(r,e)})),_n(r),r.dom})),U=(e,t,r)=>{T(e,(e=>{if(Jn(e)){var n=Er.fromDom(e),o=t.split(" ");te(o,(e=>{R(r)?(r?yr:wr)(n,e):Sr(n,e)}))}}))},z=(e,t,r)=>T(t,(n=>{var o,a=E(t)?e.cloneNode(!0):e;return r&&Ii(Fi(n.childNodes),(e=>{a.appendChild(e)})),null===(o=n.parentNode)||void 0===o||o.replaceChild(a,n),n})),H=e=>{if(Jn(e)){var t="a"===e.nodeName.toLowerCase()&&!v(e,"href")&&v(e,"id");if(v(e,"name")||v(e,"data-mce-bookmark")||t)return!0}return!1},$=()=>t.createRange(),W=(e,n,a,i)=>{if(E(e)){for(var l=e.length,d=[];l--;)d[l]=W(e[l],n,a,i);return d}return!r.collect||e!==t&&e!==o||s.push([e,n,a,i]),m.bind(e,n,a,i||K)},q=(e,r,n)=>{if(E(e)){for(var a=e.length,i=[];a--;)i[a]=q(e[a],r,n);return i}if(s.length>0&&(e===t||e===o))for(var l=s.length;l--;){var d=u(s[l],3),c=d[0],f=d[1],g=d[2];e!==c||r&&r!==f||n&&n!==g||m.unbind(c,f,g)}return m.unbind(e,r,n)},V=e=>{if(e&&Jn(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},K={doc:t,settings:r,win:o,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:l,boundEvents:s,styles:c,schema:d,events:m,isBlock:e=>S(e)?Be(f,e):Jn(e)&&(Be(f,e.nodeName)||za(d,e)),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:y,getViewPort:e=>{var t=$n(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:e=>{var t=g(e),r=C(t),n=x(t);return{x:r.x,y:r.y,w:n.w,h:n.h}},getSize:x,getParent:(e,t,r)=>{var n=N(e,t,r,!1);return n&&n.length>0?n[0]:null},getParents:N,get:g,getNext:(e,t)=>_(e,t,"nextSibling"),getPrev:(e,t)=>_(e,t,"previousSibling"),select:(e,n)=>{var o,a,i=null!==(a=null!==(o=g(n))&&void 0!==o?o:r.root_element)&&void 0!==a?a:t;return O(i.querySelectorAll)?Ce(i.querySelectorAll(e)):[]},is:k,add:L,create:M,createHTML:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="<"+e;for(var o in t)Pe(t,o)&&(n+=" "+o+'="'+F(t[o])+'"');return at(r)&&Be(d.getVoidElements(),e)?n+" />":n+">"+r+"</"+e+">"},createFragment:e=>{var r,n=t.createElement("div"),o=t.createDocumentFragment();for(o.appendChild(n),e&&(n.innerHTML=e);r=n.firstChild;)o.appendChild(r);return o.removeChild(n),o},remove:j,setStyle:(e,t,n)=>{T(e,(e=>{var o=Er.fromDom(e);qi(o,t,n),r.update_styles&&Wi(c,o)}))},getStyle:w,setStyles:(e,t)=>{T(e,(e=>{var n=Er.fromDom(e);ke(t,((e,t)=>{qi(n,t,e)})),r.update_styles&&Wi(c,n)}))},removeAllAttribs:e=>T(e,(e=>{for(var t=e.attributes,r=t.length-1;r>=0;r--)e.removeAttributeNode(t.item(r))})),setAttrib:b,setAttribs:A,getAttrib:v,getPos:C,parseStyle:e=>c.parse(e),serializeStyle:(e,t)=>c.serialize(e,t),addStyle:r=>{if(K!==e.DOM&&t===document){if(n[r])return;n[r]=!0}var o=t.getElementById("mceDefaultStyles");if(!o){(o=t.createElement("style")).id="mceDefaultStyles",o.type="text/css";var a=t.head;a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o)}o.styleSheet?o.styleSheet.cssText+=r:o.appendChild(t.createTextNode(r))},loadCSS:e=>{e||(e=""),te(e.split(","),(e=>{a[e]=!0,l.load(e).catch(P)}))},addClass:(e,t)=>{U(e,t,!0)},removeClass:(e,t)=>{U(e,t,!1)},hasClass:(e,t)=>{var r=p(e),n=t.split(" ");return R(r)&&me(n,(e=>xr(r,e)))},toggleClass:U,show:e=>{T(e,(e=>yn(Er.fromDom(e),"display")))},hide:e=>{T(e,(e=>fn(Er.fromDom(e),"display","none")))},isHidden:e=>{var t=p(e);return R(t)&&Ht(hn(t,"display"),"none")},uniqueId:e=>(e||"mce_")+i++,setHTML:B,getOuterHTML:e=>{var t=p(e);return R(t)?Jn(t.dom)?t.dom.outerHTML:(e=>{var t=Er.fromTag("div"),r=Er.fromDom(e.dom.cloneNode(!0));return xn(t,r),Rn(t)})(t):""},setOuterHTML:(e,t)=>{T(e,(e=>{Jn(e)&&(e.outerHTML=t)}))},decode:fi.decode,encode:F,insertAfter:(e,t)=>{var r=g(t);return T(e,(e=>{var t=null==r?void 0:r.parentNode,n=null==r?void 0:r.nextSibling;return t&&(n?t.insertBefore(e,n):t.appendChild(e)),e}))},replace:z,rename:(e,t)=>{if(e.nodeName!==t.toUpperCase()){var r=M(t);return Ii(h(e),(t=>{b(r,t.nodeName,v(e,t.nodeName))})),z(r,e,!0),r}return e},findCommonAncestor:(e,t)=>{for(var r=e;r;){for(var n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},run:T,getAttribs:h,isEmpty:(e,t,r)=>{var n=0;if(H(e))return!1;var o=e.firstChild;if(o){var a=new Kn(o,e),i=d?d.getWhitespaceElements():{},l=t||(d?d.getNonEmptyElements():null),s=o;do{if(Jn(s)){var c=s.getAttribute("data-mce-bogus");if(c){s=a.next("all"===c);continue}var u=s.nodeName.toLowerCase();if(l&&l[u]){if("br"===u){n++,s=a.next();continue}return!1}if(H(s))return!1}if(uo(s))return!1;if(lo(s)&&!Ca(s.data)&&(!(null==r?void 0:r.includeZwsp)||!wa(s.data)))return!1;if(lo(s)&&s.parentNode&&i[s.parentNode.nodeName]&&Ca(s.data))return!1;s=a.next()}while(s)}return n<=1},createRng:$,nodeIndex:$i,split:(e,t,r)=>{var n,o,a=$();if(e&&t&&e.parentNode&&t.parentNode){var i=e.parentNode;return a.setStart(i,$i(e)),a.setEnd(t.parentNode,$i(t)),n=a.extractContents(),(a=$()).setStart(t.parentNode,$i(t)+1),a.setEnd(i,$i(e)+1),o=a.extractContents(),i.insertBefore(Za(K,n),e),r?i.insertBefore(r,e):i.insertBefore(t,e),i.insertBefore(Za(K,o),e),j(e),r||t}},bind:W,unbind:q,fire:(e,t,r)=>m.dispatch(e,t,r),dispatch:(e,t,r)=>m.dispatch(e,t,r),getContentEditable:V,getContentEditableParent:e=>{for(var t=y(),r=null,n=e;n&&n!==t&&null===(r=V(n));n=n.parentNode);return r},isEditable:e=>{if(R(e)){var t=Jn(e)?e:e.parentElement;return R(t)&&dn(Er.fromDom(t))}return!1},destroy:()=>{if(s.length>0)for(var e=s.length;e--;){var t=u(s[e],3),r=t[0],n=t[1],o=t[2];m.unbind(r,n,o)}ke(a,((e,t)=>{l.unload(t),delete a[t]}))},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},G=((e,t,r)=>{var n=t.keep_values,o={set:(e,n,o)=>{var a=Er.fromDom(e);O(t.url_converter)&&R(n)&&(n=t.url_converter.call(t.url_converter_scope||r(),String(n),o,e)),zi(a,"data-mce-"+o,n),zi(a,o,n)},get:(e,t)=>{var r=Er.fromDom(e);return dr(r,"data-mce-"+t)||dr(r,t)}},a={style:{set:(t,r)=>{var o=Er.fromDom(t);n&&zi(o,ji,r),mr(o,"style"),S(r)&&gn(o,e.parse(r))},get:t=>{var r=Er.fromDom(t),n=dr(r,ji)||dr(r,"style");return e.serialize(e.parse(n),Qt(r))}}};return n&&(a.href=a.src=o),a})(c,r,I(K));return K};Vi.DOM=Vi(document),Vi.nodeIndex=$i;var Ki=Vi.DOM;class Gi{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise(((t,r)=>{var n,o=Ki,a=()=>{o.remove(i),n&&(n.onerror=n.onload=n=null)},i=o.uniqueId();(n=document.createElement("script")).id=i,n.type="text/javascript",n.src=zt._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(n,"referrerpolicy",this.settings.referrerPolicy),n.onload=()=>{a(),t()},n.onerror=()=>{a(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(n)}))}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){var t=this;return t.queue.push(e),void 0===t.states[e]&&(t.states[e]=0),new Promise(((r,n)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:r,reject:n})}))}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){var e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){var t=this,r=(e,r)=>{Ae(t.scriptLoadedCallbacks,r).each((t=>{te(t,(t=>t[e](r)))})),delete t.scriptLoadedCallbacks[r]},n=e=>{var t=oe(e,(e=>"rejected"===e.status));return t.length>0?Promise.reject(ue(t,(e=>{var t=e.reason;return E(t)?t:[t]}))):Promise.resolve()},o=e=>Promise.allSettled(ee(e,(e=>2===t.states[e]?(r("resolve",e),Promise.resolve()):3===t.states[e]?(r("reject",e),Promise.reject(e)):(t.states[e]=1,t.loadScript(e).then((()=>{t.states[e]=2,r("resolve",e);var a=t.queue;return a.length>0?(t.queue=[],o(a).then(n)):Promise.resolve()}),(()=>(t.states[e]=3,r("reject",e),Promise.reject(e)))))))),a=e=>(t.loading=!0,o(e).then((e=>{t.loading=!1;var r=t.queueLoadedCallbacks.shift();return K.from(r).each(W),n(e)}))),i=Le(e);return t.loading?new Promise(((e,r)=>{t.queueLoadedCallbacks.push((()=>{a(i).then(e,r)}))})):a(i)}}Gi.ScriptLoader=new Gi;var Yi=e=>{var t=e;return{get:()=>t,set:e=>{t=e}}},Xi={},Qi=Yi("en"),Ji=()=>Ae(Xi,Qi.get()),Zi={getData:()=>Ee(Xi,(e=>d({},e))),setCode:e=>{e&&Qi.set(e)},getCode:()=>Qi.get(),add:(e,t)=>{var r=Xi[e];r||(Xi[e]=r={});var n=ee(Se(t),(e=>e.toLowerCase()));ke(t,((e,o)=>{var a=o.toLowerCase();a!==o&&((e,t)=>{var r=e.indexOf(t);return-1!==r&&e.indexOf(t,r+1)>r})(n,a)?(Be(t,a)||(r[a]=e),r[o]=e):r[a]=e}))},translate:e=>{var t,r=Ji().getOr({}),n=e=>O(e)?Object.prototype.toString.call(e):o(e)?"":""+e,o=e=>""===e||null==e,a=e=>{var t=n(e);return Be(r,t)?n(r[t]):Ae(r,t.toLowerCase()).map(n).getOr(t)},i=e=>e.replace(/{context:\w+}$/,"");if(o(e))return"";if(x(t=e)&&Be(t,"raw"))return n(e.raw);if((e=>E(e)&&e.length>1)(e)){var l=e.slice(1);return i(a(e[0]).replace(/\{([0-9]+)\}/g,((e,t)=>Be(l,t)?n(l[t]):e)))}return i(a(e))},isRtl:()=>Ji().bind((e=>Ae(e,"_dir"))).exists((e=>"rtl"===e)),hasCode:e=>Be(Xi,e)},el=()=>{var e=[],t={},r={},n=[],o=(e,t)=>{var r=oe(n,(r=>r.name===e&&r.state===t));te(r,(e=>e.resolve()))},a=e=>Be(t,e),i=(e,r)=>{var n=Zi.getCode();!n||r&&-1===(","+(r||"")+",").indexOf(","+n+",")||Gi.ScriptLoader.add(t[e]+"/langs/"+n+".js")},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"added";return"added"===t&&(e=>Be(r,e))(e)||"loaded"===t&&a(e)?Promise.resolve():new Promise((r=>{n.push({name:e,state:t,resolve:r})}))};return{items:e,urls:t,lookup:r,get:e=>{if(r[e])return r[e].instance},requireLangPack:(e,t)=>{!1!==el.languageLoad&&(a(e)?i(e,t):l(e,"loaded").then((()=>i(e,t))))},add:(t,n)=>(e.push(n),r[t]={instance:n},o(t,"added"),n),remove:e=>{delete t[e],delete r[e]},createUrl:(e,t)=>S(t)?S(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,n)=>{if(t[e])return Promise.resolve();var a=S(n)?n:n.prefix+n.resource+n.suffix;0!==a.indexOf("/")&&-1===a.indexOf("://")&&(a=el.baseURL+"/"+a),t[e]=a.substring(0,a.lastIndexOf("/"));var i=()=>(o(e,"loaded"),Promise.resolve());return r[e]?i():Gi.ScriptLoader.add(a).then(i)},waitFor:l}};el.languageLoad=!0,el.baseURL="",el.PluginManager=el(),el.ThemeManager=el(),el.ModelManager=el();var tl=()=>{var e=(e=>{var t=Yi(K.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(K.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(K.some(e))}}})(P);return d(d({},e),{},{on:t=>e.get().each(t)})},rl=(e,t)=>{var r=null;return{cancel:()=>{N(r)||(clearTimeout(r),r=null)},throttle:function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];N(r)&&(r=setTimeout((()=>{r=null,e.apply(null,o)}),t))}}},nl=(e,t)=>{var r=null,n=()=>{N(r)||(clearTimeout(r),r=null)};return{cancel:n,throttle:function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];n(),r=setTimeout((()=>{r=null,e.apply(null,a)}),t)}}},ol=I("mce-annotation"),al=I("data-mce-annotation"),il=I("data-mce-annotation-uid"),ll=I("data-mce-annotation-active"),sl=I("data-mce-annotation-classes"),dl=I("data-mce-annotation-attrs"),cl=e=>t=>Dr(t,e),ul=(e,t)=>{var r=e.selection.getRng(),n=Er.fromDom(r.startContainer),o=Er.fromDom(e.getBody()),a=t.fold((()=>"."+ol()),(e=>`[${al()}="${e}"]`)),i=Hr(n,r.startOffset).getOr(n);return sn(i,a,cl(o)).bind((t=>cr(t,`${il()}`).bind((r=>cr(t,`${al()}`).map((t=>{var n=fl(e,r);return{uid:r,name:t,elements:n}}))))))},ml=(e,t)=>ur(e,"data-mce-bogus")||Vn(e,'[data-mce-bogus="all"]',cl(t)),fl=(e,t)=>{var r=Er.fromDom(e.getBody()),n=qn(r,`[${il()}="${t}"]`);return oe(n,(e=>!ml(e,r)))},gl=(e,t)=>{var r=Er.fromDom(e.getBody()),n=qn(r,`[${al()}="${t}"]`),o={};return te(n,(e=>{if(!ml(e,r)){var t=dr(e,il()),n=Ae(o,t).getOr([]);o[t]=n.concat([e])}})),o},pl=(e,t)=>{var r=Yi({}),n=()=>({listeners:[],previous:tl()}),o=(e,t)=>{a(e,(e=>(t(e),e)))},a=(e,t)=>{var o=r.get(),a=t(Ae(o,e).getOrThunk(n));o[e]=a,r.set(o)},i=(t,r)=>{te(fl(e,t),(e=>{r?lr(e,ll(),"true"):mr(e,ll())}))},l=nl((()=>{var r=ve(t.getNames());te(r,(t=>{a(t,(r=>{var n=r.previous.get();return ul(e,K.some(t)).fold((()=>{n.each((e=>{(e=>{o(e,(t=>{te(t.listeners,(t=>t(!1,e)))}))})(t),r.previous.clear(),i(e,!1)}))}),(e=>{var t=e.uid,a=e.name,l=e.elements;Ht(n,t)||(n.each((e=>i(e,!1))),((e,t,r)=>{o(e,(n=>{te(n.listeners,(n=>n(!0,e,{uid:t,nodes:ee(r,(e=>e.dom))})))}))})(a,t,l),r.previous.set(t),i(t,!0))})),{previous:r.previous,listeners:r.listeners}}))}))}),30);e.on("remove",(()=>{l.cancel()})),e.on("NodeChange",(()=>{l.throttle()}));return{addListener:(e,t)=>{a(e,(e=>({previous:e.previous,listeners:e.listeners.concat([t])})))}}},vl=(e,t)=>{var r=al();e.serializer.addTempAttr(ll()),e.serializer.addAttributeFilter(r,(e=>{var n,o=g(e);try{var a=function(){var e=n.value;(e=>K.from(e.attr(r)).bind(t.lookup))(e).each((t=>{!1===t.persistent&&("span"===e.name?e.unwrap():(e=>{var t,r;e.attr(il(),null),e.attr(al(),null),e.attr(ll(),null);var n=K.from(e.attr(dl())).map((e=>e.split(","))).getOr([]),o=K.from(e.attr(sl())).map((e=>e.split(","))).getOr([]);te(n,(t=>e.attr(t,null)));var a=null!==(r=null===(t=e.attr("class"))||void 0===t?void 0:t.split(" "))&&void 0!==r?r:[],i=ge(a,[ol()].concat(o));e.attr("class",i.length>0?i.join(" "):null),e.attr(sl(),null),e.attr(dl(),null)})(e))}))};for(o.s();!(n=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}}))},hl=0,bl=e=>{var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++hl+String(t)},yl=(e,t)=>Er.fromDom(e.dom.cloneNode(t)),Cl=e=>yl(e,!1),wl=e=>yl(e,!0),Sl=(e,t)=>{var r=((e,t)=>{var r=Er.fromTag(t),n=fr(e);return sr(r,n),r})(e,t);wn(e,r);var n=zr(e);return En(r,n),_n(e),r},xl=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q,n=new Kn(e,t),o=e=>{var t;do{t=n[e]()}while(t&&!lo(t)&&!r(t));return K.from(t).filter(lo)};return{current:()=>K.from(n.current()).filter(lo),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},kl=(e,t)=>{var r=t||(t=>e.isBlock(t)||go(t)||ho(t)),n=(e,t,r,o)=>{if(lo(e)){var a=o(e,t,e.data);if(-1!==a)return K.some({container:e,offset:a})}return r().bind((e=>n(e.container,e.offset,r,o)))};return{backwards:(t,o,a,i)=>{var l=xl(t,null!=i?i:e.getRoot(),r);return n(t,o,(()=>l.prev().map((e=>({container:e,offset:e.length})))),a).getOrNull()},forwards:(t,o,a,i)=>{var l=xl(t,null!=i?i:e.getRoot(),r);return n(t,o,(()=>l.next().map((e=>({container:e,offset:0})))),a).getOrNull()}}},El=Math.round,Nl=e=>e?{left:El(e.left),top:El(e.top),bottom:El(e.bottom),right:El(e.right),width:El(e.width),height:El(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},_l=(e,t)=>(e=Nl(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Tl=(e,t,r)=>e>=0&&e<=Math.min(t.height,r.height)/2,Dl=(e,t)=>{var r=Math.min(t.height/2,e.height/2);return e.bottom-r<t.top||!(e.top>t.bottom)&&Tl(t.top-e.bottom,e,t)},Rl=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&Tl(t.bottom-e.top,e,t),Ol=(e,t,r)=>{var n=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(r,e.top+e.height),e.top);return Math.sqrt((t-n)*(t-n)+(r-o)*(r-o))},Al=e=>{var t=e.startContainer,r=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===r+1?t.childNodes[r]:null},Bl=(e,t)=>{if(Jn(e)&&e.hasChildNodes()){var r=e.childNodes,n=((e,t,r)=>Math.min(Math.max(e,t),r))(t,0,r.length-1);return r[n]}return e},Pl=new RegExp("[Ì-Í¯Ò-ÒÒ-ÒÖ-Ö½Ö¿×-××-××Ø-ØÙ-ÙÙ°Û-ÛÛ-Û¤Û§-Û¨Ûª-Û­ÜÜ°-ÝÞ¦-Þ°ß«-ß³à -à à -à £à ¥-à §à ©-à ­à¡-à¡à££-à¤à¤ºà¤¼à¥-à¥à¥à¥-à¥à¥¢-à¥£à¦à¦¼à¦¾à§-à§à§à§à§¢-à§£à¨-à¨à¨¼à©-à©à©-à©à©-à©à©à©°-à©±à©µàª-àªàª¼à«-à«à«-à«à«à«¢-à«£à¬à¬¼à¬¾à¬¿à­-à­à­à­à­à­¢-à­£à®à®¾à¯à¯à¯à°à°¾-à±à±-à±à±-à±à±-à±à±¢-à±£à²à²¼à²¿à³à³à³-à³à³-à³à³¢-à³£à´à´¾àµ-àµàµàµàµ¢-àµ£à·à·à·-à·à·à·à¸±à¸´-à¸ºà¹-à¹àº±àº´-àº¹àº»-àº¼à»-à»à¼-à¼à¼µà¼·à¼¹à½±-à½¾à¾-à¾à¾-à¾à¾-à¾à¾-à¾¼à¿á­-á°á²-á·á¹-áºá½-á¾á-áá-á á±-á´áá-áááá-áá-áá²-á´á-áá²-á³á´-áµá·-á½áá-ááá -á á¢©á¤ -á¤¢á¤§-á¤¨á¤²á¤¹-á¤»á¨-á¨á¨á©á©-á©á© á©¢á©¥-á©¬á©³-á©¼á©¿áª°-áª½áª¾á¬-á¬á¬´á¬¶-á¬ºá¬¼á­á­«-á­³á®-á®á®¢-á®¥á®¨-á®©á®«-á®­á¯¦á¯¨-á¯©á¯­á¯¯-á¯±á°¬-á°³á°¶-á°·á³-á³á³-á³ á³¢-á³¨á³­á³´á³¸-á³¹á·-á·µá·¼-á·¿â-ââ-ââ-â â¡â¢-â¤â¥-â°â³¯-â³±âµ¿â· -â·¿ãª-ã­ã®-ã¯ã-ãê¯ê°-ê²ê´-ê½ê-êê°-ê±ê ê ê ê ¥-ê ¦ê£ê£ -ê£±ê¤¦-ê¤­ê¥-ê¥ê¦-ê¦ê¦³ê¦¶-ê¦¹ê¦¼ê§¥ê¨©-ê¨®ê¨±-ê¨²ê¨µ-ê¨¶ê©ê©ê©¼êª°êª²-êª´êª·-êª¸êª¾-êª¿ê«ê«¬-ê«­ê«¶ê¯¥ê¯¨ê¯­ï¬ï¸-ï¸ï¸ -ï¸¯ï¾-ï¾]"),Ll=e=>S(e)&&e.charCodeAt(0)>=768&&Pl.test(e),Ml=Jn,Il=va,Fl=to("display","block table"),jl=to("float","left right"),Ul=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{for(var r=0;r<t.length;r++)if(!t[r](e))return!1;return!0}}(Ml,Il,z(jl)),zl=z(to("white-space","pre pre-line pre-wrap")),Hl=lo,$l=go,Wl=Vi.nodeIndex,ql=(e,t)=>t<0&&Jn(e)&&e.hasChildNodes()?void 0:Bl(e,t),Vl=e=>e?e.createRange():Vi.DOM.createRng(),Kl=e=>S(e)&&/[\r\n\t ]/.test(e),Gl=e=>!!e.setStart&&!!e.setEnd,Yl=e=>{var t=e.startContainer,r=e.startOffset;if(Kl(e.toString())&&zl(t.parentNode)&&lo(t)){var n=t.data;if(Kl(n[r-1])||Kl(n[r+1]))return!0}return!1},Xl=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Ql=e=>{var t,r,n=e.getClientRects();return r=n.length>0?Nl(n[0]):Nl(e.getBoundingClientRect()),!Gl(e)&&$l(e)&&Xl(r)?(e=>{var t=e.ownerDocument,r=Vl(t),n=t.createTextNode(Eo),o=e.parentNode;o.insertBefore(n,e),r.setStart(n,0),r.setEnd(n,1);var a=Nl(r.getBoundingClientRect());return o.removeChild(n),a})(e):Xl(r)&&Gl(e)&&null!==(t=(e=>{var t=e.startContainer,r=e.endContainer,n=e.startOffset,o=e.endOffset;if(t===r&&lo(r)&&0===n&&1===o){var a=e.cloneRange();return a.setEndAfter(r),Ql(a)}return null})(e))&&void 0!==t?t:r},Jl=(e,t)=>{var r=_l(e,t);return r.width=1,r.right=r.left+1,r},Zl=e=>{var t=[],r=e=>{var r,n;0!==e.height&&(t.length>0&&(r=e,n=t[t.length-1],r.left===n.left&&r.top===n.top&&r.bottom===n.bottom&&r.right===n.right)||t.push(e))},n=(e,t)=>{var n=Vl(e.ownerDocument);if(t<e.data.length){if(Ll(e.data[t]))return;if(Ll(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!Yl(n)))return void r(Jl(Ql(n),!1))}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),Yl(n)||r(Jl(Ql(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),Yl(n)||r(Jl(Ql(n),!0)))},o=e.container(),a=e.offset();if(Hl(o))return n(o,a),t;if(Ml(o))if(e.isAtEnd()){var i=ql(o,a);Hl(i)&&n(i,i.data.length),Ul(i)&&!$l(i)&&r(Jl(Ql(i),!1))}else{var l=ql(o,a);if(Hl(l)&&n(l,0),Ul(l)&&e.isAtEnd())return r(Jl(Ql(l),!1)),t;var s=ql(e.container(),e.offset()-1);Ul(s)&&!$l(s)&&(Fl(s)||Fl(l)||!Ul(l))&&r(Jl(Ql(s),!1)),Ul(l)&&r(Jl(Ql(l),!0))}return t},es=(e,t,r)=>{var n=()=>(r||(r=Zl(es(e,t))),r);return{container:I(e),offset:I(t),toRange:()=>{var r=Vl(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},getClientRects:n,isVisible:()=>n().length>0,isAtStart:()=>(Hl(e),0===t),isAtEnd:()=>Hl(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:r=>r&&e===r.container()&&t===r.offset(),getNode:r=>ql(e,r?t-1:t)}};es.fromRangeStart=e=>es(e.startContainer,e.startOffset),es.fromRangeEnd=e=>es(e.endContainer,e.endOffset),es.after=e=>es(e.parentNode,Wl(e)+1),es.before=e=>es(e.parentNode,Wl(e)),es.isAbove=(e,t)=>Wt(be(t.getClientRects()),ye(e.getClientRects()),Dl).getOr(!1),es.isBelow=(e,t)=>Wt(ye(t.getClientRects()),be(e.getClientRects()),Rl).getOr(!1),es.isAtStart=e=>!!e&&e.isAtStart(),es.isAtEnd=e=>!!e&&e.isAtEnd(),es.isTextPosition=e=>!!e&&lo(e.container()),es.isElementPosition=e=>!es.isTextPosition(e);var ts=(e,t)=>{lo(t)&&0===t.data.length&&e.remove(t)},rs=(e,t,r)=>{fo(r)?((e,t,r)=>{var n=K.from(r.firstChild),o=K.from(r.lastChild);t.insertNode(r),n.each((t=>ts(e,t.previousSibling))),o.each((t=>ts(e,t.nextSibling)))})(e,t,r):((e,t,r)=>{t.insertNode(r),ts(e,r.previousSibling),ts(e,r.nextSibling)})(e,t,r)},ns=lo,os=no,as=Vi.nodeIndex,is=e=>{var t=e.parentNode;return os(t)?is(t):t},ls=e=>e?ze(e.childNodes,((e,t)=>(os(t)&&"BR"!==t.nodeName?e=e.concat(ls(t)):e.push(t),e)),[]):[],ss=e=>t=>e===t,ds=e=>(ns(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{var t,r;t=ls(is(e)),r=He(t,ss(e),e),t=t.slice(0,r+1);var n=ze(t,((e,r,n)=>(ns(r)&&ns(t[n-1])&&e++,e)),0);return t=Ue(t,eo([e.nodeName])),(r=He(t,ss(e),e))-n})(e)+"]",cs=(e,t)=>{var r,n=[],o=t.container(),a=t.offset();if(ns(o))r=((e,t)=>{for(var r=e;(r=r.previousSibling)&&ns(r);)t+=r.data.length;return t})(o,a);else{var i=o.childNodes;a>=i.length?(r="after",a=i.length-1):r="before",o=i[a]}n.push(ds(o));var l=((e,t,r)=>{for(var n=[],o=t.parentNode;o&&o!==e&&(!r||!r(o));o=o.parentNode)n.push(o);return n})(e,o);return l=Ue(l,z(no)),(n=n.concat(je(l,(e=>ds(e))))).reverse().join("/")+","+r},us=(e,t)=>{if(!t)return null;var r,n=t.split(","),o=n[0].split("/"),a=n.length>1?n[1]:"before",i=ze(o,((e,t)=>{var r=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return r?("text()"===r[1]&&(r[1]="#text"),((e,t,r)=>{var n=ls(e);return n=Ue(n,((e,t)=>!ns(e)||!ns(n[t-1]))),(n=Ue(n,eo([t])))[r]})(e,r[1],parseInt(r[2],10))):null}),e);return i?!ns(i)&&i.parentNode?(r="after"===a?as(i)+1:as(i),es(i.parentNode,r)):((e,t)=>{for(var r=e,n=0;ns(r);){var o=r.data.length;if(t>=n&&t<=n+o){e=r,t-=n;break}if(!ns(r.nextSibling)){e=r,t=o;break}n+=o,r=r.nextSibling}return ns(e)&&t>e.data.length&&(t=e.data.length),es(e,t)})(i,parseInt(a,10)):null},ms=ho,fs=(e,t,r,n,o)=>{var a=o?n.startContainer:n.endContainer,i=o?n.startOffset:n.endOffset,l=[],s=e.getRoot();if(lo(a))l.push(r?((e,t,r)=>{for(var n=e(t.data.slice(0,r)).length,o=t.previousSibling;o&&lo(o);o=o.previousSibling)n+=e(o.data).length;return n})(t,a,i):i);else{var d=0,c=a.childNodes;i>=c.length&&c.length&&(d=1,i=Math.max(0,c.length-1)),l.push(e.nodeIndex(c[i],r)+d)}for(var u=a;u&&u!==s;u=u.parentNode)l.push(e.nodeIndex(u,r));return l},gs=(e,t,r)=>{var n=0;return zt.each(e.select(t),(e=>"all"===e.getAttribute("data-mce-bogus")?void 0:e!==r&&void n++)),n},ps=(e,t)=>{var r=t?e.startContainer:e.endContainer,n=t?e.startOffset:e.endOffset;if(Jn(r)&&"TR"===r.nodeName){var o=r.childNodes;(r=o[Math.min(t?n:n-1,o.length-1)])&&(n=t?0:r.childNodes.length,t?e.setStart(r,n):e.setEnd(r,n))}},vs=e=>(ps(e,!0),ps(e,!1),e),hs=(e,t)=>{if(Jn(e)&&(e=Bl(e,t),ms(e)))return e;if(ea(e)){lo(e)&&Jo(e)&&(e=e.parentNode);var r=e.previousSibling;if(ms(r))return r;if(r=e.nextSibling,ms(r))return r}},bs=(e,t,r)=>{var n=r.getNode(),o=r.getRng();if("IMG"===n.nodeName||ms(n)){var a=n.nodeName;return{name:a,index:gs(r.dom,a,n)}}var i=(e=>hs(e.startContainer,e.startOffset)||hs(e.endContainer,e.endOffset))(o);if(i){var l=i.tagName;return{name:l,index:gs(r.dom,l,i)}}return((e,t,r,n)=>{var o=t.dom,a=fs(o,e,r,n,!0),i=t.isForward(),l=la(n)?{isFakeCaret:!0}:{};return t.isCollapsed()?d({start:a,forward:i},l):d({start:a,end:fs(o,e,r,n,!1),forward:i},l)})(e,r,t,o)},ys=(e,t,r)=>{var n={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return r?e.create("span",n,"&#xFEFF;"):e.create("span",n)},Cs=(e,t)=>{var r=e.dom,n=e.getRng(),o=r.uniqueId(),a=e.isCollapsed(),i=e.getNode(),l=i.nodeName,s=e.isForward();if("IMG"===l)return{name:l,index:gs(r,l,i)};var d=vs(n.cloneRange());if(!a){d.collapse(!1);var c=ys(r,o+"_end",t);rs(r,d,c)}(n=vs(n)).collapse(!0);var u=ys(r,o+"_start",t);return rs(r,n,u),e.moveToBookmark({id:o,keep:!0,forward:s}),{id:o,forward:s}},ws=function(e,t){return 2===t?bs(Yo,arguments.length>2&&void 0!==arguments[2]&&arguments[2],e):3===t?(e=>{var t=e.getRng();return{start:cs(e.dom.getRoot(),es.fromRangeStart(t)),end:cs(e.dom.getRoot(),es.fromRangeEnd(t)),forward:e.isForward()}})(e):t?(e=>({rng:e.getRng(),forward:e.isForward()}))(e):Cs(e,!1)},Ss=U(bs,F,!0),xs=e=>{var t=t=>t(e),r=I(e),n=()=>o,o={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:V,isError:q,map:t=>Es.value(t(e)),mapError:n,bind:t,exists:t,forall:t,getOr:r,or:n,getOrThunk:r,orThunk:n,getOrDie:r,each:t=>{t(e)},toOptional:()=>K.some(e)};return o},ks=e=>{var t=()=>r,r={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:q,isError:V,map:t,mapError:t=>Es.error(t(e)),bind:t,exists:q,forall:V,getOr:F,or:F,getOrThunk:$,orThunk:$,getOrDie:H(String(e)),each:P,toOptional:K.none};return r},Es={value:xs,error:ks,fromOption:(e,t)=>e.fold((()=>ks(t)),xs)},Ns=e=>{if(!E(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],r={};return te(e,((n,o)=>{var a=Se(n);if(1!==a.length)throw new Error("one and only one name per case");var i=a[0],l=n[i];if(void 0!==r[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!E(l))throw new Error("case arguments must be an array");t.push(i),r[i]=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.length;if(s!==l.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+l.length+" ("+l+"), got "+s);return{fold:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+r.length);return r[o].apply(null,n)},match:e=>{var r=Se(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!me(t,(e=>J(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:i,params:n})}}}})),r};Ns([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var _s,Ts=e=>"inline-command"===e.type||"inline-format"===e.type,Ds=e=>"block-command"===e.type||"block-format"===e.type,Rs=e=>{var t=t=>Es.error({message:t,pattern:e}),r=(r,n,o)=>{if(void 0!==e.format){var a;if(E(e.format)){if(!me(e.format,S))return t(r+" pattern has non-string items in the `format` array");a=e.format}else{if(!S(e.format))return t(r+" pattern has non-string `format` parameter");a=[e.format]}return Es.value(n(a))}return void 0!==e.cmd?S(e.cmd)?Es.value(o(e.cmd,e.value)):t(r+" pattern has non-string `cmd` parameter"):t(r+" pattern is missing both `format` and `cmd` parameters")};if(!x(e))return t("Raw pattern is not an object");if(!S(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!S(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");var n=e.start,o=e.end;return 0===o.length&&(o=n,n=""),r("Inline",(e=>({type:"inline-format",start:n,end:o,format:e})),((e,t)=>({type:"inline-command",start:n,end:o,cmd:e,value:t})))}return void 0!==e.replacement?S(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):Es.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):r("Block",(t=>({type:"block-format",start:e.start,format:t[0]})),((t,r)=>({type:"block-command",start:e.start,cmd:t,value:r})))},Os=e=>oe(e,Ds),As=e=>oe(e,Ts),Bs=e=>{var t=(e=>{var t=[],r=[];return te(e,(e=>{e.fold((e=>{t.push(e)}),(e=>{r.push(e)}))})),{errors:t,values:r}})(ee(e,Rs));return te(t.errors,(e=>console.error(e.message,e.pattern))),t.values},Ps=Ot().deviceType,Ls=Ps.isTouch(),Ms=Vi.DOM,Is=e=>w(e,RegExp),Fs=e=>t=>t.options.get(e),js=e=>S(e)||x(e),Us=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r=>{var n=S(r);if(n){if(-1!==r.indexOf("=")){var o=(e=>{var t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return ie(t,((e,t)=>{var r=t.split("="),n=r[0],o=r.length>1?r[1]:n;return e[tt(n)]=tt(o),e}),{})})(r);return{value:Ae(o,e.id).getOr(t),valid:n}}return{value:r,valid:n}}return{valid:!1,message:"Must be a string."}}},zs=Fs("iframe_attrs"),Hs=Fs("doctype"),$s=Fs("document_base_url"),Ws=Fs("body_id"),qs=Fs("body_class"),Vs=Fs("content_security_policy"),Ks=Fs("br_in_pre"),Gs=Fs("forced_root_block"),Ys=Fs("forced_root_block_attrs"),Xs=Fs("newline_behavior"),Qs=Fs("br_newline_selector"),Js=Fs("no_newline_selector"),Zs=Fs("keep_styles"),ed=Fs("end_container_on_empty_block"),td=Fs("automatic_uploads"),rd=Fs("images_reuse_filename"),nd=Fs("images_replace_blob_uris"),od=Fs("icons"),ad=Fs("icons_url"),id=Fs("images_upload_url"),ld=Fs("images_upload_base_path"),sd=Fs("images_upload_credentials"),dd=Fs("images_upload_handler"),cd=Fs("content_css_cors"),ud=Fs("referrer_policy"),md=Fs("language"),fd=Fs("language_url"),gd=Fs("indent_use_margin"),pd=Fs("indentation"),vd=Fs("content_css"),hd=Fs("content_style"),bd=Fs("font_css"),yd=Fs("directionality"),Cd=Fs("inline_boundaries_selector"),wd=Fs("object_resizing"),Sd=Fs("resize_img_proportional"),xd=Fs("placeholder"),kd=Fs("event_root"),Ed=Fs("service_message"),Nd=Fs("theme"),_d=Fs("theme_url"),Td=Fs("model"),Dd=Fs("model_url"),Rd=Fs("inline_boundaries"),Od=Fs("formats"),Ad=Fs("preview_styles"),Bd=Fs("format_empty_lines"),Pd=Fs("format_noneditable_selector"),Ld=Fs("custom_ui_selector"),Md=Fs("inline"),Id=Fs("hidden_input"),Fd=Fs("submit_patch"),jd=Fs("add_form_submit_trigger"),Ud=Fs("add_unload_trigger"),zd=Fs("custom_undo_redo_levels"),Hd=Fs("disable_nodechange"),$d=Fs("readonly"),Wd=Fs("editable_root"),qd=Fs("content_css_cors"),Vd=Fs("plugins"),Kd=Fs("external_plugins"),Gd=Fs("block_unsupported_drop"),Yd=Fs("visual"),Xd=Fs("visual_table_class"),Qd=Fs("visual_anchor_class"),Jd=Fs("iframe_aria_text"),Zd=Fs("setup"),ec=Fs("init_instance_callback"),tc=Fs("urlconverter_callback"),rc=Fs("auto_focus"),nc=Fs("browser_spellcheck"),oc=Fs("protect"),ac=Fs("paste_block_drop"),ic=Fs("paste_data_images"),lc=Fs("paste_preprocess"),sc=Fs("paste_postprocess"),dc=Fs("newdocument_content"),cc=Fs("paste_webkit_styles"),uc=Fs("paste_remove_styles_if_webkit"),mc=Fs("paste_merge_formats"),fc=Fs("smart_paste"),gc=Fs("paste_as_text"),pc=Fs("paste_tab_spaces"),vc=Fs("allow_html_data_urls"),hc=Fs("text_patterns"),bc=Fs("text_patterns_lookup"),yc=Fs("noneditable_class"),Cc=Fs("editable_class"),wc=Fs("noneditable_regexp"),Sc=Fs("preserve_cdata"),xc=Fs("highlight_on_focus"),kc=Fs("xss_sanitization"),Ec=Fs("init_content_sync"),Nc=e=>zt.explode(e.options.get("images_file_types")),_c=Fs("table_tab_navigation"),Tc=Fs("details_initial_state"),Dc=Fs("details_serialized_state"),Rc=Jn,Oc=lo,Ac=e=>{var t=e.parentNode;t&&t.removeChild(e)},Bc=e=>{var t=Yo(e);return{count:e.length-t.length,text:t}},Pc=e=>{for(var t;-1!==(t=e.data.lastIndexOf(Ko));)e.deleteData(t,1)},Lc=(e,t)=>(jc(e),t),Mc=(e,t)=>{var r=t.container(),n=((e,t)=>{var r=Q(e,t);return-1===r?K.none():K.some(r)})(Ce(r.childNodes),e).map((e=>e<t.offset()?es(r,t.offset()-1):t)).getOr(t);return jc(e),n},Ic=(e,t)=>Oc(e)&&t.container()===e?((e,t)=>{var r=Bc(e.data.substr(0,t.offset())),n=Bc(e.data.substr(t.offset()));return(r.text+n.text).length>0?(Pc(e),es(e,t.offset()-r.count)):t})(e,t):Lc(e,t),Fc=(e,t)=>es.isTextPosition(t)?Ic(e,t):((e,t)=>t.container()===e.parentNode?Mc(e,t):Lc(e,t))(e,t),jc=e=>{Rc(e)&&ea(e)&&(ta(e)?e.removeAttribute("data-mce-caret"):Ac(e)),Oc(e)&&(Pc(e),0===e.data.length&&Ac(e))},Uc=ho,zc=Co,Hc=bo,$c=(e,t,r)=>{var n,o,a=_l(t.getBoundingClientRect(),r);if("BODY"===e.tagName){var i=e.ownerDocument.documentElement;n=e.scrollLeft||i.scrollLeft,o=e.scrollTop||i.scrollTop}else{var l=e.getBoundingClientRect();n=e.scrollLeft-l.left,o=e.scrollTop-l.top}a.left+=n,a.right+=n,a.top+=o,a.bottom+=o,a.width=1;var s=t.offsetWidth-t.clientWidth;return s>0&&(r&&(s*=-1),a.left+=s,a.right+=s),a},Wc=(e,t,r,n)=>{var o,a,i=tl(),l=Gs(e),s=e.dom,c=()=>{(e=>{for(var t,r,n=qn(Er.fromDom(e),"*[contentEditable=false],video,audio,embed,object"),o=0;o<n.length;o++){var a=n[o].dom,i=a.previousSibling;if(aa(i)){var l=i.data;1===l.length?null===(t=i.parentNode)||void 0===t||t.removeChild(i):i.deleteData(l.length-1,1)}i=a.nextSibling,oa(i)&&(1===i.data.length?null===(r=i.parentNode)||void 0===r||r.removeChild(i):i.deleteData(0,1))}})(t),a&&(jc(a),a=null),i.on((e=>{s.remove(e.caret),i.clear()})),o&&(clearInterval(o),o=void 0)},u=()=>{o=setInterval((()=>{i.on((e=>{n()?s.toggleClass(e.caret,"mce-visual-caret-hidden"):s.addClass(e.caret,"mce-visual-caret-hidden")}))}),500)};return{show:(e,n)=>{var o;if(c(),Hc(n))return null;if(!r(n))return a=((e,t)=>{var r,n=(null!==(r=e.ownerDocument)&&void 0!==r?r:document).createTextNode(Ko),o=e.parentNode;if(t){var a=e.previousSibling;if(Qo(a)){if(ea(a))return a;if(aa(a))return a.splitText(a.data.length-1)}null==o||o.insertBefore(n,e)}else{var i=e.nextSibling;if(Qo(i)){if(ea(i))return i;if(oa(i))return i.splitText(1),i}e.nextSibling?null==o||o.insertBefore(n,e.nextSibling):null==o||o.appendChild(n)}return n})(n,e),o=n.ownerDocument.createRange(),Vc(a.nextSibling)?(o.setStart(a,0),o.setEnd(a,0)):(o.setStart(a,1),o.setEnd(a,1)),o;var m=((e,t,r)=>{var n,o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createElement(e);o.setAttribute("data-mce-caret",r?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(Wo().dom);var a=t.parentNode;return r?null==a||a.insertBefore(o,t):t.nextSibling?null==a||a.insertBefore(o,t.nextSibling):null==a||a.appendChild(o),o})(l,n,e),f=$c(t,n,e);s.setStyle(m,"top",f.top),a=m;var g=s.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});return s.setStyles(g,d({},f)),s.add(t,g),i.set({caret:g,element:n,before:e}),e&&s.addClass(g,"mce-visual-caret-before"),u(),(o=n.ownerDocument.createRange()).setStart(m,0),o.setEnd(m,0),o},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on((e=>{var r=$c(t,e.element,e.before);s.setStyles(e.caret,d({},r))}))},destroy:()=>clearInterval(o)}},qc=()=>Ft.browser.isFirefox(),Vc=e=>Uc(e)||zc(e),Kc=e=>(Vc(e)||oo(e)&&qc())&&Lr(Er.fromDom(e)).exists(dn),Gc=vo,Yc=ho,Xc=Co,Qc=to("display","block table table-cell table-caption list-item"),Jc=ea,Zc=Jo,eu=Jn,tu=lo,ru=va,nu=e=>e>0,ou=e=>e<0,au=(e,t)=>{for(var r;r=e(t);)if(!Zc(r))return r;return null},iu=(e,t,r,n,o)=>{var a,i=new Kn(e,n),l=Yc(e)||Zc(e);if(ou(t)){if(l&&r(a=au(i.prev.bind(i),!0)))return a;for(;a=au(i.prev.bind(i),o);)if(r(a))return a}if(nu(t)){if(l&&r(a=au(i.next.bind(i),!0)))return a;for(;a=au(i.next.bind(i),o);)if(r(a))return a}return null},lu=(e,t)=>{for(;e&&e!==t;){if(Qc(e))return e;e=e.parentNode}return null},su=(e,t,r)=>lu(e.container(),r)===lu(t.container(),r),du=(e,t)=>{if(!t)return K.none();var r=t.container(),n=t.offset();return eu(r)?K.from(r.childNodes[n+e]):K.none()},cu=(e,t)=>{var r,n=(null!==(r=t.ownerDocument)&&void 0!==r?r:document).createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},uu=(e,t,r)=>lu(t,e)===lu(r,e),mu=(e,t,r)=>{for(var n=e?"previousSibling":"nextSibling",o=r;o&&o!==t;){var a=o[n];if(a&&Jc(a)&&(a=a[n]),Yc(a)||Xc(a)){if(uu(t,a,o))return a;break}if(ru(a))break;o=o.parentNode}return null},fu=U(cu,!0),gu=U(cu,!1),pu=(e,t,r)=>{var n,o=U(mu,!0,t),a=U(mu,!1,t),i=r.startContainer,l=r.startOffset;if(Jo(i)){var s=tu(i)?i.parentNode:i,d=s.getAttribute("data-mce-caret");if("before"===d&&(n=s.nextSibling,Kc(n)))return fu(n);if("after"===d&&(n=s.previousSibling,Kc(n)))return gu(n)}if(!r.collapsed)return r;if(lo(i)){if(Jc(i)){if(1===e){if(n=a(i))return fu(n);if(n=o(i))return gu(n)}if(-1===e){if(n=o(i))return gu(n);if(n=a(i))return fu(n)}return r}if(aa(i)&&l>=i.data.length-1)return 1===e&&(n=a(i))?fu(n):r;if(oa(i)&&l<=1)return-1===e&&(n=o(i))?gu(n):r;if(l===i.data.length)return(n=a(i))?fu(n):r;if(0===l)return(n=o(i))?gu(n):r}return r},vu=(e,t)=>du(e?0:-1,t).filter(Yc),hu=(e,t,r)=>{var n=pu(e,t,r);return-1===e?es.fromRangeStart(n):es.fromRangeEnd(n)},bu=e=>K.from(e.getNode()).map(Er.fromDom),yu=(e,t)=>{for(var r=t;r=e(r);)if(r.isVisible())return r;return r},Cu=(e,t)=>{var r=su(e,t);return!(r||!go(e.getNode()))||r};!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(_s||(_s={}));var wu,Su=ho,xu=lo,ku=Jn,Eu=go,Nu=va,_u=e=>fa(e)||(e=>!!ha(e)&&!ie(Ce(e.getElementsByTagName("*")),((e,t)=>e||sa(t)),!1))(e),Tu=ba,Du=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Ru=(e,t)=>{if(nu(e)){if(Nu(t.previousSibling)&&!xu(t.previousSibling))return es.before(t);if(xu(t))return es(t,0)}if(ou(e)){if(Nu(t.nextSibling)&&!xu(t.nextSibling))return es.after(t);if(xu(t))return es(t,t.data.length)}return ou(e)?Eu(t)?es.before(t):es.after(t):es.before(t)},Ou=(e,t,r)=>{var n,o,a,i;if(!ku(r)||!t)return null;if(t.isEqual(es.after(r))&&r.lastChild){if(i=es.after(r.lastChild),ou(e)&&Nu(r.lastChild)&&ku(r.lastChild))return Eu(r.lastChild)?es.before(r.lastChild):i}else i=t;var l=i.container(),s=i.offset();if(xu(l)){if(ou(e)&&s>0)return es(l,--s);if(nu(e)&&s<l.length)return es(l,++s);n=l}else{if(ou(e)&&s>0&&(o=Du(l,s-1),Nu(o)))return!_u(o)&&(a=iu(o,e,Tu,o))?xu(a)?es(a,a.data.length):es.after(a):xu(o)?es(o,o.data.length):es.before(o);if(nu(e)&&s<l.childNodes.length&&(o=Du(l,s),Nu(o)))return Eu(o)?((e,t)=>{var r=t.nextSibling;return r&&Nu(r)?xu(r)?es(r,0):es.before(r):Ou(_s.Forwards,es.after(t),e)})(r,o):!_u(o)&&(a=iu(o,e,Tu,o))?xu(a)?es(a,0):es.before(a):xu(o)?es(o,0):es.after(o);n=o||i.getNode()}if(n&&(nu(e)&&i.isAtEnd()||ou(e)&&i.isAtStart())&&(n=iu(n,e,V,r,!0),Tu(n,r)))return Ru(e,n);o=n?iu(n,e,Tu,r):n;var d=$e(oe(((e,t)=>{for(var r=[],n=e;n&&n!==t;)r.push(n),n=n.parentNode;return r})(l,r),Su));return!d||o&&d.contains(o)?o?Ru(e,o):null:i=nu(e)?es.after(d):es.before(d)},Au=e=>({next:t=>Ou(_s.Forwards,t,e),prev:t=>Ou(_s.Backwards,t,e)}),Bu=e=>es.isTextPosition(e)?0===e.offset():va(e.getNode()),Pu=e=>{if(es.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return va(e.getNode(!0))},Lu=(e,t)=>!es.isTextPosition(e)&&!es.isTextPosition(t)&&e.getNode()===t.getNode(!0),Mu=(e,t,r)=>{return e?!Lu(t,r)&&(n=t,!(!es.isTextPosition(n)&&go(n.getNode())))&&Pu(t)&&Bu(r):!Lu(r,t)&&Bu(t)&&Pu(r);var n},Iu=(e,t,r)=>{var n=Au(t);return K.from(e?n.next(r):n.prev(r))},Fu=(e,t,r)=>Iu(e,t,r).bind((n=>su(r,n,t)&&Mu(e,r,n)?Iu(e,t,n):K.some(n))),ju=(e,t,r,n)=>Fu(e,t,r).bind((r=>n(r)?ju(e,t,r,n):K.some(r))),Uu=(e,t)=>{var r,n=e?t.firstChild:t.lastChild;return lo(n)?K.some(es(n,e?0:n.data.length)):n?va(n)?K.some(e?es.before(n):go(r=n)?es.before(r):es.after(r)):((e,t,r)=>{var n=e?es.before(r):es.after(r);return Iu(e,t,n)})(e,t,n):K.none()},zu=U(Iu,!0),Hu=U(Iu,!1),$u=U(Uu,!0),Wu=U(Uu,!1),qu="_mce_caret",Vu=e=>Jn(e)&&e.id===qu,Ku=(e,t)=>{for(var r=t;r&&r!==e;){if(Vu(r))return r;r=r.parentNode}return null},Gu=e=>Be(e,"name"),Yu=e=>zt.isArray(e.start),Xu=e=>!(!Gu(e)&&_(e.forward))||e.forward,Qu=(e,t)=>(Jn(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),Ju=(e,t)=>Wu(e).fold(q,(e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0))),Zu=(e,t,r)=>!(!(e=>!e.hasChildNodes())(t)||!Ku(e,t))&&(((e,t)=>{var r,n=(null!==(r=e.ownerDocument)&&void 0!==r?r:document).createTextNode(Ko);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)})(t,r),!0),em=(e,t,r,n)=>{var o=r[t?"start":"end"],a=e.getRoot();if(o){for(var i=a,l=o[0],s=o.length-1;i&&s>=1;s--){var d=i.childNodes;if(Zu(a,i,n))return!0;if(o[s]>d.length-1)return!!Zu(a,i,n)||Ju(i,n);i=d[o[s]]}lo(i)&&(l=Math.min(o[0],i.data.length)),Jn(i)&&(l=Math.min(o[0],i.childNodes.length)),t?n.setStart(i,l):n.setEnd(i,l)}return!0},tm=e=>lo(e)&&e.data.length>0,rm=(e,t,r)=>{var n=e.get(r.id+"_"+t),o=null==n?void 0:n.parentNode,a=r.keep;if(n&&o){var i,l;if("start"===t?a?n.hasChildNodes()?(i=n.firstChild,l=1):tm(n.nextSibling)?(i=n.nextSibling,l=0):tm(n.previousSibling)?(i=n.previousSibling,l=n.previousSibling.data.length):(i=o,l=e.nodeIndex(n)+1):(i=o,l=e.nodeIndex(n)):a?n.hasChildNodes()?(i=n.firstChild,l=1):tm(n.previousSibling)?(i=n.previousSibling,l=n.previousSibling.data.length):(i=o,l=e.nodeIndex(n)):(i=o,l=e.nodeIndex(n)),!a){var s,d=n.previousSibling,c=n.nextSibling;for(zt.each(zt.grep(n.childNodes),(e=>{lo(e)&&(e.data=e.data.replace(/\uFEFF/g,""))}));s=e.get(r.id+"_"+t);)e.remove(s,!0);if(lo(c)&&lo(d)&&!Ft.browser.isOpera()){var u=d.data.length;d.appendData(c.data),e.remove(c),i=d,l=u}}return K.some(es(i,l))}return K.none()},nm=(e,t)=>{var r=e.dom;if(t){if(Yu(t))return((e,t)=>{var r=e.createRng();return em(e,!0,t,r)&&em(e,!1,t,r)?K.some({range:r,forward:Xu(t)}):K.none()})(r,t);if((e=>S(e.start))(t))return((e,t)=>{var r=K.from(us(e.getRoot(),t.start)),n=K.from(us(e.getRoot(),t.end));return Wt(r,n,((r,n)=>{var o=e.createRng();return o.setStart(r.container(),r.offset()),o.setEnd(n.container(),n.offset()),{range:o,forward:Xu(t)}}))})(r,t);if((e=>Be(e,"id"))(t))return((e,t)=>{var r=rm(e,"start",t),n=rm(e,"end",t);return Wt(r,n.or(r),((r,n)=>{var o=e.createRng();return o.setStart(Qu(e,r.container()),r.offset()),o.setEnd(Qu(e,n.container()),n.offset()),{range:o,forward:Xu(t)}}))})(r,t);if(Gu(t))return((e,t)=>K.from(e.select(t.name)[t.index]).map((t=>{var r=e.createRng();return r.selectNode(t),{range:r,forward:!0}})))(r,t);if((e=>Be(e,"rng"))(t))return K.some({range:t.rng,forward:Xu(t)})}return K.none()},om=(e,t,r)=>ws(e,t,r),am=(e,t)=>{nm(e,t).each((t=>{var r=t.range,n=t.forward;e.setRng(r,n)}))},im=e=>Jn(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),lm=(wu=Eo,e=>wu===e),sm=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),dm=e=>!sm(e)&&!lm(e)&&!No(e),cm=e=>Xe(e,"#").toUpperCase(),um=e=>{var t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},mm=e=>(e=>({value:cm(e)}))(um(e.red)+um(e.green)+um(e.blue)),fm=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,gm=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,pm=(e,t,r,n)=>({red:e,green:t,blue:r,alpha:n}),vm=(e,t,r,n)=>{var o=parseInt(e,10),a=parseInt(t,10),i=parseInt(r,10),l=parseFloat(n);return pm(o,a,i,l)},hm=e=>(e=>{if("transparent"===e)return K.some(pm(0,0,0,0));var t=fm.exec(e);if(null!==t)return K.some(vm(t[1],t[2],t[3],"1"));var r=gm.exec(e);return null!==r?K.some(vm(r[1],r[2],r[3],r[4])):K.none()})(e).map(mm).map((e=>"#"+e.value)).getOr(e),bm=e=>{var t=[];if(e)for(var r=0;r<e.rangeCount;r++)t.push(e.getRangeAt(r));return t},ym=e=>oe((e=>ue(e,(e=>{var t=Al(e);return t?[Er.fromDom(t)]:[]})))(e),jo),Cm=(e,t)=>{var r=qn(t,"td[data-mce-selected],th[data-mce-selected]");return r.length>0?r:ym(e)},wm=e=>Cm(bm(e.selection.getSel()),Er.fromDom(e.getBody())),Sm=(e,t)=>an(e,"table",t),xm=e=>$r(e).fold(I([e]),(t=>[e].concat(xm(t)))),km=e=>Wr(e).fold(I([e]),(t=>"br"===Qt(t)?Ir(t).map((t=>[e].concat(km(t)))).getOr([]):[e].concat(km(t)))),Em=(e,t)=>Wt((e=>{var t=e.startContainer,r=e.startOffset;return lo(t)?0===r?K.some(Er.fromDom(t)):K.none():K.from(t.childNodes[r]).map(Er.fromDom)})(t),(e=>{var t=e.endContainer,r=e.endOffset;return lo(t)?r===t.data.length?K.some(Er.fromDom(t)):K.none():K.from(t.childNodes[r-1]).map(Er.fromDom)})(t),((t,r)=>{var n=se(xm(e),U(Dr,t)),o=se(km(e),U(Dr,r));return n.isSome()&&o.isSome()})).getOr(!1),Nm=(e,t,r,n)=>{var o=r,a=new Kn(r,o),i=De(e.schema.getMoveCaretBeforeOnEnterElements(),((e,t)=>!J(["td","th","table"],t.toLowerCase()))),l=r;do{if(lo(l)&&0!==zt.trim(l.data).length)return void(n?t.setStart(l,0):t.setEnd(l,l.data.length));if(i[l.nodeName])return void(n?t.setStartBefore(l):"BR"===l.nodeName?t.setEndBefore(l):t.setEndAfter(l))}while(l=n?a.next():a.prev());"BODY"===o.nodeName&&(n?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},_m=e=>{var t=e.selection.getSel();return R(t)&&t.rangeCount>0},Tm=(e,t)=>{var r=wm(e);r.length>0?te(r,(r=>{var n=r.dom,o=e.dom.createRng();o.setStartBefore(n),o.setEndAfter(n),t(o,!0)})):t(e.selection.getRng(),!1)},Dm=(e,t,r)=>{var n=Cs(e,t);r(n),e.moveToBookmark(n)},Rm=e=>A(null==e?void 0:e.nodeType),Om=e=>Jn(e)&&!im(e)&&!Vu(e)&&!no(e),Am=e=>!0===e.isContentEditable,Bm=(e,t,r)=>{var n=e.selection,o=e.dom,a=n.getNode(),i=ho(a);Dm(n,!0,(()=>{t()})),i&&ho(a)&&o.isChildOf(a,e.getBody())?e.selection.select(a):r(n.getStart())&&Pm(o,n)},Pm=(e,t)=>{var r,n,o=t.getRng(),a=o.startContainer,i=o.startOffset;if(!((e,t)=>{if(Om(t)&&!/^(TD|TH)$/.test(t.nodeName)){var r=e.getAttrib(t,"data-mce-selected"),n=parseInt(r,10);return!isNaN(n)&&n>0}return!1})(e,t.getNode())&&Jn(a)){var l,s=a.childNodes,d=e.getRoot();if(i<s.length){var c=s[i];l=new Kn(c,null!==(r=e.getParent(c,e.isBlock))&&void 0!==r?r:d)}else{var u=s[s.length-1];(l=new Kn(u,null!==(n=e.getParent(u,e.isBlock))&&void 0!==n?n:d)).next(!0)}for(var m=l.current();m;m=l.next()){if("false"===e.getContentEditable(m))return;if(lo(m)&&!Fm(m))return o.setStart(m,0),void t.setRng(o)}}},Lm=(e,t,r)=>{if(e){var n=t?"nextSibling":"previousSibling";for(e=r?e:e[n];e;e=e[n])if(Jn(e)||!Fm(e))return e}},Mm=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||za(e,t),Im=(e,t,r)=>e.schema.isValidChild(t,r),Fm=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(R(e)&&lo(e)){var r=t?e.data.replace(/ /g,"Â "):e.data;return Ca(r)}return!1},jm=(e,t)=>{var r=e.dom;return Om(t)&&"false"===r.getContentEditable(t)&&((e,t)=>{var r="[data-mce-cef-wrappable]",n=Pd(e),o=at(n)?r:`${r},${n}`;return _r(Er.fromDom(t),o)})(e,t)&&0===r.select('[contenteditable="true"]',t).length},Um=(e,t)=>O(e)?e(t):(R(t)&&(e=e.replace(/%(\w+)/g,((e,r)=>t[r]||e))),e),zm=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Hm=(e,t)=>{if(D(e))return null;var r=String(e);return"color"!==t&&"backgroundColor"!==t||(r=hm(r)),"fontWeight"===t&&700===e&&(r="bold"),"fontFamily"===t&&(r=r.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),r},$m=(e,t,r)=>{var n=e.getStyle(t,r);return Hm(n,r)},Wm=(e,t)=>{var r;return e.getParent(t,(t=>!!Jn(t)&&(!!(r=e.getStyle(t,"text-decoration"))&&"none"!==r))),r},qm=(e,t,r)=>e.getParents(t,r,e.getRoot()),Vm=(e,t,r)=>{var n=e.formatter.get(t);return R(n)&&Z(n,r)},Km=(e,t,r)=>{var n=["inline","block","selector","attributes","styles","classes"],o=e=>De(e,((e,t)=>Z(n,(e=>e===t))));return Vm(e,t,(t=>{var n=o(t);return Vm(e,r,(e=>{var t=o(e);return function(e,t){return f(arguments.length>2&&void 0!==arguments[2]?arguments[2]:p).eq(e,t)}(n,t)}))}))},Gm=e=>Pe(e,"block"),Ym=e=>Pe(e,"selector"),Xm=e=>Pe(e,"inline"),Qm=e=>Ym(e)&&!1!==e.expand&&!Xm(e),Jm=im,Zm=qm,ef=Fm,tf=Mm,rf=(e,t)=>{for(var r=t;r;){if(Jn(r)&&e.getContentEditable(r))return"false"===e.getContentEditable(r)?r:t;r=r.parentNode}return t},nf=(e,t,r,n)=>{var o=t.data;if(e){for(var a=r;a>0;a--)if(n(o.charAt(a-1)))return a}else for(var i=r;i<o.length;i++)if(n(o.charAt(i)))return i;return-1},of=(e,t,r)=>nf(e,t,r,(e=>lm(e)||sm(e))),af=(e,t,r)=>nf(e,t,r,dm),lf=(e,t,r,n,o,a)=>{var i,l=e.getParent(r,e.isBlock)||t,s=(t,r,n)=>{var a=kl(e),s=o?a.backwards:a.forwards;return K.from(s(t,r,((e,t)=>Jm(e.parentNode)?-1:(i=e,n(o,e,t))),l))};return s(r,n,of).bind((e=>a?s(e.container,e.offset+(o?-1:0),af):K.some(e))).orThunk((()=>i?K.some({container:i,offset:o?0:i.length}):K.none()))},sf=(e,t,r,n,o)=>{var a=n[o];lo(n)&&at(n.data)&&a&&(n=a);for(var i=Zm(e,n),l=0;l<i.length;l++)for(var s=0;s<t.length;s++){var d=t[s];if((!R(d.collapsed)||d.collapsed===r.collapsed)&&(Ym(d)&&e.is(i[l],d.selector)))return i[l]}return n},df=(e,t,r,n)=>{var o,a=r,i=e.getRoot(),l=t[0];if(Gm(l)&&(a=l.wrapper?null:e.getParent(r,l.block,i)),!a){var s=null!==(o=e.getParent(r,"LI,TD,TH"))&&void 0!==o?o:i;a=e.getParent(lo(r)?r.parentNode:r,(t=>t!==i&&tf(e.schema,t)),s)}if(a&&Gm(l)&&l.wrapper&&(a=Zm(e,a,"ul,ol").reverse()[0]||a),!a)for(a=r;a&&a[n]&&!e.isBlock(a[n])&&(a=a[n],!zm(a,"br")););return a||r},cf=(e,t,r,n)=>{var o=r.parentNode;return!R(r[n])&&(!(o!==t&&!D(o)&&!e.isBlock(o))||cf(e,t,o,n))},uf=(e,t,r,n,o)=>{var a,i=r,l=o?"previousSibling":"nextSibling",s=e.getRoot();if(lo(r)&&!ef(r)&&(o?n>0:n<r.data.length))return r;for(;i;){if(!t[0].block_expand&&e.isBlock(i))return i;for(var d=i[l];d;d=d[l]){var c=lo(d)&&!cf(e,s,d,l);if(!Jm(d)&&(!go(a=d)||!a.getAttribute("data-mce-bogus")||a.nextSibling)&&!ef(d,c))return i}if(i===s||i.parentNode===s){r=i;break}i=i.parentNode}return r},mf=e=>Jm(e.parentNode)||Jm(e),ff=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t.startContainer,a=t.startOffset,i=t.endContainer,l=t.endOffset,s=r[0];(Jn(o)&&o.hasChildNodes()&&(o=Bl(o,a),lo(o)&&(a=0)),Jn(i)&&i.hasChildNodes()&&(i=Bl(i,t.collapsed?l:l-1),lo(i)&&(l=i.data.length)),o=rf(e,o),i=rf(e,i),mf(o)&&(o=Jm(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,lo(o)&&(a=t.collapsed?o.length:0)),mf(i)&&(i=Jm(i)?i:i.parentNode,i=t.collapsed?i.nextSibling||i:i.previousSibling||i,lo(i)&&(l=t.collapsed?0:i.length)),t.collapsed)&&(lf(e,e.getRoot(),o,a,!0,n).each((e=>{var t=e.container,r=e.offset;o=t,a=r})),lf(e,e.getRoot(),i,l,!1,n).each((e=>{var t=e.container,r=e.offset;i=t,l=r})));return(Xm(s)||s.block_expand)&&(Xm(s)&&lo(o)&&0!==a||(o=uf(e,r,o,a,!0)),Xm(s)&&lo(i)&&l!==i.data.length||(i=uf(e,r,i,l,!1))),Qm(s)&&(o=sf(e,r,t,o,"previousSibling"),i=sf(e,r,t,i,"nextSibling")),(Gm(s)||Ym(s))&&(o=df(e,r,o,"previousSibling"),i=df(e,r,i,"nextSibling"),Gm(s)&&(e.isBlock(o)||(o=uf(e,r,o,a,!0)),e.isBlock(i)||(i=uf(e,r,i,l,!1)))),Jn(o)&&o.parentNode&&(a=e.nodeIndex(o),o=o.parentNode),Jn(i)&&i.parentNode&&(l=e.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:a,endContainer:i,endOffset:l}},gf=(e,t,r)=>{var n,o=t.startOffset,a=Bl(t.startContainer,o),i=t.endOffset,l=Bl(t.endContainer,i-1),s=e=>{var t=e[0];lo(t)&&t===a&&o>=t.data.length&&e.splice(0,1);var r=e[e.length-1];return 0===i&&e.length>0&&r===l&&lo(r)&&e.splice(e.length-1,1),e},d=(e,t,r)=>{for(var n=[];e&&e!==r;e=e[t])n.push(e);return n},c=(t,r)=>e.getParent(t,(e=>e.parentNode===r),r),u=(e,t,n)=>{for(var o=n?"nextSibling":"previousSibling",a=e,i=a.parentNode;a&&a!==t;a=i){i=a.parentNode;var l=d(a===e?a:a[o],o);l.length&&(n||l.reverse(),r(s(l)))}};if(a===l)return r(s([a]));var m=null!==(n=e.findCommonAncestor(a,l))&&void 0!==n?n:e.getRoot();if(e.isChildOf(a,l))return u(a,m,!0);if(e.isChildOf(l,a))return u(l,m);var f=c(a,m)||a,g=c(l,m)||l;u(a,f,!0);var p=d(f===a?f:f.nextSibling,"nextSibling",g===l?g.nextSibling:g);p.length&&r(s(p)),u(l,g)},pf=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],vf=(e,t,r,n)=>Pr(t).fold((()=>"skipping"),(o=>"br"===n||(e=>rr(e)&&To(e)===Ko)(t)?"valid":(e=>tr(e)&&xr(e,ol()))(t)?"existing":Vu(t.dom)?"caret":Z(pf,(e=>_r(t,e)))?"valid-block":Im(e,r,n)&&Im(e,Qt(o),r)?"valid":"invalid-child")),hf=(e,t,r,o,a,i)=>{var s=r.uid,d=void 0===s?t:s,c=l(r,n);yr(e,ol()),lr(e,`${il()}`,d),lr(e,`${al()}`,o);var u=a(d,c),m=u.attributes,f=void 0===m?{}:m,g=u.classes,p=void 0===g?[]:g;if(sr(e,f),((e,t)=>{te(t,(t=>{yr(e,t)}))})(e,p),i){p.length>0&&lr(e,`${sl()}`,p.join(","));var v=Se(f);v.length>0&&lr(e,`${dl()}`,v.join(","))}},bf=e=>{wr(e,ol()),mr(e,`${il()}`),mr(e,`${al()}`),mr(e,`${ll()}`);var t,r=cr(e,`${dl()}`).map((e=>e.split(","))).getOr([]),n=cr(e,`${sl()}`).map((e=>e.split(","))).getOr([]);te(r,(t=>mr(e,t))),t=e,te(n,(e=>{wr(t,e)})),mr(e,`${sl()}`),mr(e,`${dl()}`)},yf=(e,t,r,n,o)=>{var a=Er.fromTag("span",e);return hf(a,t,r,n,o,!1),a},Cf=(e,t,r,n,o,a)=>{var i=[],l=yf(e.getDoc(),r,a,n,o),s=tl(),d=()=>{s.clear()},c=e=>{te(e,u)},u=t=>{switch(vf(e,t,"span",Qt(t))){case"invalid-child":d();var u=zr(t);c(u),d();break;case"valid-block":d(),hf(t,r,a,n,o,!0);break;case"valid":var m=s.get().getOrThunk((()=>{var e=Cl(l);return i.push(e),s.set(e),e}));kn(t,m)}};return gf(e.dom,t,(e=>{d(),(e=>{var t=ee(e,Er.fromDom);c(t)})(e)})),i},wf=(e,t,r,n)=>{e.undoManager.transact((()=>{var o=e.selection,a=o.getRng(),i=wm(e).length>0,l=bl("mce-annotation");if(a.collapsed&&!i&&((e,t)=>{var r=ff(e.dom,t,[{inline:"span"}]);t.setStart(r.startContainer,r.startOffset),t.setEnd(r.endContainer,r.endOffset),e.selection.setRng(t)})(e,a),o.getRng().collapsed&&!i){var s=yf(e.getDoc(),l,n,t,r.decorate);On(s,Eo),o.getRng().insertNode(s.dom),o.select(s.dom)}else Dm(o,!1,(()=>{Tm(e,(o=>{Cf(e,o,l,t,r.decorate,n)}))}))}))},Sf=e=>{var t,r=(t={},{register:(e,r)=>{t[e]={name:e,settings:r}},lookup:e=>Ae(t,e).map((e=>e.settings)),getNames:()=>Se(t)});vl(e,r);var n=pl(e,r),o=ar("span"),a=e=>{te(e,(e=>{o(e)?Tn(e):bf(e)}))};return{register:(e,t)=>{r.register(e,t)},annotate:(t,n)=>{r.lookup(t).each((r=>{wf(e,t,r,n)}))},annotationChanged:(e,t)=>{n.addListener(e,t)},remove:t=>{ul(e,K.some(t)).each((t=>{var r=t.elements,n=e.selection.getBookmark();a(r),e.selection.moveToBookmark(n)}))},removeAll:t=>{var r=e.selection.getBookmark();ke(gl(e,t),((e,t)=>{a(e)})),e.selection.moveToBookmark(r)},getAll:t=>{var r=gl(e,t);return Ee(r,(e=>ee(e,(e=>e.dom))))}}},xf=e=>({getBookmark:U(om,e),moveToBookmark:U(am,e)});xf.isBookmarkNode=im;var kf=(e,t,r)=>!r.collapsed&&Z(r.getClientRects(),(r=>((e,t,r)=>t>=e.left&&t<=e.right&&r>=e.top&&r<=e.bottom)(r,e,t))),Ef=(e,t,r)=>{e.dispatch(t,r)},Nf=(e,t,r,n)=>{e.dispatch("FormatApply",{format:t,node:r,vars:n})},_f=(e,t,r,n)=>{e.dispatch("FormatRemove",{format:t,node:r,vars:n})},Tf=(e,t)=>e.dispatch("SetContent",t),Df=(e,t)=>e.dispatch("GetContent",t),Rf=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),Of={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Of.metaKeyPressed(e),metaKeyPressed:e=>Ft.os.isMacOS()||Ft.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Af="data-mce-selected",Bf=Math.abs,Pf=Math.round,Lf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Mf=(e,t)=>{var r,n,o,a,i,l,s,d,c,u,m,f,g,p,v,h=t.dom,b=t.getDoc(),y=document,C=t.getBody(),w=e=>R(e)&&(po(e)||h.is(e,"figure.image")),S=e=>Co(e)||h.hasClass(e,"mce-preview-object"),x=e=>{var r=e.target;((e,t)=>{if((e=>"longpress"===e.type||0===e.type.indexOf("touch"))(e)){var r=e.touches[0];return w(e.target)&&!kf(r.clientX,r.clientY,t)}return w(e.target)&&!kf(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(r)},k=e=>h.hasClass(e,"mce-preview-object")&&R(e.firstElementChild)?[e,e.firstElementChild]:h.is(e,"figure.image")?[e.querySelector("img")]:[e],E=e=>{var r=wd(t);return!!r&&("false"!==e.getAttribute("data-mce-resize")&&(e!==t.getBody()&&(h.hasClass(e,"mce-preview-object")&&R(e.firstElementChild)?_r(Er.fromDom(e.firstElementChild),r):_r(Er.fromDom(e),r))))},N=(e,r,n)=>{if(R(n)){var o=k(e);te(o,(e=>{e.style[r]||!t.schema.isValid(e.nodeName.toLowerCase(),r)?h.setStyle(e,r,n):h.setAttrib(e,r,""+n)}))}},_=(e,t,r)=>{N(e,"width",t),N(e,"height",r)},T=e=>{var i,b,y,x;i=e.screenX-l,b=e.screenY-s,f=i*a[2]+d,g=b*a[3]+c,f=f<5?5:f,g=g<5?5:g,((w(r)||S(r))&&!1!==Sd(t)?!Of.modifierPressed(e):Of.modifierPressed(e))&&(Bf(i)>Bf(b)?(g=Pf(f*u),f=Pf(g/u)):(f=Pf(g/u),g=Pf(f*u))),_(n,f,g),y=(y=a.startPos.x+i)>0?y:0,x=(x=a.startPos.y+b)>0?x:0,h.setStyles(o,{left:y,top:x,display:"block"}),o.innerHTML=f+" &times; "+g,a[2]<0&&n.clientWidth<=f&&h.setStyle(n,"left",undefined+(d-f)),a[3]<0&&n.clientHeight<=g&&h.setStyle(n,"top",undefined+(c-g)),(i=C.scrollWidth-p)+(b=C.scrollHeight-v)!==0&&h.setStyles(o,{left:y-i,top:x-b}),m||(((e,t,r,n,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:n,origin:o})})(t,r,d,c,"corner-"+a.name),m=!0)},D=()=>{var e=m;m=!1,e&&(N(r,"width",f),N(r,"height",g)),h.unbind(b,"mousemove",T),h.unbind(b,"mouseup",D),y!==b&&(h.unbind(y,"mousemove",T),h.unbind(y,"mouseup",D)),h.remove(n),h.remove(o),h.remove(i),O(r),e&&(((e,t,r,n,o)=>{e.dispatch("ObjectResized",{target:t,width:r,height:n,origin:o})})(t,r,f,g,"corner-"+a.name),h.setAttrib(r,"style",h.getAttrib(r,"style"))),t.nodeChanged()},O=e=>{M();var m=h.getPos(e,C),w=m.x,x=m.y,N=e.getBoundingClientRect(),R=N.width||N.right-N.left,O=N.height||N.bottom-N.top;r!==e&&(B(),r=e,f=g=0);var A=t.dispatch("ObjectSelected",{target:e});E(e)&&!A.isDefaultPrevented()?ke(Lf,((e,t)=>{var m=m=>{var f,g=k(r)[0];l=m.screenX,s=m.screenY,d=g.clientWidth,c=g.clientHeight,u=c/d,(a=e).name=t,a.startPos={x:R*e[0]+w,y:O*e[1]+x},p=C.scrollWidth,v=C.scrollHeight,i=h.add(C,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),h.setStyles(i,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),n=S(f=r)?h.create("img",{src:Ft.transparentSrc}):f.cloneNode(!0),h.addClass(n,"mce-clonedresizable"),h.setAttrib(n,"data-mce-bogus","all"),n.contentEditable="false",h.setStyles(n,{left:w,top:x,margin:0}),_(n,R,O),n.removeAttribute(Af),C.appendChild(n),h.bind(b,"mousemove",T),h.bind(b,"mouseup",D),y!==b&&(h.bind(y,"mousemove",T),h.bind(y,"mouseup",D)),o=h.add(C,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},d+" &times; "+c)},f=h.get("mceResizeHandle"+t);f&&h.remove(f),f=h.add(C,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),h.bind(f,"mousedown",(e=>{e.stopImmediatePropagation(),e.preventDefault(),m(e)})),e.elm=f,h.setStyles(f,{left:R*e[0]+w-f.offsetWidth/2,top:O*e[1]+x-f.offsetHeight/2})})):B(!1)},A=rl(O,0),B=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];A.cancel(),M(),r&&e&&r.removeAttribute(Af),ke(Lf,((e,t)=>{var r=h.get("mceResizeHandle"+t);r&&(h.unbind(r),h.remove(r))}))},P=(e,t)=>h.isChildOf(e,t),L=r=>{if(!(m||t.removed||t.composing)){var n="mousedown"===r.type?r.target:e.getNode(),o=sn(Er.fromDom(n),"table,img,figure.image,hr,video,span.mce-preview-object,details").map((e=>e.dom)).filter((e=>h.isEditable(e.parentElement))).getOrUndefined(),a=R(o)?h.getAttrib(o,Af,"1"):"1";if(te(h.select(`img[${Af}],hr[${Af}]`),(e=>{e.removeAttribute(Af)})),R(o)&&P(o,C)&&t.hasFocus()){I();var i=e.getStart(!0);if(P(i,o)&&P(e.getEnd(!0),o))return h.setAttrib(o,Af,a),void A.throttle(o)}B()}},M=()=>{ke(Lf,(e=>{e.elm&&(h.unbind(e.elm),delete e.elm)}))},I=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};t.on("init",(()=>{I(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",L),t.on("keyup compositionend",(e=>{r&&"TABLE"===r.nodeName&&L(e)})),t.on("hide blur",B),t.on("contextmenu longpress",x,!0)})),t.on("remove",M);return{isResizable:E,showResizeRect:O,hideResizeRect:B,updateResizeRect:L,destroy:()=>{A.cancel(),r=n=i=null}}},If=(e,t,r)=>{var n,o=e.document.createRange();return n=o,t.fold((e=>{n.setStartBefore(e.dom)}),((e,t)=>{n.setStart(e.dom,t)}),(e=>{n.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,r)=>{e.setEnd(t.dom,r)}),(t=>{e.setEndAfter(t.dom)}))})(o,r),o},Ff=(e,t,r,n,o)=>{var a=e.document.createRange();return a.setStart(t.dom,r),a.setEnd(n.dom,o),a},jf=Ns([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Uf=(e,t,r)=>t(Er.fromDom(r.startContainer),r.startOffset,Er.fromDom(r.endContainer),r.endOffset),zf=(e,t)=>{var r=((e,t)=>t.match({domRange:e=>({ltr:I(e),rtl:K.none}),relative:(t,r)=>({ltr:We((()=>If(e,t,r))),rtl:We((()=>K.some(If(e,r,t))))}),exact:(t,r,n,o)=>({ltr:We((()=>Ff(e,t,r,n,o))),rtl:We((()=>K.some(Ff(e,n,o,t,r))))})}))(e,t);return((e,t)=>{var r=t.ltr();return r.collapsed?t.rtl().filter((e=>!1===e.collapsed)).map((e=>jf.rtl(Er.fromDom(e.endContainer),e.endOffset,Er.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>Uf(0,jf.ltr,r))):Uf(0,jf.ltr,r)})(0,r)};jf.ltr,jf.rtl;var Hf=(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n}),$f=(e,t,r)=>{var n,o;return K.from(null===(o=(n=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(n,t,r)).bind((t=>{if(null===t.offsetNode)return K.none();var r=e.dom.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),K.some(r)}))},Wf=(e,t,r)=>{var n,o;return K.from(null===(o=(n=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(n,t,r))},qf=document.caretPositionFromPoint?$f:document.caretRangeFromPoint?Wf:K.none,Vf=Ns([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Kf={before:Vf.before,on:Vf.on,after:Vf.after,cata:(e,t,r,n)=>e.fold(t,r,n),getStart:e=>e.fold(F,F,F)},Gf=Ns([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Yf={domRange:Gf.domRange,relative:Gf.relative,exact:Gf.exact,exactFromRange:e=>Gf.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{var t=(e=>e.match({domRange:e=>Er.fromDom(e.startContainer),relative:(e,t)=>Kf.getStart(e),exact:(e,t,r,n)=>e}))(e);return Br(t)},range:Hf},Xf=(e,t)=>{var r=Qt(e);return"input"===r?Kf.after(e):J(["br","img"],r)?0===t?Kf.before(e):Kf.after(e):Kf.on(e,t)},Qf=(e,t)=>{var r=e.fold(Kf.before,Xf,Kf.after),n=t.fold(Kf.before,Xf,Kf.after);return Yf.relative(r,n)},Jf=(e,t,r,n)=>{var o=Xf(e,t),a=Xf(r,n);return Yf.relative(o,a)},Zf=(e,t)=>{var r=(t||document).createDocumentFragment();return te(e,(e=>{r.appendChild(e.dom)})),Er.fromDom(r)},eg=e=>{var t=Yf.getWin(e).dom,r=(e,r,n,o)=>Ff(t,e,r,n,o),n=(e=>e.match({domRange:e=>{var t=Er.fromDom(e.startContainer),r=Er.fromDom(e.endContainer);return Jf(t,e.startOffset,r,e.endOffset)},relative:Qf,exact:Jf}))(e);return zf(t,n).match({ltr:r,rtl:r})},tg=(e,t,r)=>((e,t,r)=>{var n=Er.fromDom(e.document);return qf(n,t,r).map((e=>Hf(Er.fromDom(e.startContainer),e.startOffset,Er.fromDom(e.endContainer),e.endOffset)))})(e,t,r),rg=(e,t,r)=>{var n=Br(Er.fromDom(r));return tg(n.dom,e,t).map((e=>{var t=r.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t})).getOrUndefined()},ng=(e,t)=>R(e)&&R(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,og=(e,t,r)=>null!==((e,t,r)=>{for(var n=e;n&&n!==t;){if(r(n))return n;n=n.parentNode}return null})(e,t,r),ag=(e,t,r)=>og(e,t,(e=>e.nodeName===r)),ig=(e,t)=>ea(e)&&!og(e,t,Vu),lg=(e,t,r)=>{var n=t.parentNode;if(n)for(var o,a=new Kn(t,e.getParent(n,e.isBlock)||e.getRoot());o=a[r?"prev":"next"]();)if(go(o))return!0;return!1},sg=(e,t,r,n,o)=>{var a,i,l=e.getRoot(),s=e.schema.getNonEmptyElements(),d=o.parentNode;if(!d)return K.none();var c=e.getParent(d,e.isBlock)||l;if(n&&go(o)&&t&&e.isEmpty(c))return K.some(es(d,e.nodeIndex(o)));for(var u=new Kn(o,c);i=u[n?"prev":"next"]();){if("false"===e.getContentEditableParent(i)||ig(i,l))return K.none();if(lo(i)&&i.data.length>0)return ag(i,l,"A")?K.none():K.some(es(i,n?i.data.length:0));if(e.isBlock(i)||s[i.nodeName.toLowerCase()])return K.none();a=i}return uo(a)?K.none():r&&a?K.some(es(a,0)):K.none()},dg=(e,t,r,n)=>{var o,a=e.getRoot(),i=!1,l=r?n.startContainer:n.endContainer,s=r?n.startOffset:n.endOffset,d=Jn(l)&&s===l.childNodes.length,c=e.schema.getNonEmptyElements(),u=r;if(ea(l))return K.none();if(Jn(l)&&s>l.childNodes.length-1&&(u=!1),mo(l)&&(l=a,s=0),l===a){if(u&&(o=l.childNodes[s>0?s-1:0])){if(ea(o))return K.none();if(c[o.nodeName]||oo(o))return K.none()}if(l.hasChildNodes()){if(s=Math.min(!u&&s>0?s-1:s,l.childNodes.length-1),l=l.childNodes[s],s=lo(l)&&d?l.data.length:0,!t&&l===a.lastChild&&oo(l))return K.none();if(((e,t)=>{for(var r=t;r&&r!==e;){if(ho(r))return!0;r=r.parentNode}return!1})(a,l)||ea(l))return K.none();if(l.hasChildNodes()&&!oo(l)){o=l;var m=new Kn(l,a);do{if(ho(o)||ea(o)){i=!1;break}if(lo(o)&&o.data.length>0){s=u?0:o.data.length,l=o,i=!0;break}if(c[o.nodeName.toLowerCase()]&&!yo(o)){s=e.nodeIndex(o),l=o.parentNode,u||s++,i=!0;break}}while(o=u?m.next():m.prev())}}}return t&&(lo(l)&&0===s&&sg(e,d,t,!0,l).each((e=>{l=e.container(),s=e.offset(),i=!0})),Jn(l)&&((o=l.childNodes[s])||(o=l.childNodes[s-1]),!o||!go(o)||((e,t)=>{var r;return(null===(r=e.previousSibling)||void 0===r?void 0:r.nodeName)===t})(o,"A")||lg(e,o,!1)||lg(e,o,!0)||sg(e,d,t,!0,o).each((e=>{l=e.container(),s=e.offset(),i=!0})))),u&&!t&&lo(l)&&s===l.data.length&&sg(e,d,t,!1,l).each((e=>{l=e.container(),s=e.offset(),i=!0})),i&&l?K.some(es(l,s)):K.none()},cg=(e,t)=>{var r=t.collapsed,n=t.cloneRange(),o=es.fromRangeStart(t);return dg(e,r,!0,n).each((e=>{r&&es.isAbove(o,e)||n.setStart(e.container(),e.offset())})),r||dg(e,r,!1,n).each((e=>{n.setEnd(e.container(),e.offset())})),r&&n.collapse(!0),ng(t,n)?K.none():K.some(n)},ug=(e,t)=>e.splitText(t),mg=e=>{var t=e.startContainer,r=e.startOffset,n=e.endContainer,o=e.endOffset;if(t===n&&lo(t)){if(r>0&&r<t.data.length)if(t=(n=ug(t,r)).previousSibling,o>r){var a=ug(n,o-=r).previousSibling;t=n=a,o=a.data.length,r=0}else o=0}else if(lo(t)&&r>0&&r<t.data.length&&(t=ug(t,r),r=0),lo(n)&&o>0&&o<n.data.length){var i=ug(n,o).previousSibling;n=i,o=i.data.length}return{startContainer:t,startOffset:r,endContainer:n,endOffset:o}},fg=e=>({walk:(t,r)=>gf(e,t,r),split:mg,expand:function(t){if("word"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"word"}).type){var r=ff(e,t,[{inline:"span"}]),n=e.createRng();return n.setStart(r.startContainer,r.startOffset),n.setEnd(r.endContainer,r.endOffset),n}return t},normalize:t=>cg(e,t).fold(q,(e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0)))});fg.compareRanges=ng,fg.getCaretRangeFromPoint=rg,fg.getSelectedNode=Al,fg.getNode=Bl;var gg,pg=((e,t)=>{var r=r=>{var n=t(r);if(n<=0||null===n){var o=pn(r,e);return parseFloat(o)||0}return n},n=(e,t)=>ie(t,((t,r)=>{var n=pn(e,r),o=void 0===n?0:parseInt(n,10);return isNaN(o)?t:t+o}),0);return{set:(t,r)=>{if(!A(r)&&!r.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+r);var n=t.dom;un(n)&&(n.style[e]=r+"px")},get:r,getOuter:r,aggregate:n,max:(e,t,r)=>{var o=n(e,r);return t>o?t-o:0}}})("height",(e=>{var t=e.dom;return en(e)?t.getBoundingClientRect().height:t.offsetHeight})),vg=()=>Er.fromDom(document),hg=(e,t)=>e.view(t).fold(I([]),(t=>{var r=e.owner(t),n=hg(e,r);return[t].concat(n)})),bg=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?K.none():K.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(Er.fromDom)},owner:e=>Ar(e)}),yg=e=>{var t=vg(),r=jn(t),n=((e,t)=>{var r=t.owner(e);return hg(t,r)})(e,bg),o=Fn(e),a=ae(n,((e,t)=>{var r=Fn(t);return{left:e.left+r.left,top:e.top+r.top}}),{left:0,top:0});return Mn(a.left+o.left+r.left,a.top+o.top+r.top)},Cg=e=>"textarea"===Qt(e),wg=(e,t)=>{var r=(e=>{var t=e.dom.ownerDocument,r=t.body,n=t.defaultView,o=t.documentElement;if(r===e.dom)return Mn(r.offsetLeft,r.offsetTop);var a=In(null==n?void 0:n.pageYOffset,o.scrollTop),i=In(null==n?void 0:n.pageXOffset,o.scrollLeft),l=In(o.clientTop,r.clientTop),s=In(o.clientLeft,r.clientLeft);return Fn(e).translate(i-s,a-l)})(e),n=(e=>pg.get(e))(e);return{element:e,bottom:r.top+n,height:n,pos:r,cleanup:t}},Sg=(e,t)=>{var r=((e,t)=>{var r=zr(e);if(0===r.length||Cg(e))return{element:e,offset:t};if(t<r.length&&!Cg(r[t]))return{element:r[t],offset:0};var n=r[r.length-1];return Cg(n)?{element:e,offset:t}:"img"===Qt(n)?{element:n,offset:1}:rr(n)?{element:n,offset:To(n).length}:{element:n,offset:zr(n).length}})(e,t),n=Er.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Cn(r.element,n),wg(n,(()=>_n(n)))},xg=(e,t,r,n)=>{_g(e,((o,a)=>Eg(e,t,r,n)),r)},kg=(e,t,r,n,o)=>{var a={elm:n.element.dom,alignToTop:o};((e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented())(e,a)||(r(e,t,jn(t).top,n,o),((e,t)=>{e.dispatch("AfterScrollIntoView",t)})(e,a))},Eg=(e,t,r,n)=>{var o=Er.fromDom(e.getBody()),a=Er.fromDom(e.getDoc());o.dom.offsetWidth;var i=Sg(Er.fromDom(r.startContainer),r.startOffset);kg(e,a,t,i,n),i.cleanup()},Ng=(e,t,r,n)=>{var o=Er.fromDom(e.getDoc());kg(e,o,r,(e=>wg(Er.fromDom(e),P))(t),n)},_g=(e,t,r)=>{var n=r.startContainer,o=r.startOffset,a=r.endContainer,i=r.endOffset;t(Er.fromDom(n),Er.fromDom(a));var l=e.dom.createRng();l.setStart(n,o),l.setEnd(a,i),e.selection.setRng(r)},Tg=(e,t,r,n,o)=>{var a=t.pos;if(n)Un(a.left,a.top,o);else{var i=a.top-r+t.height;Un(-e.getBody().getBoundingClientRect().left,i,o)}},Dg=(e,t,r,n,o,a)=>{var i=n+r,l=o.pos.top,s=o.bottom,d=s-l>=n;if(l<r)Tg(e,o,n,!1!==a,t);else if(l>i){Tg(e,o,n,d?!1!==a:!0===a,t)}else s>i&&!d&&Tg(e,o,n,!0===a,t)},Rg=(e,t,r,n,o)=>{var a=Br(t).dom.innerHeight;Dg(e,t,r,a,n,o)},Og=(e,t,r,n,o)=>{var a=Br(t).dom.innerHeight;Dg(e,t,r,a,n,o);var i=yg(n.element),l=$n(window);i.top<l.y?zn(n.element,!1!==o):i.top>l.bottom&&zn(n.element,!0===o)},Ag=(e,t,r)=>xg(e,Rg,t,r),Bg=(e,t,r)=>Ng(e,t,Rg,r),Pg=(e,t,r)=>xg(e,Og,t,r),Lg=(e,t,r)=>Ng(e,t,Og,r),Mg=(e,t,r)=>{(e.inline?Ag:Pg)(e,t,r)},Ig=e=>e.dom.focus(),Fg=e=>{var t=Yr(e).dom;return e.dom===t.activeElement},jg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vg();return K.from(e.dom.activeElement).map(Er.fromDom)},Ug=(e,t)=>{var r=rr(t)?To(t).length:zr(t).length+1;return e>r?r:e<0?0:e},zg=e=>Yf.range(e.start,Ug(e.soffset,e.start),e.finish,Ug(e.foffset,e.finish)),Hg=(e,t)=>!Qn(t.dom)&&(Rr(e,t)||Dr(e,t)),$g=e=>t=>Hg(e,t.start)&&Hg(e,t.finish),Wg=e=>Yf.range(Er.fromDom(e.startContainer),e.startOffset,Er.fromDom(e.endContainer),e.endOffset),qg=e=>(e=>{var t=e.getSelection();return(t&&0!==t.rangeCount?K.from(t.getRangeAt(0)):K.none()).map(Wg)})(Br(e).dom).filter($g(e)),Vg=e=>{var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),K.some(t)}catch(e){return K.none()}},Kg=e=>{var t=(e=>e.inline||Ft.browser.isFirefox())(e)?qg(Er.fromDom(e.getBody())):K.none();e.bookmark=t.isSome()?t:e.bookmark},Gg=e=>(e.bookmark?e.bookmark:K.none()).bind((t=>((e,t)=>K.from(t).filter($g(e)).map(zg))(Er.fromDom(e.getBody()),t))).bind(Vg),Yg={isEditorUIElement:e=>{var t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},Xg={setEditorTimeout:(e,t,r)=>((e,t)=>(A(t)||(t=0),setTimeout(e,t)))((()=>{e.removed||t()}),r),setEditorInterval:(e,t,r)=>{var n=((e,t)=>(A(t)||(t=0),setInterval(e,t)))((()=>{e.removed?clearInterval(n):t()}),r);return n}},Qg=e=>{var t=rl((()=>{Kg(e)}),0);e.on("init",(()=>{e.inline&&((e,t)=>{var r=()=>{t.throttle()};Vi.DOM.bind(document,"mouseup",r),e.on("remove",(()=>{Vi.DOM.unbind(document,"mouseup",r)}))})(e,t),((e,t)=>{((e,t)=>{e.on("mouseup touchend",(e=>{t.throttle()}))})(e,t),e.on("keyup NodeChange AfterSetSelectionRange",(t=>{(e=>"nodechange"===e.type&&e.selectionChange)(t)||Kg(e)}))})(e,t)})),e.on("remove",(()=>{t.cancel()}))},Jg=Vi.DOM,Zg=e=>{var t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},ep=(e,t)=>{var r=Ld(e),n=Jg.getParent(t,(t=>(e=>Jn(e)&&Yg.isEditorUIElement(e))(t)||!!r&&e.dom.is(t,r)));return null!==n},tp=e=>{try{var t=Yr(Er.fromDom(e.getElement()));return jg(t).fold((()=>document.body),(e=>e.dom))}catch(e){return document.body}},rp=(e,t)=>{var r=t.editor;Qg(r);var n=(e,t)=>{xc(e)&&!0!==e.inline&&t(Er.fromDom(e.getContainer()),"tox-edit-focus")};r.on("focusin",(()=>{var t=e.focusedEditor;Zg(tp(r))&&n(r,yr),t!==r&&(t&&t.dispatch("blur",{focusedEditor:r}),e.setActive(r),e.focusedEditor=r,r.dispatch("focus",{blurredEditor:t}),r.focus(!0))})),r.on("focusout",(()=>{Xg.setEditorTimeout(r,(()=>{var t=e.focusedEditor;Zg(tp(r))&&t===r||n(r,wr),ep(r,tp(r))||t!==r||(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)}))})),gg||(gg=t=>{var r=e.activeEditor;r&&Jr(t).each((t=>{var n=t;n.ownerDocument===document&&(n===document.body||ep(r,n)||e.focusedEditor!==r||(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))}))},Jg.bind(document,"focusin",gg))},np=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&gg&&(Jg.unbind(document,"focusin",gg),gg=null)},op=(e,t)=>(e=>e.collapsed?K.from(Bl(e.startContainer,e.startOffset)).map(Er.fromDom):K.none())(t).bind((t=>Fo(t)?K.some(t):Rr(e,t)?K.none():K.some(e))),ap=(e,t)=>{op(Er.fromDom(e.getBody()),t).bind((e=>$u(e.dom))).fold((()=>{e.selection.normalize()}),(t=>e.selection.setRng(t.toRange())))},ip=e=>{if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},lp=e=>{return Fg(e)||(t=e,jg(Yr(t)).filter((e=>t.dom.contains(e.dom)))).isSome();var t},sp=e=>e.inline?(e=>{var t=e.getBody();return t&&lp(Er.fromDom(t))})(e):(e=>R(e.iframeElement)&&Fg(Er.fromDom(e.iframeElement)))(e),dp=e=>sp(e)||(e=>{var t=Yr(Er.fromDom(e.getElement()));return jg(t).filter((t=>!Zg(t.dom)&&ep(e,t.dom))).isSome()})(e),cp=e=>e.editorManager.setActive(e),up=(e,t)=>{e.removed||(t?cp(e):(e=>{var t=e.selection,r=e.getBody(),n=t.getRng();e.quirks.refreshContentEditable(),R(e.bookmark)&&!sp(e)&&Gg(e).each((t=>{e.selection.setRng(t),n=t}));var o=((e,t)=>e.dom.getParent(t,(t=>"true"===e.dom.getContentEditable(t))))(e,t.getNode());if(o&&e.dom.isChildOf(o,r))return ip(o),ap(e,n),void cp(e);e.inline||(Ft.browser.isOpera()||ip(r),e.getWin().focus()),(Ft.browser.isFirefox()||e.inline)&&(ip(r),ap(e,n)),cp(e)})(e))},mp=(e,t,r,n,o)=>{var a=r?t.startContainer:t.endContainer,i=r?t.startOffset:t.endOffset;return K.from(a).map(Er.fromDom).map((e=>n&&t.collapsed?e:Hr(e,o(e,i)).getOr(e))).bind((e=>tr(e)?K.some(e):Pr(e).filter(tr))).map((e=>e.dom)).getOr(e)},fp=function(e,t){return mp(e,t,!0,arguments.length>2&&void 0!==arguments[2]&&arguments[2],((e,t)=>Math.min(qr(e),t)))},gp=function(e,t){return mp(e,t,!1,arguments.length>2&&void 0!==arguments[2]&&arguments[2],((e,t)=>t>0?t-1:t))},pp=(e,t)=>{for(var r=e;e&&lo(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||r},vp=(e,t)=>ee(t,(t=>{var r=e.dispatch("GetSelectionRange",{range:t});return r.range!==t?r.range:t})),hp=["img","br"],bp=e=>{var t=Do(e).filter((e=>0!==e.trim().length||e.indexOf(Eo)>-1)).isSome();return t||J(hp,Qt(e))||(e=>er(e)&&"false"===dr(e,"contenteditable"))(e)},yp=e=>((e,t)=>{var r=e=>{for(var n=0;n<e.childNodes.length;n++){var o=Er.fromDom(e.childNodes[n]);if(t(o))return K.some(o);var a=r(e.childNodes[n]);if(a.isSome())return a}return K.none()};return r(e.dom)})(e,bp),Cp=(e,t)=>{var r=e=>{for(var n=zr(e),o=n.length-1;o>=0;o--){var a=n[o];if(t(a))return K.some(a);var i=r(a);if(i.isSome())return i}return K.none()};return r(e)},wp="[data-mce-autocompleter]",Sp=(e,t)=>{if(xp(Er.fromDom(e.getBody())).isNone()){var r=Er.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());xn(r,Er.fromDom(t.extractContents())),t.insertNode(r.dom),Pr(r).each((e=>e.dom.normalize())),(n=r,Cp(n,bp)).map((t=>{e.selection.setCursorLocation(t.dom,(e=>"img"===Qt(e)?1:Do(e).fold((()=>zr(e).length),(e=>e.length)))(t))}))}var n},xp=e=>ln(e,wp),kp={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ep=(e,t,r)=>{var n=r?"lastChild":"firstChild",o=r?"prev":"next";if(e[n])return e[n];if(e!==t){var a=e[o];if(a)return a;for(var i=e.parent;i&&i!==t;i=i.parent)if(a=i[o])return a}},Np=e=>{var t,r=null!==(t=e.value)&&void 0!==t?t:"";if(!Ca(r))return!1;var n=e.parent;return!n||"span"===n.name&&!n.attr("style")||!/^[ ]+$/.test(r)},_p=e=>{var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Tp{static create(e,t){var r=new Tp(e,kp[e]||1);return t&&ke(t,((e,t)=>{r.attr(t,e)})),r}constructor(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}replace(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t}attr(e,t){var r=this;if(!S(e))return R(e)&&ke(e,((e,t)=>{r.attr(t,e)})),r;var n=r.attributes;if(n){if(void 0!==t){if(null===t){if(e in n.map){delete n.map[e];for(var o=n.length;o--;)if(n[o].name===e)return n.splice(o,1),r}return r}if(e in n.map){for(var a=n.length;a--;)if(n[a].name===e){n[a].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}return n.map[e]}}clone(){var e=this,t=new Tp(e.name,e.type),r=e.attributes;if(r){var n=[];n.map={};for(var o=0,a=r.length;o<a;o++){var i=r[o];"id"!==i.name&&(n[n.length]={name:i.name,value:i.value},n.map[i.name]=i.value)}t.attributes=n}return t.value=e.value,t}wrap(e){var t=this;return t.parent&&(t.parent.insert(e,t),e.append(t)),t}unwrap(){for(var e=this,t=e.firstChild;t;){var r=t.next;e.insert(t,e,!0),t=r}e.remove()}remove(){var e=this,t=e.parent,r=e.next,n=e.prev;return t&&(t.firstChild===e?(t.firstChild=r,r&&(r.prev=null)):n&&(n.next=r),t.lastChild===e?(t.lastChild=n,n&&(n.next=null)):r&&(r.prev=n),e.parent=e.next=e.prev=null),e}append(e){var t=this;e.parent&&e.remove();var r=t.lastChild;return r?(r.next=e,e.prev=r,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}insert(e,t,r){e.parent&&e.remove();var n=t.parent||this;return r?(t===n.firstChild?n.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,e.next=t,t.prev=e):(t===n.lastChild?n.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e),e.parent=n,e}getAll(e){for(var t=[],r=this.firstChild;r;r=Ep(r,this))r.name===e&&t.push(r);return t}children(){for(var e=[],t=this.firstChild;t;t=t.next)e.push(t);return e}empty(){var e=this;if(e.firstChild){for(var t=[],r=e.firstChild;r;r=Ep(r,e))t.push(r);for(var n=t.length;n--;){var o=t[n];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=this,a=o.firstChild;if(_p(o))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name])return!1;if(_p(a))return!1}if(8===a.type)return!1;if(3===a.type&&!Np(a))return!1;if(3===a.type&&a.parent&&r[a.parent.name]&&Ca(null!==(t=a.value)&&void 0!==t?t:""))return!1;if(n&&n(a))return!1}while(a=Ep(a,o));return!0}walk(e){return Ep(this,null,e)}}var Dp=zt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),Rp=e=>S(e.nodeValue)&&e.nodeValue.includes(Ko),Op=e=>(0===e.length?"":`${ee(e,(e=>`[${e}]`)).join(",")},`)+'[data-mce-bogus="all"]',Ap=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,(e=>Rp(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP)),Bp=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,(e=>{if(Rp(e)){var t=e.parentNode;return t&&Be(Dp,t.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP})),Pp=e=>null!==Ap(e).nextNode(),Lp=e=>null!==Bp(e).nextNode(),Mp=(e,t)=>null!==t.querySelector(Op(e)),Ip=(e,t)=>{te(((e,t)=>t.querySelectorAll(Op(e)))(e,t),(t=>{var r=Er.fromDom(t);"all"===dr(r,"data-mce-bogus")?_n(r):te(e,(e=>{ur(r,e)&&mr(r,e)}))}))},Fp=e=>{for(var t=e.nextNode();null!==t;)t.nodeValue=null,t=e.nextNode()},jp=L(Fp,Ap),Up=L(Fp,Bp),zp=(e,t)=>{var r=[{condition:U(Mp,t),action:U(Ip,t)},{condition:Pp,action:jp},{condition:Lp,action:Up}],n=e,o=!1;return te(r,(t=>{var r=t.condition,a=t.action;r(n)&&(o||(n=e.cloneNode(!0),o=!0),a(n))})),n},Hp=e=>{var t=qn(e,"[data-mce-bogus]");te(t,(e=>{"all"===dr(e,"data-mce-bogus")?_n(e):Po(e)?(Cn(e,Er.fromText(ko)),_n(e)):Tn(e)}))},$p=e=>{var t=qn(e,"input");te(t,(e=>{mr(e,"name")}))},Wp=(e,t)=>{var r=e.getDoc(),n=Yr(Er.fromDom(e.getBody())),o=Er.fromTag("div",r);lr(o,"data-mce-bogus","all"),gn(o,{position:"fixed",left:"-9999999px",top:"0"}),On(o,t.innerHTML),Hp(o),$p(o);var a=(e=>Vr(e)?e:Er.fromDom(Ar(e).dom.body))(n);xn(a,o);var i=Yo(o.dom.innerText);return _n(o),i},qp=(e,t,r)=>{var n;return n="raw"===t.format?zt.trim(Yo(zp(r,e.serializer.getTempAttrs()).innerHTML)):"text"===t.format?Wp(e,r):"tree"===t.format?e.serializer.serialize(r,t):((e,t)=>{var r=Gs(e),n=new RegExp(`^(<${r}[^>]*>(&nbsp;|&#160;|\\s|Â |<br \\/>|)<\\/${r}>[\r\n]*|<br \\/>[\r\n]*)$`);return t.replace(n,"")})(e,e.serializer.serialize(r,t)),"text"!==t.format&&!Uo(Er.fromDom(r))&&S(n)?zt.trim(n):n},Vp=zt.makeMap,Kp=e=>{var t=[],r=(e=e||{}).indent,n=Vp(e.indent_before||""),o=Vp(e.indent_after||""),a=fi.getEncodeFunc(e.entity_encoding||"raw",e.entities),i="xhtml"!==e.element_format;return{start:(e,l,s)=>{if(r&&n[e]&&t.length>0){var d=t[t.length-1];d.length>0&&"\n"!==d&&t.push("\n")}if(t.push("<",e),l)for(var c=0,u=l.length;c<u;c++){var m=l[c];t.push(" ",m.name,'="',a(m.value,!0),'"')}if(t[t.length]=!s||i?">":" />",s&&r&&o[e]&&t.length>0){var f=t[t.length-1];f.length>0&&"\n"!==f&&t.push("\n")}},end:e=>{var n;t.push("</",e,">"),r&&o[e]&&t.length>0&&(n=t[t.length-1]).length>0&&"\n"!==n&&t.push("\n")},text:(e,r)=>{e.length>0&&(t[t.length]=r?e:a(e))},cdata:e=>{t.push("<![CDATA[",e,"]]>")},comment:e=>{t.push("\x3c!--",e,"--\x3e")},pi:(e,n)=>{n?t.push("<?",e," ",a(n),"?>"):t.push("<?",e,"?>"),r&&t.push("\n")},doctype:e=>{t.push("<!DOCTYPE",e,">",r?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Gp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ei(),r=Kp(e);e.validate=!("validate"in e)||e.validate;return{serialize:n=>{var o=e.validate,a={3:e=>{var t;r.text(null!==(t=e.value)&&void 0!==t?t:"",e.raw)},8:e=>{var t;r.comment(null!==(t=e.value)&&void 0!==t?t:"")},7:e=>{r.pi(e.name,e.value)},10:e=>{var t;r.doctype(null!==(t=e.value)&&void 0!==t?t:"")},4:e=>{var t;r.cdata(null!==(t=e.value)&&void 0!==t?t:"")},11:e=>{var t=e;if(t=t.firstChild)do{i(t)}while(t=t.next)}};r.reset();var i=e=>{var n,l=a[e.type];if(l)l(e);else{var s=e.name,d=s in t.getVoidElements(),c=e.attributes;if(o&&c&&c.length>1){var u=[];u.map={};var m=t.getElementRule(e.name);if(m){for(var f=0,g=m.attributesOrder.length;f<g;f++){var p=m.attributesOrder[f];if(p in c.map){var v=c.map[p];u.map[p]=v,u.push({name:p,value:v})}}for(var h=0,b=c.length;h<b;h++){var y=c[h].name;if(!(y in u.map)){var C=c.map[y];u.map[y]=C,u.push({name:y,value:C})}}c=u}}if(r.start(s,c,d),!d){var w=e.firstChild;if(w){"pre"!==s&&"textarea"!==s||3!==w.type||"\n"!==(null===(n=w.value)||void 0===n?void 0:n[0])||r.text("\n",!0);do{i(w)}while(w=w.next)}r.end(s)}}};return 1!==n.type||e.inner?3===n.type?a[3](n):a[11](n):i(n),r.getContent()}}},Yp=new Set;te(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(e=>{Yp.add(e)}));var Xp=["font","text-decoration","text-emphasis"],Qp=(e,t)=>Se(e.parseStyle(e.getAttrib(t,"style"))),Jp=(e,t)=>me(Qp(e,t),(e=>!(e=>Yp.has(e))(e))),Zp=(e,t,r)=>{var n=Qp(e,t),o=Qp(e,r),a=n=>{var o,a,i=null!==(o=e.getStyle(t,n))&&void 0!==o?o:"",l=null!==(a=e.getStyle(r,n))&&void 0!==a?a:"";return ot(i)&&ot(l)&&i!==l};return Z(n,(e=>{var t=t=>Z(t,(t=>t===e));if(!t(o)&&t(Xp)){var r=oe(o,(e=>Z(Xp,(t=>Je(e,t)))));return Z(r,a)}return a(e)}))},ev=(e,t,r)=>K.from(r.container()).filter(lo).exists((n=>{var o=e?0:-1;return t(n.data.charAt(r.offset()+o))})),tv=U(ev,!0,sm),rv=U(ev,!1,sm),nv=e=>{var t=e.container();return lo(t)&&(0===t.data.length||Go(t.data)&&xf.isBookmarkNode(t.parentNode))},ov=(e,t)=>r=>du(e?0:-1,r).filter(t).isSome(),av=e=>po(e)&&"block"===pn(Er.fromDom(e),"display"),iv=e=>ho(e)&&!(e=>Jn(e)&&"all"===e.getAttribute("data-mce-bogus"))(e),lv=ov(!0,av),sv=ov(!1,av),dv=ov(!0,Co),cv=ov(!1,Co),uv=ov(!0,oo),mv=ov(!1,oo),fv=ov(!0,iv),gv=ov(!1,iv),pv=(e,t)=>((e,t,r)=>Rr(t,e)?Mr(e,(e=>r(e)||Dr(e,t))).slice(0,-1):[])(e,t,q),vv=(e,t)=>[e].concat(pv(e,t)),hv=(e,t,r)=>ju(e,t,r,nv),bv=(e,t)=>se(vv(Er.fromDom(t.container()),e),Ao),yv=(e,t,r)=>hv(e,t.dom,r).forall((e=>bv(t,r).fold((()=>!su(e,r,t.dom)),(n=>!su(e,r,t.dom)&&Rr(n,Er.fromDom(e.container())))))),Cv=(e,t,r)=>bv(t,r).fold((()=>hv(e,t.dom,r).forall((e=>!su(e,r,t.dom)))),(t=>hv(e,t.dom,r).isNone())),wv=U(Cv,!1),Sv=U(Cv,!0),xv=U(yv,!1),kv=U(yv,!0),Ev=e=>bu(e).exists(Po),Nv=(e,t,r)=>{var n=oe(vv(Er.fromDom(r.container()),t),Ao),o=be(n).getOr(t);return Iu(e,o.dom,r).filter(Ev)},_v=(e,t)=>bu(t).exists(Po)||Nv(!0,e,t).isSome(),Tv=(e,t)=>(e=>K.from(e.getNode(!0)).map(Er.fromDom))(t).exists(Po)||Nv(!1,e,t).isSome(),Dv=U(Nv,!1),Rv=U(Nv,!0),Ov=e=>es.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Av=(e,t)=>{var r=oe(vv(Er.fromDom(t.container()),e),Ao);return be(r).getOr(e)},Bv=(e,t)=>Ov(t)?rv(t):rv(t)||Hu(Av(e,t).dom,t).exists(rv),Pv=(e,t)=>Ov(t)?tv(t):tv(t)||zu(Av(e,t).dom,t).exists(tv),Lv=e=>bu(e).bind((e=>nn(e,tr))).exists((e=>(e=>J(["pre","pre-wrap"],e))(pn(e,"white-space")))),Mv=(e,t)=>((e,t)=>Hu(e.dom,t).isNone())(e,t)||((e,t)=>zu(e.dom,t).isNone())(e,t)||wv(e,t)||Sv(e,t)||Tv(e,t)||_v(e,t),Iv=(e,t)=>r=>{return n=new Kn(r,e)[t](),R(n)&&ho(n)&&Qc(n);var n},Fv=(e,t)=>!Lv(t)&&(Mv(e,t)||Bv(e,t)||Pv(e,t)),jv=(e,t)=>!Lv(t)&&(wv(e,t)||xv(e,t)||Tv(e,t)||Bv(e,t)||((e,t)=>{var r=Hu(e.dom,t).getOr(t),n=Iv(e.dom,"prev");return t.isAtStart()&&(n(t.container())||n(r.container()))})(e,t)),Uv=(e,t)=>!Lv(t)&&(Sv(e,t)||kv(e,t)||_v(e,t)||Pv(e,t)||((e,t)=>{var r=zu(e.dom,t).getOr(t),n=Iv(e.dom,"next");return t.isAtEnd()&&(n(t.container())||n(r.container()))})(e,t)),zv=(e,t)=>jv(e,t)||Uv(e,(e=>{var t=e.container(),r=e.offset();return lo(t)&&r<t.data.length?es(t,r+1):e})(t)),Hv=(e,t)=>lm(e.charAt(t)),$v=(e,t)=>sm(e.charAt(t)),Wv=(e,t,r)=>{var n=t.data,o=es(t,0);return r||!Hv(n,0)||zv(e,o)?!!(r&&$v(n,0)&&jv(e,o))&&(t.data=Eo+n.slice(1),!0):(t.data=" "+n.slice(1),!0)},qv=e=>{var t=e.data,r=(e=>{var t=e.split("");return ee(t,((e,r)=>lm(e)&&r>0&&r<t.length-1&&dm(t[r-1])&&dm(t[r+1])?" ":e)).join("")})(t);return r!==t&&(e.data=r,!0)},Vv=(e,t,r)=>{var n=t.data,o=es(t,n.length-1);return r||!Hv(n,n.length-1)||zv(e,o)?!!(r&&$v(n,n.length-1)&&Uv(e,o))&&(t.data=n.slice(0,-1)+Eo,!0):(t.data=n.slice(0,-1)+" ",!0)},Kv=(e,t)=>{var r=t.container();if(!lo(r))return K.none();if((e=>{var t=e.container();return lo(t)&&Qe(t.data,Eo)})(t)){var n=Wv(e,r,!1)||qv(r)||Vv(e,r,!1);return qt(n,t)}if(zv(e,t)){var o=Wv(e,r,!0)||Vv(e,r,!0);return qt(o,t)}return K.none()},Gv=(e,t,r)=>{if(0!==r){var n=Er.fromDom(e),o=rn(n,Ao).getOr(n),a=e.data.slice(t,t+r),i=t+r>=e.data.length&&Uv(o,es(e,e.data.length)),l=0===t&&jv(o,es(e,0));e.replaceData(t,r,xa(a,4,l,i))}},Yv=(e,t)=>{var r=e.data.slice(t),n=r.length-rt(r).length;Gv(e,t,n)},Xv=(e,t)=>{var r=e.data.slice(0,t),n=r.length-nt(r).length;Gv(e,t-n,n)},Qv=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=nt(e.data).length,a=n?e:t,i=n?t:e;return n?a.appendData(i.data):a.insertData(0,i.data),_n(Er.fromDom(i)),r&&Yv(a,o),a},Jv=(e,t)=>((e,t)=>{var r=e.container(),n=e.offset();return!es.isTextPosition(e)&&r===t.parentNode&&n>es.before(t).offset()})(t,e)?es(t.container(),t.offset()-1):t,Zv=e=>{return va(e.previousSibling)?K.some((t=e.previousSibling,lo(t)?es(t,t.data.length):es.after(t))):e.previousSibling?Wu(e.previousSibling):K.none();var t},eh=e=>{return va(e.nextSibling)?K.some((t=e.nextSibling,lo(t)?es(t,0):es.before(t))):e.nextSibling?$u(e.nextSibling):K.none();var t},th=(e,t)=>Zv(t).orThunk((()=>eh(t))).orThunk((()=>((e,t)=>K.from(t.previousSibling?t.previousSibling:t.parentNode).bind((t=>Hu(e,es.before(t)))).orThunk((()=>zu(e,es.after(t)))))(e,t))),rh=(e,t)=>eh(t).orThunk((()=>Zv(t))).orThunk((()=>((e,t)=>zu(e,es.after(t)).orThunk((()=>Hu(e,es.before(t)))))(e,t))),nh=(e,t,r)=>((e,t,r)=>e?rh(t,r):th(t,r))(e,t,r).map(U(Jv,r)),oh=(e,t,r)=>{r.fold((()=>{e.focus()}),(r=>{e.selection.setRng(r.toRange(),t)}))},ah=(e,t)=>t&&Be(e.schema.getBlockElements(),Qt(t)),ih=e=>{if(Da(e)){var t=Er.fromHtml('<br data-mce-bogus="1">');return Nn(e),xn(e,t),K.some(es.before(t.dom))}return K.none()},lh=(e,t,r)=>{var n,o,a,i,l=Ir(e).filter(rr),s=Fr(e).filter(rr);return _n(e),(n=l,o=s,a=t,i=(e,t,n)=>{var o=e.dom,a=t.dom,i=o.data.length;return Qv(o,a,r),n.container()===a?es(o,i):n},n.isSome()&&o.isSome()&&a.isSome()?K.some(i(n.getOrDie(),o.getOrDie(),a.getOrDie())):K.none()).orThunk((()=>(r&&(l.each((e=>Xv(e.dom,e.dom.length))),s.each((e=>Yv(e.dom,0)))),t)))},sh=function(e,t,r){var n,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=nh(t,e.getBody(),r.dom),i=rn(r,U(ah,e),(n=e.getBody(),e=>e.dom===n)),l=lh(r,a,((e,t)=>Be(e.schema.getTextInlineElements(),Qt(t)))(e,r));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(ih).fold((()=>{o&&oh(e,t,l)}),(r=>{o&&oh(e,t,K.some(r))}))},dh=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ch=(e,t)=>_r(Er.fromDom(t),Cd(e))&&!za(e.schema,t)&&e.dom.isEditable(t),uh=e=>{var t;return"rtl"===Vi.DOM.getStyle(e,"direction",!0)||(e=>dh.test(e))(null!==(t=e.textContent)&&void 0!==t?t:"")},mh=(e,t,r)=>{var n=((e,t,r)=>oe(Vi.DOM.getParents(r.container(),"*",t),e))(e,t,r);return K.from(n[n.length-1])},fh=(e,t)=>{var r=t.container(),n=t.offset();return e?Zo(r)?lo(r.nextSibling)?es(r.nextSibling,0):es.after(r):ra(t)?es(r,n+1):t:Zo(r)?lo(r.previousSibling)?es(r.previousSibling,r.previousSibling.data.length):es.before(r):na(t)?es(r,n-1):t},gh=U(fh,!0),ph=U(fh,!1),vh=(e,t)=>{var r=e=>e.stopImmediatePropagation();e.on("beforeinput input",r,!0),e.getDoc().execCommand(t),e.off("beforeinput input",r)},hh=e=>vh(e,"Delete"),bh=e=>Lo(e)||Io(e),yh=(e,t)=>Rr(e,t)?nn(t,bh,(e=>t=>Ht(Pr(t),e,Dr))(e)):K.none(),Ch=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},wh=(e,t,r)=>Wt($u(r),Wu(r),((n,o)=>{var a=fh(!0,n),i=fh(!1,o),l=fh(!1,t);return e?zu(r,l).exists((e=>e.isEqual(i)&&t.isEqual(a))):Hu(r,l).exists((e=>e.isEqual(a)&&t.isEqual(i)))})).getOr(!0),Sh=e=>{var t;return(8===Jt(t=e)||"#comment"===Qt(t)?Ir(e):Wr(e)).bind(Sh).orThunk((()=>K.some(e)))},xh=function(e,t,r){var n,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.deleteContents();var a,i=Sh(r).getOr(r),l=Er.fromDom(null!==(n=e.dom.getParent(i.dom,e.dom.isBlock))&&void 0!==n?n:r.dom);if(l.dom===e.getBody()?Ch(e,o):Da(l)&&(qo(l),o&&e.selection.setCursorLocation(l.dom,0)),!Dr(r,l)){var s=Ht(Pr(l),r)?[]:Pr(a=l).map(zr).map((e=>oe(e,(e=>!Dr(a,e))))).getOr([]);te(s.concat(zr(r)),(e=>{Dr(e,l)||Rr(e,l)||!Da(e)||_n(e)}))}},kh=e=>qn(e,"td,th"),Eh=(e,t)=>({start:e,end:t}),Nh=Ns([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),_h=(e,t)=>sn(Er.fromDom(e),"td,th",t),Th=e=>!Dr(e.start,e.end),Dh=(e,t)=>Sm(e.start,t).bind((r=>Sm(e.end,t).bind((e=>qt(Dr(r,e),r))))),Rh=e=>t=>Dh(t,e).map((e=>((e,t,r)=>({rng:e,table:t,cells:r}))(t,e,kh(e)))),Oh=(e,t,r,n)=>{if(r.collapsed||!e.forall(Th))return K.none();if(t.isSameTable){var o=e.bind(Rh(n));return K.some({start:o,end:o})}var a=_h(r.startContainer,n),i=_h(r.endContainer,n),l=a.bind((e=>t=>Sm(t,e).bind((e=>ye(kh(e)).map((e=>Eh(t,e))))))(n)).bind(Rh(n)),s=i.bind((e=>t=>Sm(t,e).bind((e=>be(kh(e)).map((e=>Eh(e,t))))))(n)).bind(Rh(n));return K.some({start:l,end:s})},Ah=(e,t)=>de(e,(e=>Dr(e,t))),Bh=e=>Wt(Ah(e.cells,e.rng.start),Ah(e.cells,e.rng.end),((t,r)=>e.cells.slice(t,r+1))),Ph=(e,t,r)=>e.exists((e=>((e,t)=>!Th(e)&&Dh(e,t).exists((e=>{var t=e.dom.rows;return 1===t.length&&1===t[0].cells.length})))(e,r)&&Em(e.start,t))),Lh=(e,t)=>{var r=t.startTable,n=t.endTable,o=e.cloneRange();return r.each((e=>o.setStartAfter(e.dom))),n.each((e=>o.setEndBefore(e.dom))),o},Mh=(e,t)=>{var r=(e=>t=>Dr(e,t))(e),n=((e,t)=>{var r=_h(e.startContainer,t),n=_h(e.endContainer,t);return Wt(r,n,Eh)})(t,r),o=((e,t)=>{var r=e=>Sm(Er.fromDom(e),t),n=r(e.startContainer),o=r(e.endContainer),a=n.isSome(),i=o.isSome(),l=Wt(n,o,Dr).getOr(!1);return{startTable:n,endTable:o,isStartInTable:a,isEndInTable:i,isSameTable:l,isMultiTable:!l&&a&&i}})(t,r);return Ph(n,t,r)?n.map((e=>Nh.singleCellTable(t,e.start))):o.isMultiTable?((e,t,r,n)=>Oh(e,t,r,n).bind((e=>{var n=e.start,o=e.end,a=n.bind(Bh).getOr([]),i=o.bind(Bh).getOr([]);if(a.length>0&&i.length>0){var l=Lh(r,t);return K.some(Nh.multiTable(a,i,l))}return K.none()})))(n,o,t,r):((e,t,r,n)=>Oh(e,t,r,n).bind((e=>{var t=e.start,r=e.end;return t.or(r)})).bind((e=>{var n=t.isSameTable,o=Bh(e).getOr([]);if(n&&e.cells.length===o.length)return K.some(Nh.fullTable(e.table));if(o.length>0){if(n)return K.some(Nh.partialTable(o,K.none()));var a=Lh(r,t);return K.some(Nh.partialTable(o,K.some(d(d({},t),{},{rng:a}))))}return K.none()})))(n,o,t,r)},Ih=e=>te(e,(e=>{mr(e,"contenteditable"),qo(e)})),Fh=(e,t,r,n)=>{var o=r.cloneRange();n?(o.setStart(r.startContainer,r.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(r.endContainer,r.endOffset)),Hh(e,o,t,!1).each((e=>e()))},jh=e=>{var t=wm(e),r=Er.fromDom(e.selection.getNode());bo(r.dom)&&Da(r)?e.selection.setCursorLocation(r.dom,0):e.selection.collapse(!0),t.length>1&&Z(t,(e=>Dr(e,r)))&&lr(r,"data-mce-selected","1")},Uh=(e,t,r)=>K.some((()=>{var n=e.selection.getRng(),o=r.bind((r=>{var o=r.rng,a=r.isStartInTable,i=((e,t)=>K.from(e.dom.getParent(t,e.dom.isBlock)).map(Er.fromDom))(e,a?o.endContainer:o.startContainer);o.deleteContents(),((e,t,r)=>{r.each((r=>{t?_n(r):(qo(r),e.selection.setCursorLocation(r.dom,0))}))})(e,a,i.filter(Da));var l=a?t[0]:t[t.length-1];return Fh(e,l,n,a),Da(l)?K.none():K.some(a?t.slice(1):t.slice(0,-1))})).getOr(t);Ih(o),jh(e)})),zh=(e,t,r,n)=>K.some((()=>{var o=e.selection.getRng(),a=t[0],i=r[r.length-1];Fh(e,a,o,!0),Fh(e,i,o,!1);var l=Da(a)?t:t.slice(1),s=Da(i)?r:r.slice(0,-1);Ih(l.concat(s)),n.deleteContents(),jh(e)})),Hh=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return K.some((()=>{xh(e,t,r,n)}))},$h=(e,t)=>K.some((()=>sh(e,!1,t))),Wh=(e,t,r,n)=>Vh(t,n).fold((()=>((e,t,r)=>Mh(t,r).bind((t=>t.fold(U(Hh,e),U($h,e),U(Uh,e),U(zh,e)))))(e,t,r)),(t=>((e,t)=>Kh(e,t))(e,t))),qh=(e,t)=>se(vv(t,e),jo),Vh=(e,t)=>se(vv(t,e),ar("caption")),Kh=(e,t)=>K.some((()=>{qo(t),e.selection.setCursorLocation(t.dom,0)})),Gh=(e,t,r,n,o)=>Fu(r,e.getBody(),o).fold((()=>K.some(P)),(a=>((e,t,r,n)=>$u(e.dom).bind((o=>Wu(e.dom).map((e=>t?r.isEqual(o)&&n.isEqual(e):r.isEqual(e)&&n.isEqual(o))))).getOr(!0))(n,r,o,a)?((e,t)=>Kh(e,t))(e,n):((e,t,r)=>Vh(e,Er.fromDom(r.getNode())).fold((()=>K.some(P)),(e=>qt(!Dr(e,t),P))))(t,n,a))),Yh=(e,t,r,n)=>{var o=es.fromRangeStart(e.selection.getRng());return qh(r,n).bind((n=>Da(n)?Kh(e,n):((e,t,r,n,o)=>Fu(r,e.getBody(),o).bind((e=>qh(t,Er.fromDom(e.getNode())).bind((e=>Dr(e,n)?K.none():K.some(P))))))(e,r,t,n,o)))},Xh=(e,t)=>e?uv(t):mv(t),Qh=(e,t,r)=>{var n=Er.fromDom(e.getBody());return Vh(n,r).fold((()=>Yh(e,t,n,r).orThunk((()=>qt(((e,t)=>{var r=es.fromRangeStart(e.selection.getRng());return Xh(t,r)||Iu(t,e.getBody(),r).exists((e=>Xh(t,e)))})(e,t),P)))),(r=>((e,t,r,n)=>{var o=es.fromRangeStart(e.selection.getRng());return Da(n)?Kh(e,n):Gh(e,r,t,n,o)})(e,t,n,r)))},Jh=(e,t)=>{var r=Er.fromDom(e.selection.getStart(!0)),n=wm(e);return e.selection.isCollapsed()&&0===n.length?Qh(e,t,r):((e,t,r)=>{var n=Er.fromDom(e.getBody()),o=e.selection.getRng();return 0!==r.length?Uh(e,r,K.none()):Wh(e,n,o,t)})(e,r,n)},Zh=(e,t)=>{for(var r=t;r&&r!==e;){if(vo(r)||ho(r))return r;r=r.parentNode}return null},eb=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],tb=zt.each,rb=e=>{var t=e.dom,r=new Set(e.serializer.getTempAttrs()),n=e=>Z(eb,(t=>Je(e,t)))||r.has(e);return{compare:(e,r)=>{if(e.nodeName!==r.nodeName||e.nodeType!==r.nodeType)return!1;var o=e=>{var r={};return tb(t.getAttribs(e),(o=>{var a=o.nodeName.toLowerCase();"style"===a||n(a)||(r[a]=t.getAttrib(e,a))})),r},a=(e,t)=>{for(var r in e)if(Be(e,r)){var n=t[r];if(T(n))return!1;if(e[r]!==n)return!1;delete t[r]}for(var o in t)if(Be(t,o))return!1;return!0};if(Jn(e)&&Jn(r)){if(!a(o(e),o(r)))return!1;if(!a(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(r,"style"))))return!1}return!im(e)&&!im(r)},isAttributeInternal:n}},nb=(e,t,r,n)=>{for(var o=r.name,a=0,i=e.length;a<i;a++){var l=e[a];if(l.name===o){var s=n.nodes[o];s?s.nodes.push(r):n.nodes[o]={filter:l,nodes:[r]}}}if(r.attributes)for(var d=0,c=t.length;d<c;d++){var u=t[d],m=u.name;if(m in r.attributes.map){var f=n.attributes[m];f?f.nodes.push(r):n.attributes[m]={filter:u,nodes:[r]}}}},ob=(e,t)=>{var r=(e,r)=>{ke(e,(e=>{var n=Ce(e.nodes);te(e.filter.callbacks,(o=>{for(var a=n.length-1;a>=0;a--){var i=n[a];(r?void 0!==i.attr(e.filter.name):i.name===e.filter.name)&&!D(i.parent)||n.splice(a,1)}n.length>0&&o(n,e.filter.name,t)}))}))};r(e.nodes,!1),r(e.attributes,!0)},ab=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=((e,t,r)=>{var n={nodes:{},attributes:{}};return r.firstChild&&((e,t)=>{for(var r=e;r=r.walk();)t(r)})(r,(r=>{nb(e,t,r,n)})),n})(e,t,r);ob(o,n)},ib=(e,t,r,n)=>{if((e.pad_empty_with_br||t.insert)&&r(n)){var o=new Tp("br",1);t.insert&&o.attr("data-mce-bogus","1"),n.empty().append(o)}else n.empty().append(new Tp("#text",3)).value=Eo},lb=(e,t)=>{var r=null==e?void 0:e.firstChild;return R(r)&&r===e.lastChild&&r.name===t},sb=(e,t,r,n)=>n.isEmpty(t,r,(t=>((e,t)=>{var r=e.getElementRule(t.name);return!0===(null==r?void 0:r.paddEmpty)})(e,t))),db=e=>{for(var t,r=e;r;r=r.parent){var n=r.attr("contenteditable");if("false"===n)break;"true"===n&&(t=r)}return K.from(t)},cb=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.parent;if(r.getSpecialElements()[t.name])t.empty().remove();else{var o,a=g(t.children());try{for(a.s();!(o=a.n()).done;){var i=o.value;n&&!r.isValidChild(n.name,i.name)&&e(i,r,n)}}catch(e){a.e(e)}finally{a.f()}t.unwrap()}},ub=function(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P,o=t.getTextBlockElements(),a=t.getNonEmptyElements(),i=t.getWhitespaceElements(),l=zt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),s=new Set,d=e=>e!==r&&!l[e.name],c=0;c<e.length;c++){var u=e[c],m=void 0,f=void 0,g=void 0;if(u.parent&&!s.has(u))if(o[u.name]&&"li"===u.parent.name){for(var p=u.next;p&&o[p.name];)p.name="li",s.add(p),u.parent.insert(p,u.parent),p=p.next;u.unwrap()}else{var v=[u];for(m=u.parent;m&&!t.isValidChild(m.name,u.name)&&d(m);m=m.parent)v.push(m);if(m&&v.length>1)if(t.isValidChild(m.name,u.name)){v.reverse(),n(f=v[0].clone());for(var h=f,b=0;b<v.length-1;b++){t.isValidChild(h.name,v[b].name)&&b>0?(n(g=v[b].clone()),h.append(g)):g=h;for(var y=v[b].firstChild;y&&y!==v[b+1];){var C=y.next;g.append(y),y=C}h=g}sb(t,a,i,f)?m.insert(u,v[0],!0):(m.insert(f,v[0],!0),m.insert(u,f)),m=v[0],(sb(t,a,i,m)||lb(m,"br"))&&m.empty().remove()}else cb(u,t);else if(u.parent){if("li"===u.name){var w=u.prev;if(w&&("ul"===w.name||"ol"===w.name)){w.append(u);continue}if((w=u.next)&&("ul"===w.name||"ol"===w.name)&&w.firstChild){w.insert(u,w.firstChild,!0);continue}var S=new Tp("ul",1);n(S),u.wrap(S);continue}if(t.isValidChild(u.parent.name,"div")&&t.isValidChild("div",u.name)){var x=new Tp("div",1);n(x),u.wrap(x)}else cb(u,t)}}}},mb=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.parent;return!(!r||!e.children[t.name]||e.isValidChild(r.name,t.name))||!(!r||"a"!==t.name||!((e,t)=>{for(var r=e;r;){if(r.name===t)return!0;r=r.parent}return!1})(r,"a"))},fb=e=>{var t=es.fromRangeStart(e),r=es.fromRangeEnd(e),n=e.commonAncestorContainer;return Iu(!1,n,r).map((o=>!su(t,r,n)&&su(t,o,n)?((e,t,r,n)=>{var o=document.createRange();return o.setStart(e,t),o.setEnd(r,n),o})(t.container(),t.offset(),o.container(),o.offset()):e)).getOr(e)},gb=e=>e.collapsed?e:fb(e),pb=(e,t)=>e.getBlockElements()[t.name]&&(e=>R(e.firstChild)&&e.firstChild===e.lastChild)(t)&&(e=>"br"===e.name||e.value===Eo)(t.firstChild),vb=(e,t)=>{var r=t.firstChild,n=t.lastChild;return r&&"meta"===r.name&&(r=r.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),((e,t)=>{var r=e.getNonEmptyElements();return R(t)&&(t.isEmpty(r)||pb(e,t))})(e,n)&&(n=null==n?void 0:n.prev),!(!r||r!==n)&&("ul"===r.name||"ol"===r.name)},hb=e=>R(null==e?void 0:e.firstChild)&&e.firstChild===e.lastChild&&(e=>e.data===Eo||go(e))(e.firstChild),bb=e=>{return e.length>0&&(!(t=e[e.length-1]).firstChild||hb(t))?e.slice(0,-1):e;var t},yb=(e,t)=>{var r=e.getParent(t,e.isBlock);return r&&"LI"===r.nodeName?r:null},Cb=(e,t)=>{var r=es.after(e),n=Au(t).prev(r);return n?n.toRange():null},wb=(e,t,r)=>{var n=e.parentNode;return n&&zt.each(t,(t=>{n.insertBefore(t,e)})),((e,t)=>{var r=es.before(e),n=Au(t).next(r);return n?n.toRange():null})(e,r)},Sb=(e,t,r,n)=>{var o,a,i=((e,t,r)=>{var n=t.serialize(r);return(e=>{var t,r,n=e.firstChild,o=e.lastChild;return n&&"META"===n.nodeName&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n)),o&&"mce_marker"===o.id&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o)),e})(e.createFragment(n))})(t,e,n),l=yb(t,r.startContainer),s=bb((o=i.firstChild,oe(null!==(a=null==o?void 0:o.childNodes)&&void 0!==a?a:[],(e=>"LI"===e.nodeName)))),d=t.getRoot(),c=e=>{var n=es.fromRangeStart(r),o=Au(t.getRoot()),a=1===e?o.prev(n):o.next(n),i=null==a?void 0:a.getNode();return!i||yb(t,i)!==l};return l?c(1)?wb(l,s,d):c(2)?((e,t,r,n)=>(n.insertAfter(t.reverse(),e),Cb(t[0],r)))(l,s,d,t):((e,t,r,n)=>{var o=((e,t)=>{var r=t.cloneRange(),n=t.cloneRange();return r.setStartBefore(e),n.setEndAfter(e),[r.cloneContents(),n.cloneContents()]})(e,n),a=e.parentNode;return a&&(a.insertBefore(o[0],e),zt.each(t,(t=>{a.insertBefore(t,e)})),a.insertBefore(o[1],e),a.removeChild(e)),Cb(t[t.length-1],r)})(l,s,d,r):null},xb=["pre"],kb=bo,Eb=e=>{var t=e.dom,r=gb(e.selection.getRng());e.selection.setRng(r);var n=t.getParent(r.startContainer,kb);((e,t,r)=>!!R(r)&&r===e.getParent(t.endContainer,kb)&&Em(Er.fromDom(r),t))(t,r,n)?Hh(e,r,Er.fromDom(n)):r.startContainer===r.endContainer&&r.endOffset-r.startOffset==1&&lo(r.startContainer.childNodes[r.startOffset])?r.deleteContents():e.getDoc().execCommand("Delete",!1)},Nb=(e,t,r)=>{var n,o,a=e.selection,i=e.dom,l=e.parser,s=r.merge,d=Gp({validate:!0},e.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';r.preserve_zwsp||(t=Yo(t)),-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,c);var u=a.getRng(),m=u.startContainer,f=e.getBody();m===f&&a.isCollapsed()&&i.isBlock(f.firstChild)&&((e,t)=>R(t)&&!e.schema.getVoidElements()[t.nodeName])(e,f.firstChild)&&i.isEmpty(f.firstChild)&&((u=i.createRng()).setStart(f.firstChild,0),u.setEnd(f.firstChild,0),a.setRng(u)),a.isCollapsed()||Eb(e);var g=a.getNode(),p={context:g.nodeName.toLowerCase(),data:r.data,insert:!0},v=l.parse(t,p);if(!0===r.paste&&vb(e.schema,v)&&((e,t)=>!!yb(e,t))(i,g))return(u=Sb(d,i,a.getRng(),v))&&a.setRng(u),t;!0===r.paste&&((e,t,r,n)=>{var o,a=t.firstChild,i=t.lastChild,l=a===("bookmark"===i.attr("data-mce-type")?i.prev:i),s=J(xb,a.name);if(l&&s){var d="false"!==a.attr("contenteditable"),c=(null===(o=e.getParent(r,e.isBlock))||void 0===o?void 0:o.nodeName.toLowerCase())===a.name,u=K.from(Zh(n,r)).forall(vo);return d&&c&&u}return!1})(i,v,g,e.getBody())&&(null===(n=v.firstChild)||void 0===n||n.unwrap()),(e=>{for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")})(v);var h,b=v.lastChild;if(b&&"mce_marker"===b.attr("id")){var y=b;for(b=b.prev;b;b=b.walk(!0))if(3===b.type||!i.isBlock(b.name)){b.parent&&e.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(y,b,"br"===b.name);break}}if(e._selectionOverrides.showBlockCaretContainer(g),p.invalid){e.selection.setContent(c);var C,w=a.getNode(),S=e.getBody();for(mo(w)?w=C=S:C=w;C&&C!==S;)w=C,C=C.parentNode;t=w===S?S.innerHTML:i.getOuterHTML(w);var x=l.parse(t),k=(e=>{for(var t=e;t;t=t.walk())if("mce_marker"===t.attr("id"))return K.some(t);return K.none()})(x),E=k.bind(db).getOr(x);k.each((e=>e.replace(v)));var N=v.children(),_=null!==(o=v.parent)&&void 0!==o?o:x;v.unwrap();var T=oe(N,(t=>mb(e.schema,t,_)));ub(T,e.schema,E),ab(l.getNodeFilters(),l.getAttributeFilters(),x),t=d.serialize(x),w===S?i.setHTML(S,t):i.setOuterHTML(w,t)}else t=d.serialize(v),((e,t,r)=>{var n;if("all"===r.getAttribute("data-mce-bogus"))null===(n=r.parentNode)||void 0===n||n.insertBefore(e.dom.createFragment(t),r);else{var o=r.firstChild,a=r.lastChild;!o||o===a&&"BR"===o.nodeName?e.dom.setHTML(r,t):e.selection.setContent(t,{no_events:!0})}})(e,t,g);return((e,t)=>{var r=e.schema.getTextInlineElements(),n=e.dom;if(t){var o=e.getBody(),a=rb(e);zt.each(n.select("*[data-mce-fragment]"),(e=>{if(R(r[e.nodeName.toLowerCase()])&&Jp(n,e))for(var t=e.parentElement;R(t)&&t!==o&&!Zp(n,e,t);t=t.parentElement)if(a.compare(t,e)){n.remove(e,!0);break}}))}})(e,s),((e,t)=>{var r,n,o,a,i=e.dom,l=e.selection;if(t){l.scrollIntoView(t);var s=Zh(e.getBody(),t);if(s&&"false"===i.getContentEditable(s))return i.remove(t),void l.select(s);var d=i.createRng(),c=t.previousSibling;if(lo(c)){d.setStart(c,null!==(n=null===(r=c.nodeValue)||void 0===r?void 0:r.length)&&void 0!==n?n:0);var u=t.nextSibling;lo(u)&&(c.appendData(u.data),null===(o=u.parentNode)||void 0===o||o.removeChild(u))}else d.setStartBefore(t),d.setEndBefore(t);var m=i.getParent(t,i.isBlock);if(i.remove(t),m&&i.isEmpty(m)){var f=kb(m);Nn(Er.fromDom(m)),d.setStart(m,0),d.setEnd(m,0),f||(e=>!!e.getAttribute("data-mce-fragment"))(m)||!(a=(t=>{var r=es.fromRangeStart(t);return null==(r=Au(e.getBody()).next(r))?void 0:r.toRange()})(d))?i.add(m,i.create("br",f?{}:{"data-mce-bogus":"1"})):(d=a,i.remove(m))}l.setRng(d)}})(e,i.get("mce_marker")),h=e.getBody(),zt.each(h.getElementsByTagName("*"),(e=>{e.removeAttribute("data-mce-fragment")})),((e,t)=>{K.from(e.getParent(t,"td,th")).map(Er.fromDom).each(Vo)})(i,a.getStart()),((e,t,r)=>{var n=Mr(Er.fromDom(r),(e=>Dr(e,Er.fromDom(t))));he(n,n.length-2).filter(tr).fold((()=>Ma(e,t)),(t=>Ma(e,t.dom)))})(e.schema,e.getBody(),a.getStart()),t},_b=e=>e instanceof Tp,Tb=(e,t,r)=>{e.dom.setHTML(e.getBody(),t),!0!==r&&(e=>{sp(e)&&$u(e.getBody()).each((t=>{var r=t.getNode(),n=oo(r)?$u(r).getOr(t):t;e.selection.setRng(n.toRange())}))})(e)},Db=(e,t,r)=>K.from(e.getBody()).map((n=>_b(t)?((e,t,r,n)=>{ab(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),r);var o=Gp({validate:!1},e.schema).serialize(r),a=Yo(Uo(Er.fromDom(t))?o:zt.trim(o));return Tb(e,a,n.no_selection),{content:r,html:a}})(e,n,t,r):((e,t,r,n)=>{if(0===(r=Yo(r)).length||/^\s+$/.test(r)){var o='<br data-mce-bogus="1">';"TABLE"===t.nodeName?r="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(r="<li>"+o+"</li>");var a=Gs(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),a.toLowerCase())?(r=o,r=e.dom.createHTML(a,Ys(e),r)):r||(r=o),Tb(e,r,n.no_selection),{content:r,html:r}}"raw"!==n.format&&(r=Gp({validate:!1},e.schema).serialize(e.parser.parse(r,{isRootContent:!0,insert:!0})));var i=Uo(Er.fromDom(t))?r:zt.trim(r);return Tb(e,i,n.no_selection),{content:i,html:i}})(e,n,t,r))).getOr({content:t,html:_b(r.content)?"":r.content}),Rb=(e,t)=>((e,t)=>{var r=e.dom;return r.parentNode?on(Er.fromDom(r.parentNode),(r=>!Dr(e,r)&&t(r))):K.none()})(e,t).isSome(),Ob=e=>O(e)?e:q,Ab=(e,t,r)=>{var n=t(e),o=Ob(r);return n.orThunk((()=>o(e)?K.none():((e,t,r)=>{for(var n=e.dom,o=Ob(r);n.parentNode;){n=n.parentNode;var a=Er.fromDom(n),i=t(a);if(i.isSome())return i;if(o(a))break}return K.none()})(e,t,o)))},Bb=zm,Pb=(e,t,r)=>{var n=e.formatter.get(r);if(n)for(var o=0;o<n.length;o++){var a=n[o];if(Ym(a)&&!1===a.inherit&&e.dom.is(t,a.selector))return!0}return!1},Lb=(e,t,r,n,o)=>{var a=e.dom.getRoot();if(t===a)return!1;var i=e.dom.getParent(t,(t=>!!Pb(e,t,r)||(t.parentNode===a||!!Fb(e,t,r,n,!0))));return!!Fb(e,i,r,n,o)},Mb=(e,t,r)=>!(!Xm(r)||!Bb(t,r.inline))||(!(!Gm(r)||!Bb(t,r.block))||!!Ym(r)&&(Jn(t)&&e.is(t,r.selector))),Ib=(e,t,r,n,o,a)=>{var i=r[n],l="attributes"===n;if(O(r.onmatch))return r.onmatch(t,r,n);if(i)if(Me(i)){for(var s=0;s<i.length;s++)if(l?e.getAttrib(t,i[s]):$m(e,t,i[s]))return!0}else for(var d in i)if(Be(i,d)){var c=l?e.getAttrib(t,d):$m(e,t,d),u=Um(i[d],a),m=D(c)||at(c);if(m&&D(u))continue;if(o&&m&&!r.exact)return!1;if((!o||r.exact)&&!Bb(c,Hm(u,d)))return!1}return!0},Fb=(e,t,r,n,o)=>{var a=e.formatter.get(r),i=e.dom;if(a&&Jn(t))for(var l=0;l<a.length;l++){var s=a[l];if(Mb(e.dom,t,s)&&Ib(i,t,s,"attributes",o,n)&&Ib(i,t,s,"styles",o,n)){var d=s.classes;if(d)for(var c=0;c<d.length;c++)if(!e.dom.hasClass(t,Um(d[c],n)))return;return s}}},jb=(e,t,r,n,o)=>{if(n)return Lb(e,n,t,r,o);if(n=e.selection.getNode(),Lb(e,n,t,r,o))return!0;var a=e.selection.getStart();return!(a===n||!Lb(e,a,t,r,o))},Ub=(e,t)=>{var r=t=>Dr(t,Er.fromDom(e.getBody()));return K.from(e.selection.getStart(!0)).bind((n=>Ab(Er.fromDom(n),(r=>we(t,(t=>((t,r)=>Fb(e,t.dom,r)?K.some(r):K.none())(r,t)))),r))).getOrNull()},zb=(e,t,r)=>ie(r,((r,n)=>{var o=((e,t)=>Vm(e,t,(e=>{var t=e=>O(e)||e.length>1&&"%"===e.charAt(0);return Z(["styles","attributes"],(r=>Ae(e,r).exists((e=>{var r=E(e)?e:Oe(e);return Z(r,t)}))))})))(e,n);return e.formatter.matchNode(t,n,{},o)?r.concat([n]):r}),[]),Hb=Ko,$b=e=>(e=>{for(var t=[],r=e;r;){if(lo(r)&&r.data!==Hb||r.childNodes.length>1)return[];Jn(r)&&t.push(r),r=r.firstChild}return t})(e).length>0,Wb=e=>{if(e)for(var t=new Kn(e,e),r=t.current();r;r=t.next())if(lo(r))return r;return null},qb=e=>{var t=Er.fromTag("span");return sr(t,{id:qu,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&xn(t,Er.fromText(Hb)),t},Vb=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.dom,o=e.selection;if($b(t))sh(e,!1,Er.fromDom(t),r);else{var a=o.getRng(),i=n.getParent(t,n.isBlock),l=a.startContainer,s=a.startOffset,d=a.endContainer,c=a.endOffset,u=(e=>{var t=Wb(e);return t&&t.data.charAt(0)===Hb&&t.deleteData(0,1),t})(t);n.remove(t,!0),l===u&&s>0&&a.setStart(u,s-1),d===u&&c>0&&a.setEnd(u,c-1),i&&n.isEmpty(i)&&qo(Er.fromDom(i)),o.setRng(a)}},Kb=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.dom,o=e.selection;if(t)Vb(e,t,r);else if(!(t=Ku(e.getBody(),o.getStart())))for(;t=n.get(qu);)Vb(e,t,r)},Gb=(e,t)=>(e.appendChild(t),t),Yb=(e,t)=>{var r,n=ae(e,((e,t)=>Gb(e,t.cloneNode(!1))),t),o=null!==(r=n.ownerDocument)&&void 0!==r?r:document;return Gb(n,o.createTextNode(Hb))},Xb=(e,t,r,n)=>{var o=e.dom,a=e.selection,i=!1,l=e.formatter.get(t);if(l){var s=a.getRng(),d=s.startContainer,c=s.startOffset,u=d;lo(d)&&(c!==d.data.length&&(i=!0),u=u.parentNode);for(var m,f=[];u;){if(Fb(e,u,t,r,n)){m=u;break}u.nextSibling&&(i=!0),f.push(u),u=u.parentNode}if(m)if(i){var g=a.getBookmark();s.collapse(!0);var p=ff(o,s,l,!0);p=mg(p),e.formatter.remove(t,r,p,n),a.moveToBookmark(g)}else{var v=Ku(e.getBody(),m),h=qb(!1).dom;((e,t,r)=>{var n,o,a=e.dom,i=a.getParent(r,U(Mm,e.schema));i&&a.isEmpty(i)?null===(n=r.parentNode)||void 0===n||n.replaceChild(t,r):($o(Er.fromDom(r)),a.isEmpty(r)?null===(o=r.parentNode)||void 0===o||o.replaceChild(t,r):a.insertAfter(t,r))})(e,h,null!=v?v:m);var b=((e,t,r,n,o,a)=>{var i=e.formatter,l=e.dom,s=oe(Se(i.get()),(e=>e!==n&&!Qe(e,"removeformat"))),d=zb(e,r,s);if(oe(d,(t=>!Km(e,t,n))).length>0){var c=r.cloneNode(!1);return l.add(t,c),i.remove(n,o,c,a),l.remove(c),K.some(c)}return K.none()})(e,h,m,t,r,n),y=Yb(f.concat(b.toArray()),h);v&&Vb(e,v,!1),a.setCursorLocation(y,1),o.isEmpty(m)&&o.remove(m)}}},Qb=e=>{e.on("mouseup keydown",(t=>{var r;((e,t,r)=>{var n=e.selection,o=e.getBody();Kb(e,null,r),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==Hb||Kb(e,Ku(o,n.getStart())),37!==t&&39!==t||Kb(e,Ku(o,n.getStart()))})(e,t.keyCode,(r=e.selection.getRng().endContainer,lo(r)&&Ze(r.data,Eo)))}))},Jb=e=>{var t=qb(!1),r=Yb(e,t.dom);return{caretContainer:t,caretPosition:es(r,0)}},Zb=(e,t)=>{var r=Jb(t),n=r.caretContainer,o=r.caretPosition;return Cn(Er.fromDom(e),n),_n(Er.fromDom(e)),o},ey=(e,t)=>{var r=e.schema.getTextInlineElements();return Be(r,Qt(t))&&!Vu(t.dom)&&!no(t.dom)},ty=e=>Vu(e.dom)&&$b(e.dom),ry={},ny=eo(["pre"]);((e,t)=>{ry[e]||(ry[e]=[]),ry[e].push(t)})("pre",(e=>{var t=e.selection.getRng();if(!t.collapsed){var r=e.selection.getSelectedBlocks(),n=oe(oe(r,ny),(e=>t=>{var r=t.previousSibling;return ny(r)&&J(e,r)})(r));te(n,(e=>{var t,r,n,o;t=e.previousSibling,r=e,n=Er.fromDom(r),o=Ar(n).dom,_n(n),En(Er.fromDom(t),[Er.fromTag("br",o),Er.fromTag("br",o),...zr(n)])}))}}));var oy=["fontWeight","fontStyle","color","fontSize","fontFamily"],ay=e=>se(e,(e=>Xm(e)&&"span"===e.inline&&(e=>x(e.styles)&&Z(Se(e.styles),(e=>J(oy,e))))(e))),iy=(e,t)=>{var r=e.get(t);return E(r)?ay(r):K.none()},ly=(e,t)=>Hu(t,es.fromRangeStart(e)).isNone(),sy=(e,t)=>!1===zu(t,es.fromRangeEnd(e)).exists((e=>!go(e.getNode())||zu(t,e).isSome())),dy=e=>t=>wo(t)&&e.isEditable(t),cy=e=>oe((e=>{var t=e.getSelectedBlocks(),r=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return ly(r,t[0])&&sy(r,t[0])?t:[];var n=be(t).filter((e=>ly(r,e))).toArray(),o=ye(t).filter((e=>sy(r,e))).toArray(),a=t.slice(1,-1);return n.concat(a).concat(o)})(e),dy(e.dom)),uy=e=>oe(e.getSelectedBlocks(),dy(e.dom)),my=zt.each,fy=e=>Jn(e)&&!im(e)&&!Vu(e)&&!no(e),gy=(e,t)=>{for(var r=e;r;r=r[t]){if(lo(r)&&ot(r.data))return e;if(Jn(r)&&!im(r))return r}return e},py=(e,t,r)=>{var n=rb(e),o=Jn(t)&&Am(t),a=Jn(r)&&Am(r);if(o&&a){var i=gy(t,"previousSibling"),l=gy(r,"nextSibling");if(n.compare(i,l)){for(var s=i.nextSibling;s&&s!==l;){var d=s;s=s.nextSibling,i.appendChild(d)}return e.dom.remove(l),zt.each(zt.grep(l.childNodes),(e=>{i.appendChild(e)})),i}}return r},vy=(e,t,r,n)=>{var o;if(n&&!1!==t.merge_siblings){var a=null!==(o=py(e,Lm(n),n))&&void 0!==o?o:n;py(e,a,Lm(a,!0))}},hy=(e,t,r)=>{my(e.childNodes,(e=>{fy(e)&&(t(e)&&r(e),e.hasChildNodes()&&hy(e,t,r))}))},by=(e,t)=>r=>!(!r||!$m(e,r,t)),yy=(e,t,r)=>n=>{e.setStyle(n,t,r),""===n.getAttribute("style")&&n.removeAttribute("style"),((e,t)=>{"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)})(e,n)},Cy=Ns([{keep:[]},{rename:["name"]},{removed:[]}]),wy=/^(src|href|style)$/,Sy=zt.each,xy=zm,ky=(e,t,r)=>e.isChildOf(t,r)&&t!==r&&!e.isBlock(r),Ey=(e,t,r)=>{var n=t[r?"startContainer":"endContainer"],o=t[r?"startOffset":"endOffset"];if(Jn(n)){var a=n.childNodes.length-1;!r&&o&&o--,n=n.childNodes[o>a?a:o]}return lo(n)&&r&&o>=n.data.length&&(n=new Kn(n,e.getBody()).next()||n),lo(n)&&!r&&0===o&&(n=new Kn(n,e.getBody()).prev()||n),n},Ny=(e,t)=>{var r=t?"firstChild":"lastChild",n=e[r];return(e=>/^(TR|TH|TD)$/.test(e.nodeName))(e)&&n?"TR"===e.nodeName&&n[r]||n:e},_y=(e,t,r,n)=>{var o,a=e.create(r,n);return null===(o=t.parentNode)||void 0===o||o.insertBefore(a,t),a.appendChild(t),a},Ty=(e,t,r,n,o)=>{var a=Er.fromDom(t),i=Er.fromDom(e.create(n,o)),l=r?Ur(a):jr(a);return En(i,l),r?(Cn(a,i),Sn(i,a)):(wn(a,i),xn(i,a)),i.dom},Dy=(e,t,r)=>{var n,o=t.parentNode,a=e.dom,i=Gs(e);Gm(r)&&o===a.getRoot()&&(r.list_block&&xy(t,r.list_block)||te(Ce(t.childNodes),(t=>{Im(e,i,t.nodeName.toLowerCase())?n?n.appendChild(t):(n=_y(a,t,i),a.setAttribs(n,Ys(e))):n=null}))),(e=>Ym(e)&&Xm(e)&&Ht(Ae(e,"mixed"),!0))(r)&&!xy(r.inline,t)||a.remove(t,!0)},Ry=(e,t,r)=>A(e)?{name:t,value:null}:{name:e,value:Um(t,r)},Oy=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},Ay=(e,t,r,n,o)=>{var a=!1;Sy(r.styles,((i,l)=>{var s=Ry(l,i,n),d=s.name,c=s.value,u=Hm(c,d);(r.remove_similar||N(c)||!Jn(o)||xy($m(e,o,d),u))&&e.setStyle(t,d,""),a=!0})),a&&Oy(e,t)},By=(e,t,r,n,o)=>{var a=e.dom,i=rb(e),l=e.schema;if(Xm(t)&&ja(l,t.inline)&&za(l,n)&&n.parentElement===e.getBody())return Dy(e,n,t),Cy.removed();if(!t.ceFalseOverride&&n&&"false"===a.getContentEditableParent(n))return Cy.keep();if(n&&!Mb(a,n,t)&&!((e,t)=>t.links&&"A"===e.nodeName)(n,t))return Cy.keep();var s=n,d=t.preserve_attributes;if(Xm(t)&&"all"===t.remove&&E(d)){var c=oe(a.getAttribs(s),(e=>J(d,e.name.toLowerCase())));if(a.removeAllAttribs(s),te(c,(e=>a.setAttrib(s,e.name,e.value))),c.length>0)return Cy.rename("span")}if("all"!==t.remove){Ay(a,s,t,r,o),Sy(t.attributes,((e,n)=>{var i=Ry(n,e,r),l=i.name,d=i.value;if(t.remove_similar||N(d)||!Jn(o)||xy(a.getAttrib(o,l),d)){if("class"===l){var c=a.getAttrib(s,l);if(c){var u="";if(te(c.split(/\s+/),(e=>{/mce\-\w+/.test(e)&&(u+=(u?" ":"")+e)})),u)return void a.setAttrib(s,l,u)}}if(wy.test(l)&&s.removeAttribute("data-mce-"+l),"style"===l&&eo(["li"])(s)&&"none"===a.getStyle(s,"list-style-type"))return s.removeAttribute(l),void a.setStyle(s,"list-style-type","none");"class"===l&&s.removeAttribute("className"),s.removeAttribute(l)}})),Sy(t.classes,(e=>{e=Um(e,r),Jn(o)&&!a.hasClass(o,e)||a.removeClass(s,e)}));for(var u=a.getAttribs(s),m=0;m<u.length;m++){var f=u[m].nodeName;if(!i.isAttributeInternal(f))return Cy.keep()}}return"none"!==t.remove?(Dy(e,s,t),Cy.removed()):Cy.keep()},Py=(e,t,r,n)=>By(e,t,r,n,n).fold(I(n),(t=>(e.dom.createFragment().appendChild(n),e.dom.rename(n,t))),I(null)),Ly=(e,t,r,n,o)=>{var a=e.formatter.get(t),i=a[0],l=e.dom,s=e.selection,d=n=>{var l=((e,t,r,n,o)=>{var a;return t.parentNode&&te(qm(e.dom,t.parentNode).reverse(),(t=>{if(!a&&Jn(t)&&"_start"!==t.id&&"_end"!==t.id){var i=Fb(e,t,r,n,o);i&&!1!==i.split&&(a=t)}})),a})(e,n,t,r,o);return((e,t,r,n,o,a,i,l)=>{var s,d,c,u,m=e.dom;if(r){for(var f=r.parentNode,g=n.parentNode;g&&g!==f;g=g.parentNode){for(var p=m.clone(g,!1),v=0;v<t.length&&null!==(p=Py(e,t[v],l,p));v++);p&&(c&&p.appendChild(c),u||(u=p),c=p)}!a||i.mixed&&m.isBlock(r)||(n=null!==(s=m.split(r,n))&&void 0!==s?s:n),c&&u&&(null===(d=o.parentNode)||void 0===d||d.insertBefore(c,o),u.appendChild(o),Xm(i)&&vy(e,i,0,c))}return n})(e,a,l,n,n,!0,i,r)},c=t=>Z(a,(n=>Iy(e,n,r,t,t))),u=t=>{var r=Ce(t.childNodes),n=c(t)||Z(a,(e=>Mb(l,t,e))),o=t.parentNode;if(!n&&R(o)&&Qm(i)&&c(o),i.deep&&r.length)for(var s=0;s<r.length;s++)u(r[s]);te(["underline","line-through","overline"],(r=>{Jn(t)&&e.dom.getStyle(t,"text-decoration")===r&&t.parentNode&&Wm(l,t.parentNode)===r&&Iy(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:r}},void 0,t)}))},m=e=>{var t=l.get(e?"_start":"_end");if(t){var r=t[e?"firstChild":"lastChild"];return(e=>im(e)&&Jn(e)&&("_start"===e.id||"_end"===e.id))(r)&&(r=r[e?"firstChild":"lastChild"]),lo(r)&&0===r.data.length&&(r=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),l.remove(t,!0),r}return null},f=t=>{var r,n,o=ff(l,t,a,t.collapsed);if(i.split){if(o=mg(o),(r=Ey(e,o,!0))!==(n=Ey(e,o))){if(r=Ny(r,!0),n=Ny(n,!1),ky(l,r,n)){var s=K.from(r.firstChild).getOr(r);return d(Ty(l,s,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void m(!0)}if(ky(l,n,r)){var c=K.from(n.lastChild).getOr(n);return d(Ty(l,c,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void m(!1)}r=_y(l,r,"span",{id:"_start","data-mce-type":"bookmark"}),n=_y(l,n,"span",{id:"_end","data-mce-type":"bookmark"});var f=l.createRng();f.setStartAfter(r),f.setEndBefore(n),gf(l,f,(e=>{te(e,(e=>{im(e)||im(e.parentNode)||d(e)}))})),d(r),d(n),r=m(!0),n=m()}else r=n=d(r);o.startContainer=r.parentNode?r.parentNode:r,o.startOffset=l.nodeIndex(r),o.endContainer=n.parentNode?n.parentNode:n,o.endOffset=l.nodeIndex(n)+1}gf(l,o,(e=>{te(e,u)}))};if(n){if(Rm(n)){var g=l.createRng();g.setStartBefore(n),g.setEndAfter(n),f(g)}else f(n);_f(e,t,n,r)}else s.isCollapsed()&&Xm(i)&&!wm(e).length?Xb(e,t,r,o):(Bm(e,(()=>Tm(e,f)),(n=>Xm(i)&&jb(e,t,r,n))),e.nodeChanged()),((e,t,r)=>{"removeformat"===t?te(uy(e.selection),(t=>{te(oy,(r=>e.dom.setStyle(t,r,""))),Oy(e.dom,t)})):iy(e.formatter,t).each((t=>{te(uy(e.selection),(n=>Ay(e.dom,n,t,r,null)))}))})(e,t,r),_f(e,t,n,r)},My=(e,t,r,n,o)=>{(n||e.selection.isEditable())&&Ly(e,t,r,n,o)},Iy=(e,t,r,n,o)=>By(e,t,r,n,o).fold(q,(t=>(e.dom.rename(n,t),!0)),V),Fy=zt.each,jy=(e,t,r,n)=>{Fy(t,(t=>{Xm(t)&&Fy(e.dom.select(t.inline,n),(n=>{fy(n)&&Iy(e,t,r,n,t.exact?n:null)})),((e,t,r)=>{if(t.clear_child_styles){var n=t.links?"*:not(a)":"*";my(e.select(n,r),(r=>{fy(r)&&Am(r)&&my(t.styles,((t,n)=>{e.setStyle(r,n,"")}))}))}})(e.dom,t,n)}))},Uy=zt.each,zy=(e,t,r,n)=>{if(Uy(r.styles,((r,o)=>{e.setStyle(t,o,Um(r,n))})),r.styles){var o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},Hy=(e,t,r,n)=>{var o=e.formatter.get(t),a=o[0],i=!n&&e.selection.isCollapsed(),l=e.dom,s=e.selection,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;O(t.onformat)&&t.onformat(e,t,r,n),zy(l,e,t,r),Uy(t.attributes,((t,n)=>{l.setAttrib(e,n,Um(t,r))})),Uy(t.classes,(t=>{var n=Um(t,r);l.hasClass(e,n)||l.addClass(e,n)}))},c=(e,t)=>{var r=!1;return Uy(e,(e=>!!Ym(e)&&("false"===l.getContentEditable(t)&&!e.ceFalseOverride||(!(!R(e.collapsed)||e.collapsed===i)||(!(l.is(t,e.selector)&&!Vu(t))||(d(t,e),r=!0,!1)))))),r},u=e=>{if(S(e)){var t=l.create(e);return d(t),t}return null},m=(n,i,l)=>{var s=[],m=!0,f=a.inline||a.block,g=u(f),p=n=>(e=>Gm(e)&&!0===e.wrapper)(a)&&Fb(e,n,t,r),v=(t,r,n)=>{var o=(e=>Gm(e)&&!0!==e.wrapper)(a)&&Mm(e.schema,t)&&Im(e,r,f);return n&&o};gf(n,i,(t=>{var r,i=t=>{var u=!1,h=m,b=!1,y=t.parentNode,C=y.nodeName.toLowerCase(),w=n.getContentEditable(t);R(w)&&(h=m,m="true"===w,u=!0,b=jm(e,t));var S=m&&!u;if(go(t)&&!((e,t,r,n)=>{if(Bd(e)&&Xm(t)&&r.parentNode){var o=xi(e.schema),a=Rb(Er.fromDom(r),(e=>Vu(e.dom)));return Pe(o,n)&&Da(Er.fromDom(r.parentNode),!1)&&!a}return!1})(e,a,t,C))return r=null,void(Gm(a)&&n.remove(t));if(p(t))r=null;else{if(v(t,C,S)){var x=n.rename(t,f);return d(x),s.push(x),void(r=null)}if(Ym(a)){var k=c(o,t);if(!k&&R(y)&&Qm(a)&&(k=c(o,y)),!Xm(a)||k)return void(r=null)}R(g)&&((t,r,o,i)=>{var s=t.nodeName.toLowerCase(),d=Im(e,f,s)&&Im(e,r,f),c=!l&&lo(t)&&Go(t.data),u=Vu(t),m=!Xm(a)||!n.isBlock(t);return(o||i)&&d&&!c&&!u&&m})(t,C,S,b)?(r||(r=n.clone(g,!1),y.insertBefore(r,t),s.push(r)),b&&u&&(m=h),r.appendChild(t)):(r=null,te(Ce(t.childNodes),i),u&&(m=h),r=null)}};te(t,i)})),!0===a.links&&te(s,(e=>{var t=e=>{"A"===e.nodeName&&d(e,a),te(Ce(e.childNodes),t)};t(e)})),te(s,(i=>{var l=(e=>{var t=0;return te(e.childNodes,(e=>{(e=>R(e)&&lo(e)&&0===e.length)(e)||im(e)||t++})),t})(i);!(s.length>1)&&n.isBlock(i)||0!==l?(Xm(a)||Gm(a)&&a.wrapper)&&(a.exact||1!==l||(i=(e=>{var t=se(e.childNodes,Om).filter((e=>"false"!==n.getContentEditable(e)&&Mb(n,e,a)));return t.map((t=>{var r=n.clone(t,!1);return d(r),n.replace(r,e,!0),n.remove(t,!0),r})).getOr(e)})(i)),jy(e,o,r,i),((e,t,r,n,o)=>{var a=o.parentNode;Fb(e,a,r,n)&&Iy(e,t,n,o)||t.merge_with_parents&&a&&e.dom.getParent(a,(a=>!!Fb(e,a,r,n)&&(Iy(e,t,n,o),!0)))})(e,a,t,r,i),((e,t,r,n)=>{if(t.styles&&t.styles.backgroundColor){var o=by(e,"fontSize");hy(n,(e=>o(e)&&Am(e)),yy(e,"backgroundColor",Um(t.styles.backgroundColor,r)))}})(n,a,r,i),((e,t,r,n)=>{var o=t=>{if(Jn(t)&&Jn(t.parentNode)&&Am(t)){var r=Wm(e,t.parentNode);e.getStyle(t,"color")&&r?e.setStyle(t,"text-decoration",r):e.getStyle(t,"text-decoration")===r&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(zt.walk(n,o,"childNodes"),o(n))})(n,a,0,i),((e,t,r,n)=>{if(Xm(t)&&("sub"===t.inline||"sup"===t.inline)){var o=by(e,"fontSize");hy(n,(e=>o(e)&&Am(e)),yy(e,"fontSize",""));var a=oe(e.select("sup"===t.inline?"sub":"sup",n),Am);e.remove(a,!0)}})(n,a,0,i),vy(e,a,0,i)):n.remove(i,!0)}))},f=Rm(n)?n:s.getNode();if("false"===l.getContentEditable(f)&&!jm(e,f))return c(o,n=f),void Nf(e,t,n,r);if(a){if(n)if(Rm(n)){if(!c(o,n)){var g=l.createRng();g.setStartBefore(n),g.setEndAfter(n),m(l,ff(l,g,o),!0)}}else m(l,n,!0);else i&&Xm(a)&&!wm(e).length?((e,t,r)=>{var n,o=e.selection,a=e.formatter.get(t);if(a){var i=o.getRng(),l=i.startOffset,s=i.startContainer.nodeValue;n=Ku(e.getBody(),o.getStart());var d,c,u=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(s&&l>0&&l<s.length&&u.test(s.charAt(l))&&u.test(s.charAt(l-1))){var m=o.getBookmark();i.collapse(!0);var f=ff(e.dom,i,a);f=mg(f),e.formatter.apply(t,r,f),o.moveToBookmark(m)}else{var g=n?Wb(n):null;n&&(null==g?void 0:g.data)===Hb||(d=e.getDoc(),c=qb(!0).dom,g=(n=d.importNode(c,!0)).firstChild,i.insertNode(n),l=1),e.formatter.apply(t,r,n),o.setCursorLocation(g,l)}}})(e,t,r):(s.setRng(gb(s.getRng())),Bm(e,(()=>{Tm(e,((e,t)=>{var r=t?e:ff(l,e,o);m(l,r,!1)}))}),V),e.nodeChanged()),iy(e.formatter,t).each((t=>{te(cy(e.selection),(e=>zy(l,e,t,r)))}));((e,t)=>{Be(ry,e)&&te(ry[e],(e=>{e(t)}))})(t,e)}Nf(e,t,n,r)},$y=(e,t,r,n)=>{(n||e.selection.isEditable())&&Hy(e,t,r,n)},Wy=e=>Be(e,"vars"),qy=e=>e.selection.getStart(),Vy=(e,t,r,n,o)=>le(t,(t=>{var a=e.formatter.matchNode(t,r,null!=o?o:{},n);return!T(a)}),(t=>!!Pb(e,t,r)||!n&&R(e.formatter.matchNode(t,r,o,!0)))),Ky=(e,t)=>{var r=null!=t?t:qy(e);return oe(qm(e.dom,r),(e=>Jn(e)&&!no(e)))},Gy=(e,t,r)=>{var n=Ky(e,t);ke(r,((r,o)=>{var a=r=>{var a=Vy(e,n,o,r.similar,Wy(r)?r.vars:void 0),i=a.isSome();if(r.state.get()!==i){r.state.set(i);var l=a.getOr(t);Wy(r)?r.callback(i,{node:l,format:o,parents:n}):te(r.callbacks,(e=>e(i,{node:l,format:o,parents:n})))}};te([r.withSimilar,r.withoutSimilar],a),te(r.withVars,a)}))},Yy=(e,t,r,n,o,a)=>(((e,t,r,n,o,a)=>{var i=t.get();te(r.split(","),(t=>{var r=Ae(i,t).getOrThunk((()=>{var e={withSimilar:{state:Yi(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Yi(!1),similar:!1,callbacks:[]},withVars:[]};return i[t]=e,e})),l=()=>{var r=Ky(e);return Vy(e,r,t,o,a).isSome()};if(T(a)){var s=o?r.withSimilar:r.withoutSimilar;s.callbacks.push(n),1===s.callbacks.length&&s.state.set(l())}else r.withVars.push({state:Yi(l()),similar:o,vars:a,callback:n})})),t.set(i)})(e,t,r,n,o,a),{unbind:()=>((e,t,r)=>{var n=e.get();te(t.split(","),(e=>Ae(n,e).each((t=>{n[e]={withSimilar:d(d({},t.withSimilar),{},{callbacks:oe(t.withSimilar.callbacks,(e=>e!==r))}),withoutSimilar:d(d({},t.withoutSimilar),{},{callbacks:oe(t.withoutSimilar.callbacks,(e=>e!==r))}),withVars:oe(t.withVars,(e=>e.callback!==r))}})))),e.set(n)})(t,r,n)}),Xy=zt.explode,Qy=()=>{var e={};return{addFilter:(t,r)=>{te(Xy(t),(t=>{Be(e,t)||(e[t]={name:t,callbacks:[]}),e[t].callbacks.push(r)}))},getFilters:()=>Oe(e),removeFilter:(t,r)=>{te(Xy(t),(t=>{if(Be(e,t))if(R(r)){var n=e[t],o=oe(n.callbacks,(e=>e!==r));o.length>0?n.callbacks=o:delete e[t]}else delete e[t]}))}}},Jy=(e,t,r)=>{e.addNodeFilter("font",(e=>{te(e,(e=>{var n=t.parse(e.attr("style")),o=e.attr("color"),a=e.attr("face"),i=e.attr("size");o&&(n.color=o),a&&(n["font-family"]=a),i&&it(i).each((e=>{n["font-size"]=r[e-1]})),e.name="span",e.attr("style",t.serialize(n)),((e,t)=>{te(t,(t=>{e.attr(t,null)}))})(e,["color","face","size"])}))}))},Zy=(e,t,r)=>{var n,o=Ni();t.convert_fonts_to_spans&&Jy(e,o,zt.explode(null!==(n=t.font_size_legacy_values)&&void 0!==n?n:"")),((e,t,r)=>{e.addNodeFilter("strike",(e=>{var n="html4"!==t.type;te(e,(e=>{if(n)e.name="s";else{var t=r.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",r.serialize(t))}}))}))})(e,r,o)},eC=(e,t,r)=>{t.addNodeFilter("br",((t,n,o)=>{var a=zt.extend({},r.getBlockElements()),i=r.getNonEmptyElements(),l=r.getWhitespaceElements();a.body=1;for(var s=(e=>e.name in a||$a(r,e)),d=0,c=t.length;d<c;d++){var u=t[d],m=u.parent;if(m&&s(m)&&u===m.lastChild){for(var f=u.prev;f;){var g=f.name;if("span"!==g||"bookmark"!==f.attr("data-mce-type")){"br"===g&&(u=null);break}f=f.prev}if(u&&(u.remove(),sb(r,i,l,m))){var p=r.getElementRule(m.name);p&&(p.removeEmpty?m.remove():p.paddEmpty&&ib(e,o,s,m))}}else{for(var v=u;m&&m.firstChild===v&&m.lastChild===v&&(v=m,!a[m.name]);)m=m.parent;if(v===m){var h=new Tp("#text",3);h.value=Eo,u.replace(h)}}}}))},tC=e=>{var t=i(e.split(",")),r=t[0],n=t.slice(1).join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(r);if(o){var a=";base64"===o[2],l=a?(e=>{var t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""})(n):decodeURIComponent(n);return K.some({type:o[1],data:l,base64Encoded:a})}return K.none()},rC=function(e,t){var r=t;if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])try{r=atob(t)}catch(e){return K.none()}for(var n=new Uint8Array(r.length),o=0;o<n.length;o++)n[o]=r.charCodeAt(o);return K.some(new Blob([n],{type:e}))},nC=e=>{return Je(e,"blob:")?(e=>fetch(e).then((e=>e.ok?e.blob():Promise.reject())).catch((()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))))(e):Je(e,"data:")?(t=e,new Promise(((e,r)=>{tC(t).bind((e=>{var t=e.type,r=e.data,n=e.base64Encoded;return rC(t,r,n)})).fold((()=>r("Invalid data URI")),e)}))):Promise.reject("Unknown URI format");var t},oC=e=>new Promise(((t,r)=>{var n=new FileReader;n.onloadend=()=>{t(n.result)},n.onerror=()=>{var e;r(null===(e=n.error)||void 0===e?void 0:e.message)},n.readAsDataURL(e)})),aC=0,iC=(e,t,r)=>tC(e).bind((e=>{var n=e.data,o=e.type,a=e.base64Encoded;if(t&&!a)return K.none();var i=a?n:btoa(n);return r(i,o)})),lC=(e,t,r)=>{var n,o=e.create((n||"blobid")+aC++,t,r);return e.add(o),o},sC=function(e,t){return iC(t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],((t,r)=>K.from(e.getByData(t,r)).orThunk((()=>rC(r,t).map((r=>lC(e,r,t)))))))},dC=(e,t)=>{var r=t.blob_cache;if(r){var n=e=>{var t=e.attr("src");(e=>e.attr("src")===Ft.transparentSrc||R(e.attr("data-mce-placeholder")))(e)||(e=>R(e.attr("data-mce-bogus")))(e)||D(t)||sC(r,t,!0).each((t=>{e.attr("src",t.blobUri())}))};e.addAttributeFilter("src",(e=>te(e,n)))}},cC=(e,t)=>{var r=e.schema;t.remove_trailing_brs&&eC(t,e,r),e.addAttributeFilter("href",(e=>{var r,n,o=e.length;if(!t.allow_unsafe_link_target)for(;o--;){var a=e[o];"a"===a.name&&"_blank"===a.attr("target")&&a.attr("rel",(r=a.attr("rel"),n=void 0,n=r?zt.trim(r):"",/\b(noopener)\b/g.test(n)?n:(e=>e.split(" ").filter((e=>e.length>0)).concat(["noopener"]).sort().join(" "))(n)))}})),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",(e=>{for(var t,r,n,o,a=e.length;a--;)if("a"===(o=e[a]).name&&o.firstChild&&!o.attr("href"))for(n=o.parent,t=o.lastChild;t&&n;)r=t.prev,n.insert(t,o),t=r})),t.fix_list_elements&&e.addNodeFilter("ul,ol",(e=>{for(var t,r,n=e.length;n--;)if((r=(t=e[n]).parent)&&("ul"===r.name||"ol"===r.name))if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var o=new Tp("li",1);o.attr("style","list-style-type: none"),t.wrap(o)}}));var n=r.getValidClasses();t.validate&&n&&e.addAttributeFilter("class",(e=>{for(var t,r=e.length;r--;){for(var o=e[r],a=null!==(t=o.attr("class"))&&void 0!==t?t:"",i=zt.explode(a," "),l="",s=0;s<i.length;s++){var d=i[s],c=!1,u=n["*"];u&&u[d]&&(c=!0),u=n[o.name],!c&&u&&u[d]&&(c=!0),c&&(l&&(l+=" "),l+=d)}l.length||(l=null),o.attr("class",l)}})),dC(e,t)};function uC(e){return uC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uC(e)}function mC(e,t){return mC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mC(e,t)}function fC(e,t,r){return fC=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&mC(o,r.prototype),o},fC.apply(null,arguments)}function gC(e){return function(e){if(Array.isArray(e))return pC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return pC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pC(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vC=Object.hasOwnProperty,hC=Object.setPrototypeOf,bC=Object.isFrozen,yC=Object.getPrototypeOf,CC=Object.getOwnPropertyDescriptor,wC=Object.freeze,SC=Object.seal,xC=Object.create,kC="undefined"!=typeof Reflect&&Reflect,EC=kC.apply,NC=kC.construct;EC||(EC=function(e,t,r){return e.apply(t,r)}),wC||(wC=function(e){return e}),SC||(SC=function(e){return e}),NC||(NC=function(e,t){return fC(e,gC(t))});var _C,TC=jC(Array.prototype.forEach),DC=jC(Array.prototype.pop),RC=jC(Array.prototype.push),OC=jC(String.prototype.toLowerCase),AC=jC(String.prototype.toString),BC=jC(String.prototype.match),PC=jC(String.prototype.replace),LC=jC(String.prototype.indexOf),MC=jC(String.prototype.trim),IC=jC(RegExp.prototype.test),FC=(_C=TypeError,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return NC(_C,t)});function jC(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return EC(e,t,n)}}function UC(e,t,r){r=r||OC,hC&&hC(e,null);for(var n=t.length;n--;){var o=t[n];if("string"==typeof o){var a=r(o);a!==o&&(bC(t)||(t[n]=a),o=a)}e[o]=!0}return e}function zC(e){var t,r=xC(null);for(t in e)!0===EC(vC,e,[t])&&(r[t]=e[t]);return r}function HC(e,t){for(;null!==e;){var r=CC(e,t);if(r){if(r.get)return jC(r.get);if("function"==typeof r.value)return jC(r.value)}e=yC(e)}return function(e){return console.warn("fallback value for",e),null}}var $C=wC(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),WC=wC(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),qC=wC(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),VC=wC(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),KC=wC(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),GC=wC(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),YC=wC(["#text"]),XC=wC(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),QC=wC(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),JC=wC(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ZC=wC(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ew=SC(/\{\{[\w\W]*|[\w\W]*\}\}/gm),tw=SC(/<%[\w\W]*|[\w\W]*%>/gm),rw=SC(/\${[\w\W]*}/gm),nw=SC(/^data-[\-\w.\u00B7-\uFFFF]/),ow=SC(/^aria-[\-\w]+$/),aw=SC(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),iw=SC(/^(?:\w+script|data):/i),lw=SC(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),sw=SC(/^html$/i),dw=function(){return"undefined"==typeof window?null:window};var cw=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dw(),r=function(t){return e(t)};if(r.version="2.4.4",r.removed=[],!t||!t.document||9!==t.document.nodeType)return r.isSupported=!1,r;var n=t.document,o=t.document,a=t.DocumentFragment,i=t.HTMLTemplateElement,l=t.Node,s=t.Element,d=t.NodeFilter,c=t.NamedNodeMap,u=void 0===c?t.NamedNodeMap||t.MozNamedAttrMap:c,m=t.HTMLFormElement,f=t.DOMParser,g=t.trustedTypes,p=s.prototype,v=HC(p,"cloneNode"),h=HC(p,"nextSibling"),b=HC(p,"childNodes"),y=HC(p,"parentNode");if("function"==typeof i){var C=o.createElement("template");C.content&&C.content.ownerDocument&&(o=C.content.ownerDocument)}var w=function(e,t){if("object"!==uC(e)||"function"!=typeof e.createPolicy)return null;var r=null,n="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(n)&&(r=t.currentScript.getAttribute(n));var o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(g,n),S=w?w.createHTML(""):"",x=o,k=x.implementation,E=x.createNodeIterator,N=x.createDocumentFragment,_=x.getElementsByTagName,T=n.importNode,D={};try{D=zC(o).documentMode?o.documentMode:{}}catch(e){}var R={};r.isSupported="function"==typeof y&&k&&void 0!==k.createHTMLDocument&&9!==D;var O,A,B=ew,P=tw,L=rw,M=nw,I=ow,F=iw,j=lw,U=aw,z=null,H=UC({},[].concat(gC($C),gC(WC),gC(qC),gC(KC),gC(YC))),$=null,W=UC({},[].concat(gC(XC),gC(QC),gC(JC),gC(ZC))),q=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),V=null,K=null,G=!0,Y=!0,X=!1,Q=!0,J=!1,Z=!1,ee=!1,te=!1,re=!1,ne=!1,oe=!1,ae=!0,ie=!1,le=!0,se=!1,de={},ce=null,ue=UC({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),me=null,fe=UC({},["audio","video","img","source","image","track"]),ge=null,pe=UC({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ve="http://www.w3.org/1998/Math/MathML",he="http://www.w3.org/2000/svg",be="http://www.w3.org/1999/xhtml",ye=be,Ce=!1,we=null,Se=UC({},[ve,he,be],AC),xe=["application/xhtml+xml","text/html"],ke=null,Ee=o.createElement("form"),Ne=function(e){return e instanceof RegExp||e instanceof Function},_e=function(e){ke&&ke===e||(e&&"object"===uC(e)||(e={}),e=zC(e),O=O=-1===xe.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,A="application/xhtml+xml"===O?AC:OC,z="ALLOWED_TAGS"in e?UC({},e.ALLOWED_TAGS,A):H,$="ALLOWED_ATTR"in e?UC({},e.ALLOWED_ATTR,A):W,we="ALLOWED_NAMESPACES"in e?UC({},e.ALLOWED_NAMESPACES,AC):Se,ge="ADD_URI_SAFE_ATTR"in e?UC(zC(pe),e.ADD_URI_SAFE_ATTR,A):pe,me="ADD_DATA_URI_TAGS"in e?UC(zC(fe),e.ADD_DATA_URI_TAGS,A):fe,ce="FORBID_CONTENTS"in e?UC({},e.FORBID_CONTENTS,A):ue,V="FORBID_TAGS"in e?UC({},e.FORBID_TAGS,A):{},K="FORBID_ATTR"in e?UC({},e.FORBID_ATTR,A):{},de="USE_PROFILES"in e&&e.USE_PROFILES,G=!1!==e.ALLOW_ARIA_ATTR,Y=!1!==e.ALLOW_DATA_ATTR,X=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Q=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,J=e.SAFE_FOR_TEMPLATES||!1,Z=e.WHOLE_DOCUMENT||!1,re=e.RETURN_DOM||!1,ne=e.RETURN_DOM_FRAGMENT||!1,oe=e.RETURN_TRUSTED_TYPE||!1,te=e.FORCE_BODY||!1,ae=!1!==e.SANITIZE_DOM,ie=e.SANITIZE_NAMED_PROPS||!1,le=!1!==e.KEEP_CONTENT,se=e.IN_PLACE||!1,U=e.ALLOWED_URI_REGEXP||U,ye=e.NAMESPACE||be,e.CUSTOM_ELEMENT_HANDLING&&Ne(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ne(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(q.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),J&&(Y=!1),ne&&(re=!0),de&&(z=UC({},gC(YC)),$=[],!0===de.html&&(UC(z,$C),UC($,XC)),!0===de.svg&&(UC(z,WC),UC($,QC),UC($,ZC)),!0===de.svgFilters&&(UC(z,qC),UC($,QC),UC($,ZC)),!0===de.mathMl&&(UC(z,KC),UC($,JC),UC($,ZC))),e.ADD_TAGS&&(z===H&&(z=zC(z)),UC(z,e.ADD_TAGS,A)),e.ADD_ATTR&&($===W&&($=zC($)),UC($,e.ADD_ATTR,A)),e.ADD_URI_SAFE_ATTR&&UC(ge,e.ADD_URI_SAFE_ATTR,A),e.FORBID_CONTENTS&&(ce===ue&&(ce=zC(ce)),UC(ce,e.FORBID_CONTENTS,A)),le&&(z["#text"]=!0),Z&&UC(z,["html","head","body"]),z.table&&(UC(z,["tbody"]),delete V.tbody),wC&&wC(e),ke=e)},Te=UC({},["mi","mo","mn","ms","mtext"]),De=UC({},["foreignobject","desc","title","annotation-xml"]),Re=UC({},["title","style","font","a","script"]),Oe=UC({},WC);UC(Oe,qC),UC(Oe,VC);var Ae=UC({},KC);UC(Ae,GC);var Be=function(e){RC(r.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=S}catch(t){e.remove()}}},Pe=function(e,t){try{RC(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){RC(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!$[e])if(re||ne)try{Be(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Le=function(e){var t,r;if(te)e="<remove></remove>"+e;else{var n=BC(e,/^[\r\n\t ]+/);r=n&&n[0]}"application/xhtml+xml"===O&&ye===be&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var a=w?w.createHTML(e):e;if(ye===be)try{t=(new f).parseFromString(a,O)}catch(e){}if(!t||!t.documentElement){t=k.createDocument(ye,"template",null);try{t.documentElement.innerHTML=Ce?S:a}catch(e){}}var i=t.body||t.documentElement;return e&&r&&i.insertBefore(o.createTextNode(r),i.childNodes[0]||null),ye===be?_.call(t,Z?"html":"body")[0]:Z?t.documentElement:i},Me=function(e){return E.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},Ie=function(e){return"object"===uC(l)?e instanceof l:e&&"object"===uC(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Fe=function(e,t,n){R[e]&&TC(R[e],(function(e){e.call(r,t,n,ke)}))},je=function(e){var t,n;if(Fe("beforeSanitizeElements",e,null),(n=e)instanceof m&&("string"!=typeof n.nodeName||"string"!=typeof n.textContent||"function"!=typeof n.removeChild||!(n.attributes instanceof u)||"function"!=typeof n.removeAttribute||"function"!=typeof n.setAttribute||"string"!=typeof n.namespaceURI||"function"!=typeof n.insertBefore||"function"!=typeof n.hasChildNodes))return Be(e),!0;if(IC(/[\u0080-\uFFFF]/,e.nodeName))return Be(e),!0;var o=A(e.nodeName);if(Fe("uponSanitizeElement",e,{tagName:o,allowedTags:z}),e.hasChildNodes()&&!Ie(e.firstElementChild)&&(!Ie(e.content)||!Ie(e.content.firstElementChild))&&IC(/<[/\w]/g,e.innerHTML)&&IC(/<[/\w]/g,e.textContent))return Be(e),!0;if("select"===o&&IC(/<template/i,e.innerHTML))return Be(e),!0;if(!z[o]||V[o]){if(!V[o]&&ze(o)){if(q.tagNameCheck instanceof RegExp&&IC(q.tagNameCheck,o))return!1;if(q.tagNameCheck instanceof Function&&q.tagNameCheck(o))return!1}if(le&&!ce[o]){var a=y(e)||e.parentNode,i=b(e)||e.childNodes;if(i&&a)for(var l=i.length-1;l>=0;--l)a.insertBefore(v(i[l],!0),h(e))}return Be(e),!0}return e instanceof s&&!function(e){var t=y(e);t&&t.tagName||(t={namespaceURI:ye,tagName:"template"});var r=OC(e.tagName),n=OC(t.tagName);return!!we[e.namespaceURI]&&(e.namespaceURI===he?t.namespaceURI===be?"svg"===r:t.namespaceURI===ve?"svg"===r&&("annotation-xml"===n||Te[n]):Boolean(Oe[r]):e.namespaceURI===ve?t.namespaceURI===be?"math"===r:t.namespaceURI===he?"math"===r&&De[n]:Boolean(Ae[r]):e.namespaceURI===be?!(t.namespaceURI===he&&!De[n])&&!(t.namespaceURI===ve&&!Te[n])&&!Ae[r]&&(Re[r]||!Oe[r]):!("application/xhtml+xml"!==O||!we[e.namespaceURI]))}(e)?(Be(e),!0):"noscript"!==o&&"noembed"!==o||!IC(/<\/no(script|embed)/i,e.innerHTML)?(J&&3===e.nodeType&&(t=e.textContent,t=PC(t,B," "),t=PC(t,P," "),t=PC(t,L," "),e.textContent!==t&&(RC(r.removed,{element:e.cloneNode()}),e.textContent=t)),Fe("afterSanitizeElements",e,null),!1):(Be(e),!0)},Ue=function(e,t,r){if(ae&&("id"===t||"name"===t)&&(r in o||r in Ee))return!1;if(Y&&!K[t]&&IC(M,t));else if(G&&IC(I,t));else if(!$[t]||K[t]){if(!(ze(e)&&(q.tagNameCheck instanceof RegExp&&IC(q.tagNameCheck,e)||q.tagNameCheck instanceof Function&&q.tagNameCheck(e))&&(q.attributeNameCheck instanceof RegExp&&IC(q.attributeNameCheck,t)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(t))||"is"===t&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&IC(q.tagNameCheck,r)||q.tagNameCheck instanceof Function&&q.tagNameCheck(r))))return!1}else if(ge[t]);else if(IC(U,PC(r,j,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==LC(r,"data:")||!me[e]){if(X&&!IC(F,PC(r,j,"")));else if(r)return!1}else;return!0},ze=function(e){return e.indexOf("-")>0},He=function(e){var t,n,o,a;Fe("beforeSanitizeAttributes",e,null);var i=e.attributes;if(i){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$};for(a=i.length;a--;){var s=t=i[a],d=s.name,c=s.namespaceURI;if(n="value"===d?t.value:MC(t.value),o=A(d),l.attrName=o,l.attrValue=n,l.keepAttr=!0,l.forceKeepAttr=void 0,Fe("uponSanitizeAttribute",e,l),n=l.attrValue,!l.forceKeepAttr&&(Pe(d,e),l.keepAttr))if(Q||!IC(/\/>/i,n)){J&&(n=PC(n,B," "),n=PC(n,P," "),n=PC(n,L," "));var u=A(e.nodeName);if(Ue(u,o,n)){if(!ie||"id"!==o&&"name"!==o||(Pe(d,e),n="user-content-"+n),w&&"object"===uC(g)&&"function"==typeof g.getAttributeType)if(c);else switch(g.getAttributeType(u,o)){case"TrustedHTML":n=w.createHTML(n);break;case"TrustedScriptURL":n=w.createScriptURL(n)}try{c?e.setAttributeNS(c,d,n):e.setAttribute(d,n),DC(r.removed)}catch(e){}}}else Pe(d,e)}Fe("afterSanitizeAttributes",e,null)}},$e=function e(t){var r,n=Me(t);for(Fe("beforeSanitizeShadowDOM",t,null);r=n.nextNode();)Fe("uponSanitizeShadowNode",r,null),je(r)||(r.content instanceof a&&e(r.content),He(r));Fe("afterSanitizeShadowDOM",t,null)};return r.sanitize=function(e){var o,i,s,d,c,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((Ce=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Ie(e)){if("function"!=typeof e.toString)throw FC("toString is not a function");if("string"!=typeof(e=e.toString()))throw FC("dirty is not a string, aborting")}if(!r.isSupported){if("object"===uC(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Ie(e))return t.toStaticHTML(e.outerHTML)}return e}if(ee||_e(u),r.removed=[],"string"==typeof e&&(se=!1),se){if(e.nodeName){var m=A(e.nodeName);if(!z[m]||V[m])throw FC("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)1===(i=(o=Le("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===i.nodeName||"HTML"===i.nodeName?o=i:o.appendChild(i);else{if(!re&&!J&&!Z&&-1===e.indexOf("<"))return w&&oe?w.createHTML(e):e;if(!(o=Le(e)))return re?null:oe?S:""}o&&te&&Be(o.firstChild);for(var f=Me(se?e:o);s=f.nextNode();)3===s.nodeType&&s===d||je(s)||(s.content instanceof a&&$e(s.content),He(s),d=s);if(d=null,se)return e;if(re){if(ne)for(c=N.call(o.ownerDocument);o.firstChild;)c.appendChild(o.firstChild);else c=o;return($.shadowroot||$.shadowrootmod)&&(c=T.call(n,c,!0)),c}var g=Z?o.outerHTML:o.innerHTML;return Z&&z["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&IC(sw,o.ownerDocument.doctype.name)&&(g="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+g),J&&(g=PC(g,B," "),g=PC(g,P," "),g=PC(g,L," ")),w&&oe?w.createHTML(g):g},r.setConfig=function(e){_e(e),ee=!0},r.clearConfig=function(){ke=null,ee=!1},r.isValidAttribute=function(e,t,r){ke||_e({});var n=A(e),o=A(t);return Ue(n,o,r)},r.addHook=function(e,t){"function"==typeof t&&(R[e]=R[e]||[],RC(R[e],t))},r.removeHook=function(e){if(R[e])return DC(R[e])},r.removeHooks=function(e){R[e]&&(R[e]=[])},r.removeAllHooks=function(){R={}},r}(),uw=zt.each,mw=zt.trim,fw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],gw={ftp:21,http:80,https:443,mailto:25},pw=["img","video"],vw=(e,t,r)=>{var n=(e=>{try{return decodeURIComponent(e)}catch(t){return unescape(e)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(n)||!e.allow_html_data_urls&&(/^data:image\//i.test(n)?((e,t)=>R(e)?!e:!R(t)||!J(pw,t))(e.allow_svg_data_urls,r)&&/^data:image\/svg\+xml/i.test(n):/^data:/i.test(n)))};class hw{static parseDataUri(e){var t,r=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(r[0]);return n&&(t=n[1]),{type:t,data:r[1]}}static isDomSafe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.allow_script_urls)return!0;var n=fi.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!vw(r,n,t)}static getDocumentBaseUrl(e){var t,r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(t=e.href)&&void 0!==t?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.path="",this.directory="",e=mw(e),this.settings=t;var r=t.base_uri,n=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))n.source=e;else{var o=0===e.indexOf("//");if(0!==e.indexOf("/")||o||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){var a=r?r.path:new hw(document.location.href).directory;if(""===(null==r?void 0:r.protocol))e="//mce_host"+n.toAbsPath(a,e);else{var i=/([^#?]*)([#?]?.*)/.exec(e);i&&(e=(r&&r.protocol||"http")+"://mce_host"+n.toAbsPath(a,i[1])+i[2])}}e=e.replace(/@@/g,"(mce_at)");var l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);l&&uw(fw,((e,t)=>{var r=l[t];r&&(r=r.replace(/\(mce_at\)/g,"@@")),n[e]=r})),r&&(n.protocol||(n.protocol=r.protocol),n.userInfo||(n.userInfo=r.userInfo),n.port||"mce_host"!==n.host||(n.port=r.port),n.host&&"mce_host"!==n.host||(n.host=r.host),n.source=""),o&&(n.protocol="")}}setPath(e){var t=/^(.*?)\/?(\w+)?$/.exec(e);t&&(this.path=t[0],this.directory=t[1],this.file=t[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;var t=new hw(e,{base_uri:this});if("mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)return t.getURI();var r=this.getURI(),n=t.getURI();if(r===n||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===n)return r;var o=this.toRelPath(this.path,t.path);return t.query&&(o+="?"+t.query),t.anchor&&(o+="#"+t.anchor),o}toAbsolute(e,t){var r=new hw(e,{base_uri:this});return r.getURI(t&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=this.protocol?gw[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){var r,n,o=0,a="",i=e.substring(0,e.lastIndexOf("/")).split("/"),l=t.split("/");if(i.length>=l.length)for(r=0,n=i.length;r<n;r++)if(r>=l.length||i[r]!==l[r]){o=r+1;break}if(i.length<l.length)for(r=0,n=l.length;r<n;r++)if(r>=i.length||i[r]!==l[r]){o=r+1;break}if(1===o)return t;for(r=0,n=i.length-(o-1);r<n;r++)a+="../";for(r=o-1,n=l.length;r<n;r++)a+=r!==o-1?"/"+l[r]:l[r];return a}toAbsPath(e,t){var r=0,n=/\/$/.test(t)?"/":"",o=e.split("/"),a=t.split("/"),i=[];uw(o,(e=>{e&&i.push(e)}));for(var l=[],s=a.length-1;s>=0;s--)0!==a[s].length&&"."!==a[s]&&(".."!==a[s]?r>0?r--:l.push(a[s]):r++);var d,c=i.length-r;return 0!==(d=c<=0?fe(l).join("/"):i.slice(0,c).join("/")+"/"+fe(l).join("/")).indexOf("/")&&(d="/"+d),n&&d.lastIndexOf("/")!==d.length-1&&(d+=n),d}getURI(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.source&&!t||(e="",t||(this.protocol?e+=this.protocol+"://":e+="//",this.userInfo&&(e+=this.userInfo+"@"),this.host&&(e+=this.host),this.port&&(e+=":"+this.port)),this.path&&(e+=this.path),this.query&&(e+="?"+this.query),this.anchor&&(e+="#"+this.anchor),this.source=e),this.source}}var bw,yw=zt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Cw="data-mce-type",ww=0,Sw=(e,t,r,n)=>{var o,a,i,l,s=t.validate,d=r.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(o=e.nodeValue)&&void 0!==o?o:"")&&(e.nodeValue=" "+e.nodeValue);var c=null!==(a=null==n?void 0:n.tagName)&&void 0!==a?a:e.nodeName.toLowerCase();if(1===e.nodeType&&"body"!==c){var u=Er.fromDom(e),m=ur(u,Cw),f=dr(u,"data-mce-bogus");if(m||!S(f)){var g=r.getElementRule(c);if(!s||g){if(R(n)&&(n.allowedTags[c]=!0),s&&g&&!m){if(te(null!==(i=g.attributesForced)&&void 0!==i?i:[],(e=>{lr(u,e.name,"{$uid}"===e.value?"mce_"+ww++:e.value)})),te(null!==(l=g.attributesDefault)&&void 0!==l?l:[],(e=>{ur(u,e.name)||lr(u,e.name,"{$uid}"===e.value?"mce_"+ww++:e.value)})),g.attributesRequired&&!Z(g.attributesRequired,(e=>ur(u,e))))return void Tn(u);if(g.removeEmptyAttrs&&(e=>{var t=e.dom.attributes;return null==t||0===t.length})(u))return void Tn(u);g.outputName&&g.outputName!==c&&Sl(u,g.outputName)}}else Be(d,c)?_n(u):Tn(u)}else"all"===f?_n(u):Tn(u)}},xw=(e,t,r,n,o)=>!(n in yw&&vw(e,o,r))&&(!e.validate||t.isValid(r,n)||Je(n,"data-")||Je(n,"aria-")),kw=(e,t)=>e.hasAttribute(Cw)&&("id"===t||"class"===t||"style"===t),Ew=(e,t)=>e in t.getBoolAttrs(),Nw=(e,t,r)=>{for(var n=e.attributes,o=n.length-1;o>=0;o--){var a=n[o],i=a.name,l=a.value;xw(t,r,e.tagName.toLowerCase(),i,l)||kw(e,i)?Ew(i,r)&&e.setAttribute(i,i):e.removeAttribute(i)}},_w=(e,t)=>{if(e.sanitize){var r=((e,t)=>{var r=cw();return r.addHook("uponSanitizeElement",((r,n)=>{Sw(r,e,t,n)})),r.addHook("uponSanitizeAttribute",((r,n)=>{var o=r.tagName.toLowerCase(),a=n.attrName,i=n.attrValue;n.keepAttr=xw(e,t,o,a,i),n.keepAttr?(n.allowedAttributes[a]=!0,Ew(a,t)&&(n.attrValue=a),e.allow_svg_data_urls&&Je(i,"data:image/svg+xml")&&(n.forceKeepAttr=!0)):kw(r,a)&&(n.forceKeepAttr=!0)})),r.addHook("afterSanitizeAttributes",(e=>{var t=e.attributes;if(t&&!(t.length<2))for(var r=t.length-2;r>=0;r--){var n=t[r],o=n.name,a=n.value;e.removeAttribute(o),e.setAttribute(o,a)}})),r})(e,t);return(t,n)=>{r.sanitize(t,((e,t)=>{var r=d({},{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]});return r.PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r})(e,n)),r.removed=[]}}return(r,n)=>{for(var o,a=document.createNodeIterator(r,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);o=a.nextNode();)Sw(o,e,t),Jn(o)&&Nw(o,e,t)}},Tw=zt.makeMap,Dw=zt.extend,Rw=(e,t,r)=>{for(var n=e.name,o=(n in r&&"title"!==n&&"textarea"!==n),a=t.childNodes,i=0,l=a.length;i<l;i++){var s=a[i],d=new Tp(s.nodeName.toLowerCase(),s.nodeType);if(Jn(s))for(var c=s.attributes,u=0,m=c.length;u<m;u++){var f=c[u];d.attr(f.name,f.value)}else lo(s)?(d.value=s.data,o&&(d.raw=!0)):(uo(s)||so(s)||co(s))&&(d.value=s.data);Rw(d,s,r),e.append(d)}},Ow=(e,t,r,n)=>{var o=r.validate,a=t.getNonEmptyElements(),i=t.getWhitespaceElements(),l=Dw(Tw("script,style,head,html,body,title,meta,param"),t.getBlockElements()),s=xi(t),d=/[ \t\r\n]+/g,c=/^[ \t\r\n]+/,u=/[ \t\r\n]+$/,m=e=>{for(var t=e.parent;R(t);){if(t.name in i)return!0;t=t.parent}return!1},f=e=>e.name in l||$a(t,e),g=(t,r)=>{var o=r?t.prev:t.next;return!R(o)&&!D(t.parent)&&(f(t.parent)&&(t.parent!==e||!0===n.isRootContent))};return[e=>{var t;if(3===e.type&&!m(e)){var r=null!==(t=e.value)&&void 0!==t?t:"";r=r.replace(d," "),(((e,t)=>R(e)&&(t(e)||"br"===e.name))(e.prev,f)||g(e,!0))&&(r=r.replace(c,"")),0===r.length?e.remove():e.value=r}},e=>{var l;if(1===e.type){var d=t.getElementRule(e.name);if(o&&d){var c=sb(t,a,i,e);d.paddInEmptyBlock&&c&&(e=>{for(var r=e;R(r);){if(r.name in s)return sb(t,a,i,r);r=r.parent}return!1})(e)?ib(r,n,f,e):d.removeEmpty&&c?f(e)?e.remove():e.unwrap():d.paddEmpty&&(c||(e=>{var t;return lb(e,"#text")&&(null===(t=null==e?void 0:e.firstChild)||void 0===t?void 0:t.value)===Eo})(e))&&ib(r,n,f,e)}}else if(3===e.type&&!m(e)){var p=null!==(l=e.value)&&void 0!==l?l:"";(e.next&&f(e.next)||g(e,!1))&&(p=p.replace(u,"")),0===p.length?e.remove():e.value=p}}]},Aw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ei(),r=Qy(),n=Qy(),o=d({validate:!0,root_name:"body",sanitize:!0},e),a=new DOMParser,i=_w(o,t),l=r.addFilter,s=r.getFilters,c=r.removeFilter,m=n.addFilter,f=n.getFilters,g=n.removeFilter,p=(e,r)=>{var n=S(r.attr(Cw)),o=1===r.type&&!Be(e,r.name)&&!$a(t,r);return 3===r.type||o&&!n},v={schema:t,addAttributeFilter:m,getAttributeFilters:f,removeAttributeFilter:g,addNodeFilter:l,getNodeFilters:s,removeNodeFilter:c,parse:function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=o.validate,d=null!==(r=n.context)&&void 0!==r?r:o.root_name,c=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"html",o="xhtml"===n?"application/xhtml+xml":"text/html",l=Be(t.getSpecialElements(),r.toLowerCase()),s=l?`<${r}>${e}</${r}>`:e,d="xhtml"===n?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${s}</body></html>`:`<body>${s}</body>`,c=a.parseFromString(d,o).body;return i(c,o),l?c.firstChild:c}(e,d,n.format);Ma(t,c);var m=new Tp(d,11);Rw(m,c,t.getSpecialElements()),c.innerHTML="";var g=u(Ow(m,t,o,n),2),v=g[0],h=g[1],b=[],y=l?e=>((e,r)=>{mb(t,e)&&r.push(e)})(e,b):P,C={nodes:{},attributes:{}},w=e=>nb(s(),f(),e,C);if(((e,t,r)=>{for(var n=[],o=function(r){var o=r;te(t,(e=>e(o))),D(o.parent)&&o!==e?r=i:n.push(o),a=r},a=e,i=a;a;i=a,a=a.walk())o(a);for(var l=function(){var e=n[s];te(r,(t=>t(e)))},s=n.length-1;s>=0;s--)l()})(m,[v,w],[h,y]),b.reverse(),l&&b.length>0)if(n.context){var S=ne(b,(e=>e.parent===m)),x=S.pass,k=S.fail;ub(k,t,m,w),n.invalid=x.length>0}else ub(b,t,m,w);var E=((e,t)=>{var r,n=null!==(r=t.forced_root_block)&&void 0!==r?r:e.forced_root_block;return!1===n?"":!0===n?"p":n})(o,n);return E&&("body"===m.name||n.isRootContent)&&((e,r)=>{var n=Dw(Tw("script,style,head,html,body,title,meta,param"),t.getBlockElements()),a=/^[ \t\r\n]+/,i=/[ \t\r\n]+$/,l=e.firstChild,s=null,d=e=>{var t,r;e&&((l=e.firstChild)&&3===l.type&&(l.value=null===(t=l.value)||void 0===t?void 0:t.replace(a,"")),(l=e.lastChild)&&3===l.type&&(l.value=null===(r=l.value)||void 0===r?void 0:r.replace(i,"")))};if(t.isValidChild(e.name,r.toLowerCase())){for(;l;){var c=l.next;p(n,l)?(s||((s=new Tp(r,1)).attr(o.forced_root_block_attrs),e.insert(s,l)),s.append(l)):(d(s),s=null),l=c}d(s)}})(m,E),n.invalid||ob(C,n),m}};return cC(v,o),((e,t,r)=>{t.inline_styles&&Zy(e,t,r)})(v,o,t),v},Bw=(e,t,r)=>{var n=(e=>_b(e)?Gp({validate:!1}).serialize(e):e)(e),o=t(n);if(o.isDefaultPrevented())return o;if(_b(e)){if(o.content!==n){var a=Aw({validate:!1,forced_root_block:!1,sanitize:r}).parse(o.content,{context:e.name});return d(d({},o),{},{content:a})}return d(d({},o),{},{content:e})}return o},Pw=(e,t)=>{if(t.no_events)return Es.value(t);var r=((e,t)=>e.dispatch("BeforeGetContent",t))(e,t);return r.isDefaultPrevented()?Es.error(Df(e,d({content:""},r)).content):Es.value(r)},Lw=(e,t,r)=>{if(r.no_events)return t;var n=Bw(t,(t=>Df(e,d(d({},r),{},{content:t}))),kc(e));return n.content},Mw=(e,t)=>{if(t.no_events)return Es.value(t);var r=Bw(t.content,(r=>((e,t)=>e.dispatch("BeforeSetContent",t))(e,d(d({},t),{},{content:r}))),kc(e));return r.isDefaultPrevented()?(Tf(e,r),Es.error(void 0)):Es.value(r)},Iw=(e,t,r)=>{r.no_events||Tf(e,d(d({},r),{},{content:t}))},Fw=(e,t,r)=>({element:e,width:t,rows:r}),jw=(e,t)=>({element:e,cells:t}),Uw=(e,t)=>({x:e,y:t}),zw=(e,t)=>cr(e,t).bind(it).getOr(1),Hw=(e,t,r)=>{var n=e.rows;return!!(n[r]?n[r].cells:[])[t]},$w=e=>ie(e,((e,t)=>t.cells.length>e?t.cells.length:e),0),Ww=(e,t)=>{for(var r=e.rows,n=0;n<r.length;n++)for(var o=r[n].cells,a=0;a<o.length;a++)if(Dr(o[a],t))return K.some(Uw(a,n));return K.none()},qw=(e,t,r,n,o)=>{for(var a=[],i=e.rows,l=r;l<=o;l++){var s=i[l].cells,d=t<n?s.slice(t,n+1):s.slice(n,t+1);a.push(jw(i[l].element,d))}return a},Vw=e=>{var t=Fw(Cl(e),0,[]);return te(qn(e,"tr"),((e,r)=>{te(qn(e,"td,th"),((n,o)=>{((e,t,r,n,o)=>{for(var a=zw(o,"rowspan"),i=zw(o,"colspan"),l=e.rows,s=r;s<r+a;s++){l[s]||(l[s]=jw(wl(n),[]));for(var d=t;d<t+i;d++)l[s].cells[d]=s===r&&d===t?o:Cl(o)}})(t,((e,t,r)=>{for(;Hw(e,t,r);)t++;return t})(t,o,r),r,e,n)}))})),Fw(t.element,$w(t.rows),t.rows)},Kw=e=>((e,t)=>{var r=Cl(e.element),n=Er.fromTag("tbody");return En(n,t),xn(r,n),r})(e,(e=>ee(e.rows,(e=>{var t=ee(e.cells,(e=>{var t=wl(e);return mr(t,"colspan"),mr(t,"rowspan"),t})),r=Cl(e.element);return En(r,t),r})))(e)),Gw=(e,t,r)=>Ww(e,t).bind((t=>Ww(e,r).map((r=>((e,t,r)=>{var n=t.x,o=t.y,a=r.x,i=r.y,l=o<i?qw(e,n,o,a,i):qw(e,n,i,a,o);return Fw(e.element,$w(l),l)})(e,t,r))))),Yw=(e,t)=>se(e,(e=>"li"===Qt(e)&&Em(e,t))).fold(I([]),(t=>(e=>se(e,(e=>"ul"===Qt(e)||"ol"===Qt(e))))(e).map((e=>{var t=Er.fromTag(Qt(e)),r=De(bn(e),((e,t)=>Je(t,"list-style")));return gn(t,r),[Er.fromTag("li"),t]})).getOr([]))),Xw=(e,t)=>{var r=Er.fromDom(t.commonAncestorContainer),n=vv(r,e),o=oe(n,Ho),a=Yw(n,t),i=o.concat(a.length?a:(e=>Io(e)?Pr(e).filter(Mo).fold(I([]),(t=>[e,t])):Mo(e)?[e]:[])(r));return ee(i,Cl)},Qw=()=>Zf([]),Jw=(e,t)=>{return r=Er.fromDom(t.cloneContents()),n=Xw(e,t),o=ie(n,((e,t)=>(xn(t,e),t)),r),n.length>0?Zf([o]):o;var r,n,o},Zw=(e,t)=>((e,t)=>an(t,"table",U(Dr,e)))(e,t[0]).bind((e=>{var r=t[0],n=t[t.length-1],o=Vw(e);return Gw(o,r,n).map((e=>Zf([Kw(e)])))})).getOrThunk(Qw),eS=(e,t)=>{var r=Cm(t,e);return r.length>0?Zw(e,r):((e,t)=>t.length>0&&t[0].collapsed?Qw():Jw(e,t[0]))(e,t)},tS=(e,t)=>t>=0&&t<e.length&&sm(e.charAt(t)),rS=e=>Yo(e.innerText),nS=(e,t)=>{if("text"===t.format)return(e=>K.from(e.selection.getRng()).map((t=>{var r,n=K.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),a=(e=>e.map((e=>e.nodeName)).getOr("div").toLowerCase())(n),i=Er.fromDom(t.cloneContents());Hp(i),$p(i);var l=e.dom.add(o,a,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},i.dom),s=rS(l),d=Yo(null!==(r=l.textContent)&&void 0!==r?r:"");if(e.dom.remove(l),tS(d,0)||tS(d,d.length-1)){var c=n.getOr(o),u=rS(c),m=u.indexOf(s);return-1===m?s:(tS(u,m-1)?" ":"")+s+(tS(u,m+s.length)?" ":"")}return s})).getOr(""))(e);var r=((e,t)=>{var r=e.selection.getRng(),n=e.dom.create("body"),o=e.selection.getSel(),a=vp(e,bm(o)),i=t.contextual?eS(Er.fromDom(e.getBody()),a).dom:r.cloneContents();return i&&n.appendChild(i),e.selection.serializer.serialize(n,t)})(e,t);return"tree"===t.format?r:e.selection.isCollapsed()?"":r},oS=function(e,t){var r=((e,t)=>d(d({},e),{},{format:t,get:!0,selection:!0,getInner:!0}))(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t);return Pw(e,r).fold(F,(t=>{var r=nS(e,t);return Lw(e,r,t)}))},aS=e=>Jn(e)?e.outerHTML:lo(e)?fi.encodeRaw(e.data,!1):uo(e)?"\x3c!--"+e.data+"--\x3e":"",iS=(e,t,r)=>{var n=(e=>{var t,r=document.createElement("div"),n=document.createDocumentFragment();for(e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n})(t);if(e.hasChildNodes()&&r<e.childNodes.length){var o=e.childNodes[r];e.insertBefore(n,o)}else e.appendChild(n)},lS=(e,t)=>{var r,n,o,a,i,l,s,d,c,u=ee(Ce(t.childNodes),aS);return((e,t)=>{var r=0;te(e,(e=>{0===e[0]?r++:1===e[0]?(iS(t,e[1],r),r++):2===e[0]&&((e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){var r=e.childNodes[t];e.removeChild(r)}})(t,r)}))})((n=e,o=(r=u).length+n.length+2,a=new Array(o),i=new Array(o),l=(e,t,o,a,i)=>{var s=d(e,t,o,a);if(null===s||s.start===t&&s.diag===t-a||s.end===e&&s.diag===e-o)for(var c=e,u=o;c<t||u<a;)c<t&&u<a&&r[c]===n[u]?(i.push([0,r[c]]),++c,++u):t-e>a-o?(i.push([2,r[c]]),++c):(i.push([1,n[u]]),++u);else{l(e,s.start,o,s.start-s.diag,i);for(var m=s.start;m<s.end;++m)i.push([0,r[m]]);l(s.end,t,s.end-s.diag,a,i)}},s=(e,t,o,a)=>{for(var i=e;i-t<a&&i<o&&r[i]===n[i-t];)++i;return((e,t,r)=>({start:e,end:t,diag:r}))(e,i,t)},d=(e,t,o,l)=>{var d=t-e,c=l-o;if(0===d||0===c)return null;var u,m,f,g,p,v=d-c,h=c+d,b=(h%2==0?h:h+1)/2;for(a[1+b]=e,i[1+b]=t+1,u=0;u<=b;++u){for(m=-u;m<=u;m+=2){for(f=m+b,m===-u||m!==u&&a[f-1]<a[f+1]?a[f]=a[f+1]:a[f]=a[f-1]+1,p=(g=a[f])-e+o-m;g<t&&p<l&&r[g]===n[p];)a[f]=++g,++p;if(v%2!=0&&v-u<=m&&m<=v+u&&i[f-v]<=a[f])return s(i[f-v],m+e-o,t,l)}for(m=v-u;m<=v+u;m+=2){for(f=m+b-v,m===v-u||m!==v+u&&i[f+1]<=i[f-1]?i[f]=i[f+1]-1:i[f]=i[f-1],p=(g=i[f]-1)-e+o-m;g>=e&&p>=o&&r[g]===n[p];)i[f]=g--,p--;if(v%2==0&&-u<=m&&m<=u&&i[f]<=a[f+v])return s(i[f],m+e-o,t,l)}}return null},c=[],l(0,r.length,0,n.length,c),c),t),t},sS=We((()=>document.implementation.createHTMLDocument("undo"))),dS=e=>{var t,r=e.serializer.getTempAttrs(),n=zp(e.getBody(),r);return(e=>null!==e.querySelector("iframe"))(n)?(t=((e,t)=>oe(ee(Ce(e.childNodes),t?L(Yo,aS):aS),(e=>e.length>0)))(n,!0),{type:"fragmented",fragments:t,content:"",bookmark:null,beforeBookmark:null}):{type:"complete",fragments:null,content:Yo(n.innerHTML),bookmark:null,beforeBookmark:null}},cS=(e,t,r)=>{var n=r?t.beforeBookmark:t.bookmark;"fragmented"===t.type?lS(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!R(n)||!Yu(n)||!n.isFakeCaret}),n&&(e.selection.moveToBookmark(n),e.selection.scrollIntoView())},uS=e=>"fragmented"===e.type?e.fragments.join(""):e.content,mS=e=>{var t=Er.fromTag("body",sS());return On(t,uS(e)),te(qn(t,"*[data-mce-bogus]"),Tn),Rn(t)},fS=(e,t)=>!(!e||!t)&&(!!((e,t)=>uS(e)===uS(t))(e,t)||((e,t)=>mS(e)===mS(t))(e,t)),gS=e=>0===e.get(),pS=(e,t,r)=>{gS(r)&&(e.typing=t)},vS=(e,t)=>{e.typing&&(pS(e,!1,t),e.add())},hS=e=>({init:{bindEvents:P},undoManager:{beforeChange:(t,r)=>((e,t,r)=>{gS(t)&&r.set(Ss(e.selection))})(e,t,r),add:(t,r,n,o,a,i)=>((e,t,r,n,o,a,i)=>{var l=dS(e),s=zt.extend(a||{},l);if(!gS(n)||e.removed)return null;var d=t.data[r.get()];if(e.dispatch("BeforeAddUndo",{level:s,lastLevel:d,originalEvent:i}).isDefaultPrevented())return null;if(d&&fS(d,s))return null;t.data[r.get()]&&o.get().each((e=>{t.data[r.get()].beforeBookmark=e}));var c=zd(e);if(c&&t.data.length>c){for(var u=0;u<t.data.length-1;u++)t.data[u]=t.data[u+1];t.data.length--,r.set(t.data.length)}s.bookmark=Ss(e.selection),r.get()<t.data.length-1&&(t.data.length=r.get()+1),t.data.push(s),r.set(t.data.length-1);var m={level:s,lastLevel:d,originalEvent:i};return r.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",m),e.dispatch("change",m)):e.dispatch("AddUndo",m),s})(e,t,r,n,o,a,i),undo:(t,r,n)=>((e,t,r,n)=>{var o;return t.typing&&(t.add(),t.typing=!1,pS(t,!1,r)),n.get()>0&&(n.set(n.get()-1),o=t.data[n.get()],cS(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o})(e,t,r,n),redo:(t,r)=>((e,t,r)=>{var n;return t.get()<r.length-1&&(t.set(t.get()+1),n=r[t.get()],cS(e,n,!1),e.setDirty(!0),e.dispatch("Redo",{level:n})),n})(e,t,r),clear:(t,r)=>((e,t,r)=>{t.data=[],r.set(0),t.typing=!1,e.dispatch("ClearUndos")})(e,t,r),reset:e=>(e=>{e.clear(),e.add()})(e),hasUndo:(t,r)=>((e,t,r)=>r.get()>0||t.typing&&t.data[0]&&!fS(dS(e),t.data[0]))(e,t,r),hasRedo:(e,t)=>((e,t)=>t.get()<e.data.length-1&&!e.typing)(e,t),transact:(e,t,r)=>((e,t,r)=>(vS(e,t),e.beforeChange(),e.ignore(r),e.add()))(e,t,r),ignore:(e,t)=>((e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}})(e,t),extra:(t,r,n,o)=>((e,t,r,n,o)=>{if(t.transact(n)){var a=t.data[r.get()].bookmark,i=t.data[r.get()-1];cS(e,i,!0),t.transact(o)&&(t.data[r.get()-1].beforeBookmark=a)}})(e,t,r,n,o)},formatter:{match:(t,r,n,o)=>jb(e,t,r,n,o),matchAll:(t,r)=>((e,t,r)=>{var n=[],o={},a=e.selection.getStart();return e.dom.getParent(a,(a=>{for(var i=0;i<t.length;i++){var l=t[i];!o[l]&&Fb(e,a,l,r)&&(o[l]=!0,n.push(l))}}),e.dom.getRoot()),n})(e,t,r),matchNode:(t,r,n,o)=>Fb(e,t,r,n,o),canApply:t=>((e,t)=>{var r=e.formatter.get(t),n=e.dom;if(r&&e.selection.isEditable())for(var o=e.selection.getStart(),a=qm(n,o),i=r.length-1;i>=0;i--){var l=r[i];if(!Ym(l))return!0;for(var s=a.length-1;s>=0;s--)if(n.is(a[s],l.selector))return!0}return!1})(e,t),closest:t=>Ub(e,t),apply:(t,r,n)=>$y(e,t,r,n),remove:(t,r,n,o)=>My(e,t,r,n,o),toggle:(t,r,n)=>((e,t,r,n)=>{var o=e.formatter.get(t);o&&(!jb(e,t,r,n)||"toggle"in o[0]&&!o[0].toggle?$y(e,t,r,n):My(e,t,r,n))})(e,t,r,n),formatChanged:(t,r,n,o,a)=>Yy(e,t,r,n,o,a)},editor:{getContent:t=>((e,t)=>K.from(e.getBody()).fold(I("tree"===t.format?new Tp("body",11):""),(r=>qp(e,t,r))))(e,t),setContent:(t,r)=>Db(e,t,r),insertContent:(t,r)=>Nb(e,t,r),addVisual:t=>((e,t)=>{var r=e.dom,n=R(t)?t:e.getBody();te(r.select("table,a",n),(t=>{switch(t.nodeName){case"TABLE":var n=Xd(e),o=r.getAttrib(t,"border");o&&"0"!==o||!e.hasVisual?r.removeClass(t,n):r.addClass(t,n);break;case"A":if(!r.getAttrib(t,"href")){var a=r.getAttrib(t,"name")||t.id,i=Qd(e);a&&e.hasVisual?r.addClass(t,i):r.removeClass(t,i)}}})),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})})(e,t)},selection:{getContent:(t,r)=>oS(e,t,r)},autocompleter:{addDecoration:t=>Sp(e,t),removeDecoration:()=>((e,t)=>xp(t).each((t=>{var r=e.selection.getBookmark();Tn(t),e.selection.moveToBookmark(r)})))(e,Er.fromDom(e.getBody()))},raw:{getModel:()=>K.none()}}),bS=e=>Be(e.plugins,"rtc"),yS=e=>{var t=e;return(e=>Ae(e.plugins,"rtc").bind((e=>K.from(e.setup))))(e).fold((()=>(t.rtcInstance=hS(e),K.none())),(e=>(t.rtcInstance=(()=>{var e=I(null),t=I("");return{init:{bindEvents:P},undoManager:{beforeChange:P,add:e,undo:e,redo:e,clear:P,reset:P,hasUndo:q,hasRedo:q,transact:e,ignore:P,extra:P},formatter:{match:q,matchAll:I([]),matchNode:I(void 0),canApply:q,closest:t,apply:P,remove:P,toggle:P,formatChanged:I({unbind:P})},editor:{getContent:t,setContent:I({content:"",html:""}),insertContent:I(""),addVisual:P},selection:{getContent:t},autocompleter:{addDecoration:P,removeDecoration:P},raw:{getModel:I(K.none())}}})(),K.some((()=>e().then((e=>(t.rtcInstance=(e=>{var t=e=>x(e)?e:{},r=e.init,n=e.undoManager,o=e.formatter,a=e.editor,i=e.selection,l=e.autocompleter,s=e.raw;return{init:{bindEvents:r.bindEvents},undoManager:{beforeChange:n.beforeChange,add:n.add,undo:n.undo,redo:n.redo,clear:n.clear,reset:n.reset,hasUndo:n.hasUndo,hasRedo:n.hasRedo,transact:(e,t,r)=>n.transact(r),ignore:(e,t)=>n.ignore(t),extra:(e,t,r,o)=>n.extra(r,o)},formatter:{match:(e,r,n,a)=>o.match(e,t(r),a),matchAll:o.matchAll,matchNode:o.matchNode,canApply:e=>o.canApply(e),closest:e=>o.closest(e),apply:(e,r,n)=>o.apply(e,t(r)),remove:(e,r,n,a)=>o.remove(e,t(r)),toggle:(e,r,n)=>o.toggle(e,t(r)),formatChanged:(e,t,r,n,a)=>o.formatChanged(t,r,n,a)},editor:{getContent:e=>a.getContent(e),setContent:(e,t)=>({content:a.setContent(e,t),html:""}),insertContent:(e,t)=>(a.insertContent(e),""),addVisual:a.addVisual},selection:{getContent:(e,t)=>i.getContent(t)},autocompleter:{addDecoration:l.addDecoration,removeDecoration:l.removeDecoration},raw:{getModel:()=>K.some(s.getRawModel())}}})(e),e.rtc.isRemote))))))))},CS=e=>e.rtcInstance?e.rtcInstance:hS(e),wS=e=>{var t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},SS=e=>wS(e).init.bindEvents(),xS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((e,t,r)=>wS(e).selection.getContent(t,r))(e,t.format?t.format:"html",t)},kS=e=>0===e.dom.length?(_n(e),K.none()):K.some(e),ES=(e,t,r,n)=>{e.bind((e=>((n?Xv:Yv)(e.dom,n?e.dom.length:0),t.filter(rr).map((t=>((e,t,r,n)=>{var o=e.dom,a=t.dom,i=n?o.length:a.length;n?(Qv(o,a,!1,!n),r.setStart(a,i)):(Qv(a,o,!1,!n),r.setEnd(a,i))})(e,t,r,n)))))).orThunk((()=>{var e=((e,t)=>e.filter((e=>xf.isBookmarkNode(e.dom))).bind(t?Fr:Ir))(t,n).or(t).filter(rr);return e.map((e=>((e,t)=>{Pr(e).each((r=>{var n=e.dom;t&&jv(r,es(n,0))?Yv(n,0):!t&&Uv(r,es(n,n.length))&&Xv(n,n.length)}))})(e,n)))}))},NS=function(e,t){var r=((e,t)=>d(d({format:"html"},e),{},{set:!0,selection:!0,content:t}))(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t);Mw(e,r).each((t=>{var r=((e,t)=>{if("raw"!==t.format){var r=e.selection.getRng(),n=e.dom.getParent(r.commonAncestorContainer,e.dom.isBlock),o=n?{context:n.nodeName.toLowerCase()}:{},a=e.parser.parse(t.content,d(d({forced_root_block:!1},o),t));return Gp({validate:!1},e.schema).serialize(a)}return t.content})(e,t),n=e.selection.getRng();((e,t)=>{var r=K.from(t.firstChild).map(Er.fromDom),n=K.from(t.lastChild).map(Er.fromDom);e.deleteContents(),e.insertNode(t);var o=r.bind(Ir).filter(rr).bind(kS),a=n.bind(Fr).filter(rr).bind(kS);ES(o,r,e,!0),ES(a,n,e,!1),e.collapse(!1)})(n,n.createContextualFragment(r)),e.selection.setRng(n),Mg(e,n),Iw(e,r,t)}))},_S=(e,t,r)=>{if(Be(e,t)){var n=oe(e[t],(e=>e!==r));0===n.length?delete e[t]:e[t]=n}},TS=(e,t)=>{var r,n,o=(t,r)=>se(r,(r=>e.is(r,t))),a=t=>e.getParents(t,void 0,e.getRoot());return{selectorChangedWithUnbind:(e,i)=>(r||(r={},n={},t.on("NodeChange",(e=>{var t=e.element,i=a(t),l={};ke(r,((e,t)=>{o(t,i).each((r=>{n[t]||(te(e,(e=>{e(!0,{node:r,selector:t,parents:i})})),n[t]=e),l[t]=e}))})),ke(n,((e,r)=>{l[r]||(delete n[r],te(e,(e=>{e(!1,{node:t,selector:r,parents:i})})))}))}))),r[e]||(r[e]=[]),r[e].push(i),o(e,a(t.selection.getStart())).each((()=>{n[e]=r[e]})),{unbind:()=>{_S(r,e,i),_S(n,e,i)}})}},DS=e=>!(!e||!e.ownerDocument)&&Rr(Er.fromDom(e.ownerDocument),Er.fromDom(e)),RS=(e,t,r,n)=>{var o,a,i=TS(e,n).selectorChangedWithUnbind,l=(e,t)=>NS(n,e,t),s=e=>{var t=c();t.collapse(!!e),u(t)},d=()=>t.getSelection?t.getSelection():t.document.selection,c=()=>{var r,i=(e,t,r)=>{try{return t.compareBoundaryPoints(e,r)}catch(e){return-1}},l=t.document;if(R(n.bookmark)&&!sp(n)){var s=Gg(n);if(s.isSome())return s.map((e=>vp(n,[e])[0])).getOr(l.createRange())}try{var c=d();c&&!Qn(c.anchorNode)&&(r=c.rangeCount>0?c.getRangeAt(0):l.createRange(),r=vp(n,[r])[0])}catch(e){}if(r||(r=l.createRange()),mo(r.startContainer)&&r.collapsed){var u=e.getRoot();r.setStart(u,0),r.setEnd(u,0)}return o&&a&&(0===i(r.START_TO_START,r,o)&&0===i(r.END_TO_END,r,o)?r=a:(o=null,a=null)),r},u=(e,t)=>{if((e=>!!e&&DS(e.startContainer)&&DS(e.endContainer))(e)){var r=d();if(e=n.dispatch("SetSelectionRange",{range:e,forward:t}).range,r){a=e;try{r.removeAllRanges(),r.addRange(e)}catch(e){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),o=r.rangeCount>0?r.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&(null==r?void 0:r.setBaseAndExtent)&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){var i=e.startContainer.childNodes[e.startOffset];i&&"IMG"===i.nodeName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),r.anchorNode===e.startContainer&&r.focusNode===e.endContainer||r.setBaseAndExtent(i,0,i,1))}n.dispatch("AfterSetSelectionRange",{range:e,forward:t})}},m=()=>{var t=d(),r=null==t?void 0:t.anchorNode,n=null==t?void 0:t.focusNode;if(!t||!r||!n||Qn(r)||Qn(n))return!0;var o=e.createRng(),a=e.createRng();try{o.setStart(r,t.anchorOffset),o.collapse(!0),a.setStart(n,t.focusOffset),a.collapse(!0)}catch(e){return!0}return o.compareBoundaryPoints(o.START_TO_START,a)<=0},f={dom:e,win:t,serializer:r,editor:n,expand:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"word"};return u(fg(e).expand(c(),t))},collapse:s,setCursorLocation:(t,r)=>{var o=e.createRng();R(t)&&R(r)?(o.setStart(t,r),o.setEnd(t,r),u(o),s(!1)):(Nm(e,o,n.getBody(),!0),u(o))},getContent:e=>xS(n,e),setContent:l,getBookmark:(e,t)=>g.getBookmark(e,t),moveToBookmark:e=>g.moveToBookmark(e),select:(t,r)=>(((e,t,r)=>K.from(t).bind((t=>K.from(t.parentNode).map((n=>{var o=e.nodeIndex(t),a=e.createRng();return a.setStart(n,o),a.setEnd(n,o+1),r&&(Nm(e,a,t,!0),Nm(e,a,t,!1)),a})))))(e,t,r).each(u),t),isCollapsed:()=>{var e=c(),t=d();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isEditable:()=>{var t=c(),r=n.getBody().querySelectorAll('[data-mce-selected="1"]');return r.length>0?me(r,(t=>e.isEditable(t.parentElement))):t.startContainer===t.endContainer?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer)},isForward:m,setNode:t=>(l(e.getOuterHTML(t)),t),getNode:()=>((e,t)=>{if(!t)return e;var r=t.startContainer,n=t.endContainer,o=t.startOffset,a=t.endOffset,i=t.commonAncestorContainer;t.collapsed||(r===n&&a-o<2&&r.hasChildNodes()&&(i=r.childNodes[o]),lo(r)&&lo(n)&&(r=r.length===o?pp(r.nextSibling,!0):r.parentNode,n=0===a?pp(n.previousSibling,!1):n.parentNode,r&&r===n&&(i=r)));var l=lo(i)?i.parentNode:i;return Jn(l)?l:e})(n.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:e=>fp(n.getBody(),c(),e),getEnd:e=>gp(n.getBody(),c(),e),getSelectedBlocks:(t,r)=>((e,t,r,n)=>{var o=[],a=e.getRoot(),i=e.getParent(r||fp(a,t,t.collapsed),e.isBlock),l=e.getParent(n||gp(a,t,t.collapsed),e.isBlock);if(i&&i!==a&&o.push(i),i&&l&&i!==l)for(var s,d=new Kn(i,a);(s=d.next())&&s!==l;)e.isBlock(s)&&o.push(s);return l&&i!==l&&l!==a&&o.push(l),o})(e,c(),t,r),normalize:()=>{var t=c(),r=d();if(!(bm(r).length>1)&&_m(n)){var o=cg(e,t);return o.each((e=>{u(e,m())})),o.getOr(t)}return t},selectorChanged:(e,t)=>(i(e,t),f),selectorChangedWithUnbind:i,getScrollContainer:()=>{for(var t,r=e.getRoot();r&&"BODY"!==r.nodeName;){if(r.scrollHeight>r.clientHeight){t=r;break}r=r.parentNode}return t},scrollIntoView:(e,t)=>{R(e)?((e,t,r)=>{(e.inline?Bg:Lg)(e,t,r)})(n,e,t):Mg(n,c(),t)},placeCaretAt:(e,t)=>u(rg(e,t,n.getDoc())),getBoundingClientRect:()=>{var e=c();return e.collapsed?es.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{t=o=a=null,p.destroy()}},g=xf(f),p=Mf(f,n);return f.bookmarkManager=g,f.controlSelection=p,f},OS=(e,t,r)=>((e,t)=>R(e)&&e.hasEventListeners("PreProcess")&&!t.no_events)(e,r)?((e,t,r)=>{var n,o=e.dom,a=t.cloneNode(!0),i=document.implementation;if(i.createHTMLDocument){var l=i.createHTMLDocument("");zt.each("BODY"===a.nodeName?a.childNodes:[a],(e=>{l.body.appendChild(l.importNode(e,!0))})),a="BODY"!==a.nodeName?l.body.firstChild:l.body,n=o.doc,o.doc=l}return((e,t)=>{e.dispatch("PreProcess",t)})(e,d(d({},r),{},{node:a})),n&&(o.doc=n),a})(e,t,r):t,AS=(e,t,r)=>{-1===zt.inArray(t,r)&&(e.addAttributeFilter(r,((e,t)=>{for(var r=e.length;r--;)e[r].attr(t,null)})),t.push(r))},BS=(e,t,r,n,o)=>{var a=((e,t,r)=>Gp(e,t).serialize(r))(t,r,n);return((e,t,r)=>{if(!t.no_events&&e){var n=((e,t)=>e.dispatch("PostProcess",t))(e,d(d({},t),{},{content:r}));return n.content}return r})(e,o,a)},PS=(e,t)=>{var r=["data-mce-selected"],n=d({entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1},e),o=t&&t.dom?t.dom:Vi.DOM,a=t&&t.schema?t.schema:Ei(n),i=Aw(n,a);((e,t,r)=>{e.addAttributeFilter("data-mce-tabindex",((e,t)=>{for(var r=e.length;r--;){var n=e[r];n.attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}})),e.addAttributeFilter("src,href,style",((e,n)=>{for(var o="data-mce-"+n,a=t.url_converter,i=t.url_converter_scope,l=e.length;l--;){var s=e[l],d=s.attr(o);void 0!==d?(s.attr(n,d.length>0?d:null),s.attr(o,null)):(d=s.attr(n),"style"===n?d=r.serializeStyle(r.parseStyle(d),s.name):a&&(d=a.call(i,d,n,s.name)),s.attr(n,d.length>0?d:null))}})),e.addAttributeFilter("class",(e=>{for(var t=e.length;t--;){var r=e[t],n=r.attr("class");n&&(n=n.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",n.length>0?n:null))}})),e.addAttributeFilter("data-mce-type",((e,t,r)=>{for(var n=e.length;n--;){var o=e[n];if("bookmark"===o.attr("data-mce-type")&&!r.cleanup){var a=K.from(o.firstChild).exists((e=>{var t;return!Go(null!==(t=e.value)&&void 0!==t?t:"")}));a?o.unwrap():o.remove()}}})),e.addNodeFilter("noscript",(e=>{for(var t,r=e.length;r--;){var n=e[r].firstChild;n&&(n.value=fi.decode(null!==(t=n.value)&&void 0!==t?t:""))}})),e.addNodeFilter("script,style",((e,r)=>{for(var n,o=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),a=e.length;a--;){var i=e[a],l=i.firstChild,s=null!==(n=null==l?void 0:l.value)&&void 0!==n?n:"";if("script"===r){var d=i.attr("type");d&&i.attr("type","mce-no/type"===d?null:d.replace(/^mce\-/,"")),"xhtml"===t.element_format&&l&&s.length>0&&(l.value="// <![CDATA[\n"+o(s)+"\n// ]]>")}else"xhtml"===t.element_format&&l&&s.length>0&&(l.value="\x3c!--\n"+o(s)+"\n--\x3e")}})),e.addNodeFilter("#comment",(e=>{for(var n=e.length;n--;){var o=e[n],a=o.value;t.preserve_cdata&&0===(null==a?void 0:a.indexOf("[CDATA["))?(o.name="#cdata",o.type=4,o.value=r.decode(a.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==a?void 0:a.indexOf("mce:protected "))&&(o.name="#text",o.type=3,o.raw=!0,o.value=unescape(a).substr(14))}})),e.addNodeFilter("xml:namespace,input",((e,t)=>{for(var r=e.length;r--;){var n=e[r];7===n.type?n.remove():1===n.type&&("input"!==t||n.attr("type")||n.attr("type","text"))}})),e.addAttributeFilter("data-mce-type",(t=>{te(t,(t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())}))})),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",((e,t)=>{for(var r=e.length;r--;)e[r].attr(t,null)})),t.remove_trailing_brs&&eC(t,e,e.schema)})(i,n,o);return{schema:a,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:function(e){var r=d({format:"html"},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),l=OS(t,e,r),s=((e,t,r)=>{var n=Yo(r.getInner?t.innerHTML:e.getOuterHTML(t));return r.selection||Uo(Er.fromDom(t))?n:zt.trim(n)})(o,l,r),c=((e,t,r)=>{var n=r.selection?d({forced_root_block:!1},r):r,o=e.parse(t,n);return(e=>{var t=e=>"br"===(null==e?void 0:e.name),r=e.lastChild;if(t(r)){var n=r.prev;t(n)&&(r.remove(),n.remove())}})(o),o})(i,s,r);return"tree"===r.format?c:BS(t,n,a,c,r)},addRules:a.addValidElements,setRules:a.setValidElements,addTempAttr:U(AS,i,r),getTempAttrs:I(r),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters,removeNodeFilter:i.removeNodeFilter,removeAttributeFilter:i.removeAttributeFilter}},LS=(e,t)=>{var r=PS(e,t);return{schema:r.schema,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:r.serialize,addRules:r.addRules,setRules:r.setRules,addTempAttr:r.addTempAttr,getTempAttrs:r.getTempAttrs,getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters,removeNodeFilter:r.removeNodeFilter,removeAttributeFilter:r.removeAttributeFilter}},MS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=((e,t)=>d(d({},e),{},{format:t,get:!0,getInner:!0}))(t,t.format?t.format:"html");return Pw(e,r).fold(F,(t=>{var r=((e,t)=>CS(e).editor.getContent(t))(e,t);return Lw(e,r,t)}))},IS=function(e,t){var r=((e,t)=>d(d({format:"html"},e),{},{set:!0,content:t}))(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t);return Mw(e,r).map((t=>{var r=((e,t,r)=>CS(e).editor.setContent(t,r))(e,t.content,t);return Iw(e,r.html,t),r.content})).getOr(t)},FS="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),jS="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),US="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),zS=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],HS=(e,t)=>{var r=oe(t,(t=>Be(e,t)));return ve(r)},$S=e=>{var t=HS(e,FS),r=e.forced_root_block;return!1!==r&&""!==r||t.push("forced_root_block (false only)"),ve(t)},WS=e=>HS(e,jS),qS=(e,t)=>{var r=zt.makeMap(e.plugins," "),n=oe(t,(e=>Be(r,e)));return ve(n)},VS=e=>qS(e,US),KS=e=>qS(e,zS.map((e=>e.name))),GS=e=>se(zS,(t=>t.name===e)).fold((()=>e),(t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e)),YS=(e,t)=>{((e,t)=>{var r=$S(e),n=VS(t),o=n.length>0,a=r.length>0,i="mobile"===t.theme;if(o||a||i){var l="\n- ",s=i?`\n\nThemes:${l}mobile`:"",d=o?`\n\nPlugins:${l}${n.join(l)}`:"",c=a?`\n\nOptions:${l}${r.join(l)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+s+d+c)}})(e,t),((e,t)=>{var r=WS(e),n=KS(t),o=n.length>0,a=r.length>0;if(o||a){var i="\n- ",l=o?`\n\nPlugins:${i}${n.map(GS).join(i)}`:"",s=a?`\n\nOptions:${i}${r.join(i)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+l+s)}})(e,t)},XS=Vi.DOM,QS=e=>K.from(e).each((e=>e.destroy())),JS=e=>{if(!e.removed){var t=e._selectionOverrides,r=e.editorUpload,n=e.getBody(),o=e.getElement();n&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&R(null==o?void 0:o.nextSibling)&&XS.remove(o.nextSibling),(e=>{e.dispatch("remove")})(e),e.editorManager.remove(e),!e.inline&&n&&(e=>{XS.setStyle(e.id,"display",e.orgDisplay)})(e),(e=>{e.dispatch("detach")})(e),XS.remove(e.getContainer()),QS(t),QS(r),e.destroy()}},ZS=(e,t)=>{var r=e.selection,n=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),QS(r),QS(n)),(e=>{var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),XS.unbind(t,"submit reset",e.formEventDelegate))})(e),(e=>{var t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;var r=e.selection;if(r){var n=r.dom;t.selection=r.win=r.dom=n.doc=null}})(e),e.destroyed=!0):e.remove())},ex=(()=>{var e={};return{add:(t,r)=>{e[t]=r},get:t=>e[t]?e[t]:{icons:{}},has:t=>Be(e,t)}})(),tx=el.ModelManager,rx=(e,t)=>t.dom[e],nx=(e,t)=>parseInt(pn(t,e),10),ox=U(rx,"clientWidth"),ax=U(rx,"clientHeight"),ix=U(nx,"margin-top"),lx=U(nx,"margin-left"),sx=(e,t,r)=>{var n,o=Er.fromDom(e.getBody()),a=e.inline?o:(n=o,Er.fromDom(Ar(n).dom.documentElement)),i=((e,t,r,n)=>{var o=(e=>e.dom.getBoundingClientRect())(t);return{x:r-(e?o.left+t.dom.clientLeft+lx(t):0),y:n-(e?o.top+t.dom.clientTop+ix(t):0)}})(e.inline,a,t,r);return((e,t,r)=>{var n=ox(e),o=ax(e);return t>=0&&r>=0&&t<=n&&r<=o})(a,i.x,i.y)},dx=e=>{var t,r=e.inline?e.getBody():e.getContentAreaContainer();return(t=r,K.from(t).map(Er.fromDom)).map(en).getOr(!1)},cx=e=>{var t=[],r=()=>{var t,r=e.theme;return r&&r.getNotificationManagerImpl?r.getNotificationManagerImpl():{open:t=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,getArgs:t}},n=()=>K.from(t[0]),o=()=>{te(t,(e=>{e.reposition()}))},a=e=>{de(t,(t=>t===e)).each((e=>{t.splice(e,1)}))},i=function(i){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.removed||!dx(e)?{}:(l&&e.dispatch("BeforeOpenNotification",{notification:i}),se(t,(e=>{return t=r().getArgs(e),n=i,!(t.type!==n.type||t.text!==n.text||t.progressBar||t.timeout||n.progressBar||n.timeout);var t,n})).getOrThunk((()=>{e.editorManager.setActive(e);var l=r().open(i,(()=>{a(l),o(),n().fold((()=>e.focus()),(e=>Ig(Er.fromDom(e.getEl()))))}));return(e=>{t.push(e)})(l),o(),e.dispatch("OpenNotification",{notification:d({},l)}),l})))},l=I(t);return(e=>{e.on("SkinLoaded",(()=>{var t=Ed(e);t&&i({text:t,type:"warning",timeout:0},!1),o()})),e.on("show ResizeEditor ResizeWindow NodeChange",(()=>{requestAnimationFrame(o)})),e.on("remove",(()=>{te(t.slice(),(e=>{r().close(e)}))}))})(e),{open:i,close:()=>{n().each((e=>{r().close(e),a(e),o()}))},getNotifications:l}},ux=el.PluginManager,mx=el.ThemeManager,fx=e=>{var t=[],r=()=>{var t,r=e.theme;return r&&r.getWindowManagerImpl?r.getWindowManagerImpl():{open:t=()=>{throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:t,alert:t,confirm:t,close:t}},n=(e,t)=>function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t?t.apply(e,n):void 0},o=r=>{t.push(r),(t=>{e.dispatch("OpenWindow",{dialog:t})})(r)},a=r=>{(t=>{e.dispatch("CloseWindow",{dialog:t})})(r),0===(t=oe(t,(e=>e!==r))).length&&e.focus()},i=t=>{e.editorManager.setActive(e),Kg(e),e.ui.show();var r=t();return o(r),r};return e.on("remove",(()=>{te(t,(e=>{r().close(e)}))})),{open:(e,t)=>i((()=>r().open(e,t,a))),openUrl:e=>i((()=>r().openUrl(e,a))),alert:(e,t,o)=>{var a=r();a.alert(e,n(o||a,t))},confirm:(e,t,o)=>{var a=r();a.confirm(e,n(o||a,t))},close:()=>{K.from(t[t.length-1]).each((e=>{r().close(e),a(e)}))}}},gx=(e,t)=>{e.notificationManager.open({type:"error",text:t})},px=(e,t)=>{e._skinLoaded?gx(e,t):e.on("SkinLoaded",(()=>{gx(e,t)}))},vx=(e,t,r)=>{Ef(e,t,{message:r}),console.error(r)},hx=(e,t,r)=>r?`Failed to load ${e}: ${r} from url ${t}`:`Failed to load ${e} url: ${t}`,bx=function(e){var t=window.console;if(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];t.error?t.error(e,...n):t.log(e,...n)}},yx=(e,t)=>{var r=e.editorManager.baseURL+"/skins/content",n=`content${e.editorManager.suffix}.css`;return ee(t,(t=>(e=>/^[a-z0-9\-]+$/i.test(e))(t)&&!e.inline?`${r}/${t}/${n}`:e.documentBaseURI.toAbsolute(t)))},Cx=e=>{e.contentCSS=e.contentCSS.concat((e=>yx(e,vd(e)))(e),(e=>yx(e,bd(e)))(e))},wx=(e,t)=>{var r={};return{findAll:function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,a=oe((e=>e?Ce(e.getElementsByTagName("img")):[])(n),(t=>{var r=t.src;return!t.hasAttribute("data-mce-bogus")&&(!t.hasAttribute("data-mce-placeholder")&&(!(!r||r===Ft.transparentSrc)&&(Je(r,"blob:")?!e.isUploaded(r)&&o(t):!!Je(r,"data:")&&o(t))))})),i=ee(a,(e=>{var n=e.src;if(Be(r,n))return r[n].then((t=>S(t)?t:{image:e,blobInfo:t.blobInfo}));var o=((e,t)=>{var r=()=>Promise.reject("Invalid data URI");if(Je(t,"blob:")){var n=e.getByUri(t);return R(n)?Promise.resolve(n):nC(t).then((t=>oC(t).then((n=>iC(n,!1,(r=>K.some(lC(e,t,r)))).getOrThunk(r)))))}return Je(t,"data:")?sC(e,t).fold(r,(e=>Promise.resolve(e))):Promise.reject("Unknown image data format")})(t,n).then((t=>(delete r[n],{image:e,blobInfo:t}))).catch((e=>(delete r[n],e)));return r[n]=o,o}));return Promise.all(i)}}},Sx=()=>{var e={},t=(e,t)=>({status:e,resultUri:t}),r=t=>t in e;return{hasBlobUri:r,getResultUri:t=>{var r=e[t];return r?r.resultUri:null},isPending:t=>!!r(t)&&1===e[t].status,isUploaded:t=>!!r(t)&&2===e[t].status,markPending:r=>{e[r]=t(1,null)},markUploaded:(r,n)=>{e[r]=t(2,n)},removeFailed:t=>{delete e[t]},destroy:()=>{e={}}}},xx=0,kx=e=>{return e+xx+++(t=()=>Math.round(4294967295*Math.random()).toString(36),"s"+(new Date).getTime().toString(36)+t()+t()+t());var t},Ex=(e,t)=>{var r={},n=(e,r)=>new Promise(((n,o)=>{var a=new XMLHttpRequest;a.open("POST",t.url),a.withCredentials=t.credentials,a.upload.onprogress=e=>{r(e.loaded/e.total*100)},a.onerror=()=>{o("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=()=>{if(a.status<200||a.status>=300)o("HTTP Error: "+a.status);else{var e,r,i=JSON.parse(a.responseText);if(i&&S(i.location))n((e=t.basePath,r=i.location,e?e.replace(/\/$/,"")+"/"+r.replace(/^\//,""):r));else o("Invalid JSON: "+a.responseText)}};var i=new FormData;i.append("file",e.blob(),e.filename()),a.send(i)})),o=O(t.handler)?t.handler:n,a=(e,t)=>({url:t,blobInfo:e,status:!0}),i=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),l=(e,t)=>{zt.each(r[e],(e=>{e(t)})),delete r[e]},s=(t,r,n)=>(e.markPending(t.blobUri()),new Promise((o=>{var s;try{var d=()=>{s&&(s.close(),P)};r(t,(e=>{e<0||e>100||K.from(s).orThunk((()=>K.from(n).map($))).each((t=>{s=t,t.progressBar.value(e)}))})).then((r=>{d(),e.markUploaded(t.blobUri(),r),l(t.blobUri(),a(t,r)),o(a(t,r))}),(r=>{(r=>{d(),e.removeFailed(t.blobUri()),l(t.blobUri(),i(t,r)),o(i(t,r))})(S(r)?{message:r}:r)}))}catch(e){o(i(t,e))}}))),d=(t,n)=>(t=zt.grep(t,(t=>!e.isUploaded(t.blobUri()))),Promise.all(zt.map(t,(t=>e.isPending(t.blobUri())?(e=>{var t=e.blobUri();return new Promise((e=>{r[t]=r[t]||[],r[t].push(e)}))})(t):s(t,o,n)))));return{upload:(e,r)=>t.url||o!==n?d(e,r):new Promise((e=>{e([])}))}},Nx=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),_x=(e,t)=>Ex(t,{url:id(e),basePath:ld(e),credentials:sd(e),handler:dd(e)}),Tx=e=>t=>{((e,t)=>e.dom.isEmpty(t.dom)&&R(e.schema.getTextBlockElements()[Qt(t)]))(e,t)&&xn(t,Er.fromHtml('<br data-mce-bogus="1" />'))},Dx=e=>{var t,r,n=(()=>{var e=[],t=e=>{if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var t,r=e.id||kx("blobid"),n=e.name||r,o=e.blob;return{id:I(r),name:I(n),filename:I(e.filename||n+"."+(t=o.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[t.toLowerCase()]||"dat")),blob:I(o),base64:I(e.base64),blobUri:I(e.blobUri||URL.createObjectURL(o)),uri:I(e.uri)}},r=t=>se(e,t).getOrUndefined(),n=e=>r((t=>t.id()===e));return{create:(e,r,n,o,a)=>{if(S(e))return t({id:e,name:o,filename:a,blob:r,base64:n});if(x(e))return t(e);throw new Error("Unknown input type")},add:t=>{n(t.id())||e.push(t)},get:n,getByUri:e=>r((t=>t.blobUri()===e)),getByData:(e,t)=>r((r=>r.base64()===e&&r.blob().type===t)),findFirst:r,removeByUri:t=>{e=oe(e,(e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1)))},destroy:()=>{te(e,(e=>{URL.revokeObjectURL(e.blobUri())})),e=[]}}})(),o=Sx(),a=[],i=t=>r=>e.selection?t(r):[],l=(e,t,r)=>{var n=0;do{-1!==(n=e.indexOf(t,n))&&(e=e.substring(0,n)+r+e.substr(n+t.length),n+=r.length-t.length+1)}while(-1!==n);return e},s=(e,t,r)=>{var n=`src="${r}"${r===Ft.transparentSrc?' data-mce-placeholder="1"':""}`;return e=l(e,`src="${t}"`,n),e=l(e,'data-mce-src="'+t+'"','data-mce-src="'+r+'"')},d=(t,r)=>{te(e.undoManager.data,(e=>{"fragmented"===e.type?e.fragments=ee(e.fragments,(e=>s(e,t,r))):e.content=s(e.content,t,r)}))},c=()=>(t||(t=_x(e,o)),f().then(i((r=>{var o=ee(r,(e=>e.blobInfo));return t.upload(o,Nx(e)).then(i((t=>{var o=[],a=!1,i=ee(t,((t,i)=>{var l=r[i],s=l.blobInfo,c=l.image,u=!1;return t.status&&nd(e)?(t.url&&!Qe(c.src,t.url)&&(a=!0),n.removeByUri(c.src),bS(e)||((t,r)=>{var n,o=e.convertURL(r,"src");d(t.src,r),sr(Er.fromDom(t),{src:rd(e)?(n=r,n+(-1===n.indexOf("?")?"?":"&")+(new Date).getTime()):r,"data-mce-src":o})})(c,t.url)):t.error&&(t.error.remove&&(d(c.src,Ft.transparentSrc),o.push(c),u=!0),((e,t)=>{px(e,Zi.translate(["Failed to upload image: {0}",t]))})(e,t.error.message)),{element:c,status:t.status,uploadUri:t.url,blobInfo:s,removed:u}}));return o.length>0&&!bS(e)?e.undoManager.transact((()=>{te(Dn(o),(t=>{var r=Pr(t);_n(t),r.each(Tx(e)),n.removeByUri(t.dom.src)}))})):a&&e.undoManager.dispatchChange(),i})))})))),u=()=>td(e)?c():Promise.resolve([]),m=e=>me(a,(t=>t(e))),f=()=>(r||(r=wx(o,n)),r.findAll(e.getBody(),m).then(i((t=>{var r=oe(t,(t=>S(t)?(px(e,t),!1):"blob"!==t.uriType));return bS(e)||te(r,(e=>{d(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")})),r})))),g=t=>t.replace(/src="(blob:[^"]+)"/g,((t,r)=>{var a=o.getResultUri(r);if(a)return'src="'+a+'"';var i=n.getByUri(r);return i||(i=ie(e.editorManager.get(),((e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r)),void 0)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':t}));return e.on("SetContent",(()=>{td(e)?u():f()})),e.on("RawSaveContent",(e=>{e.content=g(e.content)})),e.on("GetContent",(e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=g(e.content))})),e.on("PostRender",(()=>{e.parser.addNodeFilter("img",(e=>{te(e,(e=>{var t=e.attr("src");if(t&&!n.getByUri(t)){var r=o.getResultUri(t);r&&e.attr("src",r)}}))}))})),{blobCache:n,addFilter:e=>{a.push(e)},uploadImages:c,uploadImagesAuto:u,scanForImages:f,destroy:()=>{n.destroy(),o.destroy(),r=t=null}}},Rx={remove_similar:!0,inherit:!1},Ox=d({selector:"td,th"},Rx),Ax={tablecellbackgroundcolor:d({styles:{backgroundColor:"%value"}},Ox),tablecellverticalalign:d({styles:{"vertical-align":"%value"}},Ox),tablecellbordercolor:d({styles:{borderColor:"%value"}},Ox),tablecellclass:d({classes:["%value"]},Ox),tableclass:d({selector:"table",classes:["%value"]},Rx),tablecellborderstyle:d({styles:{borderStyle:"%value"}},Ox),tablecellborderwidth:d({styles:{borderWidth:"%value"}},Ox)},Bx=I(Ax),Px=e=>{var t={},r=(e,n)=>{e&&(S(e)?(E(n)||(n=[n]),te(n,(e=>{T(e.deep)&&(e.deep=!Ym(e)),T(e.split)&&(e.split=!Ym(e)||Xm(e)),T(e.remove)&&Ym(e)&&!Xm(e)&&(e.remove="none"),Ym(e)&&Xm(e)&&(e.mixed=!0,e.block_expand=!0),S(e.classes)&&(e.classes=e.classes.split(/\s+/))})),t[e]=n):ke(e,((e,t)=>{r(t,e)})))};return r((e=>{var t,r,n,o=e.dom,a=e.schema.type,i={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{o.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{o.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(t={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},n={inline:"s",remove:"all",preserve_attributes:["class","style"]},"html4"!==a?[n,t,r]:[t,n,r]),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,r)=>Jn(e)&&e.hasAttribute("href"),onformat:(e,t,r)=>{zt.each(r,((t,r)=>{o.setAttrib(e,r,t)}))}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var t;return null!==(t=null==e?void 0:e.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return zt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),(e=>{i[e]={block:e,remove:"all"}})),i})(e)),r(Bx()),r(Od(e)),{get:e=>R(e)?t[e]:t,has:e=>Be(t,e),register:r,unregister:e=>(e&&t[e]&&delete t[e],t)}},Lx=zt.each,Mx=Vi.DOM,Ix=e=>R(e)&&x(e),Fx=(e,t)=>{var r=t&&t.schema||Ei({}),n=e=>{var t=S(e)?{name:e,classes:[],attrs:{}}:e,r=Mx.create(t.name);return((e,t)=>{t.classes.length>0&&Mx.addClass(e,t.classes.join(" ")),Mx.setAttribs(e,t.attrs)})(r,t),r},o=(e,t,a)=>{var i,l=t[0],s=Ix(l)?l.name:void 0,d=((e,t)=>{var n=r.getElementRule(e.nodeName.toLowerCase()),o=null==n?void 0:n.parentsRequired;return!(!o||!o.length)&&(t&&J(o,t)?t:o[0])})(e,s);if(d)s===d?(i=l,t=t.slice(1)):i=d;else if(l)i=l,t=t.slice(1);else if(!a)return e;var c=i?n(i):Mx.create("div");c.appendChild(e),a&&zt.each(a,(t=>{var r=n(t);c.insertBefore(r,e)}));var u=Ix(i)?i.siblings:void 0;return o(c,t,u)},a=Mx.create("div");if(e.length>0){var i=e[0],l=n(i),s=Ix(i)?i.siblings:void 0;a.appendChild(o(l,e.slice(1),s))}return a},jx=e=>{var t="div",r={name:t,classes:[],attrs:{},selector:e=zt.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,((e,t,n,o,a)=>{switch(t){case"#":r.attrs.id=n;break;case".":r.classes.push(n);break;case":":-1!==zt.inArray("checked disabled enabled read-only required".split(" "),n)&&(r.attrs[n]=n)}if("["===o){var i=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);i&&(r.attrs[i[1]]=i[2])}return""}))),r.name=t||"div",r},Ux=(e,t)=>{var r="",n=Ad(e);if(""===n)return"";var o=e=>S(e)?e.replace(/%(\w+)/g,""):"",a=(t,r)=>Mx.getStyle(null!=r?r:e.getBody(),t,!0);if(S(t)){var i=e.formatter.get(t);if(!i)return"";t=i[0]}if("preview"in t){var l=t.preview;if(!1===l)return"";n=l||n}var s,d,c=t.block||t.inline||"span",u=(d=t.selector,S(d)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),zt.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),(e=>{var t=zt.map(e.split(/(?:~\+|~|\+)/),jx),r=t.pop();return t.length&&(r.siblings=t),r})).reverse()):[]);u.length>0?(u[0].name||(u[0].name=c),c=t.selector,s=Fx(u,e)):s=Fx([c],e);var m=Mx.select(c,s)[0]||s.firstChild;Lx(t.styles,((e,t)=>{var r=o(e);r&&Mx.setStyle(m,t,r)})),Lx(t.attributes,((e,t)=>{var r=o(e);r&&Mx.setAttrib(m,t,r)})),Lx(t.classes,(e=>{var t=o(e);Mx.hasClass(m,t)||Mx.addClass(m,t)})),e.dispatch("PreviewFormats"),Mx.setStyles(s,{position:"absolute",left:-65535}),e.getBody().appendChild(s);var f=a("fontSize"),g=/px$/.test(f)?parseInt(f,10):0;return Lx(n.split(" "),(e=>{var t=a(e,m);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=a(e),"#ffffff"===hm(t).toLowerCase())||"color"===e&&"#000000"===hm(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===g)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*g+"px"}"border"===e&&t&&(r+="padding:0 2px;"),r+=e+":"+t+";"}})),e.dispatch("AfterPreviewFormats"),Mx.remove(s),r},zx=e=>{var t=Px(e),r=Yi({});return(e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),Qb(e),bS(e)||((e,t)=>{e.set({}),t.on("NodeChange",(r=>{Gy(t,r.element,e.get())})),t.on("FormatApply FormatRemove",(r=>{var n=K.from(r.node).map((e=>Rm(e)?e:e.startContainer)).bind((e=>Jn(e)?K.some(e):K.from(e.parentElement))).getOrThunk((()=>qy(t)));Gy(t,n,e.get())}))})(r,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(t,r,n)=>{((e,t,r,n)=>{wS(e).formatter.apply(t,r,n)})(e,t,r,n)},remove:(t,r,n,o)=>{((e,t,r,n,o)=>{wS(e).formatter.remove(t,r,n,o)})(e,t,r,n,o)},toggle:(t,r,n)=>{((e,t,r,n)=>{wS(e).formatter.toggle(t,r,n)})(e,t,r,n)},match:(t,r,n,o)=>((e,t,r,n,o)=>wS(e).formatter.match(t,r,n,o))(e,t,r,n,o),closest:t=>((e,t)=>wS(e).formatter.closest(t))(e,t),matchAll:(t,r)=>((e,t,r)=>wS(e).formatter.matchAll(t,r))(e,t,r),matchNode:(t,r,n,o)=>((e,t,r,n,o)=>wS(e).formatter.matchNode(t,r,n,o))(e,t,r,n,o),canApply:t=>((e,t)=>wS(e).formatter.canApply(t))(e,t),formatChanged:(t,n,o,a)=>((e,t,r,n,o,a)=>wS(e).formatter.formatChanged(t,r,n,o,a))(e,r,t,n,o,a),getCssText:U(Ux,e)}},Hx=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},$x=e=>{var t=tl(),r=Yi(0),n=Yi(0),o={data:[],typing:!1,beforeChange:()=>{((e,t,r)=>{wS(e).undoManager.beforeChange(t,r)})(e,r,t)},add:(a,i)=>((e,t,r,n,o,a,i)=>wS(e).undoManager.add(t,r,n,o,a,i))(e,o,n,r,t,a,i),dispatchChange:()=>{e.setDirty(!0);var t=dS(e);t.bookmark=Ss(e.selection),e.dispatch("change",{level:t,lastLevel:he(o.data,n.get()).getOrUndefined()})},undo:()=>((e,t,r,n)=>wS(e).undoManager.undo(t,r,n))(e,o,r,n),redo:()=>((e,t,r)=>wS(e).undoManager.redo(t,r))(e,n,o.data),clear:()=>{((e,t,r)=>{wS(e).undoManager.clear(t,r)})(e,o,n)},reset:()=>{((e,t)=>{wS(e).undoManager.reset(t)})(e,o)},hasUndo:()=>((e,t,r)=>wS(e).undoManager.hasUndo(t,r))(e,o,n),hasRedo:()=>((e,t,r)=>wS(e).undoManager.hasRedo(t,r))(e,o,n),transact:t=>((e,t,r,n)=>wS(e).undoManager.transact(t,r,n))(e,o,r,t),ignore:t=>{((e,t,r)=>{wS(e).undoManager.ignore(t,r)})(e,r,t)},extra:(t,r)=>{((e,t,r,n,o)=>{wS(e).undoManager.extra(t,r,n,o)})(e,o,n,t,r)}};return bS(e)||((e,t,r)=>{var n=Yi(!1),o=e=>{pS(t,!1,r),t.add({},e)};e.on("init",(()=>{t.add()})),e.on("BeforeExecCommand",(e=>{var n=e.command;Hx(n)||(vS(t,r),t.beforeChange())})),e.on("ExecCommand",(e=>{var t=e.command;Hx(t)||o(e)})),e.on("ObjectResizeStart cut",(()=>{t.beforeChange()})),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",(r=>{var a=r.keyCode;if(!r.isDefaultPrevented()){var i=Ft.os.isMacOS()&&"Meta"===r.key;(a>=33&&a<=36||a>=37&&a<=40||45===a||r.ctrlKey||i)&&(o(),e.nodeChanged()),46!==a&&8!==a||e.nodeChanged(),n.get()&&t.typing&&!fS(dS(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),n.set(!1),e.nodeChanged())}})),e.on("keydown",(e=>{var a=e.keyCode;if(!e.isDefaultPrevented())if(a>=33&&a<=36||a>=37&&a<=40||45===a)t.typing&&o(e);else{var i=e.ctrlKey&&!e.altKey||e.metaKey;if((a<16||a>20)&&224!==a&&91!==a&&!t.typing&&!i)return t.beforeChange(),pS(t,!0,r),t.add({},e),void n.set(!0);(Ft.os.isMacOS()?e.metaKey:e.ctrlKey&&!e.altKey)&&t.beforeChange()}})),e.on("mousedown",(e=>{t.typing&&o(e)})),e.on("input",(e=>{var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||(e=>"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)(e))&&o(e)})),e.on("AddUndo Undo Redo ClearUndos",(t=>{t.isDefaultPrevented()||e.nodeChanged()}))})(e,o,r),(e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")})(e),o},Wx=[9,27,Of.HOME,Of.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Of.DOWN,Of.UP,Of.LEFT,Of.RIGHT].concat(Ft.browser.isFirefox()?[224]:[]),qx="data-mce-placeholder",Vx=e=>"keydown"===e.type||"keyup"===e.type,Kx=e=>{var t=e.keyCode;return t===Of.BACKSPACE||t===Of.DELETE},Gx=e=>{var t,r=e.dom,n=Gs(e),o=null!==(t=xd(e))&&void 0!==t?t:"",a=(t,i)=>{if(!(e=>{if(Vx(e)){var t=e.keyCode;return!Kx(e)&&(Of.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||J(Wx,t))}return!1})(t)){var l=e.getBody(),s=!(e=>Vx(e)&&!(Kx(e)||"keyup"===e.type&&229===e.keyCode))(t)&&((e,t,r)=>{if(Da(Er.fromDom(t),!1)){var n=t.firstElementChild;return!n||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&r===n.nodeName.toLowerCase()}return!1})(r,l,n);(""!==r.getAttrib(l,qx)!==s||i)&&(r.setAttrib(l,qx,s?o:null),r.setAttrib(l,"aria-placeholder",s?o:null),((e,t)=>{e.dispatch("PlaceholderToggle",{state:t})})(e,s),e.on(s?"keydown":"keyup",a),e.off(s?"keyup":"keydown",a))}};ot(o)&&e.on("init",(t=>{a(t,!0),e.on("change SetContent ExecCommand",a),e.on("paste",(t=>Xg.setEditorTimeout(e,(()=>a(t)))))}))},Yx=(e,t)=>({from:e,to:t}),Xx=(e,t)=>{var r=Er.fromDom(e),n=Er.fromDom(t.container());return yh(r,n).map((e=>((e,t)=>({block:e,position:t}))(e,t)))},Qx=(e,t)=>nn(t,(e=>jo(e)||vo(e.dom)),(t=>Dr(t,e))).filter(tr).getOr(e),Jx=(e,t,r)=>{var n=Xx(e,es.fromRangeStart(r)),o=n.bind((r=>Iu(t,e,r.position).bind((r=>Xx(e,r).map((r=>((e,t,r)=>go(r.position.getNode())&&!Da(r.block)?Uu(!1,r.block.dom).bind((n=>n.isEqual(r.position)?Iu(t,e,n).bind((t=>Xx(e,t))):K.some(r))).getOr(r):r)(e,t,r)))))));return Wt(n,o,Yx).filter((t=>(e=>!Dr(e.from.block,e.to.block))(t)&&((e,t)=>{var r=Er.fromDom(e);return Dr(Qx(r,t.from.block),Qx(r,t.to.block))})(e,t)&&(e=>!1===ho(e.from.block.dom)&&!1===ho(e.to.block.dom))(t)&&(e=>{var t=e=>Lo(e)||Fa(e.dom);return t(e.from.block)&&t(e.to.block)})(t)))},Zx=e=>{var t=(e=>{var t=zr(e);return de(t,Ao).fold(I(t),(e=>t.slice(0,e)))})(e);return te(t,_n),t},ek=(e,t)=>{var r=vv(t,e);return se(r.reverse(),(e=>Da(e))).each(_n)},tk=(e,t,r,n)=>{if(Da(r))return qo(r),$u(r.dom);0===oe(jr(n),(e=>!Da(e))).length&&Da(t)&&Cn(n,Er.fromTag("br"));var o=Hu(r.dom,es.before(n.dom));return te(Zx(t),(e=>{Cn(n,e)})),ek(e,t),o},rk=(e,t,r)=>{if(Da(r)){if(Da(t)){var n=ae((o=(e,t)=>$r(e).fold((()=>t),(e=>Bo(e)?o(e,t.concat(Cl(e))):t)),o(r,[])),((e,t)=>(kn(e,t),t)),Wo());Nn(t),xn(t,n)}return _n(r),$u(t.dom)}var o,a=Wu(r.dom);return te(Zx(t),(e=>{xn(r,e)})),ek(e,t),a},nk=(e,t)=>Rr(t,e)?((e,t)=>{var r=vv(t,e);return K.from(r[r.length-1])})(t,e):K.none(),ok=(e,t)=>{Uu(e,t.dom).bind((e=>K.from(e.getNode()))).map(Er.fromDom).filter(Po).each(_n)},ak=(e,t,r)=>(ok(!0,t),ok(!1,r),nk(t,r).fold(U(rk,e,t,r),U(tk,e,t,r))),ik=(e,t,r,n)=>t?ak(e,n,r):ak(e,r,n),lk=(e,t)=>{var r=Er.fromDom(e.getBody()),n=((e,t,r)=>r.collapsed?Jx(e,t,r):K.none())(r.dom,t,e.selection.getRng()).map((n=>()=>{ik(r,t,n.from.block,n.to.block).each((t=>{e.selection.setRng(t.toRange())}))}));return n},sk=(e,t)=>{var r=Er.fromDom(t),n=U(Dr,e);return rn(r,jo,n).isSome()},dk=(e,t)=>{var r=Hu(e.dom,es.fromRangeStart(t)).isNone(),n=zu(e.dom,es.fromRangeEnd(t)).isNone();return!((e,t)=>sk(e,t.startContainer)||sk(e,t.endContainer))(e,t)&&r&&n},ck=e=>{var t=Er.fromDom(e.getBody()),r=e.selection.getRng();return dk(t,r)?(e=>K.some((()=>{e.setContent(""),e.selection.setCursorLocation()})))(e):((e,t)=>{var r=t.getRng();return Wt(yh(e,Er.fromDom(r.startContainer)),yh(e,Er.fromDom(r.endContainer)),((n,o)=>Dr(n,o)?K.none():K.some((()=>{r.deleteContents(),ik(e,!0,n,o).each((e=>{t.setRng(e.toRange())}))})))).getOr(K.none())})(t,e.selection)},uk=(e,t)=>e.selection.isCollapsed()?K.none():ck(e),mk=(e,t,r,n,o)=>K.from(t._selectionOverrides.showCaret(e,r,n,o)),fk=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?K.none():K.some((e=>{var t=e.ownerDocument.createRange();return t.selectNode(e),t})(t)),gk=(e,t,r)=>t.collapsed?((e,t,r)=>{var n=pu(1,e.getBody(),t),o=es.fromRangeStart(n),a=o.getNode();if(Vc(a))return mk(1,e,a,!o.isAtEnd(),!1);var i=o.getNode(!0);if(Vc(i))return mk(1,e,i,!1,!1);var l=Zh(e.dom.getRoot(),o.getNode());return Vc(l)?mk(1,e,l,!1,r):K.none()})(e,t,r).getOr(t):t,pk=e=>fv(e)||dv(e),vk=e=>gv(e)||cv(e),hk=(e,t,r,n,o,a)=>{mk(n,e,a.getNode(!o),o,!0).each((r=>{if(t.collapsed){var n=t.cloneRange();o?n.setEnd(r.startContainer,r.startOffset):n.setStart(r.endContainer,r.endOffset),n.deleteContents()}else t.deleteContents();e.selection.setRng(r)})),((e,t)=>{lo(t)&&0===t.data.length&&e.remove(t)})(e.dom,r)},bk=(e,t)=>((e,t)=>{var r=e.selection.getRng();if(!lo(r.commonAncestorContainer))return K.none();var n=t?_s.Forwards:_s.Backwards,o=Au(e.getBody()),a=U(yu,t?o.next:o.prev),i=t?pk:vk,l=hu(n,e.getBody(),r),s=a(l),d=s?fh(t,s):s;if(!d||!Cu(l,d))return K.none();if(i(d))return K.some((()=>hk(e,r,l.getNode(),n,t,d)));var c=a(d);return c&&i(c)&&Cu(d,c)?K.some((()=>hk(e,r,l.getNode(),n,t,c))):K.none()})(e,t),yk=(e,t)=>{var r=e.getBody();return t?$u(r).filter(fv):Wu(r).filter(gv)},Ck=e=>{var t=e.selection.getRng();return!t.collapsed&&(yk(e,!0).exists((e=>e.isEqual(es.fromRangeStart(t))))||yk(e,!1).exists((e=>e.isEqual(es.fromRangeEnd(t)))))},wk=Ns([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Sk=(e,t,r,n)=>{var o=n.getNode(!t);return yh(Er.fromDom(e),Er.fromDom(r.getNode())).map((e=>Da(e)?wk.remove(e.dom):wk.moveToElement(o))).orThunk((()=>K.some(wk.moveToElement(o))))},xk=(e,t,r)=>Iu(t,e,r).bind((n=>{return o=n.getNode(),R(o)&&(jo(Er.fromDom(o))||Io(Er.fromDom(o)))||((e,t,r,n)=>{var o=t=>Bo(Er.fromDom(t))&&!su(r,n,e);return vu(!t,r).fold((()=>vu(t,n).fold(q,o)),o)})(e,t,r,n)?K.none():t&&ho(n.getNode())||!t&&ho(n.getNode(!0))?Sk(e,t,r,n):t&&gv(r)||!t&&fv(r)?K.some(wk.moveToPosition(n)):K.none();var o})),kk=(e,t,r)=>((e,t)=>{var r=t.getNode(!e),n=e?"after":"before";return Jn(r)&&r.getAttribute("data-mce-caret")===n})(t,r)?((e,t)=>D(t)?K.none():e&&ho(t.nextSibling)?K.some(wk.moveToElement(t.nextSibling)):!e&&ho(t.previousSibling)?K.some(wk.moveToElement(t.previousSibling)):K.none())(t,r.getNode(!t)).orThunk((()=>xk(e,t,r))):xk(e,t,r).bind((t=>((e,t,r)=>r.fold((e=>K.some(wk.remove(e))),(e=>K.some(wk.moveToElement(e))),(r=>su(t,r,e)?K.none():K.some(wk.moveToPosition(r)))))(e,r,t))),Ek=(e,t)=>K.from(Zh(e.getBody(),t)),Nk=(e,t)=>{var r=e.selection.getNode();return Ek(e,r).filter(ho).fold((()=>((e,t,r)=>{var n=pu(t?1:-1,e,r),o=es.fromRangeStart(n),a=Er.fromDom(e);return!t&&gv(o)?K.some(wk.remove(o.getNode(!0))):t&&fv(o)?K.some(wk.remove(o.getNode())):!t&&fv(o)&&Tv(a,o)?Dv(a,o).map((e=>wk.remove(e.getNode()))):t&&gv(o)&&_v(a,o)?Rv(a,o).map((e=>wk.remove(e.getNode()))):kk(e,t,o)})(e.getBody(),t,e.selection.getRng()).map((r=>()=>r.fold(((e,t)=>r=>(e._selectionOverrides.hideFakeCaret(),sh(e,t,Er.fromDom(r)),!0))(e,t),((e,t)=>r=>{var n=t?es.before(r):es.after(r);return e.selection.setRng(n.toRange()),!0})(e,t),(e=>t=>(e.selection.setRng(t.toRange()),!0))(e))))),(()=>K.some(P)))},_k=(e,t)=>{var r=e.selection.getNode();return ho(r)&&!bo(r)?Ek(e,r.parentNode).filter(ho).fold((()=>K.some((()=>{var r;r=Er.fromDom(e.getBody()),te(qn(r,".mce-offscreen-selection"),_n),sh(e,t,Er.fromDom(e.selection.getNode())),Ch(e)}))),(()=>K.some(P))):Ck(e)?K.some((()=>{xh(e,e.selection.getRng(),Er.fromDom(e.getBody()))})):K.none()},Tk=e=>{var t=e.dom,r=e.selection,n=Zh(e.getBody(),r.getNode());if(vo(n)&&t.isBlock(n)&&t.isEmpty(n)){var o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(n,""),n.appendChild(o),r.setRng(es.before(o).toRange())}return!0},Dk=(e,t)=>e.selection.isCollapsed()?Nk(e,t):_k(e,t),Rk=(e,t)=>e.selection.isCollapsed()?((e,t)=>{var r=es.fromRangeStart(e.selection.getRng());return Iu(t,e.getBody(),r).filter((e=>t?lv(e):sv(e))).bind((e=>du(t?0:-1,e))).map((t=>()=>e.selection.select(t)))})(e,t):K.none(),Ok=lo,Ak=e=>Ok(e)&&e.data[0]===Ko,Bk=e=>Ok(e)&&e.data[e.data.length-1]===Ko,Pk=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(Ko)},Lk=(e,t)=>e?(e=>{var t;if(Ok(e.previousSibling))return Bk(e.previousSibling)||e.previousSibling.appendData(Ko),e.previousSibling;if(Ok(e))return Ak(e)||e.insertData(0,Ko),e;var r=Pk(e);return null===(t=e.parentNode)||void 0===t||t.insertBefore(r,e),r})(t):(e=>{var t,r;if(Ok(e.nextSibling))return Ak(e.nextSibling)||e.nextSibling.insertData(0,Ko),e.nextSibling;if(Ok(e))return Bk(e)||e.appendData(Ko),e;var n=Pk(e);return e.nextSibling?null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e.nextSibling):null===(r=e.parentNode)||void 0===r||r.appendChild(n),n})(t),Mk=U(Lk,!0),Ik=U(Lk,!1),Fk=(e,t)=>lo(e.container())?Lk(t,e.container()):Lk(t,e.getNode()),jk=(e,t)=>{var r=t.get();return r&&e.container()===r&&Zo(r)},Uk=(e,t)=>t.fold((t=>{jc(e.get());var r=Mk(t);return e.set(r),K.some(es(r,r.length-1))}),(t=>$u(t).map((t=>{if(jk(t,e)){var r=e.get();return es(r,1)}jc(e.get());var n=Fk(t,!0);return e.set(n),es(n,1)}))),(t=>Wu(t).map((t=>{if(jk(t,e)){var r=e.get();return es(r,r.length-1)}jc(e.get());var n=Fk(t,!1);return e.set(n),es(n,n.length-1)}))),(t=>{jc(e.get());var r=Ik(t);return e.set(r),K.some(es(r,1))})),zk=(e,t)=>{for(var r=0;r<e.length;r++){var n=e[r].apply(null,t);if(n.isSome())return n}return K.none()},Hk=Ns([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),$k=(e,t)=>{var r=lu(t,e);return r||e},Wk=(e,t,r)=>{var n=gh(r),o=$k(t,n.container());return mh(e,o,n).fold((()=>zu(o,n).bind(U(mh,e,o)).map((e=>Hk.before(e)))),K.none)},qk=(e,t)=>null===Ku(e,t),Vk=(e,t,r)=>mh(e,t,r).filter(U(qk,t)),Kk=(e,t,r)=>{var n=ph(r);return Vk(e,t,n).bind((e=>Hu(e,n).isNone()?K.some(Hk.start(e)):K.none()))},Gk=(e,t,r)=>{var n=gh(r);return Vk(e,t,n).bind((e=>zu(e,n).isNone()?K.some(Hk.end(e)):K.none()))},Yk=(e,t,r)=>{var n=ph(r),o=$k(t,n.container());return mh(e,o,n).fold((()=>Hu(o,n).bind(U(mh,e,o)).map((e=>Hk.after(e)))),K.none)},Xk=e=>!uh(Jk(e)),Qk=(e,t,r)=>zk([Wk,Kk,Gk,Yk],[e,t,r]).filter(Xk),Jk=e=>e.fold(F,F,F,F),Zk=e=>e.fold(I("before"),I("start"),I("end"),I("after")),eE=e=>e.fold(Hk.before,Hk.before,Hk.after,Hk.after),tE=e=>e.fold(Hk.start,Hk.start,Hk.end,Hk.end),rE=(e,t,r,n,o,a)=>Wt(mh(t,r,n),mh(t,r,o),((t,n)=>t!==n&&((e,t,r)=>{var n=lu(t,e),o=lu(r,e);return R(n)&&n===o})(r,t,n)?Hk.after(e?t:n):a)).getOr(a),nE=(e,t)=>e.fold(V,(e=>{return n=t,!(Zk(r=e)===Zk(n)&&Jk(r)===Jk(n));var r,n})),oE=(e,t)=>e?t.fold(L(K.some,Hk.start),K.none,L(K.some,Hk.after),K.none):t.fold(K.none,L(K.some,Hk.before),K.none,L(K.some,Hk.end)),aE=(e,t,r,n)=>{var o=fh(e,n),a=Qk(t,r,o);return Qk(t,r,o).bind(U(oE,e)).orThunk((()=>((e,t,r,n,o)=>{var a=fh(e,o);return Iu(e,r,a).map(U(fh,e)).fold((()=>n.map(eE)),(o=>Qk(t,r,o).map(U(rE,e,t,r,a,o)).filter(U(nE,n)))).filter(Xk)})(e,t,r,a,n)))},iE=(e,t,r)=>{var n=e?1:-1;return t.setRng(es(r.container(),r.offset()+n).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},lE=(e,t)=>{var r=t.selection.getRng(),n=e?es.fromRangeEnd(r):es.fromRangeStart(r);return!!(e=>O(e.selection.getSel().modify))(t)&&(e&&ra(n)?iE(!0,t.selection,n):!(e||!na(n))&&iE(!1,t.selection,n))};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(bw||(bw={}));var sE,dE=(e,t)=>e===_s.Backwards?fe(t):t,cE=(e,t,r)=>e===_s.Forwards?t.next(r):t.prev(r),uE=(e,t,r,n)=>go(n.getNode(t===_s.Forwards))?bw.Br:!1===su(r,n)?bw.Block:bw.Wrap,mE=(e,t,r,n)=>{for(var o=Au(r),a=n,i=[];a;){var l=cE(t,o,a);if(!l)break;if(go(l.getNode(!1)))return t===_s.Forwards?{positions:dE(t,i).concat([l]),breakType:bw.Br,breakAt:K.some(l)}:{positions:dE(t,i),breakType:bw.Br,breakAt:K.some(l)};if(l.isVisible()){if(e(a,l)){var s=uE(0,t,a,l);return{positions:dE(t,i),breakType:s,breakAt:K.some(l)}}i.push(l),a=l}else a=l}return{positions:dE(t,i),breakType:bw.Eol,breakAt:K.none()}},fE=(e,t,r,n)=>t(r,n).breakAt.map((n=>{var o=t(r,n).positions;return e===_s.Backwards?o.concat(n):[n].concat(o)})).getOr([]),gE=(e,t)=>ie(e,((e,r)=>e.fold((()=>K.some(r)),(n=>Wt(be(n.getClientRects()),be(r.getClientRects()),((e,o)=>{var a=Math.abs(t-e.left);return Math.abs(t-o.left)<=a?r:n})).or(e)))),K.none()),pE=(e,t)=>be(t.getClientRects()).bind((t=>gE(e,t.left))),vE=U(mE,es.isAbove,-1),hE=U(mE,es.isBelow,1),bE=U(fE,-1,vE),yE=U(fE,1,hE),CE=(e,t)=>vE(e,t).breakAt.isNone(),wE=(e,t)=>hE(e,t).breakAt.isNone(),SE=(e,t)=>pE(bE(e,t),t),xE=(e,t)=>pE(yE(e,t),t),kE=ho,EE=(e,t)=>Math.abs(e.left-t),NE=(e,t)=>Math.abs(e.right-t),_E=(e,t)=>ze(e,((e,r)=>{var n=Math.min(EE(e,t),NE(e,t)),o=Math.min(EE(r,t),NE(r,t));return o===n&&Pe(r,"node")&&kE(r.node)||o<n?r:e})),TE=e=>{var t=t=>ee(t,(t=>{var r=Nl(t);return r.node=e,r}));if(Jn(e))return t(e.getClientRects());if(lo(e)){var r=e.ownerDocument.createRange();return r.setStart(e,0),r.setEnd(e,e.data.length),t(r.getClientRects())}return[]},DE=e=>ue(e,TE);!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(sE||(sE={}));var RE,OE=(e,t,r,n,o,a)=>{var i=0,l=[],s=n=>{var a=DE([n]);-1===e&&(a=a.reverse());for(var s=0;s<a.length;s++){var c=a[s];if(!r(c,d)){if(l.length>0&&t(c,$e(l))&&i++,c.line=i,o(c))return!0;l.push(c)}}return!1},d=$e(a.getClientRects());if(!d)return l;var c=a.getNode();return c&&(s(c),((e,t,r,n)=>{for(var o=n;o=iu(o,e,ba,t);)if(r(o))return})(e,n,s,c)),l},AE=U(OE,sE.Up,Dl,Rl),BE=U(OE,sE.Down,Rl,Dl),PE=e=>$e(e.getClientRects()),LE=e=>t=>((e,t)=>t.line>e)(e,t),ME=e=>t=>((e,t)=>t.line===e)(e,t),IE=(e,t)=>{e.selection.setRng(t),Mg(e,e.selection.getRng())},FE=(e,t,r)=>K.some(gk(e,t,r)),jE=(e,t,r,n,o,a)=>{var i=t===_s.Forwards,l=Au(e.getBody()),s=U(yu,i?l.next:l.prev),d=i?n:o;if(!r.collapsed){var c=Al(r);if(a(c))return mk(t,e,c,t===_s.Backwards,!1);if(Ck(e)){var u=r.cloneRange();return u.collapse(t===_s.Backwards),K.from(u)}}var m=hu(t,e.getBody(),r);if(d(m))return fk(e,m.getNode(!i));var f=s(m),g=la(r);if(!f)return g?K.some(r):K.none();if(d(f=fh(i,f)))return mk(t,e,f.getNode(!i),i,!1);var p=s(f);return p&&d(p)&&Cu(f,p)?mk(t,e,p.getNode(!i),i,!1):g?FE(e,f.toRange(),!1):K.none()},UE=(e,t,r,n,o,a)=>{var i=hu(t,e.getBody(),r),l=$e(i.getClientRects()),s=t===sE.Down,d=e.getBody();if(!l)return K.none();if(Ck(e)){var c=s?es.fromRangeEnd(r):es.fromRangeStart(r);return(s?xE:SE)(d,c).orThunk((()=>K.from(c))).map((e=>e.toRange()))}var u,m=(s?BE:AE)(d,LE(1),i),f=oe(m,ME(1)),g=l.left,p=_E(f,g);if(p&&a(p.node)){var v=Math.abs(g-p.left),h=Math.abs(g-p.right);return mk(t,e,p.node,v<h,!1)}if(u=n(i)?i.getNode():o(i)?i.getNode(!0):Al(r)){var b=((e,t,r,n)=>{var o,a,i,l,s=Au(t),d=[],c=0;1===e?(o=s.next,a=Rl,i=Dl,l=es.after(n)):(o=s.prev,a=Dl,i=Rl,l=es.before(n));var u=PE(l);do{if(l.isVisible()){var m=PE(l);if(!i(m,u)){d.length>0&&a(m,$e(d))&&c++;var f=Nl(m);if(f.position=l,f.line=c,r(f))return d;d.push(f)}}}while(l=o(l));return d})(t,d,LE(1),u),y=_E(oe(b,ME(1)),g);if(y)return FE(e,y.position.toRange(),!1);if(y=$e(oe(b,ME(0))))return FE(e,y.position.toRange(),!1)}return 0===f.length?zE(e,s).filter(s?o:n).map((t=>gk(e,t.toRange(),!1))):K.none()},zE=(e,t)=>{var r,n,o=e.selection.getRng(),a=t?es.fromRangeEnd(o):es.fromRangeStart(o),i=(r=a.container(),n=e.getBody(),rn(Er.fromDom(r),(e=>Gc(e.dom)),(e=>e.dom===n)).map((e=>e.dom)).getOr(n));if(t){var l=hE(i,a);return ye(l.positions)}var s=vE(i,a);return be(s.positions)},HE=(e,t,r)=>zE(e,t).filter(r).exists((t=>(e.selection.setRng(t.toRange()),!0))),$E=(e,t)=>{var r=e.dom.createRng();r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),e.selection.setRng(r)},WE=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},qE=(e,t,r)=>Uk(t,r).map((t=>($E(e,t),r))),VE=(e,t,r)=>{var n=e.getBody(),o=((e,t,r)=>{var n=es.fromRangeStart(e);if(e.collapsed)return n;var o=es.fromRangeEnd(e);return r?Hu(t,o).getOr(o):zu(t,n).getOr(n)})(e.selection.getRng(),n,r),a=U(ch,e);return aE(r,a,n,o).bind((r=>qE(e,t,r)))},KE=(e,t)=>{var r=t.get();if(e.selection.isCollapsed()&&!e.composing&&r){var n=es.fromRangeStart(e.selection.getRng());es.isTextPosition(n)&&!(e=>ra(e)||na(e))(n)&&($E(e,Fc(r,n)),t.set(null))}},GE=(e,t,r)=>!!Rd(e)&&VE(e,t,r).isSome(),YE=(e,t,r)=>!!Rd(t)&&lE(e,t),XE=e=>{var t=Yi(null),r=U(ch,e);return e.on("NodeChange",(n=>{Rd(e)&&(((e,t,r)=>{var n=ee(qn(Er.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),(e=>e.dom)),o=oe(n,e),a=oe(r,e);te(ge(o,a),U(WE,!1)),te(ge(a,o),U(WE,!0))})(r,e.dom,n.parents),KE(e,t),((e,t,r,n)=>{if(t.selection.isCollapsed()){var o=oe(n,e);te(o,(n=>{var o=es.fromRangeStart(t.selection.getRng());Qk(e,t.getBody(),o).bind((e=>qE(t,r,e)))}))}})(r,e,t,n.parents))})),t},QE=U(YE,!0),JE=U(YE,!1),ZE=(e,t,r)=>{if(Rd(e)){var n=zE(e,t).getOrThunk((()=>{var r=e.selection.getRng();return t?es.fromRangeEnd(r):es.fromRangeStart(r)}));return Qk(U(ch,e),e.getBody(),n).exists((t=>{var n=eE(t);return Uk(r,n).exists((t=>($E(e,t),!0)))}))}return!1},eN=(e,t)=>r=>Uk(t,r).map((t=>()=>$E(e,t))),tN=(e,t,r,n)=>{var o=e.getBody(),a=U(ch,e);e.undoManager.ignore((()=>{e.selection.setRng(((e,t)=>{var r=document.createRange();return r.setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),r})(r,n)),hh(e),Qk(a,o,es.fromRangeStart(e.selection.getRng())).map(tE).bind(eN(e,t)).each(W)})),e.nodeChanged()},rN=(e,t,r,n)=>{var o=((e,t)=>{var r=lu(t,e);return r||e})(e.getBody(),n.container()),a=U(ch,e),i=Qk(a,o,n);return i.bind((e=>r?e.fold(I(K.some(tE(e))),K.none,I(K.some(eE(e))),K.none):e.fold(K.none,I(K.some(eE(e))),K.none,I(K.some(tE(e)))))).map(eN(e,t)).getOrThunk((()=>{var l=Fu(r,o,n),s=l.bind((e=>Qk(a,o,e)));return Wt(i,s,(()=>mh(a,o,n).bind((t=>(e=>Wt($u(e),Wu(e),((t,r)=>{var n=fh(!0,t),o=fh(!1,r);return zu(e,n).forall((e=>e.isEqual(o)))})).getOr(!0))(t)?K.some((()=>{sh(e,r,Er.fromDom(t))})):K.none())))).getOrThunk((()=>s.bind((()=>l.map((o=>()=>{r?tN(e,t,n,o):tN(e,t,o,n)}))))))}))},nN=(e,t,r)=>{if(e.selection.isCollapsed()&&Rd(e)){var n=es.fromRangeStart(e.selection.getRng());return rN(e,t,r,n)}return K.none()},oN=(e,t)=>{var r=Er.fromDom(e.getBody()),n=Er.fromDom(e.selection.getStart()),o=vv(n,r);return de(o,t).fold(I(o),(e=>o.slice(0,e)))},aN=e=>1===qr(e),iN=e=>oN(e,(e=>Ao(e)||(e=>qr(e)>1)(e))),lN=(e,t)=>{var r=U(ey,e);return ue(t,(e=>r(e)?[e.dom]:[]))},sN=e=>{var t=(e=>oN(e,Ao))(e);return lN(e,t)},dN=(e,t)=>{var r=oe(iN(e),aN);return ye(r).bind((n=>{var o=es.fromRangeStart(e.selection.getRng());return wh(t,o,n.dom)&&!ty(n)?K.some((()=>((e,t,r,n)=>{var o=lN(t,n);if(0===o.length)sh(t,e,r);else{var a=Zb(r.dom,o);t.selection.setRng(a.toRange())}})(t,e,n,r))):K.none()}))},cN=(e,t)=>{var r,n=e.selection.getStart(),o=((e,t)=>{var r=t.parentElement;return go(t)&&!N(r)&&e.dom.isEmpty(r)})(e,n)||(r=n,ty(Er.fromDom(r)))?Zb(n,t):((e,t)=>{var r=Jb(t),n=r.caretContainer,o=r.caretPosition;return e.insertNode(n.dom),o})(e.selection.getRng(),t);e.selection.setRng(o.toRange())},uN=e=>lo(e.startContainer),mN=e=>(e=>{var t=e.startContainer.parentNode,r=e.endContainer.parentNode;return!N(t)&&!N(r)&&t.isEqualNode(r)})(e)&&(e=>{var t=e.endContainer;return e.endOffset===(lo(t)?t.length:t.childNodes.length)})(e),fN=e=>{var t=e.selection.getRng();return(e=>0===e.startOffset&&uN(e))(t)&&((e,t)=>{var r=t.startContainer.parentElement;return!N(r)&&ey(e,Er.fromDom(r))})(e,t)&&(e=>mN(e)||(e=>!e.endContainer.isEqualNode(e.commonAncestorContainer))(e))(t)},gN=e=>{if(fN(e)){var t=sN(e);return K.some((()=>{hh(e),((e,t)=>{var r=ge(t,sN(e));r.length>0&&cN(e,r)})(e,t)}))}return K.none()},pN=(e,t)=>e.selection.isCollapsed()?dN(e,t):gN(e),vN=e=>((e,t,r)=>rn(e,t,r).isSome())(e,(e=>Vu(e.dom)),Ao),hN=e=>{var t=e.selection.getRng();return t.collapsed&&(uN(t)||e.dom.isEmpty(t.startContainer))&&!(e=>vN(Er.fromDom(e.selection.getStart())))(e)},bN=e=>(hN(e)&&cN(e,[]),!0),yN=(e,t,r)=>R(r)?K.some((()=>{e._selectionOverrides.hideFakeCaret(),sh(e,t,Er.fromDom(r))})):K.none(),CN=(e,t)=>e.selection.isCollapsed()?((e,t)=>{var r=t?dv:cv,n=t?_s.Forwards:_s.Backwards,o=hu(n,e.getBody(),e.selection.getRng());return r(o)?yN(e,t,o.getNode(!t)):K.from(fh(t,o)).filter((e=>r(e)&&Cu(o,e))).bind((r=>yN(e,t,r.getNode(!t))))})(e,t):((e,t)=>{var r=e.selection.getNode();return Co(r)?yN(e,t,r):K.none()})(e,t),wN=e=>it(null!=e?e:"").getOr(0),SN=(e,t)=>(e||"table"===Qt(t)?"margin":"padding")+("rtl"===pn(t,"direction")?"-right":"-left"),xN=e=>{var t=EN(e);return!e.mode.isReadOnly()&&(t.length>1||((e,t)=>me(t,(t=>{var r=SN(gd(e),t),n=hn(t,r).map(wN).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&n>0})))(e,t))},kN=e=>Mo(e)||Io(e),EN=e=>oe(Dn(e.selection.getSelectedBlocks()),(e=>!kN(e)&&!(e=>Pr(e).exists(kN))(e)&&nn(e,(e=>vo(e.dom)||ho(e.dom))).exists((e=>vo(e.dom))))),NN=(e,t)=>{var r,n,o=e.dom,a=pd(e),i=null!==(n=null===(r=/[a-z%]+$/i.exec(a))||void 0===r?void 0:r[0])&&void 0!==n?n:"px",l=wN(a),s=gd(e);te(EN(e),(e=>{((e,t,r,n,o,a)=>{var i=SN(r,Er.fromDom(a)),l=wN(e.getStyle(a,i));if("outdent"===t){var s=Math.max(0,l-n);e.setStyle(a,i,s?s+o:"")}else{var d=l+n+o;e.setStyle(a,i,d)}})(o,t,s,l,i,e.dom)}))},_N=e=>NN(e,"outdent"),TN=e=>{if(e.selection.isCollapsed()&&xN(e)){var t=e.dom,r=e.selection.getRng(),n=es.fromRangeStart(r),o=t.getParent(r.startContainer,t.isBlock);if(null!==o&&wv(Er.fromDom(o),n))return K.some((()=>_N(e)))}return K.none()},DN=(e,t,r)=>we([TN,Dk,bk,(e,r)=>nN(e,t,r),lk,Jh,Rk,CN,uk,pN],(t=>t(e,r))).filter((t=>e.selection.isEditable())),RN=(e,t)=>{DN(e,t,!0).fold((()=>(e=>vh(e,"ForwardDelete"))(e)),W)},ON=(e,t)=>{e.addCommand("delete",(()=>{((e,t)=>{DN(e,t,!1).fold((()=>{hh(e),Ch(e)}),W)})(e,t)})),e.addCommand("forwardDelete",(()=>{RN(e,t)}))},AN=e=>void 0===e.touches||1!==e.touches.length?K.none():K.some(e.touches[0]),BN=e=>{var t=tl(),r=Yi(!1),n=nl((t=>{e.dispatch("longpress",d(d({},t),{},{type:"longpress"})),r.set(!0)}),400);e.on("touchstart",(e=>{AN(e).each((o=>{n.cancel();var a={x:o.clientX,y:o.clientY,target:e.target};n.throttle(e),r.set(!1),t.set(a)}))}),!0),e.on("touchmove",(o=>{n.cancel(),AN(o).each((n=>{t.on((o=>{((e,t)=>{var r=Math.abs(e.clientX-t.x),n=Math.abs(e.clientY-t.y);return r>5||n>5})(n,o)&&(t.clear(),r.set(!1),e.dispatch("longpresscancel"))}))}))}),!0),e.on("touchend touchcancel",(o=>{n.cancel(),"touchcancel"!==o.type&&t.get().filter((e=>e.target.isEqualNode(o.target))).each((()=>{r.get()?o.preventDefault():e.dispatch("tap",d(d({},o),{},{type:"tap"}))}))}),!0)},PN=(e,t)=>Be(e,t.nodeName),LN=(e,t)=>!!lo(t)||!!Jn(t)&&(!PN(e.getBlockElements(),t)&&!im(t)&&!za(e,t)),MN=(e,t)=>{if(lo(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data)&&(!t.nextSibling||PN(e,t.nextSibling)))return!0}return!1},IN=e=>e.dom.create(Gs(e),Ys(e)),FN=e=>{var t,r,n=e.dom,o=e.selection,a=e.schema,i=a.getBlockElements(),l=o.getStart(),s=e.getBody(),d=!1,c=Gs(e);if(l&&Jn(l)){var u=s.nodeName.toLowerCase();if(a.isValidChild(u,c.toLowerCase())&&!((e,t,r)=>Z(pv(Er.fromDom(r),Er.fromDom(t)),(t=>PN(e,t.dom))))(i,s,l)){for(var m=o.getRng(),f=m.startContainer,g=m.startOffset,p=m.endContainer,v=m.endOffset,h=sp(e),b=s.firstChild;b;)if(Jn(b)&&Ia(a,b),LN(a,b)){if(MN(i,b)){r=b,b=b.nextSibling,n.remove(r);continue}t||(t=IN(e),s.insertBefore(t,b),d=!0),r=b,b=b.nextSibling,t.appendChild(r)}else t=null,b=b.nextSibling;d&&h&&(m.setStart(f,g),m.setEnd(p,v),o.setRng(m),e.nodeChanged())}}},jN=(e,t,r)=>{var n=Er.fromDom(IN(e)),o=Wo();xn(n,o),r(t,n);var a=document.createRange();return a.setStartBefore(o.dom),a.setEndBefore(o.dom),a},UN=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),zN=(e,t,r)=>function(n){var o=arguments,a=o[o.length-2],i=a>0?t.charAt(a-1):"";if('"'===i)return n;if(">"===i){var l=t.lastIndexOf("<",a);if(-1!==l)if(-1!==t.substring(l,a).indexOf('contenteditable="false"'))return n}return'<span class="'+r+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},HN=e=>{var t="contenteditable",r=" "+zt.trim(Cc(e))+" ",n=" "+zt.trim(yc(e))+" ",o=UN(r),a=UN(n),i=wc(e);i.length>0&&e.on("BeforeSetContent",(t=>{((e,t,r)=>{var n=t.length,o=r.content;if("raw"!==r.format){for(;n--;)o=o.replace(t[n],zN(e,o,yc(e)));r.content=o}})(e,i,t)})),e.parser.addAttributeFilter("class",(e=>{for(var r=e.length;r--;){var n=e[r];o(n)?n.attr(t,"true"):a(n)&&n.attr(t,"false")}})),e.serializer.addAttributeFilter(t,(e=>{for(var r=e.length;r--;){var n=e[r];(o(n)||a(n))&&(i.length>0&&n.attr("data-mce-content")?(n.name="#text",n.type=3,n.raw=!0,n.value=n.attr("data-mce-content")):n.attr(t,null))}}))},$N=(e,t)=>{t.hasAttribute("data-mce-caret")&&(ia(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},WN=(e,t)=>{var r=(e=>ln(Er.fromDom(e.getBody()),"*[data-mce-caret]").map((e=>e.dom)).getOrNull())(e);if(r)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void $N(e,r)):void(ta(r)&&($N(e,r),e.undoManager.add()))},qN=ho,VN=(e,t,r)=>{var n=Au(e.getBody()),o=U(yu,1===t?n.next:n.prev);if(r.collapsed){var a=e.dom.getParent(r.startContainer,"PRE");if(!a)return;if(!o(es.fromRangeStart(r))){var i=Er.fromDom((e=>{var t=e.dom.create(Gs(e));return t.innerHTML='<br data-mce-bogus="1">',t})(e));1===t?wn(Er.fromDom(a),i):Cn(Er.fromDom(a),i),e.selection.select(i.dom,!0),e.selection.collapse()}}},KN=(e,t)=>{var r=t?_s.Forwards:_s.Backwards,n=e.selection.getRng();return((e,t,r)=>jE(t,e,r,fv,gv,qN))(r,e,n).orThunk((()=>(VN(e,r,n),K.none())))},GN=(e,t)=>{var r=t?1:-1,n=e.selection.getRng();return((e,t,r)=>UE(t,e,r,(e=>fv(e)||uv(e)),(e=>gv(e)||mv(e)),qN))(r,e,n).orThunk((()=>(VN(e,r,n),K.none())))},YN=(e,t)=>KN(e,((e,t)=>{var r=t?e.getEnd(!0):e.getStart(!0);return uh(r)?!t:t})(e.selection,t)).exists((t=>(IE(e,t),!0))),XN=(e,t)=>GN(e,t).exists((t=>(IE(e,t),!0))),QN=(e,t)=>HE(e,t,t?gv:fv),JN=(e,t)=>yk(e,!t).map((r=>{var n=r.toRange(),o=e.selection.getRng();return t?n.setStart(o.startContainer,o.startOffset):n.setEnd(o.endContainer,o.endOffset),n})).exists((t=>(IE(e,t),!0))),ZN=e=>J(["figcaption"],Qt(e)),e_=(e,t)=>{var r=Er.fromDom(e.getBody()),n=es.fromRangeStart(e.selection.getRng());return((e,t)=>{var r=U(Dr,t);return nn(Er.fromDom(e.container()),Ao,r).filter(ZN)})(n,r).exists((()=>{if(((e,t,r)=>t?wE(e.dom,r):CE(e.dom,r))(r,t,n)){var o=jN(e,r,t?xn:Sn);return e.selection.setRng(o),!0}return!1}))},t_=(e,t)=>!!e.selection.isCollapsed()&&e_(e,t),r_=(e,t)=>t?K.from(e.dom.getParent(e.selection.getNode(),"details")).map((t=>((e,t)=>{var r=e.selection.getRng(),n=es.fromRangeStart(r);return!(e.getBody().lastChild!==t||!wE(t,n)||(e.execCommand("InsertNewBlockAfter"),0))})(e,t))).getOr(!1):K.from(e.dom.getParent(e.selection.getNode(),"summary")).bind((t=>K.from(e.dom.getParent(t,"details")).map((r=>((e,t,r)=>{var n=e.selection.getRng(),o=es.fromRangeStart(n);return!(e.getBody().firstChild!==t||!CE(r,o)||(e.execCommand("InsertNewBlockBefore"),0))})(e,r,t))))).getOr(!1),n_=(e,t)=>r_(e,t),o_={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},a_=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,i_=(e,t)=>ue((e=>ee(e,(e=>d(d({},o_),e))))(e),(e=>a_(e,t)?[e]:[])),l_=(e,t)=>ue((e=>ee(e,(e=>d(d({},o_),e))))(e),(e=>a_(e,t)?[e]:[])),s_=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return()=>e.apply(null,r)},d_=(e,t)=>se(i_(e,t),(e=>e.action())),c_=(e,t)=>we(l_(e,t),(e=>e.action())),u_=(e,t)=>{var r=t?_s.Forwards:_s.Backwards,n=e.selection.getRng();return jE(e,r,n,dv,cv,Co).exists((t=>(IE(e,t),!0)))},m_=(e,t)=>{var r=t?1:-1,n=e.selection.getRng();return UE(e,r,n,dv,cv,Co).exists((t=>(IE(e,t),!0)))},f_=(e,t)=>HE(e,t,t?cv:dv),g_=Ns([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),p_=d(d({},g_),{},{none:e=>g_.none(e)}),v_=(e,t,r)=>ue(zr(e),(e=>_r(e,t)?r(e)?[e]:[]:v_(e,t,r))),h_=(e,t)=>function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q;return r(t)?K.none():J(e,Qt(t))?K.some(t):an(t,e.join(","),(e=>_r(e,"table")||r(e)))}(["td","th"],e,t),b_=e=>v_(e,"th,td",V),y_=(e,t)=>sn(e,"table",t),C_=function e(t,r,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:V,i=1===o;if(!i&&n<=0)return p_.first(t[0]);if(i&&n>=t.length-1)return p_.last(t[t.length-1]);var l=n+o,s=t[l];return a(s)?p_.middle(r,s):e(t,r,l,o,a)},w_=(e,t)=>y_(e,t).bind((t=>{var r=b_(t);return de(r,(t=>Dr(e,t))).map((e=>({index:e,all:r})))})),S_=(e,t,r,n,o)=>{var a=qn(Er.fromDom(r),"td,th,caption").map((e=>e.dom)),i=oe(((e,t)=>ue(t,(t=>{var r=((e,t)=>({left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}))(Nl(t.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:t},{x:r.right,y:e(r),cell:t}]})))(e,a),(e=>t(e,o)));return((e,t,r)=>ie(e,((e,n)=>e.fold((()=>K.some(n)),(e=>{var o=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-r)),a=Math.sqrt(Math.abs(n.x-t)+Math.abs(n.y-r));return K.some(a<o?n:e)}))),K.none()))(i,n,o).map((e=>e.cell))},x_=U(S_,(e=>e.bottom),((e,t)=>e.y<t)),k_=U(S_,(e=>e.top),((e,t)=>e.y>t)),E_=(e,t)=>be(t.getClientRects()).bind((t=>x_(e,t.left,t.top))).bind((e=>{return pE(Wu(r=e).map((e=>vE(r,e).positions.concat(e))).getOr([]),t);var r})),N_=(e,t)=>ye(t.getClientRects()).bind((t=>k_(e,t.left,t.top))).bind((e=>{return pE($u(r=e).map((e=>[e].concat(hE(r,e).positions))).getOr([]),t);var r})),__=(e,t,r)=>{var n=e(t,r);return(e=>e.breakType===bw.Wrap&&0===e.positions.length)(n)||!go(r.getNode())&&(e=>e.breakType===bw.Br&&1===e.positions.length)(n)?!((e,t,r)=>r.breakAt.exists((r=>e(t,r).breakAt.isSome())))(e,t,n):n.breakAt.isNone()},T_=U(__,vE),D_=U(__,hE),R_=(e,t,r,n)=>{var o=e.selection.getRng(),a=t?1:-1;return!(!qc()||!((e,t,r)=>{var n=es.fromRangeStart(t);return Uu(!e,r).exists((e=>e.isEqual(n)))})(t,o,r))&&(mk(a,e,r,!t,!1).each((t=>{IE(e,t)})),!0)},O_=(e,t)=>{var r=t.getNode(e);return oo(r)?K.some(r):K.none()},A_=(e,t,r)=>{var n=O_(!!t,r),o=!1===t;n.fold((()=>IE(e,r.toRange())),(n=>Uu(o,e.getBody()).filter((e=>e.isEqual(r))).fold((()=>IE(e,r.toRange())),(r=>((e,t,r)=>{t.undoManager.transact((()=>{var n=e?wn:Cn,o=jN(t,Er.fromDom(r),n);IE(t,o)}))})(t,e,n)))))},B_=(e,t,r,n)=>{var o=e.selection.getRng(),a=es.fromRangeStart(o),i=e.getBody();if(!t&&T_(n,a)){var l=((e,t,r)=>E_(t,r).orThunk((()=>be(r.getClientRects()).bind((r=>gE(bE(e,es.before(t)),r.left))))).getOr(es.before(t)))(i,r,a);return A_(e,t,l),!0}if(t&&D_(n,a)){var s=((e,t,r)=>N_(t,r).orThunk((()=>be(r.getClientRects()).bind((r=>gE(yE(e,es.after(t)),r.left))))).getOr(es.after(t)))(i,r,a);return A_(e,t,s),!0}return!1},P_=(e,t,r)=>K.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((n=>K.from(e.dom.getParent(n,"table")).map((o=>r(e,t,o,n))))).getOr(!1),L_=(e,t)=>P_(e,t,R_),M_=(e,t)=>P_(e,t,B_),I_=(e,t,r)=>r.fold(K.none,K.none,((e,t)=>yp(t).map((e=>(e=>{var t=Yf.exact(e,0,e,0);return eg(t)})(e)))),(r=>(e.execCommand("mceTableInsertRowAfter"),F_(e,t,r)))),F_=(e,t,r)=>I_(e,t,((e,t,r)=>w_(e,r).fold((()=>p_.none(e)),(r=>C_(r.all,e,r.index,1,t))))(r,dn)),j_=(e,t,r)=>I_(e,t,((e,t,r)=>w_(e,r).fold((()=>p_.none()),(r=>C_(r.all,e,r.index,-1,t))))(r,dn)),U_=(e,t)=>{var r=["table","li","dl"],n=Er.fromDom(e.getBody()),o=e=>{var t=Qt(e);return Dr(e,n)||J(r,t)},a=e.selection.getRng(),i=Er.fromDom(t?a.endContainer:a.startContainer);return h_(i,o).map((r=>(y_(r,o).each((t=>{e.model.table.clearSelectedCells(t.dom)})),e.selection.collapse(!t),(t?F_:j_)(e,o,r).each((t=>{e.selection.setRng(t)})),!0))).getOr(!1)},z_=(e,t)=>{e.on("keydown",(r=>{r.isDefaultPrevented()||((e,t,r)=>{var n=Ft.os.isMacOS()||Ft.os.isiOS();d_([{keyCode:Of.RIGHT,action:s_(YN,e,!0)},{keyCode:Of.LEFT,action:s_(YN,e,!1)},{keyCode:Of.UP,action:s_(XN,e,!1)},{keyCode:Of.DOWN,action:s_(XN,e,!0)},...n?[{keyCode:Of.UP,action:s_(JN,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Of.DOWN,action:s_(JN,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Of.RIGHT,action:s_(L_,e,!0)},{keyCode:Of.LEFT,action:s_(L_,e,!1)},{keyCode:Of.UP,action:s_(M_,e,!1)},{keyCode:Of.DOWN,action:s_(M_,e,!0)},{keyCode:Of.UP,action:s_(M_,e,!1)},{keyCode:Of.UP,action:s_(n_,e,!1)},{keyCode:Of.DOWN,action:s_(n_,e,!0)},{keyCode:Of.RIGHT,action:s_(u_,e,!0)},{keyCode:Of.LEFT,action:s_(u_,e,!1)},{keyCode:Of.UP,action:s_(m_,e,!1)},{keyCode:Of.DOWN,action:s_(m_,e,!0)},{keyCode:Of.RIGHT,action:s_(GE,e,t,!0)},{keyCode:Of.LEFT,action:s_(GE,e,t,!1)},{keyCode:Of.RIGHT,ctrlKey:!n,altKey:n,action:s_(QE,e,t)},{keyCode:Of.LEFT,ctrlKey:!n,altKey:n,action:s_(JE,e,t)},{keyCode:Of.UP,action:s_(t_,e,!1)},{keyCode:Of.DOWN,action:s_(t_,e,!0)}],r).each((e=>{r.preventDefault()}))})(e,t,r)}))},H_=(e,t)=>({container:e,offset:t}),$_=Vi.DOM,W_=e=>t=>e===t?-1:0,q_=(e,t,r)=>{if(lo(e)&&t>=0)return K.some(H_(e,t));var n=kl($_);return K.from(n.backwards(e,t,W_(e),r)).map((e=>H_(e.container,e.container.data.length)))},V_=(e,t,r)=>{if(!lo(e))return K.none();var n=e.data;if(t>=0&&t<=n.length)return K.some(H_(e,t));var o=kl($_);return K.from(o.backwards(e,t,W_(e),r)).bind((e=>{var n=e.container.data;return V_(e.container,t+n.length,r)}))},K_=(e,t,r)=>{if(!lo(e))return K.none();var n=e.data;if(t<=n.length)return K.some(H_(e,t));var o=kl($_);return K.from(o.forwards(e,t,W_(e),r)).bind((e=>K_(e.container,t-n.length,r)))},G_=(e,t,r,n,o)=>{var a=kl(e,(e=>t=>e.isBlock(t)||J(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t))(e));return K.from(a.backwards(t,r,n,o))},Y_=e=>Yo(e.toString().replace(/\u00A0/g," ")),X_=e=>""!==e&&-1!==" Â \f\n\r\t\v".indexOf(e),Q_=(e,t)=>e.substring(t.length),J_=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!(n=t).collapsed||!lo(n.startContainer))return K.none();var a={text:"",offset:0},i=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return G_(e,t.startContainer,t.startOffset,((e,t,n)=>(a.text=n+a.text,a.offset+=t,((e,t,r)=>{var n,o=r.charAt(0);for(n=t-1;n>=0;n--){var a=e.charAt(n);if(X_(a))return K.none();if(o===a&&Qe(e,r,n,t))break}return K.some(n)})(a.text,a.offset,r).getOr(t))),i).bind((e=>{var n=t.cloneRange();if(n.setStart(e.container,e.offset),n.setEnd(t.endContainer,t.endOffset),n.collapsed)return K.none();var a=Y_(n);return 0!==a.lastIndexOf(r)||Q_(a,r).length<o?K.none():K.some({text:Q_(a,r),range:n,trigger:r})}))},Z_=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(n=Er.fromDom(t.startContainer),sn(n,wp)).fold((()=>J_(e,t,r,o)),(t=>{var n=e.createRng();n.selectNode(t.dom);var o=Y_(n);return K.some({range:n,text:Q_(o,r),trigger:r})}))},eT=e=>{if((e=>3===e.nodeType)(e))return H_(e,e.data.length);var t=e.childNodes;return t.length>0?eT(t[t.length-1]):H_(e,t.length)},tT=(e,t)=>{var r=e.childNodes;return r.length>0&&t<r.length?tT(r[t],0):r.length>0&&(e=>1===e.nodeType)(e)&&r.length===t?eT(r[r.length-1]):H_(e,t)},rT=e=>t=>{var r=tT(t.startContainer,t.startOffset);return!((e,t)=>{var r,n=null!==(r=e.getParent(t.container,e.isBlock))&&void 0!==r?r:e.getRoot();return G_(e,t.container,t.offset,((e,t)=>0===t?-1:t),n).filter((e=>{var t=e.container.data.charAt(e.offset-1);return!X_(t)})).isSome()})(e,r)},nT=(e,t)=>{var r=t(),n=e.selection.getRng();return((e,t,r)=>we(r.triggers,(r=>Z_(e,t,r))))(e.dom,n,r).bind((r=>oT(e,t,r)))},oT=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t(),i=null!==(n=e.selection.getRng().startContainer.nodeValue)&&void 0!==n?n:"",l=oe(a.lookupByTrigger(r.trigger),(t=>r.text.length>=t.minChars&&t.matches.getOrThunk((()=>rT(e.dom)))(r.range,i,r.text)));if(0===l.length)return K.none();var s=Promise.all(ee(l,(e=>e.fetch(r.text,e.maxResults,o).then((t=>({matchText:r.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))))));return K.some({lookupData:s,context:r})};!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(RE||(RE={}));var aT,iT,lT=(e,t,r)=>e.stype===RE.Error?t(e.serror):r(e.svalue),sT=e=>({stype:RE.Value,svalue:e}),dT=e=>({stype:RE.Error,serror:e}),cT=e=>lT(e,Es.error,Es.value),uT=sT,mT=e=>{var t=[],r=[];return te(e,(e=>{lT(e,(e=>r.push(e)),(e=>t.push(e)))})),{values:t,errors:r}},fT=dT,gT=(e,t)=>e.stype===RE.Error?t(e.serror):e,pT=(e,t)=>e.stype===RE.Value?{stype:RE.Value,svalue:t(e.svalue)}:e,vT=(e,t)=>e.stype===RE.Error?{stype:RE.Error,serror:t(e.serror)}:e,hT=lT,bT=e=>x(e)&&Se(e).length>100?" removed due to size":JSON.stringify(e,null,2),yT=(e,t)=>fT([{path:e,getErrorInfo:t}]),CT=(e,t,r,n)=>Ae(r,n).fold((()=>((e,t,r)=>yT(e,(()=>'The chosen schema: "'+r+'" did not exist in branches: '+bT(t))))(e,r,n)),(r=>r.extract(e.concat(["branch: "+n]),t))),wT=(e,t)=>({extract:(r,n)=>Ae(n,e).fold((()=>((e,t)=>yT(e,(()=>'Choice schema did not contain choice key: "'+t+'"')))(r,e)),(e=>CT(r,n,t,e))),toString:()=>"chooseOn("+e+"). Possible values: "+Se(t)}),ST=e=>function(){if(0===arguments.length)throw new Error("Can't merge zero objects");for(var t={},r=0;r<arguments.length;r++){var n=r<0||arguments.length<=r?void 0:arguments[r];for(var o in n)Be(n,o)&&(t[o]=e(t[o],n[o]))}return t},xT=ST(((e,t)=>k(e)&&k(t)?xT(e,t):t)),kT=(ST(((e,t)=>t)),e=>({tag:"defaultedThunk",process:I(e)})),ET=e=>L(fT,ce)(e),NT=e=>{var t=mT(e);return t.errors.length>0?ET(t.errors):uT(t.values)},_T=(e,t,r)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return r(e.newKey,e.instantiator)}},TT=e=>({extract:(t,r)=>gT(e(r),(e=>((e,t)=>yT(e,I(t)))(t,e))),toString:I("val")}),DT=TT(uT),RT=(e,t,r,n)=>Ae(t,r).fold((()=>((e,t,r)=>yT(e,(()=>'Could not find valid *required* value for "'+t+'" in '+bT(r))))(e,r,t)),n),OT=(e,t,r,n)=>n(Ae(e,t).getOrThunk((()=>r(e)))),AT=(e,t,r,n,o)=>{var a=e=>o.extract(t.concat([n]),e),i=e=>e.fold((()=>uT(K.none())),(e=>{var r=o.extract(t.concat([n]),e);return pT(r,K.some)}));switch(e.tag){case"required":return RT(t,r,n,a);case"defaultedThunk":return OT(r,n,e.process,a);case"option":return((e,t,r)=>r(Ae(e,t)))(r,n,i);case"defaultedOptionThunk":return((e,t,r,n)=>n(Ae(e,t).map((t=>!0===t?r(e):t))))(r,n,e.process,i);case"mergeWithThunk":return OT(r,n,I({}),(t=>{var n=xT(e.process(r),t);return a(n)}))}},BT=e=>({extract:(t,r)=>((e,t,r)=>{var n,o={},a=[],i=g(r);try{for(i.s();!(n=i.n()).done;){var l=n.value;_T(l,((r,n,i,l)=>{var s=AT(i,e,t,r,l);hT(s,(e=>{a.push(...e)}),(e=>{o[n]=e}))}),((e,r)=>{o[e]=r(t)}))}}catch(e){i.e(e)}finally{i.f()}return a.length>0?fT(a):uT(o)})(t,r,e),toString:()=>{var t=ee(e,(e=>_T(e,((e,t,r,n)=>e+" -> "+n.toString()),((e,t)=>"state("+e+")"))));return"obj{\n"+t.join("\n")+"}"}}),PT=e=>({extract:(t,r)=>{var n=ee(r,((r,n)=>e.extract(t.concat(["["+n+"]"]),r)));return NT(n)},toString:()=>"array("+e.toString()+")"}),LT=(e,t,r)=>cT(((e,t,r)=>{var n=t.extract([e],r);return vT(n,(e=>({input:r,errors:e})))})(e,t,r)),MT=e=>{return"Errors: \n"+(t=e.errors,r=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:I("... (only showing first ten failures)")}]):t,ee(r,(e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()))).join("\n")+"\n\nInput object: "+bT(e.input);var t,r},IT=(e,t)=>wT(e,Ee(t,BT)),FT=I(DT),jT=(e,t)=>TT((r=>{var n=typeof r;return e(r)?uT(r):fT(`Expected type: ${t} but got: ${n}`)})),UT=jT(A,"number"),zT=jT(S,"string"),HT=jT(_,"boolean"),$T=jT(O,"function"),WT=(e,t,r,n)=>({tag:"field",key:e,newKey:t,presence:r,prop:n}),qT=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),VT=e=>{return t=t=>J(e,t)?Es.value(t):Es.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`),TT((e=>t(e).fold(fT,uT)));var t},KT=(e,t)=>WT(e,e,{tag:"required",process:{}},t),GT=e=>KT(e,zT),YT=e=>KT(e,$T),XT=(e,t)=>WT(e,e,{tag:"option",process:{}},t),QT=e=>XT(e,zT),JT=(e,t,r)=>WT(e,e,kT(t),r),ZT=(e,t)=>JT(e,t,UT),eD=(e,t,r)=>JT(e,t,VT(r)),tD=(e,t)=>JT(e,t,HT),rD=(e,t)=>JT(e,t,$T),nD=GT("type"),oD=YT("fetch"),aD=YT("onAction"),iD=rD("onSetup",(()=>P)),lD=QT("text"),sD=QT("icon"),dD=QT("tooltip"),cD=QT("label"),uD=tD("active",!1),mD=tD("enabled",!0),fD=tD("primary",!1),gD=e=>((e,t)=>JT(e,t,zT))("type",e),pD=BT([nD,GT("trigger"),ZT("minChars",1),(iT=1,((e,t)=>WT(e,e,kT(t),FT()))("columns",iT)),ZT("maxResults",10),(aT="matches",XT(aT,$T)),oD,aD,((e,t,r)=>JT(e,t,PT(r)))("highlightOn",[],zT)]),vD=[mD,dD,sD,lD,iD],hD=[uD].concat(vD),bD=[rD("predicate",q),eD("scope","node",["node","editor"]),eD("position","selection",["node","selection","line"])],yD=vD.concat([gD("contextformbutton"),fD,aD,qT("original",F)]),CD=hD.concat([gD("contextformbutton"),fD,aD,qT("original",F)]),wD=vD.concat([gD("contextformbutton")]),SD=hD.concat([gD("contextformtogglebutton")]),xD=IT("type",{contextformbutton:yD,contextformtogglebutton:CD});BT([gD("contextform"),rD("initValue",I("")),cD,((e,t)=>WT(e,e,{tag:"required",process:{}},PT(t)))("commands",xD),XT("launch",IT("type",{contextformbutton:wD,contextformtogglebutton:SD}))].concat(bD));var kD=e=>{var t=e.ui.registry.getAll().popups,r=Ee(t,(e=>{return(t=e,LT("Autocompleter",pD,d({trigger:t.ch},t))).fold((e=>{throw new Error(MT(e))}),F);var t})),n=Le(Re(r,(e=>e.trigger))),o=Oe(r);return{dataset:r,triggers:n,lookupByTrigger:e=>oe(o,(t=>t.trigger===e))}},ED=e=>{var t=tl(),r=Yi(!1),n=t.isSet,o=()=>{n()&&((e=>{wS(e).autocompleter.removeDecoration()})(e),(e=>{e.dispatch("AutocompleterEnd")})(e),r.set(!1),t.clear())},a=r=>{n()||(((e,t)=>{wS(e).autocompleter.addDecoration(t)})(e,r.range),t.set({trigger:r.trigger,matchLength:r.text.length}))},i=We((()=>kD(e))),l=n=>{(r=>t.get().map((t=>Z_(e.dom,e.selection.getRng(),t.trigger).bind((t=>oT(e,i,t,r))))).getOrThunk((()=>nT(e,i))))(n).fold(o,(n=>{a(n.context),n.lookupData.then((a=>{t.get().map((i=>{var l=n.context;i.trigger===l.trigger&&(l.text.length-i.matchLength>=10?o():(t.set(d(d({},i),{},{matchLength:l.text.length})),r.get()?((e,t)=>{e.dispatch("AutocompleterUpdate",t)})(e,{lookupData:a}):(r.set(!0),((e,t)=>{e.dispatch("AutocompleterStart",t)})(e,{lookupData:a}))))}))}))}))};e.addCommand("mceAutocompleterReload",((e,t)=>{var r=x(t)?t.fetchOptions:{};l(r)})),e.addCommand("mceAutocompleterClose",o),((e,t)=>{var r=nl(t.load,50);e.on("keypress compositionend",(e=>{27!==e.which&&r.throttle()})),e.on("keydown",(e=>{var n=e.which;8===n?r.throttle():27===n&&t.cancelIfNecessary()})),e.on("remove",r.cancel)})(e,{cancelIfNecessary:o,load:l})},ND=Ot().browser.isSafari(),_D=e=>qo(Er.fromDom(e)),TD=(e,t)=>{var r;return 0===e.startOffset&&e.endOffset===(null===(r=t.textContent)||void 0===r?void 0:r.length)},DD=(e,t)=>K.from(e.getParent(t.container(),"details")),RD=(e,t)=>DD(e,t).isSome(),OD=(e,t)=>t.startSummary.exists((t=>((e,t)=>$u(t).exists((t=>t.isEqual(e))))(e,t))),AD=(e,t)=>t.startSummary.exists((t=>((e,t)=>Wu(t).exists((r=>go(r.getNode())&&Hu(t,r).exists((t=>t.isEqual(e)))||r.isEqual(e))))(e,t))),BD=(e,t)=>{var r=t.getNode();T(r)||e.selection.setCursorLocation(r,t.offset())},PD=(e,t,r)=>{var n=e.dom.getParent(t.container(),"details");if(n&&!n.open){var o=e.dom.select("summary",n)[0];if(o)(r?$u(o):Wu(o)).each((t=>BD(e,t)))}else BD(e,t)},LD=(e,t,r)=>{var n=e.dom,o=e.selection,a=e.getBody();if("character"===r){var i=es.fromRangeStart(o.getRng()),l=n.getParent(i.container(),n.isBlock),s=DD(n,i),d=l&&n.isEmpty(l),c=N(null==l?void 0:l.previousSibling),u=N(null==l?void 0:l.nextSibling);if(d)if(t?u:c)if(Fu(!t,a,i).exists((e=>RD(n,e)&&!$t(s,DD(n,e)))))return!0;return Fu(t,a,i).fold(q,(r=>{var o=DD(n,r);if(RD(n,r)&&!$t(s,o)){if(t||PD(e,r,!1),l&&d){if(t&&c)return!0;if(!t&&u)return!0;PD(e,r,t),e.dom.remove(l)}return!0}return!1}))}return!1},MD=(e,t,r,n)=>{var o=e.selection.getRng(),a=es.fromRangeStart(o),i=e.getBody();return"selection"===n?((e,t)=>{var r=t.startSummary.exists((t=>t.contains(e.startContainer))),n=t.startSummary.exists((t=>t.contains(e.endContainer))),o=t.startDetails.forall((e=>t.endDetails.forall((t=>e!==t))));return(r||n)&&!(r&&n)||o})(o,t):r?AD(a,t)||((e,t,r)=>r.startDetails.exists((r=>zu(e,t).forall((e=>!r.contains(e.container()))))))(i,a,t):OD(a,t)||((e,t)=>t.startDetails.exists((r=>Hu(r,e).forall((r=>t.startSummary.exists((t=>!t.contains(e.container())&&t.contains(r.container()))))))))(a,t)},ID=(e,t,r)=>((e,t)=>{var r=K.from(e.getParent(t.startContainer,"details")),n=K.from(e.getParent(t.endContainer,"details"));if(r.isSome()||n.isSome()){var o=r.bind((t=>K.from(e.select("summary",t)[0])));return K.some({startSummary:o,startDetails:r,endDetails:n})}return K.none()})(e.dom,e.selection.getRng()).fold((()=>LD(e,t,r)),(n=>MD(e,n,t,r)||LD(e,t,r))),FD=(e,t,r)=>ID(e,t,r)||ND&&((e,t,r)=>{var n=e.selection,o=n.getNode(),a=n.getRng(),i=es.fromRangeStart(a);return!!xo(o)&&("selection"===r&&TD(a,o)||wh(t,i,o)?_D(o):e.undoManager.transact((()=>{var a=n.getSel(),i=null!=a?a:{},l=i.anchorNode,s=i.anchorOffset,d=i.focusNode,c=i.focusOffset,u=()=>{R(l)&&R(s)&&R(d)&&R(c)&&(null==a||a.setBaseAndExtent(l,s,d,c))},m=(e,t)=>{te(e.childNodes,(e=>{Rm(e)&&t.appendChild(e)}))},f=e.dom.create("span",{"data-mce-bogus":"1"});m(o,f),o.appendChild(f),u(),"word"!==r&&"line"!==r||null==a||a.modify("extend",t?"right":"left",r),!n.isCollapsed()&&TD(n.getRng(),f)?_D(o):(e.execCommand(t?"ForwardDelete":"Delete"),l=null==a?void 0:a.anchorNode,s=null==a?void 0:a.anchorOffset,d=null==a?void 0:a.focusNode,c=null==a?void 0:a.focusOffset,m(f,o),u()),e.dom.remove(f)})),!0)})(e,t,r)?K.some(P):K.none(),jD=e=>function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.getBody(),a={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:P,inputType:r},i=Di(new InputEvent(e));return t.dispatch(e,d(d(d({},i),a),n))},UD=jD("input"),zD=jD("beforeinput"),HD=Ot(),$D=HD.os,WD=$D.isMacOS()||$D.isiOS(),qD=HD.browser.isFirefox(),VD=(e,t)=>{var r=!1;e.on("keydown",(n=>{r=n.keyCode===Of.BACKSPACE,n.isDefaultPrevented()||((e,t,r)=>{var n=r.keyCode===Of.BACKSPACE?"deleteContentBackward":"deleteContentForward",o=e.selection.isCollapsed(),a=o?"character":"selection",i=e=>o?e?"word":"line":"selection";c_([{keyCode:Of.BACKSPACE,action:s_(TN,e)},{keyCode:Of.BACKSPACE,action:s_(Dk,e,!1)},{keyCode:Of.DELETE,action:s_(Dk,e,!0)},{keyCode:Of.BACKSPACE,action:s_(bk,e,!1)},{keyCode:Of.DELETE,action:s_(bk,e,!0)},{keyCode:Of.BACKSPACE,action:s_(nN,e,t,!1)},{keyCode:Of.DELETE,action:s_(nN,e,t,!0)},{keyCode:Of.BACKSPACE,action:s_(Jh,e,!1)},{keyCode:Of.DELETE,action:s_(Jh,e,!0)},{keyCode:Of.BACKSPACE,action:s_(FD,e,!1,a)},{keyCode:Of.DELETE,action:s_(FD,e,!0,a)},...WD?[{keyCode:Of.BACKSPACE,altKey:!0,action:s_(FD,e,!1,i(!0))},{keyCode:Of.DELETE,altKey:!0,action:s_(FD,e,!0,i(!0))},{keyCode:Of.BACKSPACE,metaKey:!0,action:s_(FD,e,!1,i(!1))}]:[{keyCode:Of.BACKSPACE,ctrlKey:!0,action:s_(FD,e,!1,i(!0))},{keyCode:Of.DELETE,ctrlKey:!0,action:s_(FD,e,!0,i(!0))}],{keyCode:Of.BACKSPACE,action:s_(Rk,e,!1)},{keyCode:Of.DELETE,action:s_(Rk,e,!0)},{keyCode:Of.BACKSPACE,action:s_(CN,e,!1)},{keyCode:Of.DELETE,action:s_(CN,e,!0)},{keyCode:Of.BACKSPACE,action:s_(uk,e,!1)},{keyCode:Of.DELETE,action:s_(uk,e,!0)},{keyCode:Of.BACKSPACE,action:s_(lk,e,!1)},{keyCode:Of.DELETE,action:s_(lk,e,!0)},{keyCode:Of.BACKSPACE,action:s_(pN,e,!1)},{keyCode:Of.DELETE,action:s_(pN,e,!0)}],r).filter((t=>e.selection.isEditable())).each((t=>{r.preventDefault(),zD(e,n).isDefaultPrevented()||(t(),UD(e,n))}))})(e,t,n)})),e.on("keyup",(t=>{t.isDefaultPrevented()||((e,t,r)=>{d_([{keyCode:Of.BACKSPACE,action:s_(Tk,e)},{keyCode:Of.DELETE,action:s_(Tk,e)},...WD?[{keyCode:Of.BACKSPACE,altKey:!0,action:s_(bN,e)},{keyCode:Of.DELETE,altKey:!0,action:s_(bN,e)},...r?[{keyCode:qD?224:91,action:s_(bN,e)}]:[]]:[{keyCode:Of.BACKSPACE,ctrlKey:!0,action:s_(bN,e)},{keyCode:Of.DELETE,ctrlKey:!0,action:s_(bN,e)}]],t)})(e,t,r),r=!1}))},KD=(e,t)=>{var r=e.dom,n=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var o=(e=>{for(;e;){if(Jn(e)||lo(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null})(t.firstChild);o&&/^(UL|OL|DL)$/.test(o.nodeName)&&t.insertBefore(r.doc.createTextNode(Eo),t.firstChild)}var a=r.createRng();if(t.normalize(),t.hasChildNodes()){for(var i,l=new Kn(t,t),s=t;i=l.current();){if(lo(i)){a.setStart(i,0),a.setEnd(i,0);break}if(n[i.nodeName.toLowerCase()]){a.setStartBefore(i),a.setEndBefore(i);break}s=i,i=l.next()}i||(a.setStart(s,0),a.setEnd(s,0))}else go(t)?t.nextSibling&&r.isBlock(t.nextSibling)?(a.setStartBefore(t),a.setEndBefore(t)):(a.setStartAfter(t),a.setEndAfter(t)):(a.setStart(t,0),a.setEnd(t,0));e.selection.setRng(a),Mg(e,a)}},GD=(e,t)=>{for(var r,n=e.getRoot(),o=t;o!==n&&o&&"false"!==e.getContentEditable(o);){if("true"===e.getContentEditable(o)){r=o;break}o=o.parentNode}return o!==n?r:n},YD=e=>K.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),XD=e=>{e.innerHTML='<br data-mce-bogus="1">'},QD=(e,t)=>{Gs(e).toLowerCase()===t.tagName.toLowerCase()&&((e,t,r)=>{var n=e.dom;K.from(r.style).map(n.parseStyle).each((e=>{var r=d(d({},bn(Er.fromDom(t))),e);n.setStyles(t,r)}));var o=K.from(r.class).map((e=>e.split(/\s+/))),a=K.from(t.className).map((e=>oe(e.split(/\s+/),(e=>""!==e))));Wt(o,a,((e,r)=>{var o=oe(r,(t=>!J(e,t))),a=[...e,...o];n.setAttrib(t,"class",a.join(" "))}));var i=["style","class"],l=De(r,((e,t)=>!J(i,t)));n.setAttribs(t,l)})(e,t,Ys(e))},JD=function(e,t,r,n){var o,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5?arguments[5]:void 0,l=e.dom,s=e.schema,d=Gs(e),c=r?r.nodeName.toUpperCase():"",u=t,m=s.getTextInlineElements(),f=o=i||"TABLE"===c||"HR"===c?l.create(i||d):r.cloneNode(!1);if(a){do{if(m[u.nodeName]){if(Vu(u)||im(u))continue;var g=u.cloneNode(!1);l.setAttrib(g,"id",""),o.hasChildNodes()?(g.appendChild(o.firstChild),o.appendChild(g)):(f=g,o.appendChild(g))}}while((u=u.parentNode)&&u!==n)}else l.setAttrib(o,"style",null),l.setAttrib(o,"class",null);return QD(e,o),XD(f),o},ZD=(e,t,r)=>!t&&r.nodeName.toLowerCase()===Gs(e)&&e.dom.isEmpty(r)&&((e,t,r)=>{for(var n=t;n&&n!==e&&N(n.nextSibling);){var o=n.parentElement;if(!o||!r(o))return So(o);n=o}return!1})(e.getBody(),r,(t=>Be(e.schema.getTextBlockElements(),t.nodeName.toLowerCase()))),eR=(e,t,r)=>{var n,o,a,i=t(Gs(e)),l=((e,t)=>e.dom.getParent(t,So))(e,r);l&&(e.dom.insertAfter(i,l),KD(e,i),(null!==(a=null===(o=null===(n=r.parentElement)||void 0===n?void 0:n.childNodes)||void 0===o?void 0:o.length)&&void 0!==a?a:0)>1&&e.dom.remove(r))},tR=(e,t)=>{var r=null==e?void 0:e.parentNode;return R(r)&&r.nodeName===t},rR=e=>R(e)&&/^(OL|UL|LI)$/.test(e.nodeName),nR=e=>{var t,r=e.parentNode;return R(t=r)&&/^(LI|DT|DD)$/.test(t.nodeName)?r:e},oR=(e,t,r)=>{for(var n=e[r?"firstChild":"lastChild"];n&&!Jn(n);)n=n[r?"nextSibling":"previousSibling"];return n===t},aR=(e,t,r,n,o)=>{var a=e.dom,i=e.selection.getRng(),l=r.parentNode;if(r!==e.getBody()&&l){var s;rR(s=r)&&rR(s.parentNode)&&(o="LI");var d=t(o);if(oR(r,n,!0)&&oR(r,n,!1))if(tR(r,"LI")){var c=nR(r);a.insertAfter(d,c),(e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e})(r)?a.remove(c):a.remove(r)}else a.replace(d,r);else if(oR(r,n,!0))tR(r,"LI")?(a.insertAfter(d,nR(r)),d.appendChild(a.doc.createTextNode(" ")),d.appendChild(r)):l.insertBefore(d,r),a.remove(n);else if(oR(r,n,!1))a.insertAfter(d,nR(r)),a.remove(n);else{r=nR(r);var u=i.cloneRange();u.setStartAfter(n),u.setEndAfter(r);var m=u.extractContents();"LI"===o&&((e,t)=>e.firstChild&&e.firstChild.nodeName===t)(m,"LI")?(d=m.firstChild,a.insertAfter(m,r)):(a.insertAfter(m,r),a.insertAfter(d,r)),a.remove(n)}KD(e,d)}},iR=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),lR=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,sR=(e,t)=>R(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),dR=(e,t,r)=>lo(t)?e?1===r&&t.data.charAt(r-1)===Ko?0:r:r===t.data.length-1&&t.data.charAt(r)===Ko?t.data.length:r:r,cR={insert:(e,t)=>{var r,n,o,a,i=!1,l=e.dom,s=e.schema.getNonEmptyElements(),d=e.selection.getRng(),c=Gs(e),u=Er.fromDom(d.startContainer),m=Hr(u,d.startOffset),f=m.exists((e=>er(e)&&!dn(e))),g=d.collapsed&&f,p=t=>JD(e,r,w,C,Zs(e),t),v=e=>{var t=dR(e,r,n);if(lo(r)&&(e?t>0:t<r.data.length))return!1;if(r.parentNode===w&&i&&!e)return!0;if(e&&Jn(r)&&r===w.firstChild)return!0;if(lR(r,"TABLE")||lR(r,"HR"))return i&&!e||!i&&e;var o,a=new Kn(r,w);for(lo(r)&&(e&&0===t?a.prev():e||t!==r.data.length||a.next());o=a.current();){if(Jn(o)){if(!o.getAttribute("data-mce-bogus")){var l=o.nodeName.toLowerCase();if(s[l]&&"br"!==l)return!1}}else if(lo(o)&&!Ca(o.data))return!1;e?a.prev():a.next()}return!0},h=()=>{var t;return t=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==x?p(c):p(),((e,t)=>{var r=ed(e);return!D(t)&&(S(r)?J(zt.explode(r),t.nodeName.toLowerCase()):r)})(e,a)&&sR(l,a)&&l.isEmpty(w,void 0,{includeZwsp:!0})?t=l.split(a,w):l.insertAfter(t,w),KD(e,t),t};cg(l,d).each((e=>{d.setStart(e.startContainer,e.startOffset),d.setEnd(e.endContainer,e.endOffset)})),r=d.startContainer,n=d.startOffset;var b=!(!t||!t.shiftKey),y=!(!t||!t.ctrlKey);Jn(r)&&r.hasChildNodes()&&!g&&(i=n>r.childNodes.length-1,r=r.childNodes[Math.min(n,r.childNodes.length-1)]||r,n=i&&lo(r)?r.data.length:0);var C=GD(l,r);if(C&&!((e,t)=>{var r=e.dom.getParent(t,"ol,ul,dl");return null!==r&&"false"===e.dom.getContentEditableParent(r)})(e,r)){b||(r=((e,t,r,n,o)=>{var a,i,l=e.dom,s=null!==(a=GD(l,n))&&void 0!==a?a:l.getRoot(),d=l.getParent(n,l.isBlock);if(!d||!sR(l,d)){if(!(d=d||s).hasChildNodes()){var c=l.create(t);return QD(e,c),d.appendChild(c),r.setStart(c,0),r.setEnd(c,0),c}for(var u,m=n;m&&m.parentNode!==d;)m=m.parentNode;for(;m&&!l.isBlock(m);)u=m,m=m.previousSibling;var f=null===(i=null==u?void 0:u.parentElement)||void 0===i?void 0:i.nodeName;if(u&&f&&e.schema.isValidChild(f,t.toLowerCase())){var g=u.parentNode,p=l.create(t);for(QD(e,p),g.insertBefore(p,u),m=u;m&&!l.isBlock(m);){var v=m.nextSibling;p.appendChild(m),m=v}r.setStart(n,o),r.setEnd(n,o)}}return n})(e,c,d,r,n));var w=l.getParent(r,l.isBlock)||l.getRoot();a=R(null==w?void 0:w.parentNode)?l.getParent(w.parentNode,l.isBlock):null,o=w?w.nodeName.toUpperCase():"";var x=a?a.nodeName.toUpperCase():"";if("LI"===x&&!y){w=a,a=a.parentNode,o=x}if(Jn(a)&&ZD(e,b,w))return eR(e,p,w);if(/^(LI|DT|DD)$/.test(o)&&Jn(a)&&l.isEmpty(w))aR(e,p,a,w,c);else if(g||w!==e.getBody()&&sR(l,w)){var k,E=w.parentNode;if(g)k=p(c),m.fold((()=>{xn(u,Er.fromDom(k))}),(e=>{Cn(e,Er.fromDom(k))})),e.selection.setCursorLocation(k,0);else if(Jo(w))k=ia(w),l.isEmpty(w)&&XD(w),QD(e,k),KD(e,k);else if(v(!1))k=h();else if(v(!0)&&E){k=E.insertBefore(p(),w);var N=Er.fromDom(d.startContainer).dom.hasChildNodes()&&d.collapsed;KD(e,lR(w,"HR")||N?k:w)}else{var _=(e=>{var t=e.cloneRange();return t.setStart(e.startContainer,dR(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,dR(!1,e.endContainer,e.endOffset)),t})(d).cloneRange();_.setEndAfter(w);var T=_.extractContents();(e=>{te(Wn(Er.fromDom(e),rr),(e=>{var t=e.dom;t.nodeValue=Yo(t.data)}))})(T),(e=>{var t=e;do{lo(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)})(T),k=T.firstChild,l.insertAfter(T,w),((e,t,r)=>{var n,o=[];if(r){for(var a=r;a=a.firstChild;){if(e.isBlock(a))return;Jn(a)&&!t[a.nodeName.toLowerCase()]&&o.push(a)}for(var i=o.length;i--;)(!(a=o[i]).hasChildNodes()||a.firstChild===a.lastChild&&""===(null===(n=a.firstChild)||void 0===n?void 0:n.nodeValue)||iR(e,a))&&e.remove(a)}})(l,s,k),((e,t)=>{t.normalize();var r=t.lastChild;(!r||Jn(r)&&/^(left|right)$/gi.test(e.getStyle(r,"float",!0)))&&e.add(t,"br")})(l,w),l.isEmpty(w)&&XD(w),k.normalize(),l.isEmpty(k)?(l.remove(k),h()):(QD(e,k),KD(e,k))}l.setAttrib(k,"id",""),e.dispatch("NewBlock",{newBlock:k})}}},fakeEventName:"insertParagraph"},uR=(e,t,r)=>{var n=e.dom.createRng();r?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),e.selection.setRng(n),Mg(e,n)},mR=(e,t)=>{var r,n=e.selection,o=e.dom,a=n.getRng(),i=!1;cg(o,a).each((e=>{a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)}));var l=a.startOffset,s=a.startContainer;if(Jn(s)&&s.hasChildNodes()){var d=l>s.childNodes.length-1;s=s.childNodes[Math.min(l,s.childNodes.length-1)]||s,l=d&&lo(s)?s.data.length:0}var c=o.getParent(s,o.isBlock),u=c&&c.parentNode?o.getParent(c.parentNode,o.isBlock):null,m=u?u.nodeName.toUpperCase():"",f=!(!t||!t.ctrlKey);"LI"!==m||f||(c=u),lo(s)&&l>=s.data.length&&(((e,t,r)=>{for(var n,o=new Kn(t,r),a=e.getNonEmptyElements();n=o.next();)if(a[n.nodeName.toLowerCase()]||lo(n)&&n.length>0)return!0;return!1})(e.schema,s,c||o.getRoot())||(r=o.create("br"),a.insertNode(r),a.setStartAfter(r),a.setEndAfter(r),i=!0)),r=o.create("br"),rs(o,a,r),uR(e,r,i),e.undoManager.add()},fR=(e,t)=>{var r=Er.fromTag("br");Cn(Er.fromDom(t),r),e.undoManager.add()},gR=(e,t)=>{pR(e.getBody(),t)||wn(Er.fromDom(t),Er.fromTag("br"));var r=Er.fromTag("br");wn(Er.fromDom(t),r),uR(e,r.dom,!1),e.undoManager.add()},pR=(e,t)=>{return r=es.after(t),!!go(r.getNode())||zu(e,es.after(t)).map((e=>go(e.getNode()))).getOr(!1);var r},vR=e=>e&&"A"===e.nodeName&&"href"in e,hR=e=>e.fold(q,vR,vR,q),bR=(e,t)=>{t.fold(P,U(fR,e),U(gR,e),P)},yR={insert:(e,t)=>{var r=(e=>{var t=U(ch,e),r=es.fromRangeStart(e.selection.getRng());return Qk(t,e.getBody(),r).filter(hR)})(e);r.isSome()?r.each(U(bR,e)):mR(e,t)},fakeEventName:"insertLineBreak"},CR=(e,t)=>YD(e).filter((e=>t.length>0&&_r(Er.fromDom(e),t))).isSome(),wR=Ns([{br:[]},{block:[]},{none:[]}]),SR=(e,t)=>(e=>CR(e,Js(e)))(e),xR=e=>(t,r)=>(e=>YD(e).filter((e=>Io(Er.fromDom(e)))).isSome())(t)===e,kR=(e,t)=>(r,n)=>{var o=(e=>YD(e).fold(I(""),(e=>e.nodeName.toUpperCase())))(r)===e.toUpperCase();return o===t},ER=e=>{var t=GD(e.dom,e.selection.getStart());return D(t)},NR=e=>kR("pre",e),_R=e=>(t,r)=>Ks(t)===e,TR=(e,t)=>(e=>CR(e,Qs(e)))(e),DR=(e,t)=>t,RR=e=>{var t=Gs(e),r=GD(e.dom,e.selection.getStart());return R(r)&&e.schema.isValidChild(r.nodeName,t)},OR=e=>{var t=e.selection.getRng(),r=Er.fromDom(t.startContainer),n=Hr(r,t.startOffset).map((e=>er(e)&&!dn(e)));return t.collapsed&&n.getOr(!0)},AR=(e,t)=>(r,n)=>ie(e,((e,t)=>e&&t(r,n)),!0)?K.some(t):K.none(),BR=(e,t,r)=>{if((t.selection.isCollapsed()||(e=>{e.execCommand("delete")})(t),R(r))&&zD(t,e.fakeEventName).isDefaultPrevented())return;e.insert(t,r),R(r)&&UD(t,e.fakeEventName)},PR=(e,t)=>{var r=()=>BR(yR,e,t),n=()=>BR(cR,e,t),o=((e,t)=>zk([AR([SR],wR.none()),AR([NR(!0),ER],wR.none()),AR([kR("summary",!0)],wR.br()),AR([NR(!0),_R(!1),DR],wR.br()),AR([NR(!0),_R(!1)],wR.block()),AR([NR(!0),_R(!0),DR],wR.block()),AR([NR(!0),_R(!0)],wR.br()),AR([xR(!0),DR],wR.br()),AR([xR(!0)],wR.block()),AR([TR],wR.br()),AR([DR],wR.br()),AR([RR],wR.block()),AR([OR],wR.block())],[e,!(!t||!t.shiftKey)]).getOr(wR.none()))(e,t);switch(Xs(e)){case"linebreak":o.fold(r,r,P);break;case"block":o.fold(n,n,P);break;case"invert":o.fold(n,r,P);break;default:o.fold(r,n,P)}},LR=Ot(),MR=LR.os.isiOS()&&LR.browser.isSafari(),IR=(e,t)=>{var r;t.isDefaultPrevented()||(t.preventDefault(),(r=e.undoManager).typing&&(r.typing=!1,r.add()),e.undoManager.transact((()=>{PR(e,t)})))},FR=e=>{var t=K.none();e.on("keydown",(r=>{r.keyCode===Of.ENTER&&(MR&&(e=>{if(!e.collapsed)return!1;var t=e.startContainer;if(lo(t)){var r=t.data.charAt(e.startOffset-1);return/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/.test(r)}return!1})(e.selection.getRng())?(e=>{t=K.some(e.selection.getBookmark()),e.undoManager.add()})(e):IR(e,r))})),e.on("keyup",(r=>{r.keyCode===Of.ENTER&&t.each((()=>((e,r)=>{e.undoManager.undo(),t.fold(P,(t=>e.selection.moveToBookmark(t))),IR(e,r),t=K.none()})(e,r)))}))},jR=(e,t)=>{e.on("keydown",(r=>{r.isDefaultPrevented()||((e,t,r)=>{var n=Ft.os.isMacOS()||Ft.os.isiOS();d_([{keyCode:Of.END,action:s_(QN,e,!0)},{keyCode:Of.HOME,action:s_(QN,e,!1)},...n?[]:[{keyCode:Of.HOME,action:s_(JN,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Of.END,action:s_(JN,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Of.END,action:s_(f_,e,!0)},{keyCode:Of.HOME,action:s_(f_,e,!1)},{keyCode:Of.END,action:s_(ZE,e,!0,t)},{keyCode:Of.HOME,action:s_(ZE,e,!1,t)}],r).each((e=>{r.preventDefault()}))})(e,t,r)}))},UR=e=>{e.on("input",(t=>{t.isComposing||(e=>{var t=Er.fromDom(e.getBody());e.selection.isCollapsed()&&Kv(t,es.fromRangeStart(e.selection.getRng())).each((t=>{e.selection.setRng(t.toRange())}))})(e)}))},zR=Ot(),HR=e=>e.stopImmediatePropagation(),$R=e=>e.keyCode===Of.PAGE_UP||e.keyCode===Of.PAGE_DOWN,WR=(e,t,r)=>{r&&!e.get()?t.on("NodeChange",HR,!0):!r&&e.get()&&t.off("NodeChange",HR),e.set(r)},qR=(e,t)=>{if(!zR.os.isMacOS()){var r=Yi(!1);e.on("keydown",(t=>{$R(t)&&WR(r,e,!0)})),e.on("keyup",(n=>{n.isDefaultPrevented()||((e,t,r)=>{d_([{keyCode:Of.PAGE_UP,action:s_(ZE,e,!1,t)},{keyCode:Of.PAGE_DOWN,action:s_(ZE,e,!0,t)}],r)})(e,t,n),$R(n)&&r.get()&&(WR(r,e,!1),e.nodeChanged())}))}},VR=(e,t)=>{var r=t.container(),n=t.offset();return lo(r)?(r.insertData(n,e),K.some(es(r,n+e.length))):bu(t).map((r=>{var n=Er.fromText(e);return t.isAtEnd()?wn(r,n):Cn(r,n),es(n.dom,e.length)}))},KR=U(VR,Eo),GR=U(VR," "),YR=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},XR=e=>{var t=es.fromRangeStart(e.selection.getRng()),r=Er.fromDom(e.getBody());if(e.selection.isCollapsed()){var n=U(ch,e),o=es.fromRangeStart(e.selection.getRng());return Qk(n,e.getBody(),o).bind((e=>t=>t.fold((t=>Hu(e.dom,es.before(t))),(e=>$u(e)),(e=>Wu(e)),(t=>zu(e.dom,es.after(t)))))(r)).map((n=>()=>((e,t)=>r=>Fv(e,r)?KR(t):GR(t))(r,t)(n).each(YR(e))))}return K.none()},QR=e=>{var t,r;return qt(Ft.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,r=e.selection.getRng().startContainer,t.isEditable(t.getParent(r,"summary"))),(()=>{var t=Er.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),((e,t)=>Fv(e,t)?KR(t):GR(t))(t,es.fromRangeStart(e.selection.getRng())).each(YR(e))}))},JR=e=>{e.on("keydown",(t=>{t.isDefaultPrevented()||((e,t)=>{c_([{keyCode:Of.SPACEBAR,action:s_(XR,e)},{keyCode:Of.SPACEBAR,action:s_(QR,e)}],t).each((r=>{t.preventDefault(),zD(e,"insertText",{data:" "}).isDefaultPrevented()||(r(),UD(e,"insertText",{data:" "}))}))})(e,t)}))},ZR=e=>_c(e)?[{keyCode:Of.TAB,action:s_(U_,e,!0)},{keyCode:Of.TAB,shiftKey:!0,action:s_(U_,e,!1)}]:[],eO=e=>{e.on("keydown",(t=>{t.isDefaultPrevented()||((e,t)=>{d_([...ZR(e)],t).each((e=>{t.preventDefault()}))})(e,t)}))},tO=e=>{if(e.addShortcut("Meta+P","","mcePrint"),ED(e),bS(e))return Yi(null);var t=XE(e);return(e=>{e.on("keyup compositionstart",U(WN,e))})(e),z_(e,t),VD(e,t),FR(e),JR(e),UR(e),eO(e),jR(e,t),qR(e,t),t};class rO{constructor(e){var t;this.lastPath=[],this.editor=e;var r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",(r=>{var n=e.selection.getRng(),o={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset};"nodechange"!==r.type&&ng(o,t)||e.dispatch("SelectionChange"),t=o})),e.on("contextmenu",(()=>{e.dispatch("SelectionChange")})),e.on("SelectionChange",(()=>{var t=e.selection.getStart(!0);t&&_m(e)&&!r.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})})),e.on("mouseup",(t=>{!t.isDefaultPrevented()&&_m(e)&&("IMG"===e.selection.getNode().nodeName?Xg.setEditorTimeout(e,(()=>{e.nodeChanged()})):e.nodeChanged())}))}nodeChanged(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.editor.selection;if(this.editor.initialized&&r&&!Hd(this.editor)&&!this.editor.mode.isReadOnly()){var n=this.editor.getBody();(e=r.getStart(!0)||n).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(e,n)||(e=n);var o=[];this.editor.dom.getParent(e,(e=>e===n||(o.push(e),!1))),this.editor.dispatch("NodeChange",d(d({},t),{},{element:e,parents:o}))}}isSameElementPath(e){var t,r=this.editor,n=fe(r.dom.getParents(e,V,r.getBody()));if(n.length===this.lastPath.length){for(t=n.length;t>=0&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1}}var nO,oO,aO=bl("image"),iO=bl("event"),lO=e=>t=>{t[iO]=e},sO=lO(0),dO=lO(2),cO=lO(1),uO=(nO=0,e=>{var t=e;return K.from(t[iO]).exists((e=>e===nO))}),mO=bl("mode"),fO=e=>t=>{t[mO]=e},gO=(e,t)=>fO(t)(e),pO=fO(0),vO=fO(2),hO=fO(1),bO=e=>t=>{var r=t;return K.from(r[mO]).exists((t=>t===e))},yO=bO(0),CO=bO(1),wO=["none","copy","link","move"],SO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],xO=()=>{var e=new window.DataTransfer,t="move",r="all",n={get dropEffect(){return t},set dropEffect(e){J(wO,e)&&(t=e)},get effectAllowed(){return r},set effectAllowed(e){uO(n)&&J(SO,e)&&(r=e)},get items(){return((e,t)=>d(d({},t),{},{get length(){return t.length},add:(r,n)=>{if(yO(e)){if(!S(r))return t.add(r);if(!T(n))return t.add(r,n)}return null},remove:r=>{yO(e)&&t.remove(r)},clear:()=>{yO(e)&&t.clear()}}))(n,e.items)},get files(){return CO(n)?Object.freeze({length:0,item:e=>null}):e.files},get types(){return e.types},setDragImage:(t,r,o)=>{var a;yO(n)&&(a={image:t,x:r,y:o},n[aO]=a,e.setDragImage(t,r,o))},getData:t=>CO(n)?"":e.getData(t),setData:(t,r)=>{yO(n)&&e.setData(t,r)},clearData:t=>{yO(n)&&e.clearData(t)}};return pO(n),n},kO=e=>{var t,r=xO(),n=(t=e,K.from(t[mO]));return vO(e),sO(r),r.dropEffect=e.dropEffect,r.effectAllowed=e.effectAllowed,(e=>{var t=e;return K.from(t[aO])})(e).each((e=>r.setDragImage(e.image,e.x,e.y))),te(e.types,(t=>{"Files"!==t&&r.setData(t,e.getData(t))})),te(e.files,(e=>r.items.add(e))),(e=>{var t=e;return K.from(t[iO])})(e).each((e=>{((e,t)=>{lO(t)(e)})(r,e)})),n.each((t=>{gO(e,t),gO(r,t)})),r},EO=(e,t)=>e.setData("text/html",t),NO="x-tinymce/html",_O=I(NO),TO="\x3c!-- "+NO+" --\x3e",DO=e=>TO+e,RO=e=>-1!==e.indexOf(TO),OO=(e,t,r)=>{var n=e.split(/\n\n/),o=((e,t)=>{var r="<"+e,n=Re(t,((e,t)=>t+'="'+fi.encodeAllRaw(e)+'"'));return n.length&&(r+=" "+n.join(" ")),r+">"})(t,r),a="</"+t+">",i=ee(n,(e=>e.split(/\n/).join("<br />")));return 1===i.length?i[0]:ee(i,(e=>o+e+a)).join("")},AO="%MCEPASTEBIN%",BO=e=>e.dom.get("mcepastebin"),PO=e=>R(e)&&"mcepastebin"===e.id,LO=e=>e===AO,MO=e=>{var t=Yi(null);return{create:()=>((e,t)=>{var r=e.dom,n=e.selection,o=e.getBody();t.set(n.getRng());var a=r.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},AO);Ft.browser.isFirefox()&&r.setStyle(a,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(a,"beforedeactivate focusin focusout",(e=>{e.stopPropagation()})),a.focus(),n.select(a,!0)})(e,t),remove:()=>((e,t)=>{var r=e.dom;if(BO(e)){for(var n,o=t.get();n=BO(e);)r.remove(n),r.unbind(n);o&&e.selection.setRng(o)}t.set(null)})(e,t),getEl:()=>BO(e),getHtml:()=>(e=>{var t=e.dom,r=(e,r)=>{e.appendChild(r),t.remove(r,!0)},n=i(oe(e.getBody().childNodes,PO)),o=n[0],a=n.slice(1);te(a,(e=>{r(o,e)}));for(var l=t.select("div[id=mcepastebin]",o),s=l.length-1;s>=0;s--){var d=t.create("div");o.insertBefore(d,l[s]),r(d,l[s])}return o?o.innerHTML:""})(e),getLastRng:t.get}},IO=(e,t)=>(zt.each(t,(t=>{e=w(t,RegExp)?e.replace(t,""):e.replace(t[0],t[1])})),e),FO=e=>e=IO(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,r)=>t||r?Eo:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),jO=(e,t)=>({content:e,cancelled:t}),UO=(e,t,r)=>{var n=((e,t,r)=>e.dispatch("PastePreProcess",{content:t,internal:r}))(e,t,r),o=((e,t)=>{var r=Aw({sanitize:kc(e)},e.schema);r.addNodeFilter("meta",(e=>{zt.each(e,(e=>{e.remove()}))}));var n=r.parse(t,{forced_root_block:!1,isRootContent:!0});return Gp({validate:!0},e.schema).serialize(n)})(e,n.content);return e.hasEventListeners("PastePostProcess")&&!n.isDefaultPrevented()?((e,t,r)=>{var n=e.dom.create("div",{style:"display:none"},t),o=((e,t,r)=>e.dispatch("PastePostProcess",{node:t,internal:r}))(e,n,r);return jO(o.node.innerHTML,o.isDefaultPrevented())})(e,o,r):jO(o,n.isDefaultPrevented())},zO=(e,t)=>(e.insertContent(t,{merge:mc(e),paste:!0}),!0),HO=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),$O=(e,t,r)=>!(e.selection.isCollapsed()||!HO(t))&&((e,t,r)=>(e.undoManager.extra((()=>{r(e,t)}),(()=>{e.execCommand("mceInsertLink",!1,t)})),!0))(e,t,r),WO=(e,t,r)=>!!((e,t)=>HO(t)&&Z(Nc(e),(e=>Ze(t.toLowerCase(),`.${e.toLowerCase()}`))))(e,t)&&((e,t,r)=>(e.undoManager.extra((()=>{r(e,t)}),(()=>{e.insertContent('<img src="'+t+'">')})),!0))(e,t,r),qO=(e,t,r)=>{r||!fc(e)?zO(e,t):((e,t)=>{zt.each([$O,WO,zO],(r=>!r(e,t,zO)))})(e,t)},VO=(e=>{var t=0;return()=>e+t++})("mceclip"),KO=e=>{var t=xO();return EO(t,e),vO(t),t},GO=(e,t,r,n,o)=>{var a=((e,t,r)=>UO(e,t,r))(e,t,r);if(!a.cancelled){var i=a.content,l=()=>qO(e,i,n);if(o)zD(e,"insertFromPaste",{dataTransfer:KO(i)}).isDefaultPrevented()||(l(),UD(e,"insertFromPaste"));else l()}},YO=(e,t,r,n)=>{var o=r||RO(t);GO(e,(e=>e.replace(TO,""))(t),o,!1,n)},XO=(e,t,r)=>{var n=e.dom.encode(t).replace(/\r\n/g,"\n"),o=xa(n,pc(e)),a=OO(o,Gs(e),Ys(e));GO(e,a,!1,!0,r)},QO=e=>{var t={};if(e&&e.types)for(var r=0;r<e.types.length;r++){var n=e.types[r];try{t[n]=e.getData(n)}catch(e){t[n]=""}}return t},JO=(e,t)=>t in e&&e[t].length>0,ZO=e=>JO(e,"text/html")||JO(e,"text/plain"),eA=(e,t,r,n)=>{var o=VO(),a=rd(e)&&R(r.name),i=a?((e,t)=>{var r=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return R(r)?e.dom.encode(r[1]):void 0})(e,r.name):o,l=a?r.name:void 0,s=t.create(o,r,n,i,l);return t.add(s),s},tA=e=>{var t=Nc(e);return e=>Je(e.type,"image/")&&Z(t,(t=>{return r=t.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"},(zt.hasOwn(n,r)?"image/"+n[r]:"image/"+r)===e.type;var r,n}))},rA=(e,t,r)=>{var n,o="paste"===t.type?t.clipboardData:t.dataTransfer;if(ic(e)&&o){var a=((e,t)=>{var r=t.items?ue(Ce(t.items),(e=>"file"===e.kind?[e.getAsFile()]:[])):[],n=t.files?Ce(t.files):[];return oe(r.length>0?r:n,tA(e))})(e,o);if(a.length>0)return t.preventDefault(),(n=a,Promise.all(ee(n,(e=>oC(e).then((t=>({file:e,uri:t}))))))).then((t=>{r&&e.selection.setRng(r),te(t,(t=>{((e,t)=>{tC(t.uri).each((r=>{var n=r.data,o=r.type,a=r.base64Encoded?n:btoa(n),i=t.file,l=e.editorUpload.blobCache,s=l.getByData(a,o),d=null!=s?s:eA(e,l,i,a);YO(e,`<img src="${d.blobUri()}">`,!1,!0)}))})(e,t)}))})),!0}return!1},nA=(e,t,r,n,o)=>{var a=FO(r),i=JO(t,_O())||RO(r),l=!i&&(e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e))(a),s=HO(a);(LO(a)||!a.length||l&&!s)&&(n=!0),(n||s)&&(a=JO(t,"text/plain")&&l?t["text/plain"]:(e=>{var t=Ei(),r=Aw({},t),n="",o=t.getVoidElements(),a=zt.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),l=e=>{var r=e.name,s=e;if("br"!==r){if("wbr"!==r)if(o[r]&&(n+=" "),a[r])n+=" ";else{if(3===e.type&&(n+=e.value),!(e.name in t.getVoidElements())){var d=e.firstChild;if(d)do{l(d)}while(d=d.next)}i[r]&&s.next&&(n+="\n","p"===r&&(n+="\n"))}}else n+="\n"};return e=IO(e,[/<!\[[^\]]+\]>/g]),l(r.parse(e)),n})(a)),LO(a)||(n?XO(e,a,o):YO(e,a,i,o))},oA=(e,t,r)=>{var n;e.on("keydown",(e=>{(e=>Of.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode)(e)&&!e.isDefaultPrevented()&&(n=e.shiftKey&&86===e.keyCode)})),e.on("paste",(o=>{if(!o.isDefaultPrevented()&&!(e=>{var t,r;return Ft.os.isAndroid()&&0===(null===(r=null===(t=e.clipboardData)||void 0===t?void 0:t.items)||void 0===r?void 0:r.length)})(o)){var a="text"===r.get()||n;n=!1;var i=QO(o.clipboardData);!ZO(i)&&rA(e,o,t.getLastRng()||e.selection.getRng())||(JO(i,"text/html")?(o.preventDefault(),nA(e,i,i["text/html"],a,!0)):JO(i,"text/plain")&&JO(i,"text/uri-list")?(o.preventDefault(),nA(e,i,i["text/plain"],a,!0)):(t.create(),Xg.setEditorTimeout(e,(()=>{var r=t.getHtml();t.remove(),nA(e,i,r,a,!1)}),0)))}}))},aA=(e,t,r)=>{oA(e,t,r),(e=>{var t=e=>Je(e,"webkit-fake-url"),r=e=>Je(e,"data:");e.parser.addNodeFilter("img",((n,o,a)=>{if(!ic(e)&&(e=>{var t;return!0===(null===(t=e.data)||void 0===t?void 0:t.paste)})(a)){var i,l=g(n);try{for(l.s();!(i=l.n()).done;){var s=i.value,d=s.attr("src");S(d)&&!s.attr("data-mce-object")&&d!==Ft.transparentSrc&&(t(d)||!vc(e)&&r(d))&&s.remove()}}catch(e){l.e(e)}finally{l.f()}}}))})(e)},iA=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",(()=>{((e,t)=>{"text"===t.get()?(t.set("html"),Rf(e,!1)):(t.set("text"),Rf(e,!0)),e.focus()})(e,t)})),e.addCommand("mceInsertClipboardContent",((t,r)=>{r.html&&YO(e,r.html,r.internal,!1),r.text&&XO(e,r.text,!1)}))},lA=(e,t,r,n)=>{((e,t,r)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",r),e.setData(_O(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),n()):r(t.html,n)},sA=e=>(t,r)=>{var n=e.dom,o=e.selection,a=n.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=n.create("div",{contenteditable:"true"},t);n.setStyles(a,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(i),n.add(e.getBody(),a);var l=o.getRng();i.focus();var s=n.createRng();s.selectNodeContents(i),o.setRng(s),Xg.setEditorTimeout(e,(()=>{o.setRng(l),n.remove(a),r()}),0)},dA=e=>({html:DO(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),cA=e=>!e.selection.isCollapsed()||(e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()))(e),uA=e=>{e.on("cut",(e=>t=>{!t.isDefaultPrevented()&&cA(e)&&lA(t,dA(e),sA(e),(()=>{if(Ft.browser.isChromium()||Ft.browser.isFirefox()){var t=e.selection.getRng();Xg.setEditorTimeout(e,(()=>{e.selection.setRng(t),e.execCommand("Delete")}),0)}else e.execCommand("Delete")}))})(e)),e.on("copy",(e=>t=>{!t.isDefaultPrevented()&&cA(e)&&lA(t,dA(e),sA(e),P)})(e))},mA=(e,t)=>{var r,n;return fg.getCaretRangeFromPoint(null!==(r=t.clientX)&&void 0!==r?r:0,null!==(n=t.clientY)&&void 0!==n?n:0,e.getDoc())},fA=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},gA=(e,t)=>{ac(e)&&e.on("dragend dragover draggesture dragdrop drop drag",(e=>{e.preventDefault(),e.stopPropagation()})),ic(e)||e.on("drop",(e=>{var t=e.dataTransfer;t&&(e=>Z(e.files,(e=>/^image\//.test(e.type))))(t)&&e.preventDefault()})),e.on("drop",(r=>{if(!r.isDefaultPrevented()){var n=mA(e,r);if(!D(n)){var o=QO(r.dataTransfer),a=JO(o,_O());if(ZO(o)&&!(e=>{var t=e["text/plain"];return!!t&&0===t.indexOf("file://")})(o)||!rA(e,r,n)){var i=o[_O()],l=i||o["text/html"]||o["text/plain"],s=((e,t,r,n)=>{var o=e.getParent(r,(e=>za(t,e)));if(!N(e.getParent(r,"summary")))return!0;if(o&&Be(n,"text/html")){var a=(new DOMParser).parseFromString(n["text/html"],"text/html").body;return!N(a.querySelector(o.nodeName.toLowerCase()))}return!1})(e.dom,e.schema,n.startContainer,o),d=t.get();d&&!s||l&&(r.preventDefault(),Xg.setEditorTimeout(e,(()=>{e.undoManager.transact((()=>{(i||d&&s)&&e.execCommand("Delete"),fA(e,n);var t=FO(l);o["text/html"]?YO(e,t,a,!0):XO(e,t,!0)}))})))}}}})),e.on("dragstart",(e=>{t.set(!0)})),e.on("dragover dragend",(r=>{ic(e)&&!t.get()&&(r.preventDefault(),fA(e,mA(e,r))),"dragend"===r.type&&t.set(!1)})),(e=>{e.on("input",(t=>{if("deleteByDrag"===t.inputType){var r=oe(e.dom.select("details"),(e=>N(e.querySelector("summary"))));te(r,(t=>{go(t.firstChild)&&t.firstChild.remove();var r=e.dom.create("summary");r.appendChild(Wo().dom),t.prepend(r)}))}}))})(e)},pA=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,vA=e=>zt.trim(e).replace(pA,hm).toLowerCase(),hA=(e,t,r)=>{var n=cc(e);if(r||"all"===n||!uc(e))return t;var o=n?n.split(/[, ]/):[];if(o&&"none"!==n){var a=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,((e,t,r,n)=>{for(var l=a.parseStyle(a.decode(r)),s={},d=0;d<o.length;d++){var c=l[o[d]],u=c,m=a.getStyle(i,o[d],!0);/color/.test(o[d])&&(u=vA(u),m=vA(m)),m!==u&&(s[o[d]]=c)}var f=a.serializeStyle(s,"span");return f?t+' style="'+f+'"'+n:t+n}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,((e,t,r,n)=>t+' style="'+r+'"'+n)),t},bA=e=>{var t=Yi(!1),r=Yi(gc(e)?"text":"html"),n=MO(e);(e=>{(Ft.browser.isChromium()||Ft.browser.isSafari())&&((e,t)=>{e.on("PastePreProcess",(r=>{r.content=t(e,r.content,r.internal)}))})(e,hA)})(e),iA(e,r),(e=>{var t=t=>r=>{t(e,r)},r=lc(e);O(r)&&e.on("PastePreProcess",t(r));var n=sc(e);O(n)&&e.on("PastePostProcess",t(n))})(e),e.on("PreInit",(()=>{uA(e),gA(e,t),aA(e,n,r)}))},yA=e=>{(e=>{e.on("click",(t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()}))})(e),(e=>{e.parser.addNodeFilter("details",(t=>{var r=Tc(e);te(t,(e=>{"expanded"===r?e.attr("open","open"):"collapsed"===r&&e.attr("open",null)}))})),e.serializer.addNodeFilter("details",(t=>{var r=Dc(e);te(t,(e=>{"expanded"===r?e.attr("open","open"):"collapsed"===r&&e.attr("open",null)}))}))})(e)},CA=go,wA=lo,SA=e=>ho(e.dom),xA=e=>t=>Dr(Er.fromDom(e),t),kA=(e,t)=>nn(Er.fromDom(e),(e=>(e=>vo(e.dom))(e)||Ao(e)),xA(t)).getOr(Er.fromDom(t)).dom,EA=(e,t)=>nn(Er.fromDom(e),SA,xA(t)),NA=(e,t,r)=>{for(var n=new Kn(e,t),o=r?n.next.bind(n):n.prev.bind(n),a=e,i=r?e:o();i&&!CA(i);i=o())va(i)&&(a=i);return a},_A=e=>{var t=((e,t)=>{var r=es.fromRangeStart(e).getNode(),n=kA(r,t),o=NA(r,n,!1),a=NA(r,n,!0),i=document.createRange();return EA(o,n).fold((()=>{wA(o)?i.setStart(o,0):i.setStartBefore(o)}),(e=>i.setStartBefore(e.dom))),EA(a,n).fold((()=>{wA(a)?i.setEnd(a,a.data.length):i.setEndAfter(a)}),(e=>i.setEndAfter(e.dom))),i})(e.selection.getRng(),e.getBody());e.selection.setRng(gb(t))};!function(e){e.Before="before",e.After="after"}(oO||(oO={}));var TA=(e,t)=>Math.abs(e.left-t),DA=(e,t)=>Math.abs(e.right-t),RA=(e,t)=>{var r=((e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)))(e,t)/Math.min(e.height,t.height);return((e,t)=>e.top<t.bottom&&e.bottom>t.top)(e,t)&&r>.5},OA=(e,t)=>(e=>ie(e,((e,t)=>e.fold((()=>K.some(t)),(e=>{var r=Math.min(t.left,e.left),n=Math.min(t.top,e.top),o=Math.max(t.right,e.right),a=Math.max(t.bottom,e.bottom);return K.some({top:n,right:o,bottom:a,left:r,width:o-r,height:a-n})}))),K.none()))(oe(e,(e=>{return(r=t)>=(n=e).top&&r<=n.bottom;var r,n}))).fold((()=>[[],e]),(t=>{var r=ne(e,(e=>RA(e,t)));return[r.pass,r.fail]})),AA=(e,t,r)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),BA=(e,t,r)=>{var n=e=>va(e.node)?K.some(e):Jn(e.node)?BA(Ce(e.node.childNodes),t,r):K.none(),o=(e,o)=>{var a=ve(e,((e,n)=>o(e,t,r)-o(n,t,r)));return((e,o)=>{if(e.length>=2){var a=n(e[0]).getOr(e[0]),i=n(e[1]).getOr(e[1]);if(Math.abs(o(a,t,r)-o(i,t,r))<2){if(lo(a.node))return K.some(a);if(lo(i.node))return K.some(i)}}return K.none()})(a,o).orThunk((()=>we(a,n)))},a=u(OA(DE(e),r),2),i=a[0],l=a[1],s=ne(l,(e=>e.top<r)),d=s.pass,c=s.fail;return o(i,AA).orThunk((()=>o(c,Ol))).orThunk((()=>o(d,Ol)))},PA=(e,t,r)=>{var n=Er.fromDom(e),o=Ar(n),a=Er.fromPoint(o,t,r).filter((e=>Rr(n,e))).getOr(n);return((e,t,r,n)=>{var o=(t,a)=>{var i=oe(t.dom.childNodes,z((e=>Jn(e)&&e.classList.contains("mce-drag-container"))));return a.fold((()=>BA(i,r,n)),(e=>{var t=oe(i,(t=>t!==e.dom));return BA(t,r,n)})).orThunk((()=>(Dr(t,e)?K.none():Lr(t)).bind((e=>o(e,K.some(t))))))};return o(t,K.none())})(n,a,t,r)},LA=(e,t,r)=>PA(e,t,r).filter((e=>Kc(e.node))).map((e=>((e,t)=>({node:e.node,position:TA(e,t)<DA(e,t)?oO.Before:oO.After}))(e,t))),MA=e=>{var t,r,n=e.getBoundingClientRect(),o=e.ownerDocument,a=o.documentElement,i=o.defaultView;return{top:n.top+(null!==(t=null==i?void 0:i.scrollY)&&void 0!==t?t:0)-a.clientTop,left:n.left+(null!==(r=null==i?void 0:i.scrollX)&&void 0!==r?r:0)-a.clientLeft}},IA=(e,t)=>{return r=(e=>e.inline?MA(e.getBody()):{left:0,top:0})(e),n=(e=>{var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}})(e),o=((e,t)=>{if(t.target.ownerDocument!==e.getDoc()){var r=MA(e.getContentAreaContainer()),n=(e=>{var t=e.getBody(),r=e.getDoc().documentElement,n={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||r.scrollLeft,top:t.scrollTop||r.scrollTop};return e.inline?n:o})(e);return{left:t.pageX-r.left+n.left,top:t.pageY-r.top+n.top}}return{left:t.pageX,top:t.pageY}})(e,t),{pageX:o.left-r.left+n.left,pageY:o.top-r.top+n.top};var r,n,o},FA=e=>({target:e,srcElement:e}),jA=(e,t,r,n)=>{var o=((e,t)=>{var r=kO(e);return"dragstart"===t?(sO(r),pO(r)):"drop"===t?(dO(r),vO(r)):(cO(r),hO(r)),r})(r,e);return T(n)?((e,t,r)=>{var n=H("Function not supported on simulated event.");return d({bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:n,initEvent:n,preventDefault:P,stopImmediatePropagation:P,stopPropagation:P,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:n,initMouseEvent:n,getModifierState:n,dataTransfer:r},FA(t))})(e,t,o):((e,t,r,n)=>d(d({},t),{},{dataTransfer:n,type:e},FA(r)))(e,n,t,o)},UA=ho,zA=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{for(var r=0;r<t.length;r++)if(t[r](e))return!0;return!1}}(UA,vo),HA=(e,t,r,n)=>{var o=e.dom,a=t.cloneNode(!0);o.setStyles(a,{width:r,height:n}),o.setAttrib(a,"data-mce-selected",null);var i=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:r,height:n}),o.setStyles(a,{margin:0,boxSizing:"border-box"}),i.appendChild(a),i},$A=(e,t)=>r=>()=>{var n="left"===e?r.scrollX:r.scrollY;r.scroll({[e]:n+t,behavior:"smooth"})},WA=$A("left",-32),qA=$A("left",32),VA=$A("top",-32),KA=$A("top",32),GA=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},YA=(e,t)=>r=>{if((e=>0===e.button)(r)){var n=se(t.dom.getParents(r.target),zA).getOr(null);if(R(n)&&((e,t,r)=>UA(r)&&r!==t&&e.isEditable(r.parentElement))(t.dom,t.getBody(),n)){var o=t.dom.getPos(n),a=t.getBody(),i=t.getDoc().documentElement;e.set({element:n,dataTransfer:xO(),dragging:!1,screenX:r.screenX,screenY:r.screenY,maxX:(t.inline?a.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?a.scrollHeight:i.offsetHeight)-2,relX:r.pageX-o.x,relY:r.pageY-o.y,width:n.offsetWidth,height:n.offsetHeight,ghost:HA(t,n,n.offsetWidth,n.offsetHeight),intervalId:(l=100,s=Yi(K.none()),d=()=>s.get().each((e=>clearInterval(e))),{clear:()=>{d(),s.set(K.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:e=>{d(),s.set(K.some(setInterval(e,l)))}})})}}var l,s,d},XA=(e,t,r,n,o)=>{"dragstart"===t&&EO(n,e.dom.getOuterHTML(r));var a=jA(t,r,n,o);return e.dispatch(t,a)},QA=(e,t)=>{var r=rl(((e,r)=>((e,t,r)=>{e._selectionOverrides.hideFakeCaret(),LA(e.getBody(),t,r).fold((()=>e.selection.placeCaretAt(t,r)),(n=>{var o=e._selectionOverrides.showCaret(1,n.node,n.position===oO.Before,!1);o?e.selection.setRng(o):e.selection.placeCaretAt(t,r)}))})(t,e,r)),0);t.on("remove",r.cancel);var n=e;return o=>e.on((e=>{var a,i,l=Math.max(Math.abs(o.screenX-e.screenX),Math.abs(o.screenY-e.screenY));if(!e.dragging&&l>10){var s=XA(t,"dragstart",e.element,e.dataTransfer,o);if(R(s.dataTransfer)&&(e.dataTransfer=s.dataTransfer),s.isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var d=o.currentTarget===t.getDoc().documentElement,c=((e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}))(e,IA(t,o));a=e.ghost,i=t.getBody(),a.parentNode!==i&&i.appendChild(a),((e,t,r,n,o,a,i,l,s,d,c,u)=>{var m=0,f=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+r>o&&(m=t.pageX+r-o),t.pageY+n>a&&(f=t.pageY+n-a),e.style.width=r-m+"px",e.style.height=n-f+"px";var g=s.clientHeight,p=s.clientWidth,v=i+s.getBoundingClientRect().top,h=l+s.getBoundingClientRect().left;c.on((e=>{e.intervalId.clear(),e.dragging&&u&&(i+8>=g?e.intervalId.set(KA(d)):i-8<=0?e.intervalId.set(VA(d)):l+8>=p?e.intervalId.set(qA(d)):l-8<=0?e.intervalId.set(WA(d)):v+16>=window.innerHeight?e.intervalId.set(KA(window)):v-16<=0?e.intervalId.set(VA(window)):h+16>=window.innerWidth?e.intervalId.set(qA(window)):h-16<=0&&e.intervalId.set(WA(window)))}))})(e.ghost,c,e.width,e.height,e.maxX,e.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),n,d),r.throttle(o.clientX,o.clientY)}}))},JA=(e,t)=>r=>{e.on((e=>{var n;if(e.intervalId.clear(),e.dragging){if(((e,t,r)=>!D(t)&&t!==r&&!e.dom.isChildOf(t,r)&&e.dom.isEditable(t))(t,(e=>{var t=e.getSel();if(R(t)){var r=t.getRangeAt(0).startContainer;return lo(r)?r.parentNode:r}return null})(t.selection),e.element)){var o=null!==(n=t.getDoc().elementFromPoint(r.clientX,r.clientY))&&void 0!==n?n:t.getBody();XA(t,"drop",o,e.dataTransfer,r).isDefaultPrevented()||t.undoManager.transact((()=>{((e,t)=>{var r=e.getParent(t.parentNode,e.isBlock);GA(t),r&&r!==e.getRoot()&&e.isEmpty(r)&&qo(Er.fromDom(r))})(t.dom,e.element),(e=>{var t=e.getData("text/html");return""===t?K.none():K.some(t)})(e.dataTransfer).each((e=>t.insertContent(e))),t._selectionOverrides.hideFakeCaret()}))}XA(t,"dragend",t.getBody(),e.dataTransfer,r)}})),eB(e)},ZA=(e,t,r)=>{e.on((e=>{e.intervalId.clear(),e.dragging&&r.fold((()=>XA(t,"dragend",e.element,e.dataTransfer)),(r=>XA(t,"dragend",e.element,e.dataTransfer,r)))})),eB(e)},eB=e=>{e.on((e=>{e.intervalId.clear(),GA(e.ghost)})),e.clear()},tB=e=>{var t=tl(),r=Vi.DOM,n=document,o=YA(t,e),a=QA(t,e),i=JA(t,e),l=((e,t)=>r=>ZA(e,t,K.some(r)))(t,e);e.on("mousedown",o),e.on("mousemove",a),e.on("mouseup",i),r.bind(n,"mousemove",a),r.bind(n,"mouseup",l),e.on("remove",(()=>{r.unbind(n,"mousemove",a),r.unbind(n,"mouseup",l)})),e.on("keydown",(r=>{r.keyCode===Of.ESC&&ZA(t,e,K.none())}))},rB=e=>{tB(e),Gd(e)&&(e=>{var t=t=>{if(!t.isDefaultPrevented()){var r=t.dataTransfer;r&&(J(r.types,"Files")||r.files.length>0)&&(t.preventDefault(),"drop"===t.type&&px(e,"Dropped file type is not supported"))}},r=r=>{ep(e,r.target)&&t(r)},n=()=>{var n=Vi.DOM,o=e.dom,a=document,i=e.inline?e.getBody():e.getDoc(),l=["drop","dragover"];te(l,(e=>{n.bind(a,e,r),o.bind(i,e,t)})),e.on("remove",(()=>{te(l,(e=>{n.unbind(a,e,r),o.unbind(i,e,t)}))}))};e.on("init",(()=>{Xg.setEditorTimeout(e,n,0)}))})(e)},nB=ho,oB=(e,t)=>Zh(e.getBody(),t),aB=e=>{var t,r=e.selection,n=e.dom,o=e.getBody(),a=Wc(e,o,n.isBlock,(()=>sp(e))),i="sel-"+n.uniqueId(),l="data-mce-selected",s=e=>e!==o&&(nB(e)||Co(e))&&n.isChildOf(e,o)&&n.isEditable(e.parentNode),d=function(t,n,o){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e.dispatch("ShowCaret",{target:n,direction:t,before:o}).isDefaultPrevented()?null:(i&&r.scrollIntoView(n,-1===t),a.show(o,n))},c=e=>ea(e)||oa(e)||aa(e),u=e=>c(e.startContainer)||c(e.endContainer),m=t=>{var r=e.schema.getVoidElements(),o=n.createRng(),a=t.startContainer,i=t.startOffset,l=t.endContainer,s=t.endOffset;return Be(r,a.nodeName.toLowerCase())?0===i?o.setStartBefore(a):o.setStartAfter(a):o.setStart(a,i),Be(r,l.nodeName.toLowerCase())?0===s?o.setEndBefore(l):o.setEndAfter(l):o.setEnd(l,s),o},f=o=>{var a=o.cloneNode(!0),s=e.dispatch("ObjectSelected",{target:o,targetClone:a});if(s.isDefaultPrevented())return null;var d=((t,o)=>{var a=Er.fromDom(e.getBody()),l=e.getDoc(),s=ln(a,"#"+i).getOrThunk((()=>{var e=Er.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',l);return lr(e,"id",i),xn(a,e),e})),d=n.createRng();Nn(s),En(s,[Er.fromText(Eo,l),Er.fromDom(o),Er.fromText(Eo,l)]),d.setStart(s.dom.firstChild,1),d.setEnd(s.dom.lastChild,0),gn(s,{top:n.getPos(t,e.getBody()).y+"px"}),Ig(s);var c=r.getSel();return c&&(c.removeAllRanges(),c.addRange(d)),d})(o,s.targetClone),c=Er.fromDom(o);return te(qn(Er.fromDom(e.getBody()),`*[${l}]`),(e=>{Dr(c,e)||mr(e,l)})),n.getAttrib(o,l)||o.setAttribute(l,"1"),t=o,v(),d},g=(e,t)=>{if(!e)return null;if(e.collapsed){if(!u(e)){var r=t?1:-1,a=hu(r,o,e),i=a.getNode(!t);if(R(i)){if(Kc(i))return d(r,i,!!t&&!a.isAtEnd(),!1);if(Zo(i)&&ho(i.nextSibling)){var l=n.createRng();return l.setStart(i,0),l.setEnd(i,0),l}}var c=a.getNode(t);if(R(c)){if(Kc(c))return d(r,c,!t&&!a.isAtEnd(),!1);if(Zo(c)&&ho(c.previousSibling)){var m=n.createRng();return m.setStart(c,1),m.setEnd(c,1),m}}}return null}var g=e.startContainer,p=e.startOffset,v=e.endOffset;if(lo(g)&&0===p&&nB(g.parentNode)&&(g=g.parentNode,p=n.nodeIndex(g),g=g.parentNode),!Jn(g))return null;if(v===p+1&&g===e.endContainer){var h=g.childNodes[p];if(s(h))return f(h)}return null},p=()=>{t&&t.removeAttribute(l),ln(Er.fromDom(e.getBody()),"#"+i).each(_n),t=null},v=()=>{a.hide()};return bS(e)||(e.on("click",(t=>{n.isEditable(t.target)||(t.preventDefault(),e.focus())})),e.on("blur NewBlock",p),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",(t=>{var r=t.target,n=oB(e,r);nB(n)?(t.preventDefault(),fk(e,n).each(g)):s(r)&&fk(e,r).each(g)}),!0),e.on("mousedown",(t=>{var a=t.target;if((a===o||"HTML"===a.nodeName||n.isChildOf(a,o))&&sx(e,t.clientX,t.clientY)){p(),v();var i=oB(e,a);nB(i)?(t.preventDefault(),fk(e,i).each(g)):LA(o,t.clientX,t.clientY).each((n=>{t.preventDefault(),(e=>{e&&r.setRng(e)})(d(1,n.node,n.position===oO.Before,!1)),Jn(i)?i.focus():e.getBody().focus()}))}})),e.on("keypress",(e=>{Of.modifierPressed(e)||nB(r.getNode())&&e.preventDefault()})),e.on("GetSelectionRange",(e=>{var r=e.range;if(t){if(!t.parentNode)return void(t=null);(r=r.cloneRange()).selectNode(t),e.range=r}})),e.on("SetSelectionRange",(e=>{e.range=m(e.range);var t=g(e.range,e.forward);t&&(e.range=t)})),e.on("AfterSetSelectionRange",(e=>{var t,r=e.range,o=r.startContainer.parentElement;u(r)||Jn(t=o)&&"mcepastebin"===t.id||v(),(e=>R(e)&&n.hasClass(e,"mce-offscreen-selection"))(o)||p()})),rB(e),(e=>{var t=rl((()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){var t=e.selection.getRng();if(t.collapsed){var r=gk(e,t,!1);e.selection.setRng(r)}}}),0);e.on("focus",(()=>{t.throttle()})),e.on("blur",(()=>{t.cancel()}))})(e),(e=>{e.on("init",(()=>{e.on("focusin",(t=>{var r=t.target;if(Co(r)){var n=Zh(e.getBody(),r),o=ho(n)?n:r;e.selection.getNode()!==o&&fk(e,o).each((t=>e.selection.setRng(t)))}}))}))})(e)),{showCaret:d,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(ia(e),r.scrollIntoView(e))},hideFakeCaret:v,destroy:()=>{a.destroy(),t=null}}},iB=(e,t)=>{for(var r=t,n=e.previousSibling;lo(n);n=n.previousSibling)r+=n.data.length;return r},lB=(e,t,r,n,o)=>{if(lo(r)&&(n<0||n>r.data.length))return[];for(var a=o&&lo(r)?[iB(r,n)]:[n],i=r;i!==t&&i.parentNode;)a.push(e.nodeIndex(i,o)),i=i.parentNode;return i===t?a.reverse():[]},sB=function(e,t,r,n,o,a){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return{start:lB(e,t,r,n,i),end:lB(e,t,o,a,i)}},dB=(e,t)=>{var r=t.slice(),n=r.pop();return A(n)?ie(r,((e,t)=>e.bind((e=>K.from(e.childNodes[t])))),K.some(e)).bind((e=>lo(e)&&(n<0||n>e.data.length)?K.none():K.some({node:e,offset:n}))):K.none()},cB=(e,t)=>dB(e,t.start).bind((r=>{var n=r.node,o=r.offset;return dB(e,t.end).map((e=>{var t=e.node,r=e.offset,a=document.createRange();return a.setStart(n,o),a.setEnd(t,r),a}))})),uB=(e,t,r)=>{if(t&&e.isEmpty(t)&&!r(t)){var n=t.parentNode;e.remove(t,lo(t.firstChild)&&Ca(t.firstChild.data)),uB(e,n,r)}},mB=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t.startContainer.parentNode,a=t.endContainer.parentNode;t.deleteContents(),n&&!r(t.startContainer)&&(lo(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),lo(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),uB(e,o,r),o!==a&&uB(e,a,r))},fB=(e,t)=>K.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),gB=(e,t,r)=>{var n=e.dynamicPatternsLookup({text:r,block:t});return d(d({},e),{},{blockPatterns:Os(n).concat(e.blockPatterns),inlinePatterns:As(n).concat(e.inlinePatterns)})},pB=(e,t,r,n)=>{var o=e.createRng();return o.setStart(t,0),o.setEnd(r,n),o.toString()},vB=(e,t,r)=>{var n=((e,t,r)=>{if(lo(e)&&t>=e.length)return K.some(H_(e,t));var n=kl($_);return K.from(n.forwards(e,t,W_(e),r)).map((e=>H_(e.container,0)))})(t,0,t);n.each((n=>{var o=n.container;K_(o,r.start.length,t).each((r=>{var n=e.createRng();n.setStart(o,0),n.setEnd(r.container,r.offset),mB(e,n,(e=>e===t))}));var a=Er.fromDom(o),i=To(a);/^\s[^\s]/.test(i)&&((e,t)=>{_o.set(e,t)})(a,i.slice(1))}))},hB=(e,t)=>{var r=e.dom,n=t.pattern,o=cB(r.getRoot(),t.range).getOrDie("Unable to resolve path range");return fB(e,o).each((t=>{"block-format"===n.type?((e,t)=>{var r=t.get(e);return E(r)&&be(r).exists((e=>Be(e,"block")))})(n.format,e.formatter)&&e.undoManager.transact((()=>{vB(e.dom,t,n),e.formatter.apply(n.format)})):"block-command"===n.type&&e.undoManager.transact((()=>{vB(e.dom,t,n),e.execCommand(n.cmd,!1,n.value)}))})),!0},bB=(e,t)=>{var r=(e=>ve(e,((e,t)=>t.start.length-e.start.length)))(e),n=t.replace(Eo," ");return se(r,(e=>0===t.indexOf(e.start)||0===n.indexOf(e.start)))},yB=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),CB=(e,t)=>{var r=e.createRng();return r.setStartAfter(t.start),r.setEndBefore(t.end),r},wB=(e,t,r)=>{var n=cB(e.getRoot(),r).getOrDie("Unable to resolve path range"),o=n.startContainer,a=n.endContainer,i=0===n.endOffset?a:a.splitText(n.endOffset),l=0===n.startOffset?o:o.splitText(n.startOffset),s=l.parentNode;return{prefix:t,end:i.parentNode.insertBefore(yB(e,t+"-end"),i),start:s.insertBefore(yB(e,t+"-start"),l)}},SB=(e,t,r)=>{uB(e,e.get(t.prefix+"-end"),r),uB(e,e.get(t.prefix+"-start"),r)},xB=e=>0===e.start.length,kB=(e,t,r,n)=>{var o,a=t.start;return G_(e,n.container,n.offset,(o=a,(e,t)=>{var r=e.data.substring(0,t),n=r.lastIndexOf(o.charAt(o.length-1)),a=r.lastIndexOf(o);return-1!==a?a+o.length:-1!==n?n+1:-1}),r).bind((n=>{var o,i,l=null!==(i=null===(o=r.textContent)||void 0===o?void 0:o.indexOf(a))&&void 0!==i?i:-1;if(-1!==l&&n.offset>=l+a.length){var s=e.createRng();return s.setStart(n.container,n.offset-a.length),s.setEnd(n.container,n.offset),K.some(s)}var d=n.offset-a.length;return V_(n.container,d,r).map((t=>{var r=e.createRng();return r.setStart(t.container,t.offset),r.setEnd(n.container,n.offset),r})).filter((e=>e.toString()===a)).orThunk((()=>kB(e,t,r,H_(n.container,0))))}))},EB=(e,t,r,n)=>{var o=e.dom,a=o.getRoot(),i=r.pattern,l=r.position.container,s=r.position.offset;return V_(l,s-r.pattern.end.length,t).bind((d=>{var c=sB(o,a,d.container,d.offset,l,s,n);if(xB(i))return K.some({matches:[{pattern:i,startRng:c,endRng:c}],position:d});var u=NB(e,r.remainingPatterns,d.container,d.offset,t,n),m=u.getOr({matches:[],position:d}),f=m.position,g=function(e,t,r,n,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(0===t.start.length&&!a){var i=e.createRng();return i.setStart(r,n),i.setEnd(r,n),K.some(i)}return q_(r,n,o).bind((r=>kB(e,t,o,r).bind((e=>{var t;if(a){if(e.endContainer===r.container&&e.endOffset===r.offset)return K.none();if(0===r.offset&&(null===(t=e.endContainer.textContent)||void 0===t?void 0:t.length)===e.endOffset)return K.none()}return K.some(e)}))))}(o,i,f.container,f.offset,t,u.isNone());return g.map((e=>{var t=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return sB(e,t,r.startContainer,r.startOffset,r.endContainer,r.endOffset,n)}(o,a,e,n);return{matches:m.matches.concat([{pattern:i,startRng:t,endRng:c}]),position:H_(e.startContainer,e.startOffset)}}))}))},NB=(e,t,r,n,o,a)=>{var i=e.dom;return q_(r,n,i.getRoot()).bind((l=>{for(var s=pB(i,o,r,n),d=0;d<t.length;d++){var c=t[d];if(Ze(s,c.end)){var u=t.slice();u.splice(d,1);var m=EB(e,o,{pattern:c,remainingPatterns:u,position:l},a);if(m.isNone()&&n>0)return NB(e,t,r,n-1,o,a);if(m.isSome())return m}}return K.none()}))},_B=(e,t,r)=>{e.selection.setRng(r),"inline-format"===t.type?te(t.format,(t=>{e.formatter.apply(t)})):e.execCommand(t.cmd,!1,t.value)},TB=(e,t,r,n,o,a)=>{var i;return((e,t)=>{var r=me(e,(e=>Z(t,(t=>e.pattern.start===t.pattern.start&&e.pattern.end===t.pattern.end))));return e.length===t.length?r?e:t:e.length>t.length?e:t})(NB(e,o.inlinePatterns,r,n,t,a).fold((()=>[]),(e=>e.matches)),NB(e,(i=o.inlinePatterns,ve(i,((e,t)=>t.end.length-e.end.length))),r,n,t,a).fold((()=>[]),(e=>e.matches)))},DB=(e,t)=>{if(0!==t.length){var r=e.dom,n=e.selection.getBookmark(),o=((e,t)=>{var r=bl("mce_textpattern"),n=ae(t,((t,n)=>{var o=wB(e,r+`_end${t.length}`,n.endRng);return t.concat([d(d({},n),{},{endMarker:o})])}),[]);return ae(n,((t,o)=>{var a=n.length-t.length-1,i=xB(o.pattern)?o.endMarker:wB(e,r+`_start${a}`,o.startRng);return t.concat([d(d({},o),{},{startMarker:i})])}),[])})(r,t);te(o,(t=>{var n=r.getParent(t.startMarker.start,r.isBlock),o=e=>e===n;xB(t.pattern)?((e,t,r,n)=>{var o=CB(e.dom,r);mB(e.dom,o,n),_B(e,t,o)})(e,t.pattern,t.endMarker,o):((e,t,r,n,o)=>{var a=e.dom,i=CB(a,n),l=CB(a,r);mB(a,l,o),mB(a,i,o);var s={prefix:r.prefix,start:r.end,end:n.start},d=CB(a,s);_B(e,t,d)})(e,t.pattern,t.startMarker,t.endMarker,o),SB(r,t.endMarker,o),SB(r,t.startMarker,o)})),e.selection.moveToBookmark(n)}},RB=(e,t)=>{var r=e.selection.getRng();return fB(e,r).map((n=>{var o,a=Math.max(0,r.startOffset),i=gB(t,n,null!==(o=n.textContent)&&void 0!==o?o:""),l=TB(e,n,r.startContainer,a,i,!0),s=((e,t,r,n)=>{var o,a=e.dom,i=Gs(e);if(!a.is(t,i))return[];var l=null!==(o=t.textContent)&&void 0!==o?o:"";return bB(r.blockPatterns,l).map((e=>zt.trim(l).length===e.start.length?[]:[{pattern:e,range:sB(a,a.getRoot(),t,0,t,0,n)}])).getOr([])})(e,n,i,!0);return(s.length>0||l.length>0)&&(e.undoManager.add(),e.undoManager.extra((()=>{e.execCommand("mceInsertNewLine")}),(()=>{(e=>{e.insertContent(Ko,{preserve_zwsp:!0})})(e),DB(e,l),((e,t)=>{if(0!==t.length){var r=e.selection.getBookmark();te(t,(t=>hB(e,t))),e.selection.moveToBookmark(r)}})(e,s);var t=e.selection.getRng(),r=q_(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),r.each((t=>{var r=t.container;r.data.charAt(t.offset-1)===ko&&(r.deleteData(t.offset-1,1),uB(e.dom,r.parentNode,(t=>t===e.dom.getRoot())))}))})),!0)})).getOr(!1)},OB=(e,t,r)=>{for(var n=0;n<e.length;n++)if(r(e[n],t))return!0;return!1},AB=e=>{var t=[",",".",";",":","!","?"],r=[32],n=()=>{return t=hc(e),r=bc(e),{inlinePatterns:As(t),blockPatterns:Os(t),dynamicPatternsLookup:r};var t,r},o=()=>(e=>e.options.isSet("text_patterns_lookup"))(e);e.on("keydown",(t=>{if(13===t.keyCode&&!Of.modifierPressed(t)&&e.selection.isCollapsed()){var r=n();(r.inlinePatterns.length>0||r.blockPatterns.length>0||o())&&RB(e,r)&&t.preventDefault()}}),!0);var a=()=>{if(e.selection.isCollapsed()){var t=n();(t.inlinePatterns.length>0||o())&&((e,t)=>{var r=e.selection.getRng();fB(e,r).map((n=>{var o=Math.max(0,r.startOffset-1),a=pB(e.dom,n,r.startContainer,o),i=gB(t,n,a),l=TB(e,n,r.startContainer,o,i,!1);l.length>0&&e.undoManager.transact((()=>{DB(e,l)}))}))})(e,t)}};e.on("keyup",(e=>{OB(r,e,((e,t)=>e===t.keyCode&&!Of.modifierPressed(t)))&&a()})),e.on("keypress",(r=>{OB(t,r,((e,t)=>e.charCodeAt(0)===t.charCode))&&Xg.setEditorTimeout(e,a)}))},BB=e=>{var t,r,n=zt.each,o=Of.BACKSPACE,a=Of.DELETE,i=e.dom,l=e.selection,s=e.parser,d=Ft.browser,c=d.isFirefox(),u=d.isChromium()||d.isSafari(),m=Ft.deviceType.isiPhone()||Ft.deviceType.isiPad(),f=Ft.os.isMacOS()||Ft.os.isiOS(),g=(t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},p=e=>e.isDefaultPrevented(),v=()=>{var t=e=>{var t=i.create("body"),r=e.cloneContents();return t.appendChild(r),l.serializer.serialize(t,{format:"html"})};e.on("keydown",(r=>{var n,l,s=r.keyCode;if(!p(r)&&(s===a||s===o)&&e.selection.isEditable()){var d=e.selection.isCollapsed(),c=e.getBody();if(d&&(!i.isEmpty(c)||(n=c,l=Er.fromDom(n),Z(qn(l,'[contenteditable="true"]'),(e=>Lr(e).exists((e=>!dn(e))))))))return;if(!d&&!(r=>{var n=t(r),o=i.createRng();return o.selectNode(e.getBody()),n===t(o)})(e.selection.getRng()))return;r.preventDefault(),e.setContent(""),c.firstChild&&i.isBlock(c.firstChild)?e.selection.setCursorLocation(c.firstChild,0):e.selection.setCursorLocation(c,0),e.nodeChanged()}}))},h=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",(t=>{var r;if(t.target===e.getDoc().documentElement)if(r=l.getRng(),e.getBody().focus(),"mousedown"===t.type){if(ea(r.startContainer))return;l.placeCaretAt(t.clientX,t.clientY)}else l.setRng(r)}))},y=()=>{Range.prototype.getClientRects||e.on("mousedown",(t=>{if(!p(t)&&"HTML"===t.target.nodeName){var r=e.getBody();r.blur(),Xg.setEditorTimeout(e,(()=>{r.focus()}))}}))},C=()=>{var t=Qd(e);e.on("click",(r=>{var n=r.target;/^(IMG|HR)$/.test(n.nodeName)&&i.isEditable(n.parentNode)&&(r.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&i.hasClass(n,t)&&0===n.childNodes.length&&i.isEditable(n.parentNode)&&(r.preventDefault(),l.select(n))}))},w=()=>{e.on("keydown",(e=>{if(!p(e)&&e.keyCode===o&&l.isCollapsed()&&0===l.getRng().startOffset){var t=l.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0}))},x=()=>{$d(e)||e.on("BeforeExecCommand mousedown",(()=>{g("StyleWithCSS",!1),g("enableInlineTableEditing",!1),wd(e)||g("enableObjectResizing",!1)}))},k=()=>{e.on("SetContent ExecCommand",(e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||n(i.select("a:not([data-mce-block])"),(e=>{var t,r=e.parentNode,n=i.getRoot();if((null==r?void 0:r.lastChild)===e){for(;r&&!i.isBlock(r);){if((null===(t=r.parentNode)||void 0===t?void 0:t.lastChild)!==r||r===n)return;r=r.parentNode}i.add(r,"br",{"data-mce-bogus":1})}}))}))},E=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},N=()=>{e.inline||e.on("keydown",(()=>{document.activeElement===document.body&&e.getWin().focus()}))},_=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",(t=>{var r;"HTML"===t.target.nodeName&&(r=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(r),e.selection.normalize(),e.nodeChanged())})))},T=()=>{f&&e.on("keydown",(t=>{!Of.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))}))},D=()=>{e.on("click",(e=>{var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},R=()=>{e.on("init",(()=>{e.dom.bind(e.getBody(),"submit",(e=>{e.preventDefault()}))}))},O=P;return bS(e)?(u&&(b(),C(),R(),h(),m&&(N(),_(),D())),c&&(y(),x(),E(),T())):(e.on("keydown",(t=>{if(!p(t)&&t.keyCode===Of.BACKSPACE){var r=l.getRng(),n=r.startContainer,o=r.startOffset,a=i.getRoot(),s=n;if(r.collapsed&&0===o){for(;s.parentNode&&s.parentNode.firstChild===s&&s.parentNode!==a;)s=s.parentNode;"BLOCKQUOTE"===s.nodeName&&(e.formatter.toggle("blockquote",void 0,s),(r=i.createRng()).setStart(n,0),r.setEnd(n,0),l.setRng(r))}}})),v(),Ft.windowsPhone||e.on("keyup focusin mouseup",(t=>{Of.modifierPressed(t)||(e=>{var t=e.getBody(),r=e.selection.getRng();return r.startContainer===r.endContainer&&r.startContainer===t&&0===r.startOffset&&r.endOffset===t.childNodes.length})(e)||l.normalize()}),!0),u&&(b(),C(),e.on("init",(()=>{g("DefaultParagraphSeparator",Gs(e))})),R(),w(),s.addNodeFilter("br",(e=>{for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})),m?(N(),_(),D()):h()),c&&(e.on("keydown",(t=>{if(!p(t)&&t.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&0===l.getRng().startOffset){var r=l.getNode(),n=r.previousSibling;if("HR"===r.nodeName)return i.remove(r),void t.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(i.remove(n),t.preventDefault())}}})),y(),t=()=>{var t=i.getAttribs(l.getStart().cloneNode(!1));return()=>{var r=l.getStart();r!==e.getBody()&&(i.setAttrib(r,"style",null),n(t,(e=>{r.setAttributeNode(e.cloneNode(!0))})))}},r=()=>!l.isCollapsed()&&i.getParent(l.getStart(),i.isBlock)!==i.getParent(l.getEnd(),i.isBlock),e.on("keypress",(n=>{var o;return!(!(p(n)||8!==n.keyCode&&46!==n.keyCode)&&r()&&(o=t(),e.getDoc().execCommand("delete",!1),o(),n.preventDefault(),1))})),i.bind(e.getDoc(),"cut",(n=>{if(!p(n)&&r()){var o=t();Xg.setEditorTimeout(e,(()=>{o()}))}})),x(),k(),E(),T(),w(),e.on("drop",(t=>{var r,n=null===(r=t.dataTransfer)||void 0===r?void 0:r.getData("text/html");S(n)&&/^<img[^>]*>$/.test(n)&&e.dispatch("dragend",new window.DragEvent("dragend",t))})))),{refreshContentEditable:O,isHidden:()=>{if(!c||e.removed)return!1;var t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}},PB=Vi.DOM,LB=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,MB=e=>De(e,(e=>!1===T(e))),IB=e=>{var t=e.options.get,r=e.editorUpload.blobCache;return MB({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:LB(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:r,document:e.getDoc()})},FB=e=>{var t=e.options.get;return MB({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},jB=e=>{e.bindPendingEventDelegates(),e.initialized=!0,(e=>{e.dispatch("Init")})(e),e.focus(!0),(e=>{var t=e.dom.getRoot();e.inline||_m(e)&&e.selection.getStart(!0)!==t||$u(t).each((t=>{var r=t.getNode(),n=oo(r)?$u(r).getOr(t):t;e.selection.setRng(n.toRange())}))})(e),e.nodeChanged({initial:!0});var t=ec(e);O(t)&&t.call(e,e),(e=>{var t=rc(e);t&&Xg.setEditorTimeout(e,(()=>{var r;(r=!0===t?e:e.editorManager.get(t))&&!r.destroyed&&(r.focus(),r.selection.scrollIntoView())}),100)})(e)},UB=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,zB=e=>{var t=UB(e),r=bd(e),n=e.contentCSS,o=()=>{t.unloadAll(n),e.inline||e.ui.styleSheetLoader.unloadAll(r)},a=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){var i="";zt.each(e.contentStyles,(e=>{i+=e+"\r\n"})),e.dom.addStyle(i)}var l=Promise.all(((e,t,r)=>{var n=[UB(e).loadAll(t)];return e.inline?n:n.concat([e.ui.styleSheetLoader.loadAll(r)])})(e,n,r)).then(a).catch(a),s=hd(e);return s&&((e,t)=>{var r=Er.fromDom(e.getBody()),n=Xr(Yr(r)),o=Er.fromTag("style");lr(o,"type","text/css"),xn(o,Er.fromText(t)),xn(n,o),e.on("remove",(()=>{_n(o)}))})(e,s),l},HB=e=>{!0!==e.removed&&((e=>{bS(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})})(e),jB(e))},$B=e=>{var t=e.getElement(),r=e.getDoc();e.inline&&(PB.addClass(t,"mce-content-body"),e.contentDocument=r=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);var n=e.getBody();n.disabled=!0,e.readonly=$d(e),e._editableRoot=Wd(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&"static"===PB.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable="true"),n.disabled=!1,e.editorUpload=Dx(e),e.schema=Ei(FB(e)),e.dom=Vi(r,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:cd(e),referrerPolicy:ud(e),onSetAttrib:t=>{e.dispatch("SetAttrib",t)}}),e.parser=(e=>{var t=Aw(IB(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",((t,r)=>{for(var n=e.dom,o="data-mce-"+r,a=t.length;a--;){var i=t[a],l=i.attr(r);if(l&&!i.attr(o)){if(0===l.indexOf("data:")||0===l.indexOf("blob:"))continue;"style"===r?((l=n.serializeStyle(n.parseStyle(l),i.name)).length||(l=null),i.attr(o,l),i.attr(r,l)):"tabindex"===r?(i.attr(o,l),i.attr(r,null)):i.attr(o,e.convertURL(l,r,i.name))}}})),t.addNodeFilter("script",(e=>{for(var t=e.length;t--;){var r=e[t],n=r.attr("type")||"no/type";0!==n.indexOf("mce-")&&r.attr("type","mce-"+n)}})),Sc(e)&&t.addNodeFilter("#cdata",(t=>{for(var r,n=t.length;n--;){var o=t[n];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(null!==(r=o.value)&&void 0!==r?r:"")+"]]"}})),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(t=>{for(var r=t.length,n=e.schema.getNonEmptyElements();r--;){var o=t[r];o.isEmpty(n)&&0===o.getAll("br").length&&o.append(new Tp("br",1))}})),t})(e),e.serializer=LS((e=>{var t=e.options.get;return d(d(d({},IB(e)),FB(e)),MB({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")}))})(e),e),e.selection=RS(e.dom,e.getWin(),e.serializer,e),e.annotator=Sf(e),e.formatter=zx(e),e.undoManager=$x(e),e._nodeChangeDispatcher=new rO(e),e._selectionOverrides=aB(e),BN(e),yA(e),HN(e),bS(e)||((e=>{e.on("mousedown",(t=>{t.detail>=3&&(t.preventDefault(),_A(e))}))})(e),(e=>{AB(e)})(e));var o=tO(e);ON(e,o),(e=>{e.on("NodeChange",U(FN,e))})(e),Gx(e),bA(e);var a=yS(e);(e=>{var t=e.getDoc(),r=e.getBody();(e=>{e.dispatch("PreInit")})(e),nc(e)||(t.body.spellcheck=!1,PB.setAttrib(r,"spellcheck","false")),e.quirks=BB(e),(e=>{e.dispatch("PostRender")})(e);var n=yd(e);void 0!==n&&(r.dir=n);var o=oc(e);o&&e.on("BeforeSetContent",(e=>{zt.each(o,(t=>{e.content=e.content.replace(t,(e=>"\x3c!--mce:protected "+escape(e)+"--\x3e"))}))})),e.on("SetContent",(()=>{e.addVisual(e.getBody())})),e.on("compositionstart compositionend",(t=>{e.composing="compositionstart"===t.type}))})(e),a.fold((()=>{var t=(e=>{var t=!1,r=setTimeout((()=>{t||e.setProgressState(!0)}),500);return()=>{clearTimeout(r),t=!0,e.setProgressState(!1)}})(e);zB(e).then((()=>{HB(e),t()}))}),(t=>{e.setProgressState(!0),zB(e).then((()=>{t().then((t=>{e.setProgressState(!1),HB(e),SS(e)}),(t=>{e.notificationManager.open({type:"error",text:String(t)}),HB(e),SS(e)}))}))}))},WB=V,qB=Vi.DOM,VB=(e,t)=>{var r=e.translate("Rich Text Area"),n=cr(Er.fromDom(e.getElement()),"tabindex").bind(it),o=((e,t,r,n)=>{var o=Er.fromTag("iframe");return n.each((e=>lr(o,"tabindex",e))),sr(o,r),sr(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),yr(o,"tox-edit-area__iframe"),o})(e.id,r,zs(e),n).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=(e=>{var t=Hs(e)+"<html><head>";$s(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var r=Ws(e),n=qs(e),o=e.translate(Jd(e));return Vs(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Vs(e)+'" />'),t+`</head><body id="${r}" class="mce-content-body ${n}" data-id="${e.id}" aria-label="${o}"><br></body></html>`})(e),qB.add(t.iframeContainer,o)},KB=e=>{var t,r=e.iframeElement,n=()=>{e.contentDocument=r.contentDocument,$B(e)};if(Ec(e)||Ft.browser.isFirefox()){var o=e.getDoc();o.open(),o.write(e.iframeHTML),o.close(),n()}else{var a=(t=Er.fromDom(r),Bn(t,"load",WB,(()=>{a.unbind(),n()})));r.srcdoc=e.iframeHTML}},GB=(e,t)=>{VB(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=qB.isHidden(t.editorContainer)),e.getElement().style.display="none",qB.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,KB(e)},YB=Vi.DOM,XB=(e,t,r)=>{var n=ux.get(r),o=ux.urls[r]||e.documentBaseUrl.replace(/\/$/,"");if(r=zt.trim(r),n&&-1===zt.inArray(t,r)){if(e.plugins[r])return;try{var a=n(e,o)||{};e.plugins[r]=a,O(a.init)&&(a.init(e,o),t.push(r))}catch(t){((e,t,r)=>{var n=Zi.translate(["Failed to initialize plugin: {0}",t]);Ef(e,"PluginLoadError",{message:n}),bx(n,r),px(e,n)})(e,r,t)}}},QB=e=>{var t=[];te(Vd(e),(r=>{XB(e,t,(e=>e.replace(/^\-/,""))(r))}))},JB=e=>{var t=zt.trim(od(e)),r=e.ui.registry.getAll().icons,n=d(d({},ex.get("default").icons),ex.get(t).icons);ke(n,((t,n)=>{Be(r,n)||e.ui.registry.addIcon(n,t)}))},ZB=e=>{var t=Nd(e);if(S(t)){var r=mx.get(t);e.theme=r(e,mx.urls[t])||{},O(e.theme.init)&&e.theme.init(e,mx.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},eP=e=>{var t=Td(e),r=tx.get(t);e.model=r(e,tx.urls[t])},tP=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),rP=e=>{var t=e.getElement();return e.inline?tP(null):(e=>{var t=YB.create("div");return YB.insertAfter(t,e),tP(t,t)})(t)},nP=e=>{var t=e.getElement();return e.orgDisplay=t.style.display,S(Nd(e))?(e=>{var t=e.theme.renderUI;return t?t():rP(e)})(e):O(Nd(e))?(e=>{var t=e.getElement(),r=Nd(e)(e,t);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:t.offsetHeight,r})(e):rP(e)},oP=(e,t)=>{var r={show:K.from(t.show).getOr(P),hide:K.from(t.hide).getOr(P),isEnabled:K.from(t.isEnabled).getOr(V),setEnabled:r=>{e.mode.isReadOnly()||K.from(t.setEnabled).each((e=>e(r)))}};e.ui=d(d({},e.ui),r)},aP=function(){var e,t=(e=o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch("ScriptsLoaded"),JB(t),ZB(t),eP(t),QB(t),e.next=7,nP(t);case 7:r=e.sent,oP(t,K.from(r.api).getOr({})),t.editorContainer=r.editorContainer,Cx(t),t.inline?$B(t):GB(t,{editorContainer:r.editorContainer,iframeContainer:r.iframeContainer});case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){a(i,n,o,l,s,"next",e)}function s(e){a(i,n,o,l,s,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}(),iP=Vi.DOM,lP=e=>"-"===e.charAt(0),sP=(e,t)=>{var r=md(t),n=fd(t);if(!Zi.hasCode(r)&&"en"!==r){var o=ot(n)?n:`${t.editorManager.baseURL}/langs/${r}.js`;e.add(o).catch((()=>{((e,t,r)=>{vx(e,"LanguageLoadError",hx("language",t,r))})(t,o,r)}))}},dP=(e,t)=>{var r=Nd(e);if(S(r)&&!lP(r)&&!Be(mx.urls,r)){var n=_d(e),o=n?e.documentBaseURI.toAbsolute(n):`themes/${r}/theme${t}.js`;mx.load(r,o).catch((()=>{((e,t,r)=>{vx(e,"ThemeLoadError",hx("theme",t,r))})(e,o,r)}))}},cP=(e,t)=>{var r=Td(e);if("plugin"!==r&&!Be(tx.urls,r)){var n=Dd(e),o=S(n)?e.documentBaseURI.toAbsolute(n):`models/${r}/model${t}.js`;tx.load(r,o).catch((()=>{((e,t,r)=>{vx(e,"ModelLoadError",hx("model",t,r))})(e,o,r)}))}},uP=(e,t,r)=>K.from(t).filter((e=>ot(e)&&!ex.has(e))).map((t=>({url:`${e.editorManager.baseURL}/icons/${t}/icons${r}.js`,name:K.some(t)}))),mP=(e,t,r)=>{var n=uP(t,"default",r),o=(e=>K.from(ad(e)).filter(ot).map((e=>({url:e,name:K.none()}))))(t).orThunk((()=>uP(t,od(t),"")));te((e=>{for(var t=[],r=e=>{t.push(e)},n=0;n<e.length;n++)e[n].each(r);return t})([n,o]),(r=>{e.add(r.url).catch((()=>{((e,t,r)=>{vx(e,"IconsLoadError",hx("icons",t,r))})(t,r.url,r.name.getOrUndefined())}))}))},fP=(e,t)=>{var r=(t,r)=>{ux.load(t,r).catch((()=>{((e,t,r)=>{vx(e,"PluginLoadError",hx("plugin",t,r))})(e,r,t)}))};ke(Kd(e),((t,n)=>{r(n,t),e.options.set("plugins",Vd(e).concat(n))})),te(Vd(e),(e=>{!(e=zt.trim(e))||ux.urls[e]||lP(e)||r(e,`plugins/${e}/plugin${t}.js`)}))},gP=(e,t)=>{var r=Gi.ScriptLoader,n=()=>{!e.removed&&(e=>{var t=Nd(e);return!S(t)||R(mx.get(t))})(e)&&(e=>{var t=Td(e);return R(tx.get(t))})(e)&&aP(e)};dP(e,t),cP(e,t),sP(r,e),mP(r,e,t),fP(e,t),r.loadQueue().then(n,n)},pP=e=>{var t=e.id;Zi.setCode(md(e));var r=()=>{iP.unbind(window,"ready",r),e.render()};if(Mi.Event.domLoaded){if(e.getElement()){var n=Er.fromDom(e.getElement()),o=fr(n);e.on("remove",(()=>{re(n.dom.attributes,(e=>mr(n,e.name))),sr(n,o)})),e.ui.styleSheetLoader=((e,t)=>Ya.forElement(e,{contentCssCors:qd(t),referrerPolicy:ud(t)}))(n,e),Md(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var a=e.getElement().form||iP.getParent(t,"form");a&&(e.formElement=a,Id(e)&&!io(e.getElement())&&(iP.insertAfter(iP.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},iP.bind(a,"submit reset",e.formEventDelegate),e.on("reset",(()=>{e.resetContent()})),!Fd(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=fx(e),e.notificationManager=cx(e),(e=>"xml"===e.options.get("encoding"))(e)&&e.on("GetContent",(e=>{e.save&&(e.content=iP.encode(e.content))})),jd(e)&&e.on("submit",(()=>{e.initialized&&e.save()})),Ud(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),gP(e,e.suffix)}}else iP.bind(window,"ready",r)},vP=Ot().deviceType,hP=vP.isPhone(),bP=vP.isTablet(),yP=e=>{if(D(e))return[];var t=E(e)?e:e.split(/[ ,]/),r=ee(t,tt);return oe(r,ot)},CP=(e,t)=>{var r,n,o,a,i=(r=(t,r)=>J(e,r),o={},Te(t,r,_e(n={}),_e(o)),{t:n,f:o});return a=i.f,{sections:I(i.t),options:I(a)}},wP=(e,t)=>Be(e.sections(),t),SP=(e,t)=>d(d({},{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ae(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1}),t?{menubar:!1}:{}),xP=(e,t)=>{var r,n=null!==(r=t.external_plugins)&&void 0!==r?r:{};return e&&e.external_plugins?zt.extend({},e.external_plugins,n):n},kP=(e,t,r,n)=>{var o=yP(r.forced_plugins),a=yP(n.plugins),i=((e,t)=>wP(e,t)?e.sections()[t]:{})(t,"mobile"),l=((e,t,r,n)=>e&&wP(t,"mobile")?n:r)(e,t,a,i.plugins?yP(i.plugins):a),s=((e,t)=>[...yP(e),...yP(t)])(o,l);return zt.extend(n,{forced_plugins:o,plugins:s})},EP=(e,t,r,n,o)=>{var a,i=e?{mobile:SP(null!==(a=o.mobile)&&void 0!==a?a:{},t)}:{},l=CP(["mobile"],xT(i,o)),s=zt.extend(r,n,l.options(),((e,t)=>e&&wP(t,"mobile"))(e,l)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.sections(),o=Ae(n,t).getOr({});return zt.extend({},r,o)}(l,"mobile"):{},{external_plugins:xP(n,l.options())});return kP(e,l,n,s)},NP=(e,t)=>((e,t)=>wS(e).editor.addVisual(t))(e,t),_P=e=>{var t=t=>()=>{te("left,center,right,justify".split(","),(r=>{t!==r&&e.formatter.remove("align"+r)})),"none"!==t&&((t,r)=>{e.formatter.toggle(t,r),e.nodeChanged()})("align"+t)};e.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})},TP=e=>{_P(e),(e=>{var t=t=>()=>{var r=e.selection,n=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Z(n,(r=>R(e.formatter.matchNode(r,t))))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(e)},DP=(e,t)=>{var r=e.selection,n=e.dom;return/^ | $/.test(t)?((e,t,r)=>{var n=Er.fromDom(e.getRoot());return r=jv(n,es.fromRangeStart(t))?r.replace(/^ /,"&nbsp;"):r.replace(/^&nbsp;/," "),Uv(n,es.fromRangeEnd(t))?r.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):r.replace(/&nbsp;(<br( \/)?>)?$/," ")})(n,r.getRng(),t):t},RP=(e,t)=>{if(e.selection.isEditable()){var r=(e=>{if("string"!=typeof e){var t=zt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}})(t),n=r.content,o=r.details;Mw(e,d(d({},o),{},{content:DP(e,n),format:"html",set:!1,selection:!0})).each((t=>{var r=((e,t,r)=>CS(e).editor.insertContent(t,r))(e,t.content,o);Iw(e,r,t),e.addVisual()}))}},OP={"font-size":"size","font-family":"face"},AP=ar("font"),BP=(e,t,r)=>Ab(Er.fromDom(r),(t=>(t=>hn(t,e).orThunk((()=>AP(t)?Ae(OP,e).bind((e=>cr(t,e))):K.none())))(t)),(e=>Dr(Er.fromDom(t),e))),PP=e=>(t,r)=>K.from(r).map(Er.fromDom).filter(tr).bind((r=>BP(e,t,r.dom).or(((e,t)=>K.from(Vi.DOM.getStyle(t,e,!0)))(e,r.dom)))).getOr(""),LP=PP("font-size"),MP=L((e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")),PP("font-family")),IP=e=>$u(e.getBody()).bind((e=>{var t=e.container();return K.from(lo(t)?t.parentNode:t)})),FP=(e,t)=>(e=>K.from(e.selection.getRng()).bind((t=>{var r=e.getBody();return t.startContainer===r&&0===t.startOffset?K.none():K.from(e.selection.getStart(!0))})))(e).orThunk(U(IP,e)).map(Er.fromDom).filter(tr).bind(t),jP=(e,t)=>FP(e,M(K.some,t)),UP=(e,t)=>{if(/^[0-9.]+$/.test(t)){var r=parseInt(t,10);if(r>=1&&r<=7){var n=(e=>zt.explode(e.options.get("font_size_style_values")))(e),o=(e=>zt.explode(e.options.get("font_size_classes")))(e);return o.length>0?o[r-1]||t:n[r-1]||t}return t}return t},zP=e=>{var t=e.split(/\s*,\s*/);return ee(t,(e=>-1===e.indexOf(" ")||Je(e,'"')||Je(e,"'")?e:`'${e}'`)).join(",")},HP=e=>{var t=(t,r)=>{e.formatter.toggle(t,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,r,n)=>{t(e,{value:n})},BackColor:(e,r,n)=>{t("hilitecolor",{value:n})},FontName:(t,r,n)=>{((e,t)=>{var r=UP(e,t);e.formatter.toggle("fontname",{value:zP(r)}),e.nodeChanged()})(e,n)},FontSize:(t,r,n)=>{((e,t)=>{e.formatter.toggle("fontsize",{value:UP(e,t)}),e.nodeChanged()})(e,n)},LineHeight:(t,r,n)=>{((e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()})(e,n)},Lang:(e,r,n)=>{var o;t(e,{value:n.code,customValue:null!==(o=n.customCode)&&void 0!==o?o:null})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(e,r,n)=>{t(S(n)?n:"p")},mceToggleFormat:(e,r,n)=>{t(n)}})},$P=e=>{var t=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",(()=>(e=>jP(e,(t=>MP(e.getBody(),t.dom))).getOr(""))(e))),e.editorCommands.addQueryValueHandler("FontSize",(()=>(e=>jP(e,(t=>LP(e.getBody(),t.dom))).getOr(""))(e))),e.editorCommands.addQueryValueHandler("LineHeight",(()=>(e=>jP(e,(t=>{var r=Er.fromDom(e.getBody()),n=Ab(t,(e=>hn(e,"line-height")),U(Dr,r));return n.getOrThunk((()=>{var e=parseFloat(pn(t,"line-height")),r=parseFloat(pn(t,"font-size"));return String(e/r)}))})).getOr(""))(e)))},WP=e=>{e.editorCommands.addCommands({Indent:()=>{(e=>{NN(e,"indent")})(e)},Outdent:()=>{_N(e)}}),e.editorCommands.addCommands({Outdent:()=>xN(e)},"state")},qP=(e,t)=>{var r=e.dom,n=e.selection.getRng(),o=t?e.selection.getStart():e.selection.getEnd(),a=t?n.startContainer:n.endContainer,i=GD(r,a);if(i&&i.isContentEditable){var l=t?Cn:wn,s=Gs(e);((e,t,r,n)=>{var o=e.dom,a=e=>o.isBlock(e)&&e.parentElement===r,i=a(t)?t:o.getParent(n,a,r);return K.from(i).map(Er.fromDom)})(e,o,i,a).each((t=>{var r=JD(e,a,t.dom,i,!1,s);l(t,Er.fromDom(r)),e.selection.setCursorLocation(r,0),e.dispatch("NewBlock",{newBlock:r}),UD(e,"insertParagraph")}))}},VP=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{(e=>{qP(e,!0)})(e)},InsertNewBlockAfter:()=>{(e=>{qP(e,!1)})(e)}})},KP=e=>{TP(e),(e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{var r,n=e.getDoc();try{n.execCommand(t)}catch(e){r=!0}if("paste"!==t||n.queryCommandEnabled(t)||(r=!0),r||!n.queryCommandSupported(t)){var o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ft.os.isMacOS()||Ft.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"â+")),e.notificationManager.open({text:o,type:"error"})}}})})(e),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(e),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,r,n)=>{var o=0;e.dom.getParent(e.selection.getNode(),(t=>!Jn(t)||o++!==n||(e.selection.select(t),!1)),e.getBody())},mceSelectNode:(t,r,n)=>{e.selection.select(n)},selectAll:()=>{var t=e.dom.getParent(e.selection.getStart(),vo);if(t){var r=e.dom.createRng();r.selectNodeContents(t),e.selection.setRng(r)}}})})(e),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{var t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,r,n)=>{RP(e,e.dom.createHTML("img",{src:n}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,r,n)=>{RP(e,e.dom.encode(n))},insertHTML:(t,r,n)=>{RP(e,n)},mceInsertContent:(t,r,n)=>{RP(e,n)},mceSetContent:(t,r,n)=>{e.setContent(n)},mceReplaceContent:(t,r,n)=>{e.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(dc(e))}})})(e),(e=>{var t=(t,r,n)=>{var o=S(n)?{href:n}:n,a=e.dom.getParent(e.selection.getNode(),"a");x(o)&&S(o.href)&&(o.href=o.href.replace(/ /g,"%20"),a&&o.href||e.formatter.remove("link"),o.href&&e.formatter.apply("link",o,a))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");return void(t&&e.dom.remove(t,!0))}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})})(e),WP(e),VP(e),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{BR(cR,e)},mceInsertNewLine:(t,r,n)=>{PR(e,n)},InsertLineBreak:(t,r,n)=>{BR(yR,e)}})})(e),(e=>{(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);var r=e.dom.getParent(e.selection.getNode(),"ol,ul");if(r){var n=r.parentNode;if(n&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)){var o=e.selection.getBookmark();e.dom.split(n,r),e.selection.moveToBookmark(o)}}}})})(e),(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{var r=e.dom.getParent(e.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===t&&"UL"===r.tagName||"insertorderedlist"===t&&"OL"===r.tagName)}},"state")})(e)})(e),(e=>{HP(e),$P(e)})(e),(e=>{e.editorCommands.addCommands({mceRemoveNode:(t,r,n)=>{var o=null!=n?n:e.selection.getNode();if(o!==e.getBody()){var a=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,r,n)=>{up(e,!0===n)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(e)},GP=["toggleview"],YP=e=>J(GP,e.toLowerCase());class XP{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=this.editor,a=e.toLowerCase(),i=null==n?void 0:n.skip_focus;if(o.removed)return!1;if("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?(e=>{Gg(e).each((t=>e.selection.setRng(t)))})(o):o.focus()),o.dispatch("BeforeExecCommand",{command:e,ui:t,value:r}).isDefaultPrevented())return!1;var l=this.commands.exec[a];return!!O(l)&&(l(a,t,r),o.dispatch("ExecCommand",{command:e,ui:t,value:r}),!0)}queryCommandState(e){if(!YP(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;var t=e.toLowerCase(),r=this.commands.state[t];return!!O(r)&&r(t)}queryCommandValue(e){if(!YP(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";var t=e.toLowerCase(),r=this.commands.value[t];return O(r)?r(t):""}addCommands(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"exec",r=this.commands;ke(e,((e,n)=>{te(n.toLowerCase().split(","),(n=>{r[t][n]=e}))}))}addCommand(e,t,r){var n=e.toLowerCase();this.commands.exec[n]=(e,n,o)=>t.call(null!=r?r:this.editor,n,o)}queryCommandSupported(e){var t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,r){this.commands.state[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}addQueryValueHandler(e,t,r){this.commands.value[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}}var QP="data-mce-contenteditable",JP=(e,t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},ZP=(e,t)=>{e.dom.contentEditable=t?"true":"false"},eL=(e,t)=>{var r=Er.fromDom(e.getBody());((e,t,r)=>{xr(e,t)&&!r?wr(e,t):r&&yr(e,t)})(r,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(e=>{K.from(e.selection.getNode()).each((e=>{e.removeAttribute("data-mce-selected")}))})(e),e.readonly=!0,ZP(r,!1),te(qn(r,'*[contenteditable="true"]'),(e=>{lr(e,QP,"true"),ZP(e,!1)}))):(e.readonly=!1,e.hasEditableRoot()&&ZP(r,!0),(e=>{te(qn(e,`*[${QP}="true"]`),(e=>{mr(e,QP),ZP(e,!0)}))})(r),JP(e,"StyleWithCSS",!1),JP(e,"enableInlineTableEditing",!1),JP(e,"enableObjectResizing",!1),dp(e)&&e.focus(),(e=>{e.selection.setRng(e.selection.getRng())})(e),e.nodeChanged())},tL=e=>e.readonly,rL=e=>{e.parser.addAttributeFilter("contenteditable",(t=>{tL(e)&&te(t,(e=>{e.attr(QP,e.attr("contenteditable")),e.attr("contenteditable","false")}))})),e.serializer.addAttributeFilter(QP,(t=>{tL(e)&&te(t,(e=>{e.attr("contenteditable",e.attr(QP))}))})),e.serializer.addTempAttr(QP)},nL=["copy"],oL=(e,t)=>{if((e=>"click"===e.type)(t)&&!Of.metaKeyPressed(t)){var r=Er.fromDom(t.target);((e,t)=>sn(t,"a",(t=>Dr(t,Er.fromDom(e.getBody())))).bind((e=>cr(e,"href"))))(e,r).each((r=>{if(t.preventDefault(),/^#/.test(r)){var n=e.dom.select(`${r},[name="${Xe(r,"#")}"]`);n.length&&e.selection.scrollIntoView(n[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))}else(e=>J(nL,e.type))(t)&&e.dispatch(t.type,t)},aL=zt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class iL{static isNative(e){return!!aL[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||q}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){var r=e.toLowerCase(),n=Ri(r,null!=t?t:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(n);var o=this.bindings[r];if(o)for(var a=0,i=o.length;a<i;a++){var l=o[a];if(!l.removed){if(l.once&&this.off(r,l.func),n.isImmediatePropagationStopped())return n;if(!1===l.func.call(this.scope,n))return n.preventDefault(),n}}return n}on(e,t,r,n){if(!1===t&&(t=q),t){var o={func:t,removed:!1};n&&zt.extend(o,n);for(var a=e.toLowerCase().split(" "),i=a.length;i--;){var l=a[i],s=this.bindings[l];s||(s=[],this.toggleEvent(l,!0)),s=r?[o,...s]:[...s,o],this.bindings[l]=s}}return this}off(e,t){if(e)for(var r=e.toLowerCase().split(" "),n=r.length;n--;){var o=r[n],a=this.bindings[o];if(!o)return ke(this.bindings,((e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]})),this;if(a){if(t){var i=ne(a,(e=>e.func===t));a=i.fail,this.bindings[o]=a,te(i.pass,(e=>{e.removed=!0}))}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[o])}}else ke(this.bindings,((e,t)=>{this.toggleEvent(t,!1)})),this.bindings={};return this}once(e,t,r){return this.on(e,t,r,{once:!0})}has(e){e=e.toLowerCase();var t=this.bindings[e];return!(!t||0===t.length)}}var lL,sL=e=>(e._eventDispatcher||(e._eventDispatcher=new iL({scope:e,toggleEvent:(t,r)=>{iL.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,r)}})),e._eventDispatcher),dL={fire(e,t,r){return this.dispatch(e,t,r)},dispatch(e,t,r){var n=this;if(n.removed&&"remove"!==e&&"detach"!==e)return Ri(e.toLowerCase(),null!=t?t:{},n);var o=sL(n).dispatch(e,t);if(!1!==r&&n.parent)for(var a=n.parent();a&&!o.isPropagationStopped();)a.dispatch(e,o,!1),a=a.parent?a.parent():void 0;return o},on(e,t,r){return sL(this).on(e,t,r)},off(e,t){return sL(this).off(e,t)},once(e,t){return sL(this).once(e,t)},hasEventListeners(e){return sL(this).has(e)}},cL=Vi.DOM,uL=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;var r=kd(e);return r?(e.eventRoot||(e.eventRoot=cL.select(r)[0]),e.eventRoot):e.getBody()},mL=(e,t,r)=>{(e=>!e.hidden&&!tL(e))(e)?e.dispatch(t,r):tL(e)&&oL(e,r)},fL=(e,t)=>{if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed){var r=uL(e,t);if(kd(e)){if(lL||(lL={},e.editorManager.on("removeEditor",(()=>{e.editorManager.activeEditor||lL&&(ke(lL,((t,r)=>{e.dom.unbind(uL(e,r))})),lL=null)}))),lL[t])return;var n=r=>{for(var n=r.target,o=e.editorManager.get(),a=o.length;a--;){var i=o[a].getBody();(i===n||cL.isChildOf(n,i))&&mL(o[a],t,r)}};lL[t]=n,cL.bind(r,t,n)}else{var o=r=>{mL(e,t,r)};cL.bind(r,t,o),e.delegates[t]=o}}},gL=d(d({},dL),{},{bindPendingEventDelegates(){var e=this;zt.each(e._pendingNativeEvents,(t=>{fL(e,t)}))},toggleNativeEvent(e,t){var r=this;"focus"!==e&&"blur"!==e&&(r.removed||(t?r.initialized?fL(r,e):r._pendingNativeEvents?r._pendingNativeEvents.push(e):r._pendingNativeEvents=[e]:r.initialized&&r.delegates&&(r.dom.unbind(uL(r,e),e,r.delegates[e]),delete r.delegates[e])))},unbindAllNativeEvents(){var e=this,t=e.getBody(),r=e.dom;e.delegates&&(ke(e.delegates,((t,r)=>{e.dom.unbind(uL(e,r),r,t)})),delete e.delegates),!e.inline&&t&&r&&(t.onload=null,r.unbind(e.getWin()),r.unbind(e.getDoc())),r&&(r.unbind(t),r.unbind(e.getContainer()))}}),pL=e=>S(e)?{value:e.split(/[ ,]/),valid:!0}:B(e,S)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},vL=(e,t)=>e+(at(t.message)?"":`. ${t.message}`),hL=e=>e.valid,bL=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=t(e);return _(n)?n?{value:e,valid:!0}:{valid:!1,message:r}:n},yL=(e,t)=>{var r={},n={},o=(e,t,r)=>{var o=bL(t,r);return hL(o)?(n[e]=o.value,!0):(console.warn(vL(`Invalid value passed for the ${e} option`,o)),!1)},a=e=>Be(r,e);return{register:(e,a)=>{var i=(e=>S(e.processor))(a)?(e=>{var t=(()=>{switch(e){case"array":return E;case"boolean":return _;case"function":return O;case"number":return A;case"object":return x;case"string":return S;case"string[]":return pL;case"object[]":return e=>B(e,x);case"regexp":return e=>w(e,RegExp);default:return V}})();return r=>bL(r,t,`The value must be a ${e}.`)})(a.processor):a.processor,l=((e,t,r)=>{if(!T(t)){var n=bL(t,r);if(hL(n))return n.value;console.error(vL(`Invalid default value passed for the "${e}" option`,n))}})(e,a.default,i);r[e]=d(d({},a),{},{default:l,processor:i}),Ae(n,e).orThunk((()=>Ae(t,e))).each((t=>o(e,t,i)))},isRegistered:a,get:e=>Ae(n,e).orThunk((()=>Ae(r,e).map((e=>e.default)))).getOrUndefined(),set:(e,t)=>{if(a(e)){var n=r[e];return n.immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):o(e,t,n.processor)}return console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:e=>{var t=a(e);return t&&delete n[e],t},isSet:e=>Be(n,e)}},CL=["design","readonly"],wL=(e,t,r,n)=>{var o=r[t.get()],a=r[n];try{a.activate()}catch(e){return void console.error(`problem while activating editor mode ${n}:`,e)}o.deactivate(),o.editorReadOnly!==a.editorReadOnly&&eL(e,a.editorReadOnly),t.set(n),((e,t)=>{e.dispatch("SwitchMode",{mode:t})})(e,n)},SL=e=>{var t=Yi("design"),r=Yi({design:{activate:P,deactivate:P,editorReadOnly:!1},readonly:{activate:P,deactivate:P,editorReadOnly:!0}});return(e=>{e.serializer?rL(e):e.on("PreInit",(()=>{rL(e)}))})(e),(e=>{e.on("ShowCaret",(t=>{tL(e)&&t.preventDefault()})),e.on("ObjectSelected",(t=>{tL(e)&&t.preventDefault()}))})(e),{isReadOnly:()=>tL(e),set:n=>((e,t,r,n)=>{if(n!==r.get()){if(!Be(t,n))throw new Error(`Editor mode '${n}' is invalid`);e.initialized?wL(e,r,t,n):e.on("init",(()=>wL(e,r,t,n)))}})(e,r.get(),t,n),get:()=>t.get(),register:(e,t)=>{r.set(((e,t,r)=>{if(J(CL,t))throw new Error(`Cannot override default mode ${t}`);return d(d({},e),{},{[t]:d(d({},r),{},{deactivate:()=>{try{r.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}})})})(r.get(),e,t))}}},xL=zt.each,kL=zt.explode,EL={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},NL=zt.makeMap("alt,ctrl,shift,meta,access"),_L=e=>{var t={},r=Ft.os.isMacOS()||Ft.os.isiOS();xL(kL(e.toLowerCase(),"+"),(e=>{(e=>e in NL)(e)?t[e]=!0:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=EL[e]||e.toUpperCase().charCodeAt(0))}));var n,o=[t.keyCode];for(n in NL)t[n]?o.push(n):t[n]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,r?t.ctrl=!0:t.shift=!0),t.meta&&(r?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class TL{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;var t=this;e.on("keyup keypress keydown",(e=>{!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(xL(t.shortcuts,(r=>{t.matchShortcut(e,r)&&(t.pendingPatterns=r.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(r))})),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))}))}add(e,t,r,n){var o=this,a=o.normalizeCommandFunc(r);return xL(kL(zt.trim(e)),(e=>{var r=o.createShortcut(e,t,a,n);o.shortcuts[r.id]=r})),!0}remove(e){var t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}normalizeCommandFunc(e){var t=this,r=e;return"string"==typeof r?()=>{t.editor.execCommand(r,!1,null)}:zt.isArray(r)?()=>{t.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,t,r,n){var o=zt.map(kL(e,">"),_L);return o[o.length-1]=zt.extend(o[o.length-1],{func:r,scope:n||this.editor}),zt.extend(o[0],{desc:this.editor.translate(t),subpatterns:o.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!!t&&(t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&(t.alt===e.altKey&&t.shift===e.shiftKey&&(!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0))))}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}var DL=()=>{var e=(()=>{var e={},t={},r={},n={},o={},a={},i={},l={},s=(e,t)=>(r,n)=>{e[r.toLowerCase()]=d(d({},n),{},{type:t})};return{addButton:s(e,"button"),addGroupToolbarButton:s(e,"grouptoolbarbutton"),addToggleButton:s(e,"togglebutton"),addMenuButton:s(e,"menubutton"),addSplitButton:s(e,"splitbutton"),addMenuItem:s(t,"menuitem"),addNestedMenuItem:s(t,"nestedmenuitem"),addToggleMenuItem:s(t,"togglemenuitem"),addAutocompleter:s(r,"autocompleter"),addContextMenu:s(o,"contextmenu"),addContextToolbar:s(a,"contexttoolbar"),addContextForm:s(a,"contextform"),addSidebar:s(i,"sidebar"),addView:s(l,"views"),addIcon:(e,t)=>n[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:n,popups:r,contextMenus:o,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},RL=Vi.DOM,OL=zt.extend,AL=zt.each;class BL{constructor(e,t,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,OL(this,gL);var n=this;this.id=e,this.hidden=!1;var o,a,i=((e,t)=>EP(hP||bP,hP,t,e,t))(r.defaultOptions,t);this.options=yL(0,i),(a=(o=n).options.register)("id",{processor:"string",default:o.id}),a("selector",{processor:"string"}),a("target",{processor:"object"}),a("suffix",{processor:"string"}),a("cache_suffix",{processor:"string"}),a("base_url",{processor:"string"}),a("referrer_policy",{processor:"string",default:""}),a("language_load",{processor:"boolean",default:!0}),a("inline",{processor:"boolean",default:!1}),a("iframe_attrs",{processor:"object",default:{}}),a("doctype",{processor:"string",default:"<!DOCTYPE html>"}),a("document_base_url",{processor:"string",default:o.documentBaseUrl}),a("body_id",{processor:Us(o,"tinymce"),default:"tinymce"}),a("body_class",{processor:Us(o),default:""}),a("content_security_policy",{processor:"string",default:""}),a("br_in_pre",{processor:"boolean",default:!0}),a("forced_root_block",{processor:e=>{var t=S(e)&&ot(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),a("forced_root_block_attrs",{processor:"object",default:{}}),a("newline_behavior",{processor:e=>{var t=J(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),a("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),a("no_newline_selector",{processor:"string",default:""}),a("keep_styles",{processor:"boolean",default:!0}),a("end_container_on_empty_block",{processor:e=>_(e)||S(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),a("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),a("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),a("font_size_classes",{processor:"string",default:""}),a("automatic_uploads",{processor:"boolean",default:!0}),a("images_reuse_filename",{processor:"boolean",default:!1}),a("images_replace_blob_uris",{processor:"boolean",default:!0}),a("icons",{processor:"string",default:""}),a("icons_url",{processor:"string",default:""}),a("images_upload_url",{processor:"string",default:""}),a("images_upload_base_path",{processor:"string",default:""}),a("images_upload_credentials",{processor:"boolean",default:!1}),a("images_upload_handler",{processor:"function"}),a("language",{processor:"string",default:"en"}),a("language_url",{processor:"string",default:""}),a("entity_encoding",{processor:"string",default:"named"}),a("indent",{processor:"boolean",default:!0}),a("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),a("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),a("indent_use_margin",{processor:"boolean",default:!1}),a("indentation",{processor:"string",default:"40px"}),a("content_css",{processor:e=>{var t=!1===e||S(e)||B(e,S);return t?S(e)?{value:ee(e.split(","),tt),valid:t}:E(e)?{value:e,valid:t}:!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Md(o)?[]:["default"]}),a("content_style",{processor:"string"}),a("content_css_cors",{processor:"boolean",default:!1}),a("font_css",{processor:e=>{var t=S(e)||B(e,S);return t?{value:E(e)?e:ee(e.split(","),tt),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),a("inline_boundaries",{processor:"boolean",default:!0}),a("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),a("object_resizing",{processor:e=>{var t=_(e)||S(e);return t?!1===e||Ps.isiPhone()||Ps.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!Ls}),a("resize_img_proportional",{processor:"boolean",default:!0}),a("event_root",{processor:"object"}),a("service_message",{processor:"string"}),a("theme",{processor:e=>!1===e||S(e)||O(e),default:"silver"}),a("theme_url",{processor:"string"}),a("formats",{processor:"object"}),a("format_empty_lines",{processor:"boolean",default:!1}),a("format_noneditable_selector",{processor:"string",default:""}),a("preview_styles",{processor:e=>{var t=!1===e||S(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),a("custom_ui_selector",{processor:"string",default:""}),a("hidden_input",{processor:"boolean",default:!0}),a("submit_patch",{processor:"boolean",default:!0}),a("encoding",{processor:"string"}),a("add_form_submit_trigger",{processor:"boolean",default:!0}),a("add_unload_trigger",{processor:"boolean",default:!0}),a("custom_undo_redo_levels",{processor:"number",default:0}),a("disable_nodechange",{processor:"boolean",default:!1}),a("readonly",{processor:"boolean",default:!1}),a("editable_root",{processor:"boolean",default:!0}),a("plugins",{processor:"string[]",default:[]}),a("external_plugins",{processor:"object"}),a("forced_plugins",{processor:"string[]"}),a("model",{processor:"string",default:o.hasPlugin("rtc")?"plugin":"dom"}),a("model_url",{processor:"string"}),a("block_unsupported_drop",{processor:"boolean",default:!0}),a("visual",{processor:"boolean",default:!0}),a("visual_table_class",{processor:"string",default:"mce-item-table"}),a("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),a("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),a("setup",{processor:"function"}),a("init_instance_callback",{processor:"function"}),a("url_converter",{processor:"function",default:o.convertURL}),a("url_converter_scope",{processor:"object",default:o}),a("urlconverter_callback",{processor:"function"}),a("allow_conditional_comments",{processor:"boolean",default:!1}),a("allow_html_data_urls",{processor:"boolean",default:!1}),a("allow_svg_data_urls",{processor:"boolean"}),a("allow_html_in_named_anchor",{processor:"boolean",default:!1}),a("allow_script_urls",{processor:"boolean",default:!1}),a("allow_unsafe_link_target",{processor:"boolean",default:!1}),a("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),a("fix_list_elements",{processor:"boolean",default:!1}),a("preserve_cdata",{processor:"boolean",default:!1}),a("remove_trailing_brs",{processor:"boolean",default:!0}),a("pad_empty_with_br",{processor:"boolean",default:!1}),a("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),a("element_format",{processor:"string",default:"html"}),a("entities",{processor:"string"}),a("schema",{processor:"string",default:"html5"}),a("convert_urls",{processor:"boolean",default:!0}),a("relative_urls",{processor:"boolean",default:!0}),a("remove_script_host",{processor:"boolean",default:!0}),a("custom_elements",{processor:"string"}),a("extended_valid_elements",{processor:"string"}),a("invalid_elements",{processor:"string"}),a("invalid_styles",{processor:js}),a("valid_children",{processor:"string"}),a("valid_classes",{processor:js}),a("valid_elements",{processor:"string"}),a("valid_styles",{processor:js}),a("verify_html",{processor:"boolean",default:!0}),a("auto_focus",{processor:e=>S(e)||!0===e}),a("browser_spellcheck",{processor:"boolean",default:!1}),a("protect",{processor:"array"}),a("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),a("deprecation_warnings",{processor:"boolean",default:!0}),a("a11y_advanced_options",{processor:"boolean",default:!1}),a("api_key",{processor:"string"}),a("paste_block_drop",{processor:"boolean",default:!1}),a("paste_data_images",{processor:"boolean",default:!0}),a("paste_preprocess",{processor:"function"}),a("paste_postprocess",{processor:"function"}),a("paste_webkit_styles",{processor:"string",default:"none"}),a("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),a("paste_merge_formats",{processor:"boolean",default:!0}),a("smart_paste",{processor:"boolean",default:!0}),a("paste_as_text",{processor:"boolean",default:!1}),a("paste_tab_spaces",{processor:"number",default:4}),a("text_patterns",{processor:e=>B(e,x)||!1===e?{value:Bs(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),a("text_patterns_lookup",{processor:e=>{return O(e)?{value:(t=e,e=>{var r=t(e);return Bs(r)}),valid:!0}:{valid:!1,message:"Must be a single function"};var t},default:e=>[]}),a("noneditable_class",{processor:"string",default:"mceNonEditable"}),a("editable_class",{processor:"string",default:"mceEditable"}),a("noneditable_regexp",{processor:e=>B(e,Is)?{value:e,valid:!0}:Is(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),a("table_tab_navigation",{processor:"boolean",default:!0}),a("highlight_on_focus",{processor:"boolean",default:!1}),a("xss_sanitization",{processor:"boolean",default:!0}),a("details_initial_state",{processor:e=>{var t=J(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),a("details_serialized_state",{processor:e=>{var t=J(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),a("init_content_sync",{processor:"boolean",default:!1}),a("newdocument_content",{processor:"string",default:""}),o.on("ScriptsLoaded",(()=>{a("directionality",{processor:"string",default:Zi.isRtl()?"rtl":void 0}),a("placeholder",{processor:"string",default:Ms.getAttrib(o.getElement(),"placeholder")})}));var l=this.options.get;l("deprecation_warnings")&&YS(t,i);var s=l("suffix");s&&(r.suffix=s),this.suffix=r.suffix;var d=l("base_url");d&&r._setBaseUrl(d),this.baseUri=r.baseURI;var c=ud(n);c&&(Gi.ScriptLoader._setReferrerPolicy(c),Vi.DOM.styleSheetLoader._setReferrerPolicy(c));var u=qd(n);R(u)&&Vi.DOM.styleSheetLoader._setContentCssCors(u),el.languageLoad=l("language_load"),el.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new hw($s(n),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Md(n),this.hasVisual=Yd(n),this.shortcuts=new TL(this),this.editorCommands=new XP(this),KP(this);var m=l("cache_suffix");m&&(Ft.cacheSuffix=m.replace(/^[\?\&]+/,"")),this.ui={registry:DL(),styleSheetLoader:void 0,show:P,hide:P,setEnabled:P,isEnabled:V},this.mode=SL(n),r.dispatch("SetupEditor",{editor:this});var f=Zd(n);O(f)&&f.call(n,n)}render(){pP(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return sp(this)}translate(e){return Zi.translate(e)}getParam(e,t,r){var n=this.options;return n.isRegistered(e)||(R(r)?n.register(e,{processor:r,default:t}):n.register(e,{processor:V,default:t})),n.isSet(e)||T(t)?n.get(e):t}hasPlugin(e,t){return!!J(Vd(this),e)&&(!t||void 0!==ux.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,r){this.editorCommands.addCommand(e,t,r)}addQueryStateHandler(e,t,r){this.editorCommands.addQueryStateHandler(e,t,r)}addQueryValueHandler(e,t,r){this.editorCommands.addQueryValueHandler(e,t,r)}addShortcut(e,t,r,n){this.shortcuts.add(e,t,r,n)}execCommand(e,t,r,n){return this.editorCommands.execCommand(e,t,r,n)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(RL.show(e.getContainer()),RL.hide(e.id)),e.load(),e.dispatch("show"))}hide(){var e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(RL.hide(e.getContainer()),RL.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=t.getElement();if(t.removed)return"";if(r){var n=d(d({},e),{},{load:!0}),o=io(r)?r.value:r.innerHTML,a=t.setContent(o,n);return n.no_events||t.dispatch("LoadContent",d(d({},n),{},{element:r})),a}return""}save(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=t.getElement();if(!r||!t.initialized||t.removed)return"";var n=d(d({},e),{},{save:!0,element:r}),o=t.getContent(n),a=d(d({},n),{},{content:o});if(a.no_events||t.dispatch("SaveContent",a),"raw"===a.format&&t.dispatch("RawSaveContent",a),o=a.content,io(r))r.value=o;else{!e.is_removing&&t.inline||(r.innerHTML=o);var i=RL.getParent(t.id,"form");i&&AL(i.elements,(e=>e.name!==t.id||(e.value=o,!1)))}return a.element=n.element=r=null,!1!==a.set_dirty&&t.setDirty(!1),o}setContent(e,t){return IS(this,e,t)}getContent(e){return MS(this,e)}insertContent(e,t){t&&(e=OL({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?IS(this,this.startContent,{format:"raw"}):IS(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){var e=this;return e.container||(e.container=e.editorContainer||RL.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=RL.get(this.id)),this.targetElm}getWin(){var e=this;if(!e.contentWindow){var t=e.iframeElement;t&&(e.contentWindow=t.contentWindow)}return e.contentWindow}getDoc(){var e=this;if(!e.contentDocument){var t=e.getWin();t&&(e.contentDocument=t.document)}return e.contentDocument}getBody(){var e,t,r=this.getDoc();return null!==(t=null!==(e=this.bodyElement)&&void 0!==e?e:null==r?void 0:r.body)&&void 0!==t?t:null}convertURL(e,t,r){var n=this,o=n.options.get,a=tc(n);return O(a)?a.call(n,e,r,!0,t):!o("convert_urls")||"link"===r||x(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length?e:o("relative_urls")?n.documentBaseURI.toRelative(e):e=n.documentBaseURI.toAbsolute(e,o("remove_script_host"))}addVisual(e){NP(this,e)}setEditableRoot(e){((e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),((e,t)=>{e.dispatch("EditableRootStateChange",{state:t})})(e,t))})(this,e)}hasEditableRoot(){return this._editableRoot}remove(){JS(this)}destroy(e){ZS(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}var PL,LL=Vi.DOM,ML=zt.each,IL=!1,FL=[],jL=e=>{var t=e.type;ML($L.get(),(r=>{switch(t){case"scroll":r.dispatch("ScrollWindow",e);break;case"resize":r.dispatch("ResizeWindow",e)}}))},UL=e=>{if(e!==IL){var t=Vi.DOM;e?(t.bind(window,"resize",jL),t.bind(window,"scroll",jL)):(t.unbind(window,"resize",jL),t.unbind(window,"scroll",jL)),IL=e}},zL=e=>{var t=FL;return FL=oe(FL,(t=>e!==t)),$L.activeEditor===e&&($L.activeEditor=FL.length>0?FL[0]:null),$L.focusedEditor===e&&($L.focusedEditor=null),t.length!==FL.length},HL="CSS1Compat"!==document.compatMode,$L=d(d({},dL),{},{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"7.3",releaseDate:"2023-11-15",i18n:Zi,activeEditor:null,focusedEditor:null,setup(){var e=this,t="",r="",n=hw.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));var o,a=window.tinymce||window.tinyMCEPreInit;if(a)t=a.base||a.baseURL,r=a.suffix;else{for(var i=document.getElementsByTagName("script"),l=0;l<i.length;l++){var s=i[l].src||"";if(""!==s){var d=s.substring(s.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(s)){-1!==d.indexOf(".min")&&(r=".min"),t=s.substring(0,s.lastIndexOf("/"));break}}}if(!t&&document.currentScript){var c=document.currentScript.src;-1!==c.indexOf(".min")&&(r=".min"),t=c.substring(0,c.lastIndexOf("/"))}}e.baseURL=new hw(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new hw(e.baseURL),e.suffix=r,(o=e).on("AddEditor",U(rp,o)),o.on("RemoveEditor",U(np,o))},overrideDefaults(e){var t=e.base_url;t&&this._setBaseUrl(t);var r=e.suffix;r&&(this.suffix=r),this.defaultOptions=e;var n=e.plugin_base_urls;void 0!==n&&ke(n,((e,t)=>{el.PluginManager.urls[t]=e}))},init(e){var t,r=this,n=zt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=e=>{t=e},a=()=>{var t,i=0,l=[];LL.unbind(window,"ready",a),(t=>{var n=e[t];if(n)n.apply(r,[])})("onpageload"),t=((e,t)=>{for(var r=[],n=O(t)?e=>Z(r,(r=>t(r,e))):e=>J(r,e),o=0,a=e.length;o<a;o++){var i=e[o];n(i)||r.push(i)}return r})((e=>Ft.browser.isIE()||Ft.browser.isEdge()?(bx("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):HL?(bx("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):S(e.selector)?LL.select(e.selector):R(e.target)?[e.target]:[])(e)),zt.each(t,(e=>{var t;(t=r.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(zL(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0)})),0===(t=zt.grep(t,(e=>!r.get(e.id)))).length?o([]):ML(t,(a=>{((e,t)=>e.inline&&t.tagName.toLowerCase()in n)(e,a)?bx("Could not initialize inline editor on invalid inline target element",a):((e,n,a)=>{var s=new BL(e,n,r);l.push(s),s.on("init",(()=>{++i===t.length&&o(l)})),s.targetElm=s.targetElm||a,s.render()})((e=>{var t=e.id;return t||(t=Ae(e,"name").filter((e=>!LL.get(e))).getOrThunk(LL.uniqueId),e.setAttribute("id",t)),t})(a),e,a)}))};return LL.bind(window,"ready",a),new Promise((e=>{t?e(t):o=t=>{e(t)}}))},get(e){return 0===arguments.length?FL.slice(0):S(e)?se(FL,(t=>t.id===e)).getOr(null):A(e)&&FL[e]?FL[e]:null},add(e){var t=this,r=t.get(e.id);return r===e||(null===r&&FL.push(e),UL(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),PL||(PL=e=>{var r=t.dispatch("BeforeUnload");if(r.returnValue)return e.preventDefault(),e.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",PL))),e},createEditor(e,t){return this.add(new BL(e,t,this))},remove(e){var t,r=this;if(e){if(!S(e))return t=e,N(r.get(t.id))?null:(zL(t)&&r.dispatch("RemoveEditor",{editor:t}),0===FL.length&&window.removeEventListener("beforeunload",PL),t.remove(),UL(FL.length>0),t);ML(LL.select(e),(e=>{(t=r.get(e.id))&&r.remove(t)}))}else for(var n=FL.length-1;n>=0;n--)r.remove(FL[n])},execCommand(e,t,r){var n,o=this,a=x(r)?null!==(n=r.id)&&void 0!==n?n:r.index:r;switch(e){case"mceAddEditor":if(!o.get(a)){var i=r.options;new BL(a,i,o).render()}return!0;case"mceRemoveEditor":var l=o.get(a);return l&&l.remove(),!0;case"mceToggleEditor":var s=o.get(a);return s?(s.isHidden()?s.show():s.hide(),!0):(o.execCommand("mceAddEditor",!1,r),!0)}return!!o.activeEditor&&o.activeEditor.execCommand(e,t,r)},triggerSave:()=>{ML(FL,(e=>{e.save()}))},addI18n:(e,t)=>{Zi.add(e,t)},translate:e=>Zi.translate(e),setActive(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new hw(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new hw(this.baseURL)}});$L.setup();var WL,qL,VL,KL,GL={FakeClipboardItem:e=>({items:e,types:Se(e),getType:t=>Ae(e,t).getOrUndefined()}),write:e=>{WL.set(e)},read:()=>WL.get().getOrUndefined(),clear:(WL=tl()).clear},YL=Math.min,XL=Math.max,QL=Math.round,JL=(e,t,r)=>{var n=t.x,o=t.y,a=e.w,i=e.h,l=t.w,s=t.h,d=(r||"").split("");return"b"===d[0]&&(o+=s),"r"===d[1]&&(n+=l),"c"===d[0]&&(o+=QL(s/2)),"c"===d[1]&&(n+=QL(l/2)),"b"===d[3]&&(o-=i),"r"===d[4]&&(n-=a),"c"===d[3]&&(o-=QL(i/2)),"c"===d[4]&&(n-=QL(a/2)),ZL(n,o,a,i)},ZL=(e,t,r,n)=>({x:e,y:t,w:r,h:n}),eM={inflate:(e,t,r)=>ZL(e.x-t,e.y-r,e.w+2*t,e.h+2*r),relativePosition:JL,findBestRelativePosition:(e,t,r,n)=>{for(var o=0;o<n.length;o++){var a=JL(e,t,n[o]);if(a.x>=r.x&&a.x+a.w<=r.w+r.x&&a.y>=r.y&&a.y+a.h<=r.h+r.y)return n[o]}return null},intersect:(e,t)=>{var r=XL(e.x,t.x),n=XL(e.y,t.y),o=YL(e.x+e.w,t.x+t.w),a=YL(e.y+e.h,t.y+t.h);return o-r<0||a-n<0?null:ZL(r,n,o-r,a-n)},clamp:(e,t,r)=>{var n=e.x,o=e.y,a=e.x+e.w,i=e.y+e.h,l=t.x+t.w,s=t.y+t.h,d=XL(0,t.x-n),c=XL(0,t.y-o),u=XL(0,a-l),m=XL(0,i-s);return n+=d,o+=c,r&&(a+=d,i+=c,n-=u,o-=m),ZL(n,o,(a-=u)-n,(i-=m)-o)},create:ZL,fromClientRect:e=>ZL(e.left,e.top,e.width,e.height)},tM=(qL={},VL={},{load:(e,t)=>{var r=`Script at URL "${t}" failed to load`,n=`Script at URL "${t}" did not call \`tinymce.Resource.add('${e}', data)\` within 1 second`;if(void 0!==qL[e])return qL[e];var o=new Promise(((o,a)=>{var i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=!1,o=null,a=e=>function(){if(!n){n=!0,null!==o&&(clearTimeout(o),o=null);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e.apply(null,r)}},i=a(e),l=a(t);return{start:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];n||null!==o||(o=setTimeout((()=>l.apply(null,t)),r))},resolve:i,reject:l}}(o,a);VL[e]=i.resolve,Gi.ScriptLoader.loadScript(t).then((()=>i.start(n)),(()=>i.reject(r)))}));return qL[e]=o,o},add:(e,t)=>{void 0!==VL[e]&&(VL[e](t),delete VL[e]),qL[e]=Promise.resolve(t)},unload:e=>{delete qL[e]}});try{var rM="__storage_test__";(KL=window.localStorage).setItem(rM,rM),KL.removeItem(rM)}catch(e){KL=(()=>{var e={},t=[],r={getItem:t=>e[t]||null,setItem:(r,n)=>{t.push(r),e[r]=String(n)},key:e=>t[e],removeItem:r=>{t=t.filter((e=>e===r)),delete e[r]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),r})()}var nM={geom:{Rect:eM},util:{Delay:Xg,Tools:zt,VK:Of,URI:hw,EventDispatcher:iL,Observable:dL,I18n:Zi,LocalStorage:KL,ImageUploader:e=>{var t=Sx(),r=_x(e,t);return{upload:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r.upload(t,n?Nx(e):void 0)}}}},dom:{EventUtils:Mi,TreeWalker:Kn,TextSeeker:kl,DOMUtils:Vi,ScriptLoader:Gi,RangeUtils:fg,Serializer:LS,StyleSheetLoader:Ga,ControlSelection:Mf,BookmarkManager:xf,Selection:RS,Event:Mi.Event},html:{Styles:Ni,Entities:fi,Node:Tp,Schema:Ei,DomParser:Aw,Writer:Kp,Serializer:Gp},Env:Ft,AddOnManager:el,Annotator:Sf,Formatter:zx,UndoManager:$x,EditorCommands:XP,WindowManager:fx,NotificationManager:cx,EditorObservable:gL,Shortcuts:TL,Editor:BL,FocusManager:Yg,EditorManager:$L,DOM:Vi.DOM,ScriptLoader:Gi.ScriptLoader,PluginManager:ux,ThemeManager:mx,ModelManager:tx,IconManager:ex,Resource:tM,FakeClipboard:GL,trim:zt.trim,isArray:zt.isArray,is:zt.is,toArray:zt.toArray,makeMap:zt.makeMap,each:zt.each,map:zt.map,grep:zt.grep,inArray:zt.inArray,extend:zt.extend,walk:zt.walk,resolve:zt.resolve,explode:zt.explode,_addCacheSuffix:zt._addCacheSuffix},oM=zt.extend($L,nM);(e=>{window.tinymce=e,window.tinyMCE=e})(oM),(t=>{try{e.exports=t}catch(e){}})(oM)}()}}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-editor-plugin:split_core~page-editor-quit-dialog', location = 'core~page-editor-quit-dialog.js' */
(window.atlassianWebpackJsonp1126d6c3ec4535e33734b1025bd581ff=window.atlassianWebpackJsonp1126d6c3ec4535e33734b1025bd581ff||[]).push([["core~page-editor-quit-dialog"],[,,function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return s}));var o=a(1),n=a.n(o),i=a(0),r=a.n(i);function l(e,t,a){return"function"==typeof a?n()(r.a).bind(e,t,a):n()(r.a).bind(e,t)}function d(e,t){return n()(r.a).unbind(e,t)}function s(e,t){return n()(r.a).trigger(e,t)}},function(e,t,a){"use strict";var o=a(14),n=a.n(o);t.a=n.a},function(e,t,a){"use strict";var o,n="[EDITOR]",i="confluence.editor.log-level";!function(e){e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG"}(o||(o={}));var r,l=o.WARN;function d(e){return e<=function(){try{var e;return Number.isInteger(r)||(r=parseInt(null!==(e=window.localStorage.getItem(i))&&void 0!==e?e:""),Number.isInteger(r)||(r=l)),r}catch(e){console.error(n,"localStorage reading error",e)}return l}()}function s(){if(d(o.INFO)){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.info(n,...t)}}function c(e){return`${n} ${e}`}t.a={debug:function(){if(d(o.DEBUG)){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.debug(n,...t)}},error:function(){if(d(o.ERROR)){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.error(n,...t)}},info:s,warn:function(){if(d(o.WARN)){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.warn(n,...t)}},time:function(e){d(o.DEBUG)&&(s(`${e} started`),console.time(c(e)))},timeEnd:function(e){d(o.DEBUG)&&console.timeEnd(c(e))},setLogLevel:function(e){r=e}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var o=a(6),n=a.n(o),i=a(4),r={"editor.autocomplete.macros.header.text":"Macro suggestions","editor.autocomplete.macros.dialog.browse":"Open macro browser","editor.autocomplete.macros.error.load.header":"Failed to get macro details","editor.autocomplete.macros.error.load.retrylink":"Try again","editor.autocomplete.links.header.text":"Link suggestions","editor.autocomplete.links.dialog.search":"Search for &lsquo;{0}&rsquo;","editor.autocomplete.links.dialog.search.no.text":"Search","editor.autocomplete.links.web.link":"Insert web link","editor.autocomplete.links.create.link":"Insert link to create page","editor.autocomplete.file.header.text":"File suggestions","editor.autocomplete.media.header.text":"Media suggestions","editor.autocomplete.media.files.dialog.browse":"Open file library","editor.autocomplete.media.macros.dialog.browse":"Insert other media","editor.autoformat.sampletext.firstcell":"first cell","editor.autoformat.sampletext.heading":"heading","tinymce.advanced.charmap_desc":"Symbol","tinymce.charmap_dlg.success.text":"Symbol inserted","tinymce.charmap_dlg.title":"Insert symbol","tinymce.charmap_dlg.search.label":"Find symbol","calendar3.helptip.learn.more":"Learn More","tinymce.confluence.placeholder.inline.tasks":"Type your task here, using \u0022@\u0022 to assign to a user and \u0022//\u0022 to select a due date","tinymce.confluence.files":"Files","tinymce.confluence.conf_file_desc":"Insert files and images","tinymce.confluence.conf_file_shortcut":"Ctrl+M","tinymce.charmap_dlg.nothing.text":"No symbol found","tinymce.confluence.conf_wikimarkup_conversion_errors":"Wiki markup conversion errors","tinymce.confluence.conf_wikimarkup_timeout":"The server took too long to convert the wiki markup. This may only be a temporary problem so you could try again.","tinymce.confluence.conf_wikimarkup_info_title":"Enter wiki markup or markdown below. Confluence will convert your content to editor format and insert it into your page.","tinymce.confluence.conf_wikimarkup.insert.label":"Insert","tinymce.confluence.conf_wikimarkup_preview_label":"Preview","editor.minor.edit":"Notify watchers","property.panel.textplaceholder.display.default":"Text","property.panel.textplaceholder.display.default.tooltip":"Instructional text is replaced with empty content when a person types.","property.panel.textplaceholder.remove":"Remove","editor.shared.draft.done.desc":"Save draft and close editor","editor.change.comment":"What did you change?","tinymce.tablepicker.insert_table_title":"Insert table","com.atlassian.confluence.extra.team-calendars.calendar.helptip.close":"Got it, thanks!","comment.notification.enable":"Watch this page","page-layout-2.layout.group":"Apply layout","page-layout-2.layout.single":"Single column section","page-layout-2.layout.two-equal":"Two column section","page-layout-2.layout.two-left-sidebar":"Two column section with left side-bar","page-layout-2.layout.two-right-sidebar":"Two column section with right side-bar","page-layout-2.layout.three-equal":"Three column section","page-layout-2.layout.three-with-sidebars":"Three column section with side-bars","page-layout-2.add-section":"Add section","page-layout-2.add-section.tooltip":"Add a new section below","page-layout-2.remove-section":"Remove section","page-layout-2.remove-section.tooltip":"Remove the current section","page-layout-2.move-section-up":"Move up","page-layout-2.move-section-up.tooltip":"Move section up","page-layout-2.move-section-down":"Move down","page-layout-2.move-section-down.tooltip":"Move section down","page-layout-2.close":"Close toolbar","cancel.name":"Cancel","close.name":"Close","content.empty":"Comment text is empty. Cannot create empty comments.","edit.name":"Edit","heading.key":"Key","heartbeat.page.edited.info":"This page is also being edited by {0}. Your changes will be merged with theirs when you save.","mysql.utf8.content.validation.failed.message":"We can\u0027t save because the {0} character isn\u0027t supported by your database.\u003cbr\u003e\u003cbr\u003eRemove this character or use a Confluence symbol or emoticon instead. \u003ca href = \u0022https://confluence.atlassian.com/x/BYfsNg\u0022 target=\u0022_blank\u0022\u003eLearn more\u003c/a\u003e","mysql.utf8.content.validation.failed.title":"Unsupported character","page.restrictions.apply":"Restrictions apply","page.restrictions.none":"Unrestricted","publish.name":"Publish","show.preview":"Preview","these.lines.were.added":"This line was added.","these.lines.were.removed":"This line was removed.","this.content.was.modified":"Formatting was changed.","tinymce.confluence.preview":"Preview","unsaved.comment.lost":"Your comment will be lost.","unsaved.template.lost":"Your unsaved template changes will be lost.","update.word":"Update","editor.collaborative.mode.disabled":"Copy any changes you want to keep, then refresh the page to continue editing.","editor.collaborative.mode.enabled":"Collaborative editing was switched off, but it\u0027s back in business. Copy your changes and refresh the page to keep editing.","editor.discard-to-published.error.message":"We can\u0027t get the last published version of the page at the moment. Give it a few moments then try discarding the draft again.","editor.discard-to-published.error.title":"Can\u0027t revert to last published version","editor.discard-to-published.success.message":"Successfully reverted to the last published version","editor.generic.refresh":"Something went wrong with the editor. Copy your unsaved changes and refresh the page to keep editing.","editor.labels.plural":"{0} Labels","editor.labels.singular":"{0} Label","editor.labels.zero":"Labels","editor.offline.before.save.error":"Unable to communicate with server. Saving is not possible at the moment.","editor.offline.preview.error":"Can\u0027t reach the server. Check you\u0027re connected to the internet and Confluence is up and running.","editor.page.legacy.draft.deprecated":"Collaborative editing is here! That means we need a little help from you to restart your editing session. All you need to do is copy the content, edit this page again, then paste it in and save.","editor.publish.blog.desc":"Publish your blog post","editor.publish.blog":"Publish","editor.restrictions.icon.editor-restricted":"Edit page restrictions. Current status: Restrictions apply","editor.restrictions.icon.editor-unrestricted":"Edit page restrictions. Current status: Unrestricted","editor.save.page.desc":"Save your page","editor.save.page":"Save","editor.shared.draft.publish.desc":"Publish changes","editor.shared.draft.update.desc":"Update the published page","discard.draft.page-published.error.title":"This page has already been published","discard.draft.page-published.error":"You can no longer discard this draft because it\u0027s not a draft anymore!","discard.draft.unknown.error":"An unknown error has occurred. Please check your logs.","draft.autosaved.at.new":"Draft autosaved at {0}","draft.saved.at.new":"Draft saved at {0}","draft.saving.error.could.not.delete":"There were errors discarding your draft.","draft.saving.error.previous.draft":"Error saving draft. Last draft saved at {0}","draft.saving.error":"Error saving draft. No draft has been saved.","saved.draft":"A draft will be saved. You can resume editing this draft the next time you open the editor or view all your drafts in your profile.","saved.shared.draft.leave.page":"We haven\u0027t finished saving your changes. If you leave before seeing the \u0027Draft saved\u0027 message, you might lose your changes.","editor.quit-dialog.delete.blogpost.changes.by.many":"This will permanently delete this blog post, which you and these other people have worked on.","editor.quit-dialog.delete.blogpost.changes.by.one":"Once you delete an unpublished blog post, it\u0027s gone for good.","editor.quit-dialog.delete.page.changes.by.many":"This will permanently delete this page, which you and these other people have worked on.","editor.quit-dialog.delete.page.changes.by.one":"If you delete an unpublished page, it\u0027s gone for good.","editor.quit-dialog.link.hide.diff":"Show contributors","editor.quit-dialog.link.show.diff":"Show changes","editor.quit-dialog.publish.changes":"\u003cp\u003eThere are changes made by you and other people that haven\u0027t been published yet.\u003c/p\u003e\u003cp\u003eThese people have made changes:\u003c/p\u003e","editor.quit-dialog.revert.blogpost.changes.by.one":"This will permanently delete all the changes you made since this blog post was last published","editor.quit-dialog.revert.changes.by.many":"This will permanently delete all the changes that the following people have made since this page was last published.","editor.quit-dialog.revert.page.changes.by.one":"This will permanently delete all the changes you made since this page was last published.","editor.quit-dialog.title.blogpost.delete":"Delete unpublished blog post?","editor.quit-dialog.title.diff":"Unpublished changes","editor.quit-dialog.title.discard":"Revert to last published version?","editor.quit-dialog.title.page.delete":"Delete unpublished page?","editor.quit-dialog.title.publish":"Publish all changes?","template.content.ariaLabel":"Template content","page.content.ariaLabel":"Page content","blogpost.content.ariaLabel":"Blog post content","content.ariaLabel":"Content","quick.comment.label.message":"Write a comment","aetable.align.top":"Align top","aetable.align.middle":"Align middle","aetable.align.bottom":"Align bottom"},l=function(e){var t=r[e];if(void 0!==t){for(var a=arguments.length,o=new Array(a>1?a-1:0),n=1;n<a;n++)o[n-1]=arguments[n];return o.length?d(t,...o):t}return i.a.error(`Translation missing for editor resource: ${e}`),e},d=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),o=1;o<t;o++)a[o-1]=arguments[o];return e&&1===(null==a?void 0:a.length)&&Array.isArray(a[0])?n.a.format(e,...a[0]):n.a.format(e,...a)}},function(e,t){e.exports=require("ajs")},,function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var o=a(3).a.get("context-path")},,,,,function(e,t,a){"use strict";a.r(t),a.d(t,"cancelButton",(function(){return n})),a.d(t,"previewButton",(function(){return i})),a.d(t,"quitDialogHeader",(function(){return d})),a.d(t,"quitDialogContent",(function(){return s})),a.d(t,"saveButtonText",(function(){return c})),a.d(t,"saveButtonTitle",(function(){return u})),a.d(t,"saveButton",(function(){return g})),a.d(t,"contributorList",(function(){return r})),a.d(t,"hiddenInputCancel",(function(){return l}));var o=a(5),n=e=>{var t=e.contentType;return e.sharedDraftsEnabled&&t&&["page","blogpost"].includes(t)?'<ul class="aui-buttons rte-toolbar-group-done close"><button class="aui-button shared-drafts" type="submit" id="rte-button-cancel" name="cancel" value="cancel"><span class="icon aui-icon aui-icon-small aui-iconfont-close-dialog"></span></button></ul>':`<div class="aui-buttons cancel-button-container-shared-draft cancel-button-container-quick-edit">\n      <button class="aui-button toolbar-item" type="submit" id="rte-button-cancel" name="cancel" value="cancel">\n          <span class="trigger-text">${t&&["page","blogpost"].includes(t)?Object(o.a)("close.name"):Object(o.a)("cancel.name")}</span>\n      </button>\n  </div>`},i=()=>`<button class="aui-button toolbar-item" id="rte-button-preview" title="${Object(o.a)("tinymce.confluence.preview")}" type="button"><span class="trigger-text">${Object(o.a)("show.preview")}</span></button>`,r=e=>`<ul class="contributor-list">${null==e?void 0:e.map((e=>`<li><div class="contributor-avatar"><span class="aui-avatar aui-avatar-large"><span class="aui-avatar-inner"><img src="${e.avatarURL}"/></span></span></div><div class="contributor-name"><span>${e.fullname}</span></div></li>`)).join("")}</ul>`,l=()=>'<input type="hidden" name="cancel" value="cancel">',d=e=>{var t=e.dialogType,a=e.contentType,n=e.newPage;return`${(()=>{switch(t){case"revert":case"delete":return n?"blogpost"===a?`<h2 class="aui-dialog2-header-main">${Object(o.a)("editor.quit-dialog.title.blogpost.delete")}</h2>`:`<h2 class="aui-dialog2-header-main">${Object(o.a)("editor.quit-dialog.title.page.delete")}</h2>`:`<h2 class="aui-dialog2-header-main">${Object(o.a)("editor.quit-dialog.title.discard")}</h2>`;case"publish":case"update":return`<h2 class="aui-dialog2-header-main">${Object(o.a)("editor.quit-dialog.title.publish")}</h2>`;default:return`<h2 class="aui-dialog2-header-main">${Object(o.a)("editor.quit-dialog.title.diff")}</h2>`}})()}<button class="aui-close-button" type="button" aria-label=${Object(o.a)("close.name")}></button>`},s=e=>{var t=e.dialogType,a=e.contentType,n=e.contributors,i=e.newDialog;switch(t){case"revert":return n&&0!==(null==n?void 0:n.length)?`${Object(o.a)("editor.quit-dialog.revert.changes.by.many")}<div class="aui-dialog2-footer-hint"><a id="qed-show-diff-button" class="aui-button aui-button-link">${Object(o.a)("editor.quit-dialog.link.show.diff")}</a></div>${r(n)}`:`${"blogpost"===a?Object(o.a)("editor.quit-dialog.revert.blogpost.changes.by.one"):Object(o.a)("editor.quit-dialog.revert.page.changes.by.one")}<div class="aui-dialog2-footer-hint"><a id="qed-show-diff-button" class="aui-button aui-button-link">${Object(o.a)("editor.quit-dialog.link.show.diff")}</a></div>`;case"delete":return n&&0!==(null==n?void 0:n.length)?`${"blogpost"===a?Object(o.a)("editor.quit-dialog.delete.blogpost.changes.by.many"):Object(o.a)("editor.quit-dialog.delete.page.changes.by.many")}${r(n)}`:"blogpost"===a?Object(o.a)("editor.quit-dialog.delete.blogpost.changes.by.one"):Object(o.a)("editor.quit-dialog.delete.page.changes.by.one");case"publish":case"update":return`${Object(o.a)("editor.quit-dialog.publish.changes")}${r(n)}`;case"diff":return`<div><div class="legend"><span class="legend-title">${Object(o.a)("heading.key")}: </span><span class="diff-html-added">${Object(o.a)("these.lines.were.added")}</span><span class="diff-html-removed">${Object(o.a)("these.lines.were.removed")}</span><span class="diff-html-changed">${Object(o.a)("this.content.was.modified")}</span></div>${i?"":`<a class="aui-button aui-button-link" id="qed-hide-diff-button">${Object(o.a)("editor.quit-dialog.link.hide.diff")}</a>`}<hr/><div class="wiki-content"></div></div>`}},c=e=>{var t=e.contentType,a=e.sharedDraftsEnabled,n=e.isNewPage;return a&&t&&["page","blogpost"].includes(t)?n?Object(o.a)("publish.name"):Object(o.a)("update.word"):"blogpost"===t?Object(o.a)("editor.publish.blog"):Object(o.a)("editor.save.page")},u=e=>{var t=e.contentType,a=e.sharedDraftsEnabled,n=e.isNewPage;switch(t){case"blogpost":return Object(o.a)("editor.publish.blog.desc");case"page":return a?n?Object(o.a)("editor.shared.draft.publish.desc"):Object(o.a)("editor.shared.draft.update.desc"):Object(o.a)("editor.save.page.desc");default:return Object(o.a)("editor.save.page")}},g=e=>{var t=e.contentType,a=e.sharedDraftsEnabled,o=e.isNewPage;return`<button id="rte-button-publish" class="aui-button aui-button-primary default-submit" type="submit" name="confirm" value="Save" title="${u({contentType:t,sharedDraftsEnabled:a,isNewPage:o})}" tabindex="101">${c({contentType:t,sharedDraftsEnabled:a,isNewPage:o})}</button>`}},function(e,t){e.exports=require("confluence/meta")},,,,,function(e,t,a){"use strict";var o,n=a(6),i=a.n(n),r=a(1),l=a.n(r),d=a(0),s=a(8),c=a(5),u=a(3),g=a(2),p=a(10),f=a(13);!function(e){e.DELETE="delete",e.REVERT="revert",e.PUBLISH="publish",e.UPDATE="update",e.SHOW_DIFF="diff"}(o||(o={}));var b,h,m,v={},y={},x=[],T=!1,I=0,S=!1,A=!1,w=e=>{var t;e.stopPropagation(),e.preventDefault(),Object(g.b)("analyticsEvent",{name:"confluence.synchrony.editor.quit-dialog.show-diff-clicked"}),null===(t=v.showDiffButton)||void 0===t||t.hide(),F((function(){var e;B(),null===(e=v.hideDiffButton)||void 0===e||e.show()}))},J=e=>{var t,a,o;e.stopPropagation(),e.preventDefault(),Object(g.b)("analyticsEvent",{name:"confluence.synchrony.editor.quit-dialog.hide-diff-clicked"}),null===(t=v.hideDiffButton)||void 0===t||t.hide(),null===(a=v.showDiffButton)||void 0===a||a.show(),null===(o=v.dialogEl)||void 0===o||o.removeClass("aui-dialog2-xlarge").addClass("aui-dialog2-medium"),R(m)},E=e=>{S||(m=b?o.REVERT:o.DELETE,U(),Object(g.b)("analyticsEvent",{name:"confluence.synchrony.editor.quit-dialog.discard"}),e.stopPropagation(),e.preventDefault(),d.Confluence.Editor.UI.setButtonsState(!1,v.buttonsAll),L(u.a.get("content-id")))},q=()=>{var e;d.Confluence.Editor.Drafts.unBindUnloadMessage(),null===(e=v.editorForm)||void 0===e||e.append(Object(f.hiddenInputCancel)()).submit()},k=e=>{null!=e&&e.stopPropagation&&(e.stopPropagation(),e.preventDefault()),Object(g.b)("analyticsEvent",{name:"confluence.synchrony.editor.quit-dialog.keep-draft-clicked",data:{contributorCount:x.length+1}}),q()},O=e=>{var t;d.Confluence.Editor.UI.setButtonsState(!1,v.buttonsAll),null==y||null===(t=y.save)||void 0===t||t.call(y,e),U()},j=e=>{e.stopPropagation(),e.preventDefault(),m=null,Object(g.b)("analyticsEvent",{name:"confluence.synchrony.editor.draft-status-indicator.click"}),F((function(){var e;null===(e=v.closeButton)||void 0===e||e.show(),B()}))},D=e=>{var t;e.stopPropagation(),e.preventDefault(),S||(null===(t=v.closeButton)||void 0===t||t.show(),u.a.get("new-page")?R(o.DELETE):R(o.REVERT))},_=e=>{var t;e.stopPropagation(),e.preventDefault(),null==v||null===(t=v.dialog)||void 0===t||t.hide()},B=()=>{var e;null===(e=v.dialogEl)||void 0===e||e.removeClass("aui-dialog2-medium").addClass("aui-dialog2-xlarge"),R(o.SHOW_DIFF),l.a.ajax({url:s.a+"/rest/tinymce/1/content/"+u.a.get("page-id")+"/draft/diff",type:"GET"}).done((e=>{var t,a,o=null===(t=v.dialogContent)||void 0===t?void 0:t.find(".wiki-content").html(e);null!=o&&o.children().first().hasClass("diff-context-placeholder")&&(null===(a=v.dialogContent)||void 0===a||a.find("hr").hide())}))},C=()=>{if(d.Confluence.Editor.UI.toggleSavebarBusy(!0),0===x.length)y.save&&y.save();else{F();var e=b?o.UPDATE:o.PUBLISH;R(e)}},$=e=>{d.Confluence.Editor.Drafts.save({forceSave:!0,skipErrorHandler:!1,onSuccessHandler:k,ignoreRelations:!(d.Confluence.Editor.hasContentChanged()&&A)});var t=d.Confluence.Editor.Drafts.getDraftSavingPromise();t&&t.fail((e=>{var t;null==y||null===(t=y.cancelErrorHandler)||void 0===t||t.call(y,e)})),e.namespace&&"heartbeat-error"===e.namespace||d.Confluence.Editor.UI.toggleSavebarBusy(!0)},R=e=>{var t,a,n,i,r,d=()=>e===o.SHOW_DIFF&&(m===o.REVERT||m===o.DELETE);e!==o.UPDATE&&e!==o.PUBLISH||(I=(new Date).getTime()/1e3);var s,c,g,p,b=e;(d()&&(b=m),null===(t=v.dialogHeader)||void 0===t||t.html(Object(f.quitDialogHeader)({dialogType:b,contentType:u.a.get("content-type"),newPage:u.a.get("new-page")})),null===(a=v.dialogContent)||void 0===a||a.html(Object(f.quitDialogContent)({dialogType:e,contributors:x,contentType:u.a.get("content-type"),newDialog:null==m})),v.hideDiffButton=l()("#qed-hide-diff-button").click(J),u.a.get("new-page"))||(e!==o.SHOW_DIFF&&(m=e),v.showDiffButton=l()("#qed-show-diff-button").click(w),v.showDiffButton.show(),null===(s=v.buttonsAll)||void 0===s||s.push(v.showDiffButton));e===o.DELETE||e===o.REVERT||d()?(null===(c=v.discardButton)||void 0===c||c.show(),null===(p=v.dialogEl)||void 0===p||p.addClass("aui-dialog2-warning")):null===(g=v.dialogEl)||void 0===g||g.removeClass("aui-dialog2-warning");null===(n=v.closeButton)||void 0===n||n.show(),null===(i=v.dialogFooter)||void 0===i||i.find("."+e).show(),null===(r=v.dialog)||void 0===r||r.show()},P=()=>{var e,t,a;U(),Object(g.b)("analyticsEvent",{name:"confluence.synchrony.editor.quit-dialog.dialog-closed"}),null===(e=v.dialogEl)||void 0===e||e.removeClass("aui-dialog2-xlarge").addClass("aui-dialog2-medium"),d.Confluence.Editor.UI.toggleSavebarBusy(!1),null===(t=v.dialogFooter)||void 0===t||t.find(".aui-button").hide(),null===(a=v.dialogContent)||void 0===a||a.empty()},U=()=>{var e=(new Date).getTime()/1e3-I;Object(g.b)("analyticsEvent",{name:"confluence.synchrony.editor.quit-dialog."+m+".displayed",data:{displayTimeInSeconds:e,contentId:u.a.get("content-id")}}),I=0};function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=b?s.a+"/rest/synchrony/1.0/content/"+e+"/changes/unpublished":s.a+"/rest/api/content/"+e+"?status=draft";b&&p.a.suppressMessage("editor.synchrony.revert-page"),l.a.ajax({url:a,type:"DELETE",data:{draftId:e},contentType:"application/json",dataType:"json"}).done((()=>{b&&p.a.handleMessage("collaborative-editor-discard-error",{type:"success",close:"auto",message:Object(c.a)("editor.discard-to-published.success.message")}),Object(g.b)("analyticsEvent",{name:"confluence.synchrony.editor.quit-dialog.discard-success",data:{contentId:e}}),q()})).fail((a=>{if(409===a.status&&t<5)Object(g.b)("disable-draft-save"),L(e,t+1);else{var o,n,i,r,l,s=JSON.parse(a.responseText),u=Object(c.a)("draft.saving.error.could.not.delete"),f=a.errors||Object(c.a)("discard.draft.unknown.error");"content.delete.published"===(null==s||null===(o=s.data)||void 0===o||null===(n=o.errors)||void 0===n||null===(i=n[0])||void 0===i||null===(r=i.message)||void 0===r?void 0:r.key)&&(u=Object(c.a)("discard.draft.page-published.error.title"),f=Object(c.a)("discard.draft.page-published.error")),Object(g.b)("analyticsEvent",{name:"confluence.synchrony.editor.quit-dialog.discard-error",data:{contentId:e}}),Object(g.b)("enable-draft-save"),p.a.handleMessage("collaborative-editor-discard-error",{type:"error",title:b?Object(c.a)("editor.discard-to-published.error.title"):u,message:b?Object(c.a)("editor.discard-to-published.error.message"):f}),null==v||null===(l=v.dialog)||void 0===l||l.hide(),d.Confluence.Editor.UI.setButtonsState(!0,v.buttonsAll)}}))}var H=(e,t)=>{if(null!=t&&t.contributors){a=t.contributors,o=e=>e.name===u.a.get("remote-user"),x=a.filter((n=o,e=>!n(e)))}var a,o,n},F=e=>{d.Confluence.Editor.Drafts.save({forceSave:b,skipErrorHandler:!0,onSuccessHandler:e||l.a.noop})};t.a={init:e=>{if(h=u.a.getBoolean("shared-drafts")&&["page","blogpost"].includes(u.a.get("content-type")))if(T){var t;y.save=null==e?void 0:e.saveHandler,y.cancelErrorHandler=null==e?void 0:e.cancelErrorHandler,null===(t=v.publishButton)||void 0===t||t.click(O)}else{var a,o,n,r,s,c,p;if(b=!u.a.get("new-page"),v.discardButton=l()("#qed-discard-button").tooltip({gravity:"s",className:"quit-editor-dialog"}),d.Confluence.Editor.isLimitedModeEnabled()&&b)d.Confluence.Editor.UI.setButtonState(!1,v.discardButton),null===(c=v.discardButton)||void 0===c||c.removeAttr("disabled");else null===(p=v.discardButton)||void 0===p||p.click(E);v.saveExitButton=l()("#qed-save-exit-button").click(k),v.hideDiffButton=l()("#qed-hide-diff-button").click(J),v.publishButton=l()("#qed-publish-button"),v.closeButton=l()("#qed-close-button").click(_),v.buttonsAll=[v.discardButton,v.saveExitButton,v.showDiffButton,v.hideDiffButton,v.publishButton],v.dialog=i.a.dialog2("#quit-editor-dialog"),v.dialogEl=null===(a=v.dialog)||void 0===a?void 0:a.$el,v.dialogHeader=null===(o=v.dialogEl)||void 0===o?void 0:o.find(".aui-dialog2-header"),v.dialogContent=null===(n=v.dialogEl)||void 0===n?void 0:n.find(".aui-dialog2-content"),v.dialogFooter=null===(r=v.dialogEl)||void 0===r?void 0:r.find(".aui-dialog2-footer"),v.editorForm=l()("#wysiwyg").closest("form"),l()("#rte-show-changes").on("click",j),l()("#rte-show-revert").on("click",D),u.a.get("new-page")||l()("#pluggable-status").on("click","a",j),null===(s=v.dialog)||void 0===s||s.on("hide",P),Object(g.a)("editor-heartbeat",H),Object(g.a)("synchrony.history.evicted",(()=>{S=!0,l()("#qed-discard-button").attr("disabled","disabled")})),Object(g.a)("synchrony.connected",(()=>{A=!0})),T=!0}return v},process:e=>{h&&(e.stopPropagation(),e.preventDefault(),l()(window).one("editor-heartbeat rte.heartbeat-error",(function(t){switch(l()(this).off("editor-heartbeat rte.heartbeat-error"),e.target.id){case d.Confluence.Editor.UI.saveButton.attr("id"):case d.Confluence.Editor.UI.versionCommentInput.attr("id"):return C();case d.Confluence.Editor.UI.cancelButton.attr("id"):return $(t)}})),d.Confluence.Editor.heartbeat())},_destroy:()=>{T=!1,S=!1}}}]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-frontend:split_table-styles-editor', location = 'table-styles-editor.js' */
(window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73=window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73||[]).push([[31],{564:function(e,l,t){},565:function(e,l,t){},574:function(e,l,t){"use strict";t.r(l);var c=t(15),f=t(3);const a={"000000":"Black 100%","172b4d":"Dark grey 100%","42526e":"Medium grey 100%","7a869a":"Medium grey 85%",c1c7d0:"Medium grey 45%",f4f5f7:"Light grey 100%",clear:"Clear fill",bf2600:"Dark red 100%",de350b:"Dark red 85%",ff5630:"Medium red 100%",ff7452:"Medium red 85%",ff8f73:"Medium red 65%",ffbdad:"Light red 100%",ffebe6:"Light red 35%",ff8b00:"Dark orange 100%",ff991f:"Dark orange 85%",ffab00:"Medium orange 100%",ffc400:"Medium yellow 100%",ffe380:"Medium yellow 45%",fff0b3:"Light yellow 100%",fffae6:"Light yellow 35%","006644":"Dark green 100%","00875a":"Dark green 85%","36b37e":"Medium green 100%","57d9a3":"Medium green 65%","79f2c0":"Medium green 45%",abf5d1:"Light green 100%",e3fcef:"Light green 35%","008da6":"Dark teal 100%","00a3bf":"Dark teal 85%","00b8d9":"Medium teal 100%","00c7e6":"Medium teal 85%","79e2f2":"Medium teal 45%",b3f5ff:"Light teal 100%",e6fcff:"Light teal 35%","0747a6":"Dark blue 100%","0052cc":"Dark blue 85%","0065ff":"Medium blue 100%","2684ff":"Medium blue 85%","4c9aff":"Medium blue 65%",b3d4ff:"Light blue 100%",deebff:"Light blue 35%",403294:"Dark purple 100%","5243aa":"Dark purple 85%","6554c0":"Medium purple 100%","8777d9":"Medium purple 85%","998dd9":"Medium purple 65%",c0b6f2:"Light purple 100%",eae6ff:"Light purple 35%"},n=["bf2600","ff8b00","006644","008da6","0747a6","403294","000000","de350b","ff991f","00875a","00a3bf","0052cc","5243aa","172b4d","ff5630","ffab00","36b37e","00b8d9","0065ff","6554c0","42526e","ff7452","ffc400","57d9a3","00c7e6","2684ff","8777d9","7a869a","ff8f73","ffe380","79f2c0","79e2f2","4c9aff","998dd9","c1c7d0","ffbdad","fff0b3","abf5d1","b3f5ff","b3d4ff","c0b6f2","f4f5f7","ffebe6","fffae6","e3fcef","e6fcff","deebff","eae6ff","clear"];t(564),t(565);Object(c.a)("confluence/table-color-names",()=>({colorNames:a,colorValues:n}))}},[[574,0,3,4,8,1,6]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:editor-internationalisation', location = 'i18n/translations.i18n.js' */
define("confluence-editor/i18n/translations.i18n",["ajs"],function(a){return{popup_blocked:"The browser has blocked a popup opened by the Editor.",ctrl_key:"Ctrl",shift_key:"Shift",Close:"Close",searchreplace:{search_desc:"Find",replace_desc:"Find/Replace"},searchreplace_dlg:{allreplacedplural:"{0} replacements were made",
allreplacedsingular:"1 replacement was made",notfound:"No replacements were made",findlabel:"Find",replacelabel:"Replace",findnext:"Next",findprevious:"Previous",replace:"Replace",replaceall:"Replace all",
close:"Close"},advhr:{advhr_desc:"tinymce.advhr.advhr_desc"},emotions:{emotions_desc:"tinymce.emotions.emotions_desc"},emotions_dlg:{title:"tinymce.emotions_dlg.title",desc:"tinymce.emotions_dlg.desc",smile:"tinymce.emotions_dlg.smile",sad:"tinymce.emotions_dlg.sad",tongue:"tinymce.emotions_dlg.tongue",biggrin:"tinymce.emotions_dlg.biggrin",
wink:"tinymce.emotions_dlg.wink",thumbs_up:"tinymce.emotions_dlg.thumbs_up",thumbs_down:"tinymce.emotions_dlg.thumbs_down",information:"tinymce.emotions_dlg.information",check:"tinymce.emotions_dlg.check",error:"tinymce.emotions_dlg.error",warning:"tinymce.emotions_dlg.warning",add:"tinymce.emotions_dlg.add",forbidden:"tinymce.emotions_dlg.forbidden",help_16:"tinymce.emotions_dlg.help_16",
lightbulb_on:"tinymce.emotions_dlg.lightbulb_on",lightbulb:"tinymce.emotions_dlg.lightbulb",star_yellow:"tinymce.emotions_dlg.star_yellow",star_red:"tinymce.emotions_dlg.star_red",star_green:"tinymce.emotions_dlg.star_green",star_blue:"tinymce.emotions_dlg.star_blue",heart:"tinymce.emotions_dlg.heart",broken_heart:"tinymce.emotions_dlg.broken_heart"},confluence:{conf_macro_browser:"Macro",
conf_macro_browser_desc:"Insert macro",conf_image:"Image",confimage_desc:"Insert image",conf_file:"Files and images",confifile_desc:"Insert files and images",conf_link:"Link",conflink_desc:"Insert link",conf_table:"Table",
conf_wikimarkup:"Markup",conf_wikimarkup_desc:"Insert markup",conf_wikimarkup_errors:"Wiki markup conversion errors",conf_wikimarkup_timeout:"The server took too long to convert the wiki markup. This may only be a temporary problem so you could try again.",conf_wikimarkup_hint:"Hint: you can also enter wiki markup directly in the editor, where it will be formatted as you type.",conf_wikimarkup_markdown_label:"Markdown",
conf_wikimarkup_confluence_label:"Confluence wiki",conf_shortcuts_help_desc:"Keyboard shortcuts help",conf_insert_button_title:"Insert"},table:{desc:"Insert table",row_before_desc:"Insert row above",row_after_desc:"Insert row below",delete_row_desc:"Delete row",
numbering_column_desc:"Insert numbering column",responsive:"Responsive",responsive_tooltip:"Table columns get wider as you add content. Drag column borders to set width relative to each other and the page.",fixed_width:"Fixed width",fixed_width_tooltip:"Drag column borders to set width. The table always appears at the width you set.",col_before_desc:"Insert column left",col_after_desc:"Insert column right",col_copy_desc:"Copy column",
col_paste_desc:"Paste column left",col_cut_desc:"Cut column",delete_col_desc:"Delete column",split_cells_desc:"Split merged cells",merge_cells_desc:"Merge cells",row_desc:"tinymce.table.row_desc",cell_desc:"tinymce.table.cell_desc",props_desc:"tinymce.table.props_desc",paste_row_before_desc:"Paste row above",
paste_row_after_desc:"Paste row after",cut_row_desc:"Cut row",copy_row_desc:"Copy row",del:"Delete table",row:"Row",col:"Column",cell:"Cell",row_highlight:"Heading row",col_highlight:"Heading column",selection_highlight:"Change cell color",
invalid_table_field:"Rows and columns must both be numbers greater than zero.",table_more_heading:"Table settings",cell_background_color:"Background color : {0}",cut_row_desc_shortcut:"Ctrl+Shift+X",copy_row_desc_shortcut:"Ctrl+Shift+C",paste_row_before_desc_shortcut:"Ctrl+Shift+V",row_before_desc_shortcut:"Alt+\u2191",
row_after_desc_shortcut:"Alt+\u2193"},advanced:{style_select:"tinymce.advanced.style_select",font_size:"tinymce.advanced.font_size",fontdefault:"tinymce.advanced.fontdefault",block:"Format",paragraph:"Paragraph",pre:"Preformatted",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",
h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",blockquote:"Quote",code:"tinymce.advanced.code",samp:"tinymce.advanced.samp",dt:"tinymce.advanced.dt",dd:"tinymce.advanced.dd",bold_desc:"Bold",italic_desc:"Italic",underline_desc:"Underline",
striketrough_desc:"Strikethrough",justifyleft_desc:"Align left",justifycenter_desc:"Align center",justifyright_desc:"Align right",justifyfull_desc:"Align full",bullist_desc:"Bullet list",numlist_desc:"Numbered list",tasklist_desc:"Task list",
outdent_desc:"Outdent",indent_desc:"Indent",undo_desc:"Undo",redo_desc:"Redo",link_desc:"tinymce.advanced.link_desc",unlink_desc:"Unlink",image_desc:"tinymce.advanced.image_desc",cleanup_desc:"tinymce.advanced.cleanup_desc",code_desc:"tinymce.advanced.code_desc",
sub_desc:"Subscript",sup_desc:"Superscript",hr_desc:"Horizontal rule",removeformat_desc:"tinymce.advanced.removeformat_desc",custom1_desc:"tinymce.advanced.custom1_desc",forecolor_desc:"Select text color",backcolor_desc:"tinymce.advanced.backcolor_desc",visualaid_desc:"tinymce.advanced.visualaid_desc",anchor_desc:"tinymce.advanced.anchor_desc",
cut_desc:"tinymce.advanced.cut_desc",copy_desc:"tinymce.advanced.copy_desc",paste_desc:"tinymce.advanced.paste_desc",image_props_desc:"tinymce.advanced.image_props_desc",newdocument_desc:"tinymce.advanced.newdocument_desc",help_desc:"Help",blockquote_desc:"tinymce.advanced.blockquote_desc",path:"tinymce.advanced.path",newdocument:"tinymce.advanced.newdocument",
toolbar_focus:"tinymce.advanced.toolbar_focus",more_colors:"tinymce.advanced.more_colors",paragraph_shortcut:"Ctrl+0",pre_shortcut:"Ctrl+7",h1_shortcut:"Ctrl+1",h2_shortcut:"Ctrl+2",h3_shortcut:"Ctrl+3",h4_shortcut:"Ctrl+4",h5_shortcut:"Ctrl+5",
h6_shortcut:"Ctrl+6",blockquote_shortcut:"Ctrl+8",bullist_shortcut:"Ctrl+Shift+B",numlist_shortcut:"Ctrl+Shift+N",tasklist_shortcut:"[ then ]",undo_shortcut:"Ctrl+Z",redo_shortcut:"Ctrl+Y"},colorpicker:{more_colors:"More colors",
title:"Select a color",picker_tab:"Picker",picker_title:"Color picker",palette_title:"tinymce.colorpicker.palette_title",named_tab:"tinymce.colorpicker.named_tab",named_title:"tinymce.colorpicker.named_title",color:"Color",name:"tinymce.colorpicker.name",apply:"tinymce.colorpicker.apply"},
hints:{drafts:"Hint: Confluence saves drafts automatically. If you ever lose a window, recover your work from the \u0022Username -\u003e Drafts\u0022 menu.",dnd:"Hint: you can drag and drop images and Office files from your computer right into this editor.",insert_link_recently_viewed:"Hint: type \u0022\u003cstrong\u003e[\u003c/strong\u003e\u0022 to see a list of suggested pages and insert a link.",insert_link_search:"Hint: type \u0022\u003cstrong\u003e[\u003c/strong\u003e\u0022 and part of a page title to find and link to that page.",insert_link_end:"Hint: press \u003cstrong\u003eCtrl+Shift+K\u003c/strong\u003e after a word to find and link to relevant pages. Press it again for more suggestions.",insert_link_newpage:"Hint: type \u0022\u003cstrong\u003e[\u003c/strong\u003e\u0022 and the title of a new page you wish to create, to see an insert link suggestion.",insert_link_user_mention:"Hint: you can mention somebody in Confluence by typing \u0022\u003cstrong\u003e@\u003c/strong\u003e\u0022 and then their name.",insert_image_on_page:"Hint: type \u0022\u003cstrong\u003e!\u003c/strong\u003e\u0022 to see images attached to the page and insert one of them.",
insert_image_search:"Hint: type \u0022\u003cstrong\u003e!\u003c/strong\u003e\u0022 and part of an image name to find and insert the image.",insert_image_end:"Hint: press \u003cstrong\u003eCtrl+Shift+M\u003c/strong\u003e after a word to find and insert relevant images.",insert_wikimarkup:"Hint: the Editor will automatically convert wiki markup as you type it.",insert_wikimarkup_dialog:"Hint: press \u003cstrong\u003eCtrl+Shift+D\u003c/strong\u003e to open the Wiki Markup dialog.",insert_link:"Hint: press \u003cstrong\u003eCtrl+K\u003c/strong\u003e to open the link browser.",insert_image:"Hint: press \u003cstrong\u003eCtrl+M\u003c/strong\u003e to open the image browser.",insert_macro:"Hint: press \u003cstrong\u003eCtrl+Shift+A\u003c/strong\u003e to open the macro browser.",insert_macro_toc:"Hint: Let Confluence generate you a table of contents for this page. Use \u0022Insert -\u003e Table of contents\u0022",
insert_bullet_list:"Hint: press \u003cstrong\u003eCtrl+Shift+B\u003c/strong\u003e to start a bullet list.",insert_numbered_list:"Hint: press \u003cstrong\u003eCtrl+Shift+N\u003c/strong\u003e to start a numbered list.",insert_heading:"Hint: press \u003cstrong\u003eCtrl+1\u003c/strong\u003e to create a heading level 1, \u003cstrong\u003eCtrl+2\u003c/strong\u003e for heading level 2 and so on.",insert_table:"Hint: press \u003cstrong\u003eCtrl+Shift+I\u003c/strong\u003e to insert a table.",table_rows_copy:"Hint: press \u003cstrong\u003eCtrl+Shift+C\u003c/strong\u003e to copy a row and \u003cstrong\u003eCtrl+Shift+V\u003c/strong\u003e to paste a row in a table.",table_rows_cut:"Hint: press \u003cstrong\u003eCtrl+Shift+X\u003c/strong\u003e to cut a row and \u003cstrong\u003eCtrl+Shift+V\u003c/strong\u003e to paste a row in a table.",insert_newline:"Hint: Type \u003cstrong\u003eShift+Enter\u003c/strong\u003e to insert a new paragraph without spacing",autoformat_heading1:"Hint: Type \u0022\u003cstrong\u003eh1. Title\u003c/strong\u003e\u0022 to quickly insert a Heading 1.",
autoformat_heading3:"Hint: Type \u0022\u003cstrong\u003eh3. Title\u003c/strong\u003e\u0022 to quickly insert a Heading 3.",autoformat_code:"Hint: Type \u0022\u003cstrong\u003e{{code}}\u003c/strong\u003e\u0022 to quickly insert monospaced text."},auiwindowmanager:{cancel:"Cancel",ok:"OK"},propertypanel:{links_goto:"Go to link",links_edit:"Edit",links_unlink:"Unlink",links_goto_disabled_tooltip:"This link goes to content on the page you are editing",
links_edit_tooltip:"Edit link in a dialogue",links_unlink_tooltip:"Replace link with the text it contains",images_small:"Small",images_medium:"Medium",images_large:"Large",images_original:"Original",images_border:"Border",images_link_create:"Link",
images_link_edit:"Edit link",images_link_remove:"Unlink",images_link_create_tooltip:"Link this image to other content",images_link_edit_tooltip:"Edit the link for this image",images_link_remove_tooltip:"Remove the link for this image",images_sizing_tooltip:"Resize image to a specific width",
images_small_tooltip:"Resize image to small and link to the original",images_medium_tooltip:"Resize image to medium and link to the original",images_large_tooltip:"Resize image to large and link to the original",images_original_tooltip:"Reset image size to original",images_thumbnail_tooltip:"tinymce.propertypanel.images.thumbnail.tooltip",images_border_tooltip:"Display a border around image"},
toolbar:{insert_files_shortcut_tooltip:"Ctrl+M"},a11ychecker:{btn_tooltip:"Check accessibility"},base64image:{warning:"We couldn\u0027t paste your image. Try downloading the file first."}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/i18n/translations.i18n","TinyMCELang");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:dictionary', location = '/includes/js/api/dictionary.js' */
define("confluence/api/dictionary",[],function(){return function(){var a={};return{get:function(b){return a[b]},put:function(b,c){return a[b]=c},reset:function(){a={}},elements:function(){return a}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:macro-js-overrides', location = '/includes/js/macro-js-overrides.js' */
define("confluence/macro-js-overrides",["confluence/api/dictionary","underscore"],function(f,e){var a=new f;return e.extend(a,{getFunction:function(b,c){var d=a.get(b);if(d&&"function"===typeof d[c])return d[c]},assignFunction:function(b,c){a.put(b,e.extend({},a.get(b),c))}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-picker', location = '/js/internal/space-resolver.js' */
define("confluence-ui-components/js/internal/space-resolver",["underscore","jquery","ajs"],function(g,m,e){function p(a){return g.map(a,function(c){return"spaceKey\x3d"+encodeURI(c)}).join("\x26")}function k(a,c){var f="undefined"===typeof c;c=g.escape(f?a:c);return{id:a,text:c,idOnly:f}}var n={conf_all:"All spaces",conf_current:"Current space",conf_favorites:"Favorite spaces",
conf_global:"Site spaces",conf_personal:"Personal spaces"},q=["conf_favorites","conf_global","conf_personal"];return{getSpaceDisplayItems:function(a,c){var f={},l=[];g.each(a,function(d){var b=n[d];b?f[d]=k(d,b):l.push(d)});if(l.length){var h=e.contextPath()+"/rest/api/space?"+p(l);h=m.getJSON(h)}else h=new m.Deferred,h.resolve({results:[]});h.done(function(d){g.each(d.results,
function(b){f[b.key]=k(b.key,b.name)});d=g.map(a,function(b){return f[b]||k(b)});c(d)})},getSpaceCategoryDisplayName:function(a){return n[a]},getSpaceTypeKeys:function(){return q}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-picker', location = '/js/space-picker.js' */
define("confluence-ui-components/js/space-picker",["underscore","ajs","jquery","confluence-ui-components/js/internal/space-resolver"],function(g,h,k,l){function r(a){var b=t(),d=u(a);return function(c,e,f){if(2>c.term.length)return d(c);"function"===typeof e&&(c.term=e(c.term));m=v(f);return b(c)}}function n(a,b,d){var c=[];a.forEach(function(e){if(e.children){var f=n(e.children,b,d);f.length&&c.push(k.extend({},e,{children:f}))}else if(f="undefined"!==typeof e.id&&g.contains(l.getSpaceTypeKeys(),
e.id),b&&f||!b&&!f)g.contains(d,e.id)||c.push(e)});return c}function p(a,b){if(!a.length||!b.length)return a;var d=0<g.intersection(b,l.getSpaceTypeKeys()).length;a=n(a,d,b);a.length||a.push({text:"Can\u0027t filter by space types AND spaces",disabled:!0});return a}function w(a){var b=k(".select2-container-active").next("input").val().trim();b=""!==b?b.split(","):[];return p(a,b)}var x={data:null,suggestCategories:null},v=function(a){return function(b){b={id:b.spaceKey,
text:b.spaceName};return"function"===typeof a?a(b):b}},m,y=function(a){return function(b,d){b=k(b).val();""!==b&&(b=b.split(","),l.getSpaceDisplayItems(b,function(c){a.multiple||(c=c[0]);d(c)}))}},u=function(a){var b;if(a.suggestCategories)var d={text:"Select a suggestion or type to search",children:g.map(a.suggestCategories,function(c){return{id:c,text:l.getSpaceCategoryDisplayName(c)}})};return function(c){b?c.callback(b):k.getJSON(h.contextPath()+"/rest/recentlyviewed/1.0/recent/spaces").done(function(e){var f=
{results:[]};d&&f.results.push(d);0<e.length&&f.results.push({text:"Suggested spaces",children:g.map(e,function(q){return{id:q.key,text:g.escape(q.name)}})});b=f;c.callback(b)}).fail(function(){h.log("Couldn't fetch recent spaces");var e={results:[]};d&&e.results.push(d);c.callback(e)})}},t=function(){return window.Select2.query.ajax({url:h.contextPath()+"/rest/quicknav/1/search?type\x3dspacedesc\x26type\x3dpersonalspacedesc",data:function(a){return{query:a,
maxPerCategory:25}},quietMillis:250,results:function(a){a=a.contentNameMatches;if(1>=a.length)return{results:[]};a=g.map(a[0],m);return{results:[{text:"Search results",children:a}]}}})};return{build:function(a){a=g.extend({},x,a);var b={placeholder:"Select a space",formatResult:function(d,c,e){c.attr("title",k("\x3cdiv/\x3e").html(d.text).text());return k.fn.select2.defaults.formatResult.apply(this,
arguments)},escapeMarkup:function(d){return d},multiple:!0===a.multiple,containerCssClass:"space-picker-container"};a.disableMixedSpaceTypes&&(b.sortResults=w);return a.data?g.extend(b,{data:a.data}):g.extend(b,{initSelection:y(a),query:r(a)})},filterMixedTypesForValues:p}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-picker', location = '/js/internal/space-picker-legacy.js' */
window.Confluence.UI.Components.SpacePicker=require("confluence-ui-components/js/space-picker");require("ajs").deprecate.prop(window.Confluence.UI.Components.SpacePicker,"build",{sinceVersion:"1.4.22",extraInfo:"Use require('confluence-ui-components/js/space-picker')"});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--ec56cc9135', location = 'aui.chunk.3558a450eac06ea0dae0--3d3ce11b6e088eab4bf9.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--ec56cc9135"],{"O/HO":function(e,t,a){var i,s,r;
/*!
 * jQuery UI Datepicker 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[a("oDIA"),a("O+lX"),a("M4tZ")],void 0===(r="function"==typeof(i=function(e){var t;function a(e){for(var t,a;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(a=parseInt(e.css("zIndex"),10),!isNaN(a)&&0!==a))return a;e=e.parent()}return 0}function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=s(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(t){var a="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",a,(function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",a,r)}function r(){e.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function n(t,a){for(var i in e.extend(t,a),a)null==a[i]&&(t[i]=a[i]);return t}return e.extend(e.ui,{datepicker:{version:"1.12.1"}}),e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return n(this._defaults,e||{}),this},_attachDatepicker:function(t,a){var i,s,r;s="div"===(i=t.nodeName.toLowerCase())||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(r=this._newInst(e(t),s)).settings=e.extend({},a||{}),"input"===i?this._connectDatepicker(t,r):s&&this._inlineDatepicker(t,r)},_newInst:function(t,a){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:a,dpDiv:a?s(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,a){var i=e(t);a.append=e([]),a.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,a),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(a),e.data(t,"datepicker",a),a.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,a){var i,s,r,n=this._get(a,"appendText"),d=this._get(a,"isRTL");a.append&&a.append.remove(),n&&(a.append=e("<span class='"+this._appendClass+"'>"+n+"</span>"),t[d?"before":"after"](a.append)),t.off("focus",this._showDatepicker),a.trigger&&a.trigger.remove(),"focus"!==(i=this._get(a,"showOn"))&&"both"!==i||t.on("focus",this._showDatepicker),"button"!==i&&"both"!==i||(s=this._get(a,"buttonText"),r=this._get(a,"buttonImage"),a.trigger=e(this._get(a,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:r,alt:s,title:s}):e("<button type='button'></button>").addClass(this._triggerClass).html(r?e("<img/>").attr({src:r,alt:s,title:s}):s)),t[d?"before":"after"](a.trigger),a.trigger.on("click",(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,a,i,s,r=new Date(2009,11,20),n=this._get(e,"dateFormat");n.match(/[DM]/)&&(t=function(e){for(a=0,i=0,s=0;s<e.length;s++)e[s].length>a&&(a=e[s].length,i=s);return i},r.setMonth(t(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length)}},_inlineDatepicker:function(t,a){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(a.dpDiv),e.data(t,"datepicker",a),this._setDate(a,this._getDefaultDate(a),!0),this._updateDatepicker(a),this._updateAlternate(a),a.settings.disabled&&this._disableDatepicker(t),a.dpDiv.css("display","block"))},_dialogDatepicker:function(t,a,i,s,r){var d,c,o,l,h,u=this._dialogInst;return u||(this.uuid+=1,d="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+d+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),(u=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],"datepicker",u)),n(u.settings,s||{}),a=a&&a.constructor===Date?this._formatDate(u,a):a,this._dialogInput.val(a),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(c=document.documentElement.clientWidth,o=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+l,o/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),u.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",u),this},_destroyDatepicker:function(a){var i,s=e(a),r=e.data(a,"datepicker");s.hasClass(this.markerClassName)&&(i=a.nodeName.toLowerCase(),e.removeData(a,"datepicker"),"input"===i?(r.append.remove(),r.trigger.remove(),s.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||s.removeClass(this.markerClassName).empty(),t===r&&(t=null))},_enableDatepicker:function(t){var a,i,s=e(t),r=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&("input"===(a=t.nodeName.toLowerCase())?(t.disabled=!1,r.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==a&&"span"!==a||((i=s.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})))},_disableDatepicker:function(t){var a,i,s=e(t),r=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&("input"===(a=t.nodeName.toLowerCase())?(t.disabled=!0,r.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==a&&"span"!==a||((i=s.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,a,i){var s,r,d,c,o=this._getInst(t);if(2===arguments.length&&"string"==typeof a)return"defaults"===a?e.extend({},e.datepicker._defaults):o?"all"===a?e.extend({},o.settings):this._get(o,a):null;s=a||{},"string"==typeof a&&((s={})[a]=i),o&&(this._curInst===o&&this._hideDatepicker(),r=this._getDateDatepicker(t,!0),d=this._getMinMaxDate(o,"min"),c=this._getMinMaxDate(o,"max"),n(o.settings,s),null!==d&&void 0!==s.dateFormat&&void 0===s.minDate&&(o.settings.minDate=this._formatDate(o,d)),null!==c&&void 0!==s.dateFormat&&void 0===s.maxDate&&(o.settings.maxDate=this._formatDate(o,c)),"disabled"in s&&(s.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),o),this._autoSize(o),this._setDate(o,r),this._updateAlternate(o),this._updateDatepicker(o))},_changeDatepicker:function(e,t,a){this._optionDatepicker(e,t,a)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var a=this._getInst(e);a&&(this._setDate(a,t),this._updateDatepicker(a),this._updateAlternate(a))},_getDateDatepicker:function(e,t){var a=this._getInst(e);return a&&!a.inline&&this._setDateFromField(a,t),a?this._getDate(a):null},_doKeyDown:function(t){var a,i,s,r=e.datepicker._getInst(t.target),n=!0,d=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),n=!1;break;case 13:return(s=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",r.dpDiv))[0]&&e.datepicker._selectDay(t.target,r.selectedMonth,r.selectedYear,s[0]),(a=e.datepicker._get(r,"onSelect"))?(i=e.datepicker._formatDate(r),a.apply(r.input?r.input[0]:null,[i,r])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),n=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),n=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,d?1:-1,"D"),n=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),n=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,d?-1:1,"D"),n=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),n=t.ctrlKey||t.metaKey;break;default:n=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):n=!1;n&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var a,i,s=e.datepicker._getInst(t.target);if(e.datepicker._get(s,"constrainInput"))return a=e.datepicker._possibleChars(e.datepicker._get(s,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||i<" "||!a||a.indexOf(i)>-1},_doKeyUp:function(t){var a=e.datepicker._getInst(t.target);if(a.input.val()!==a.lastVal)try{e.datepicker.parseDate(e.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,e.datepicker._getFormatConfig(a))&&(e.datepicker._setDateFromField(a),e.datepicker._updateAlternate(a),e.datepicker._updateDatepicker(a))}catch(e){}return!0},_showDatepicker:function(t){var i,s,r,d,c,o,l;"input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t||(i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(r=(s=e.datepicker._get(i,"beforeShow"))?s.apply(t,[t,i]):{})&&(n(i.settings,r),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),d=!1,e(t).parents().each((function(){return!(d|="fixed"===e(this).css("position"))})),c={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),c=e.datepicker._checkOffset(i,c,d),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":d?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"}),i.inline||(o=e.datepicker._get(i,"showAnim"),l=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",a(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[o]?i.dpDiv.show(o,e.datepicker._get(i,"showOptions"),l):i.dpDiv[o||"show"](o?l:null),e.datepicker._shouldFocusInput(i)&&i.input.trigger("focus"),e.datepicker._curInst=i)))},_updateDatepicker:function(a){this.maxRows=4,t=a,a.dpDiv.empty().append(this._generateHTML(a)),this._attachHandlers(a);var i,s=this._getNumberOfMonths(a),n=s[1],d=17,c=a.dpDiv.find("."+this._dayOverClass+" a");c.length>0&&r.apply(c.get(0)),a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&a.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",d*n+"em"),a.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(a)&&a.input.trigger("focus"),a.yearshtml&&(i=a.yearshtml,setTimeout((function(){i===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),i=a.yearshtml=null}),0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,a,i){var s=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),n=t.input?t.input.outerWidth():0,d=t.input?t.input.outerHeight():0,c=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),o=document.documentElement.clientHeight+(i?0:e(document).scrollTop());return a.left-=this._get(t,"isRTL")?s-n:0,a.left-=i&&a.left===t.input.offset().left?e(document).scrollLeft():0,a.top-=i&&a.top===t.input.offset().top+d?e(document).scrollTop():0,a.left-=Math.min(a.left,a.left+s>c&&c>s?Math.abs(a.left+s-c):0),a.top-=Math.min(a.top,a.top+r>o&&o>r?Math.abs(r+d):0),a},_findPos:function(t){for(var a,i=this._getInst(t),s=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return[(a=e(t).offset()).left,a.top]},_hideDatepicker:function(t){var a,i,s,r,n=this._curInst;!n||t&&n!==e.data(t,"datepicker")||this._datepickerShowing&&(a=this._get(n,"showAnim"),i=this._get(n,"duration"),s=function(){e.datepicker._tidyDialog(n)},e.effects&&(e.effects.effect[a]||e.effects[a])?n.dpDiv.hide(a,e.datepicker._get(n,"showOptions"),i,s):n.dpDiv["slideDown"===a?"slideUp":"fadeIn"===a?"fadeOut":"hide"](a?i:null,s),a||s(),this._datepickerShowing=!1,(r=this._get(n,"onClose"))&&r.apply(n.input?n.input[0]:null,[n.input?n.input.val():"",n]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var a=e(t.target),i=e.datepicker._getInst(a[0]);(a[0].id===e.datepicker._mainDivId||0!==a.parents("#"+e.datepicker._mainDivId).length||a.hasClass(e.datepicker.markerClassName)||a.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!a.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===i)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,a,i){var s=e(t),r=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(r,a+("M"===i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(t){var a,i=e(t),s=this._getInst(i[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(a=new Date,s.selectedDay=a.getDate(),s.drawMonth=s.selectedMonth=a.getMonth(),s.drawYear=s.selectedYear=a.getFullYear()),this._notifyChange(s),this._adjustDate(i)},_selectMonthYear:function(t,a,i){var s=e(t),r=this._getInst(s[0]);r["selected"+("M"===i?"Month":"Year")]=r["draw"+("M"===i?"Month":"Year")]=parseInt(a.options[a.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(s)},_selectDay:function(t,a,i,s){var r,n=e(t);e(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(n[0])||((r=this._getInst(n[0])).selectedDay=r.currentDay=e("a",s).html(),r.selectedMonth=r.currentMonth=a,r.selectedYear=r.currentYear=i,this._selectDate(t,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(t){var a=e(t);this._selectDate(a,"")},_selectDate:function(t,a){var i,s=e(t),r=this._getInst(s[0]);a=null!=a?a:this._formatDate(r),r.input&&r.input.val(a),this._updateAlternate(r),(i=this._get(r,"onSelect"))?i.apply(r.input?r.input[0]:null,[a,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var a,i,s,r=this._get(t,"altField");r&&(a=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),s=this.formatDate(a,i,this._getFormatConfig(t)),e(r).val(s))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,a=new Date(e.getTime());return a.setDate(a.getDate()+4-(a.getDay()||7)),t=a.getTime(),a.setMonth(0),a.setDate(1),Math.floor(Math.round((t-a)/864e5)/7)+1},parseDate:function(t,a,i){if(null==t||null==a)throw"Invalid arguments";if(""===(a="object"==typeof a?a.toString():a+""))return null;var s,r,n,d,c=0,o=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof o?o:(new Date).getFullYear()%100+parseInt(o,10),h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,u=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,g=(i?i.monthNames:null)||this._defaults.monthNames,_=-1,f=-1,k=-1,D=-1,m=!1,y=function(e){var a=s+1<t.length&&t.charAt(s+1)===e;return a&&s++,a},v=function(e){var t=y(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,s=new RegExp("^\\d{"+("y"===e?i:1)+","+i+"}"),r=a.substring(c).match(s);if(!r)throw"Missing number at position "+c;return c+=r[0].length,parseInt(r[0],10)},M=function(t,i,s){var r=-1,n=e.map(y(t)?s:i,(function(e,t){return[[t,e]]})).sort((function(e,t){return-(e[1].length-t[1].length)}));if(e.each(n,(function(e,t){var i=t[1];if(a.substr(c,i.length).toLowerCase()===i.toLowerCase())return r=t[0],c+=i.length,!1})),-1!==r)return r+1;throw"Unknown name at position "+c},w=function(){if(a.charAt(c)!==t.charAt(s))throw"Unexpected literal at position "+c;c++};for(s=0;s<t.length;s++)if(m)"'"!==t.charAt(s)||y("'")?w():m=!1;else switch(t.charAt(s)){case"d":k=v("d");break;case"D":M("D",h,u);break;case"o":D=v("o");break;case"m":f=v("m");break;case"M":f=M("M",p,g);break;case"y":_=v("y");break;case"@":_=(d=new Date(v("@"))).getFullYear(),f=d.getMonth()+1,k=d.getDate();break;case"!":_=(d=new Date((v("!")-this._ticksTo1970)/1e4)).getFullYear(),f=d.getMonth()+1,k=d.getDate();break;case"'":y("'")?w():m=!0;break;default:w()}if(c<a.length&&(n=a.substr(c),!/^\s+/.test(n)))throw"Extra/unparsed characters found in date: "+n;if(-1===_?_=(new Date).getFullYear():_<100&&(_+=(new Date).getFullYear()-(new Date).getFullYear()%100+(_<=l?0:-100)),D>-1)for(f=1,k=D;!(k<=(r=this._getDaysInMonth(_,f-1)));)f++,k-=r;if((d=this._daylightSavingAdjust(new Date(_,f-1,k))).getFullYear()!==_||d.getMonth()+1!==f||d.getDate()!==k)throw"Invalid date";return d},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,a){if(!t)return"";var i,s=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort,r=(a?a.dayNames:null)||this._defaults.dayNames,n=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort,d=(a?a.monthNames:null)||this._defaults.monthNames,c=function(t){var a=i+1<e.length&&e.charAt(i+1)===t;return a&&i++,a},o=function(e,t,a){var i=""+t;if(c(e))for(;i.length<a;)i="0"+i;return i},l=function(e,t,a,i){return c(e)?i[t]:a[t]},h="",u=!1;if(t)for(i=0;i<e.length;i++)if(u)"'"!==e.charAt(i)||c("'")?h+=e.charAt(i):u=!1;else switch(e.charAt(i)){case"d":h+=o("d",t.getDate(),2);break;case"D":h+=l("D",t.getDay(),s,r);break;case"o":h+=o("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=o("m",t.getMonth()+1,2);break;case"M":h+=l("M",t.getMonth(),n,d);break;case"y":h+=c("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":c("'")?h+="'":u=!0;break;default:h+=e.charAt(i)}return h},_possibleChars:function(e){var t,a="",i=!1,s=function(a){var i=t+1<e.length&&e.charAt(t+1)===a;return i&&t++,i};for(t=0;t<e.length;t++)if(i)"'"!==e.charAt(t)||s("'")?a+=e.charAt(t):i=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":a+="0123456789";break;case"D":case"M":return null;case"'":s("'")?a+="'":i=!0;break;default:a+=e.charAt(t)}return a},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var a=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),r=s,n=this._getFormatConfig(e);try{r=this.parseDate(a,i,n)||s}catch(e){i=t?"":i}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=i?r.getDate():0,e.currentMonth=i?r.getMonth():0,e.currentYear=i?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,a,i){var s=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},r=function(a){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),a,e.datepicker._getFormatConfig(t))}catch(e){}for(var i=(a.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),r=i.getMonth(),n=i.getDate(),d=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=d.exec(a);c;){switch(c[2]||"d"){case"d":case"D":n+=parseInt(c[1],10);break;case"w":case"W":n+=7*parseInt(c[1],10);break;case"m":case"M":r+=parseInt(c[1],10),n=Math.min(n,e.datepicker._getDaysInMonth(s,r));break;case"y":case"Y":s+=parseInt(c[1],10),n=Math.min(n,e.datepicker._getDaysInMonth(s,r))}c=d.exec(a)}return new Date(s,r,n)},n=null==a||""===a?i:"string"==typeof a?r(a):"number"==typeof a?isNaN(a)?i:s(a):new Date(a.getTime());return(n=n&&"Invalid Date"===n.toString()?i:n)&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)),this._daylightSavingAdjust(n)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,a){var i=!t,s=e.selectedMonth,r=e.selectedYear,n=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=n.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=n.getMonth(),e.drawYear=e.selectedYear=e.currentYear=n.getFullYear(),s===e.selectedMonth&&r===e.selectedYear||a||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var a=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map((function(){var t={prev:function(){e.datepicker._adjustDate(i,-a,"M")},next:function(){e.datepicker._adjustDate(i,+a,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){return e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])}))},_generateHTML:function(e){var t,a,i,s,r,n,d,c,o,l,h,u,p,g,_,f,k,D,m,y,v,M,w,b,C,I,x,Y,S,F,N,T,A,K,j,O,R,L,W,E=new Date,H=this._daylightSavingAdjust(new Date(E.getFullYear(),E.getMonth(),E.getDate())),P=this._get(e,"isRTL"),U=this._get(e,"showButtonPanel"),z=this._get(e,"hideIfNoPrevNext"),J=this._get(e,"navigationAsDateFormat"),B=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),X=this._get(e,"stepMonths"),Z=1!==B[0]||1!==B[1],$=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),q=this._getMinMaxDate(e,"min"),G=this._getMinMaxDate(e,"max"),Q=e.drawMonth-V,ee=e.drawYear;if(Q<0&&(Q+=12,ee--),G)for(t=this._daylightSavingAdjust(new Date(G.getFullYear(),G.getMonth()-B[0]*B[1]+1,G.getDate())),t=q&&t<q?q:t;this._daylightSavingAdjust(new Date(ee,Q,1))>t;)--Q<0&&(Q=11,ee--);for(e.drawMonth=Q,e.drawYear=ee,a=this._get(e,"prevText"),a=J?this.formatDate(a,this._daylightSavingAdjust(new Date(ee,Q-X,1)),this._getFormatConfig(e)):a,i=this._canAdjustMonth(e,-1,ee,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"e":"w")+"'>"+a+"</span></a>":z?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"e":"w")+"'>"+a+"</span></a>",s=this._get(e,"nextText"),s=J?this.formatDate(s,this._daylightSavingAdjust(new Date(ee,Q+X,1)),this._getFormatConfig(e)):s,r=this._canAdjustMonth(e,1,ee,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"w":"e")+"'>"+s+"</span></a>":z?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"w":"e")+"'>"+s+"</span></a>",n=this._get(e,"currentText"),d=this._get(e,"gotoCurrent")&&e.currentDay?$:H,n=J?this.formatDate(n,d,this._getFormatConfig(e)):n,c=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",o=U?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(P?c:"")+(this._isInRange(e,d)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+n+"</button>":"")+(P?"":c)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,h=this._get(e,"showWeek"),u=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),g=this._get(e,"monthNames"),_=this._get(e,"monthNamesShort"),f=this._get(e,"beforeShowDay"),k=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),m=this._getDefaultDate(e),y="",M=0;M<B[0];M++){for(w="",this.maxRows=4,b=0;b<B[1];b++){if(C=this._daylightSavingAdjust(new Date(ee,Q,e.selectedDay)),I=" ui-corner-all",x="",Z){if(x+="<div class='ui-datepicker-group",B[1]>1)switch(b){case 0:x+=" ui-datepicker-group-first",I=" ui-corner-"+(P?"right":"left");break;case B[1]-1:x+=" ui-datepicker-group-last",I=" ui-corner-"+(P?"left":"right");break;default:x+=" ui-datepicker-group-middle",I=""}x+="'>"}for(x+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===M?P?r:i:"")+(/all|right/.test(I)&&0===M?P?i:r:"")+this._generateMonthYearHeader(e,Q,ee,q,G,M>0||b>0,g,_)+"</div><table class='ui-datepicker-calendar'><thead><tr>",Y=h?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",v=0;v<7;v++)Y+="<th scope='col'"+((v+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[S=(v+l)%7]+"'>"+p[S]+"</span></th>";for(x+=Y+"</tr></thead><tbody>",F=this._getDaysInMonth(ee,Q),ee===e.selectedYear&&Q===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,F)),N=(this._getFirstDayOfMonth(ee,Q)-l+7)%7,T=Math.ceil((N+F)/7),A=Z&&this.maxRows>T?this.maxRows:T,this.maxRows=A,K=this._daylightSavingAdjust(new Date(ee,Q,1-N)),j=0;j<A;j++){for(x+="<tr>",O=h?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(K)+"</td>":"",v=0;v<7;v++)R=f?f.apply(e.input?e.input[0]:null,[K]):[!0,""],W=(L=K.getMonth()!==Q)&&!D||!R[0]||q&&K<q||G&&K>G,O+="<td class='"+((v+l+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(K.getTime()===C.getTime()&&Q===e.selectedMonth&&e._keyEvent||m.getTime()===K.getTime()&&m.getTime()===C.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!k?"":" "+R[1]+(K.getTime()===$.getTime()?" "+this._currentClass:"")+(K.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(L&&!k||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+K.getMonth()+"' data-year='"+K.getFullYear()+"'")+">"+(L&&!k?"&#xa0;":W?"<span class='ui-state-default'>"+K.getDate()+"</span>":"<a class='ui-state-default"+(K.getTime()===H.getTime()?" ui-state-highlight":"")+(K.getTime()===$.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+K.getDate()+"</a>")+"</td>",K.setDate(K.getDate()+1),K=this._daylightSavingAdjust(K);x+=O+"</tr>"}++Q>11&&(Q=0,ee++),w+=x+="</tbody></table>"+(Z?"</div>"+(B[0]>0&&b===B[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}y+=w}return y+=o,e._keyEvent=!1,y},_generateMonthYearHeader:function(e,t,a,i,s,r,n,d){var c,o,l,h,u,p,g,_,f=this._get(e,"changeMonth"),k=this._get(e,"changeYear"),D=this._get(e,"showMonthAfterYear"),m="<div class='ui-datepicker-title'>",y="";if(r||!f)y+="<span class='ui-datepicker-month'>"+n[t]+"</span>";else{for(c=i&&i.getFullYear()===a,o=s&&s.getFullYear()===a,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",l=0;l<12;l++)(!c||l>=i.getMonth())&&(!o||l<=s.getMonth())&&(y+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+d[l]+"</option>");y+="</select>"}if(D||(m+=y+(!r&&f&&k?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!k)m+="<span class='ui-datepicker-year'>"+a+"</span>";else{for(h=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),g=(p=function(e){var t=e.match(/c[+\-].*/)?a+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t})(h[0]),_=Math.max(g,p(h[1]||"")),g=i?Math.max(g,i.getFullYear()):g,_=s?Math.min(_,s.getFullYear()):_,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g<=_;g++)e.yearshtml+="<option value='"+g+"'"+(g===a?" selected='selected'":"")+">"+g+"</option>";e.yearshtml+="</select>",m+=e.yearshtml,e.yearshtml=null}return m+=this._get(e,"yearSuffix"),D&&(m+=(!r&&f&&k?"":"&#xa0;")+y),m+="</div>"},_adjustInstDate:function(e,t,a){var i=e.selectedYear+("Y"===a?t:0),s=e.selectedMonth+("M"===a?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(i,s))+("D"===a?t:0),n=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,s,r)));e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),"M"!==a&&"Y"!==a||this._notifyChange(e)},_restrictMinMax:function(e,t){var a=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),s=a&&t<a?a:t;return i&&s>i?i:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,a,i){var s=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(a,i+(t<0?t:s[0]*s[1]),1));return t<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var a,i,s=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),n=null,d=null,c=this._get(e,"yearRange");return c&&(a=c.split(":"),i=(new Date).getFullYear(),n=parseInt(a[0],10),d=parseInt(a[1],10),a[0].match(/[+\-].*/)&&(n+=i),a[1].match(/[+\-].*/)&&(d+=i)),(!s||t.getTime()>=s.getTime())&&(!r||t.getTime()<=r.getTime())&&(!n||t.getFullYear()>=n)&&(!d||t.getFullYear()<=d)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,a,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,a,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var a=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(a)):this.each((function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(a)):e.datepicker._attachDatepicker(this,t)})):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(a))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.12.1",e.datepicker})?i.apply(t,s):i)||(e.exports=r)}}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_aui.component.form.date-select', location = 'aui.chunk.449b4552696409f32ac4--946e836f3a4b598edb97.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.form.date-select"],{cQgS:function(e,t,a){"use strict";a.r(t),a.d(t,"DatePicker",(function(){return x}));a("6fSn"),a("Rvtc");var i=a("+x/D"),n=a("O/HO"),o=a.n(n),s=a("JFi+"),d=a("cWqH"),c=a("KloK"),l=a("+ay7"),r=a("HH5i"),u=a("P3bb"),p=a("OEua");const f=e=>{let{dateFormat:t,$field:a,onSelect:i,hide:n,onChangeMonthYear:o}=e;return{dateFormat:t,defaultDate:a.val(),maxDate:a.attr("max"),minDate:a.attr("min"),nextText:">",onSelect:function(e){a.val(e),a.trigger("change"),n(),i&&i.call(this,e)},onChangeMonthYear:o,prevText:"<"}},h=(e,t)=>{let a,n,o,s=!1;const d=Object(i.default)("body"),c=t=>{let a=Object(i.default)(t.target),o=a.closest(n).length||a.is(e),d=a.closest(".ui-datepicker-header").length;if(!o&&!d||t.keyCode===l.default.ESCAPE)return h(),void(s=!1);a.get(0)!==e.get(0)&&t.preventDefault()},r=()=>{s||(d.on("focus blur click mousedown","*",c),s=!0)},p=()=>{a.get(0).open||f()},f=()=>{a.get(0).open=!0},h=()=>{a.get(0).open=!1};return{calendarContainerSelector:null,getPopupContents:e=>{let{$field:l}=e;return a=(e=>{let{horizontalAlignment:t,datePickerUUID:a}=e;const n=new u.default;n.id=a;const o=Object(i.default)(n);return o.attr("persistent",""),o.attr("data-aui-focus","false"),o.attr("alignment","bottom ".concat(t)),o.addClass("aui-datepicker-dialog"),o})({horizontalAlignment:(e=>e.offset().left<window.innerWidth/2?"left":"right")(l),datePickerUUID:t}),o=l.closest("aui-inline-dialog").get(0),o&&(o._datePickerPopup=a,Object(i.default)(o).on("aui-hide",(e=>{s&&e.preventDefault(),d.off("focus blur","*",c),o&&o._datePickerPopup&&delete o._datePickerPopup}))),d.append(a),n=a,a},handleFieldFocus:p,showDatePicker:f,hideDatePicker:h,handleChangeMonthYear:()=>{setTimeout(a.refresh,0)},getCalendarNode:()=>a.get(0).childNodes[0],destroyPolyfill:()=>{h(),e.off("focus click",p),e.off("focusout keydown",r),d.off("keydown",r),d.off("focus blur click mousedown keydown",c)},createPolyfill:function(){d.on("keydown",c),e.on("focusout keydown",r)}}},k=function(e){const t=e.getField(),a=e.getOptions(),n=e.getUUID();let o;const{getPopupContents:d,handleFieldFocus:c,showDatePicker:l,hideDatePicker:r,handleChangeMonthYear:u,getCalendarNode:p,destroyPolyfill:k,createPolyfill:y}=h(t,n),m=e=>{Object(i.default)(e.currentTarget).val()&&o.datepicker("setDate",t.val())},b=t.attr("placeholder"),x=t.prop("type");let j;{const a=e=>t=>{if(void 0!==o)return e(t)},i=a((()=>{o.datepicker("destroy")}));e.show=l,e.hide=r,e.destroyPolyfill=()=>{k(),t.off("propertychange keyup input paste",m),j&&(j.disconnect(),j=null),b&&t.attr("placeholder",b),x&&t.prop("type",x),t.removeAttr("data-aui-dp-uuid"),i(),delete e.destroyPolyfill,delete e.show,delete e.hide},e.setDate=a((e=>{o.datepicker("setDate",e)})),e.getDate=a((()=>o.datepicker("getDate"))),e.setMin=a((e=>o.datepicker("option","minDate",e))),e.setMax=a((e=>o.datepicker("option","maxDate",e)))}a.languageCode in g.prototype.localisations||(a.languageCode="");const T=g.prototype.localisations;if(t.attr("aria-controls",n),void 0===o){void 0!==t.attr("step")&&s.log("WARNING: The date picker polyfill currently does not support the step attribute!");const n=f({dateFormat:a.dateFormat,$field:t,onSelect:a.onSelect,hide:e.hide,onChangeMonthYear:u}),c=i.default.extend(void 0,n,T);a.firstDay>-1&&(c.firstDay=a.firstDay),o=(e=>{let{config:t,popupContents:a,getCalendarNode:n,hint:o}=e;const s=Object(i.default)(n());let d;return s.datepicker(t),o&&(d=Object(i.default)("<div/>").addClass("aui-datepicker-hint"),d.append("<span/>").text(o),a.append(d)),s})({config:c,popupContents:d({$field:t}),getCalendarNode:p,hint:a.hint}),y(),t.on("propertychange keyup input paste",m),j=new MutationObserver((function(t){t.forEach((function(t){"min"===t.attributeName?e.setMin(t.target.getAttribute("min")):"max"===t.attributeName&&e.setMax(t.target.getAttribute("max"))}))})),j.observe(t.get(0),{attributes:!0})}t.on("focus click",c),t.attr("placeholder",a.placeholder),t.prop("type","text"),t.attr("data-aui-dp-uuid",n)};function g(e,t){let a={};const n=Object(p.default)("date-picker"),o=Object(i.default)(e),s={getUUID:()=>n,getField:()=>o,getOptions:()=>a,destroy:()=>{"function"==typeof s.destroyPolyfill&&s.destroyPolyfill()},reset:()=>{s.destroy();const e=!g.prototype.browserSupportsDateField,t=!1!==a.overrideBrowserDefault;(e||t)&&k(s)},reconfigure:e=>{a=i.default.extend(void 0,g.prototype.defaultOptions,e),s.reset()}};return s.reconfigure(t),s}function y(e,t){const a=i.default.extend({nextText:">",prevText:"<"},t),n=Object(i.default)(e).addClass("aui-datepicker-dialog").addClass("aui-calendar-widget").datepicker(a);if(a.hint){const e=Object(i.default)("<div/>").addClass("aui-datepicker-hint");e.append("<span/>").text(a.hint),n.append(e)}return n.reconfigure=e=>{n.datepicker("destroy"),n.datepicker(e)},n.destroy=()=>{n.datepicker("destroy")},n}g.prototype.browserSupportsDateField=Object(d.supportsDateField)(),g.prototype.defaultOptions={overrideBrowserDefault:!1,firstDay:-1,languageCode:Object(i.default)("html").attr("lang")||"en-AU",dateFormat:o.a.W3C},g.prototype.localisations={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],firstDay:"0",isRTL:"true"==="false",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],showMonthAfterYear:"true"==="false",yearSuffix:""};const m="aui-datepicker",b=e=>function(t){let a=this.data(m);return a?"object"==typeof t?a.reconfigure(t):"destroy"===t&&a.destroy():(a=new e(this,t),this.data(m,a)),a};i.default.fn.datePicker=b(g),Object(c.default)("DatePicker",g),i.default.fn.calendarWidget=b(y),Object(c.default)("CalendarWidget",y);var x=g}},[["cQgS","runtime","aui.splitchunk.vendors--894c8113d9","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--084821f40b","aui.splitchunk.vendors--02a4084a95","aui.splitchunk.vendors--ec56cc9135","aui.splitchunk.0d131bcbf1","aui.splitchunk.fbbef27525","aui.splitchunk.444efc83be","aui.splitchunk.739b9ec8cc","aui.splitchunk.056561461c","aui.splitchunk.949297951c","aui.splitchunk.dd803a46b4","aui.splitchunk.994e478d48","aui.splitchunk.d7c46c2734","aui.splitchunk.e54c7c7304","aui.splitchunk.fb15cffa72","aui.splitchunk.56dfb54d0c","aui.splitchunk.f1e06f97a4","aui.splitchunk.479fe6ee76","aui.splitchunk.f673ef53ac","aui.splitchunk.8659b532c1","aui.splitchunk.908fe798b4","aui.splitchunk.5f851f97df","aui.splitchunk.462ee5f9ef","aui.splitchunk.d0110a864f","aui.splitchunk.afa5039e04","aui.splitchunk.bff3715233","aui.splitchunk.26116b3cbd","aui.splitchunk.c750721820","aui.splitchunk.6d6f245ed3","aui.splitchunk.50dca3e042","aui.splitchunk.084821f40b","aui.splitchunk.5b8c290363","aui.splitchunk.baa83dbaf9","aui.splitchunk.e5af17b48e","aui.splitchunk.f154095da3","aui.splitchunk.36cd9d521c","aui.splitchunk.d925afe2c0","aui.splitchunk.5b7fdbd666","aui.splitchunk.8a641c03a4","aui.splitchunk.d727dd207f","aui.splitchunk.543254b237"]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:date-picker', location = '/includes/js/amd/shim/aui-datepicker-amd.js' */
define("aui/datepicker",function(){return AJS.DatePicker});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:date-picker', location = '/includes/js/date-picker-localisation.js' */
require(["aui/datepicker"],function(a){var b="";a&&(a.prototype.localisations.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday",
"Saturday"],a.prototype.localisations.dayNamesMin=["Sun","Mon","Tue","Wed","Thu","Fri",
"Sat"],a.prototype.localisations.firstDay="0",a.prototype.localisations.isRTL="true"==="false",a.prototype.localisations.monthNames=["January","February","March",
"April","May","June","July","August","September","October","November",
"December"],a.prototype.localisations.showMonthAfterYear="true"==="false",a.prototype.localisations.yearSuffix=b&&"null"!==b?b:"")});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:confluence-select', location = '/js/confluence-select.js' */
define("confluence-ui-components/js/confluence-select",["jquery","ajs"],function(b,l){b.fn.confluenceSelect=function(m,h){if("string"===typeof m)return b.fn.auiSelect2.apply(this,arguments);h||(h=[]);var f=this.attr("id");if(!f)throw"please set an id attribute to your confluenceSelect input for correct working";var g="#s2id_"+f,p="confluence-select-listbox-"+f,n="confluence-select-description-"+f;this.on("select2-focus",function(){var a=b(g+" input"+(m.multiple?".select2-input":".select2-focusser")),
c=a.attr("id"),d="confluence-select-label-"+c,e="confluence-select-option-chosen-"+c,q=h.concat([d,e]).join(" "),k=b("label[for\x3d"+f+"]");c=b("label[for\x3d"+c+"]");k=k.length?k:c;c=b(g+" span.select2-chosen");a.attr("role","combobox");a.attr("aria-haspopup","listbox");a.attr("aria-controls",p);h.includes("type-picker-custom")?a.attr("aria-label","Custom content type"):a.attr("aria-labeledby",q);c.attr("id",e);k.attr("id",d)});this.on("select2-loaded",
function(){var a=b("#select2-drop .select2-results"),c=b("#select2-drop .select2-result:not(.select2-result-unselectable)");a.attr("role","listbox");a.attr("id",p);c.each(function(d,e){e=b(e);e.attr("role","option");e.attr("id","confluence-select-option-"+d)})});this.on("change",function(){var a=b(g+" .select2-search-choice-close");a.attr("tabindex",0);a.attr("role","button");a.attr("aria-label","Deselect item")});this.on("select2-highlight",function(){var a=
b("#select2-drop input.select2-input"),c=b(g+" input.select2-input");a=a.length?a:c;c=b("#select2-drop .select2-highlighted");a.attr("aria-activedescendant",c.attr("id"))});this.on("select2-open",function(){var a=b("#select2-drop input.select2-input"),c=b(g+" input.select2-input");c=a.length?a:c;var d=b("#"+n),e=b(".select2-no-results");d.length||(d=b("\x3cspan\x3e\x3c/span\x3e"),d.attr("id",n),d.text("Type to filter, use up/down arrow keys to navigate & enter to select"),d.addClass("assistive"),
a.after(d),a.attr("aria-labeledby",n));e.attr("aria-live","polite");c.attr("aria-activedescendant","")});return b.fn.auiSelect2.call(this,m)}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-page-picker', location = '/js/space-page-picker.js' */
define("confluence-ui-components/js/space-page-picker",["underscore","ajs","confluence-ui-components/js/internal/soy-templates","jquery"],function(f,k,M,l){function N(a,b,c){a=f.map(a,function(d){return b[d]});return c?a:0<a.length?a[0]:null}function H(a){return 0===a.indexOf("page:")?"data-item-id":"data-item-key"}function z(a,b,c,d){c=c?c:0===a.indexOf("~")?"content-type-personalspacedesc":"content-type-spacedesc";return A("space",a,b,"",c,d)}function I(a){var b=O[a];return A("space-cat",a,b,"",
"content-type-space-category",b)}function J(a){var b=P[a];return A("content-function",a,b,"","content-type-page",b)}function B(a,b,c,d,g){return A("page",a,b,c,d,g)}function A(a,b,c,d,g,p){return{id:Q(a,b),text:c?c:b,subText:d,className:p?g:g+" content-not-found",disabled:p?!1:!0}}function Q(){return Array.prototype.slice.apply(arguments).join(":")}function R(a){return(!a.contentType||0===a.contentType.length||0<=a.contentType.indexOf("space"))&&!1!==a.showRecentlyViewedSpaces}function S(a){return(!a.contentType||
0===a.contentType.length||0<=a.contentType.indexOf("page"))&&!1!==a.showRecentlyViewedPages}function T(a,b){b=C("SpaceCat",a,b.inputSpaceCatId,b.inputSpaceCatName?b.inputSpaceCatName:b.inputSpaceCatId);return D(a,b.id,b.name)}function U(a,b){var c=b.inputContentFunctionId||"legacy-macro-param-content-funcs";b=C("ContentFunction",a,c,b.inputContentFunctionName||c);return D(a,b.id,b.name)}function V(a,b){b=C("Space",a,b.inputSpaceId,b.inputSpaceName?b.inputSpaceName:b.inputSpaceId);return D(a,b.id,
b.name)}function W(a,b){b=C("Page",a,b.inputPageId,b.inputPageName?b.inputPageName:b.inputPageId);return D(a,b.id,b.name)}function C(a,b,c,d){if(!c){var g=b.attr("id");if(!g)return null;c=g+a}d||(d=(b.attr("name")||g)+a);return{id:c,name:d}}function D(a,b,c){var d=l("#"+b);0===d.length&&(d=l(M.Components().hiddenField({id:b,name:c})),a.after(d));return d}function v(a,b,c){a&&(b=f.filter(b,function(d){return 0===d.indexOf(c)}),b=f.map(b,function(d){return d.substring(c.length,d.length)}),a.val(b.join(",")))}
function E(a,b,c,d){c=c?f.isArray(c)?c:c.split(","):[];d=d?d.split(","):[];c=f.union(c,d);c=f.map(c,function(g){return b+g});d=(d=a.val())?d.split(","):[];c=f.union(d,c);0<c.length&&a.val(c.join(","))}function K(a,b,c){var d=b.data("select2").opts,g=d.placeholder||b.data("placeholder"),p=T(b,d),r=U(b,d),h=V(b,d),m=W(b,d);b.on("change",function(e){v(p,e.val,"space-cat:");v(r,e.val,"content-function:");v(h,e.val,"space:");v(m,e.val,"page:")});b.val("");var t="SELECT"===b["0"].tagName?b.context.multiple:
d.multiple,F=[],w=[],x=[],L=[],y={},u=a?a.split(","):[];u=f.filter(u,function(e){e=e.split(":");if(2===e.length)return!0;(0>e.length||3<=e.length||1===e.length&&"SPACE-PAGE-TRIGGER-VALUE"!==e[0]&&e[0]!==g)&&k.debug("Error value: "+e)});a=u.join(",");b.val(a);E(b,"space-cat:",d.spaceCatKeys,p?p.val():"");E(b,"content-function:",d.pageCatKeys,r?r.val():"");E(b,"space:",d.spaceKeys,h?h.val():"");E(b,"page:",d.pageIds,m?m.val():"");u=(a=b.val())?a.split(","):[];v(p,u,"space-cat:");v(r,u,"content-function:");
v(h,u,"space:");v(m,u,"page:");if(0!==u.length){f.each(u,function(e,n){n=e.split(":");2===n.length&&(e=n[0],n=n[1],"space-cat"===e?F.push(n):"content-function"===e?x.push(n):"space"===e?w.push(n):"page"===e&&L.push(n))});f.each(F,function(e){y["space-cat:"+e]=I(e)});f.each(x,function(e){y["content-function:"+e]=J(e)});var G=[];0<w.length&&(a=l.getJSON(k.contextPath()+"/rest/prototype/1/space",{spaceKey:w}).done(function(e){var n=[];f.each(e.space,function(q){y["space:"+q.key]=z(q.key,f.escape(q.name),
null,!0);n.push(q.key)});e=f.difference(w,n);f.each(e,function(q){y["space:"+q]=z(q,q,null,!1)})}).fail(function(){k.debug("Couldn't resolve spaceKeys:",w);f.each(w,function(e){y["space:"+e]=z(e,e,null,!1)})}),G.push(a));f.each(L,function(e){var n=l.getJSON(k.contextPath()+"/rest/api/content/"+e,{expand:"space"}).done(function(q){y["page:"+q.id]=B(q.id,f.escape(q.title),f.escape(q.space.name),"content-type-page",!0)}).fail(function(){k.debug("Couldn't resolve pageId:",e);y["page:"+e]=B(e,e,"",
"content-type-page",!1)});G.push(n)});l.when.apply(l,f.map(G,function(e){var n=new l.Deferred;e.always(function(){n.resolve()});return n.promise()})).done(function(){c(N(u,y,t))})}}var O={conf_all:"All spaces",conf_favorites:"Favorite spaces",conf_global:"Site spaces",conf_personal:"Personal spaces",
conf_current:"Current space"},P={"currentContent()":"Current page"},X={data:null,suggestCategories:null},Y={placeholder:"Select a space or page",multiple:!0,formatInputTooShort:function(){return "Start typing to search"},formatResult:function(a,b,c){if(a.children)return b.addClass("space-page-picker-result-category"),
l.fn.select2.defaults.formatResult.apply(this,arguments);if(a.id){b.attr("title",a.text);b.addClass("space-page-picker-result-label-with-icon");var d=l("\x3cspan/\x3e").addClass(a.className+" item-text").html(l.fn.select2.defaults.formatResult.apply(this,arguments)),g=a.subText?l("\x3cspan/\x3e").addClass("space-name").html(a.subText):l("");d=l("\x3cspan/\x3e").attr(H(a.id),a.id).append(d).append(g);return l("\x3cspan/\x3e").append(d)}b.addClass(a.className);return l.fn.select2.defaults.formatResult.apply(this,
arguments)},formatSelection:function(a,b){b.addClass("space-page-picker-selected-item");b.attr("title",a.text);var c=l("\x3cspan/\x3e").attr(H(a.id),a.id).addClass(a.className+" item-text").text(l.fn.select2.defaults.formatSelection.apply(this,arguments));b.append(c)},escapeMarkup:function(a){return a},formatResultCssClass:function(a){return a.children||a.id?"":"select2-result-space-page-separator"},containerCssClass:"space-page-picker-container",dropdownCssClass:"space-page-picker-drop"},Z=function(a,
b){!0!==a.data("select2").opts.manualInit&&K(a.val(),a,b)},aa=function(a){var b;if(a.suggestCategories)var c={text:"Suggested categories",children:f.map(a.suggestCategories,function(g){return I(g)})};if(a.suggestedContentFunctions)var d=f.map(a.suggestedContentFunctions,function(g){return J(g)});return function(g){if(b)g.callback(b);else{var p=[];b={results:[]};if(R(a)){var r=l.getJSON(k.contextPath()+"/rest/recentlyviewed/1.0/recent/spaces").done(function(h){var m=
c?[c]:[];0<h.length&&m.push({text:"Suggested spaces",children:f.map(h,function(t){return z(t.key,f.escape(t.name),null,!0)})});0<m.length&&(b.results=b.results.concat(m))}).fail(function(){k.debug("Couldn't fetch recent spaces");var h=c?[c]:[];0<h.length&&(b.results=b.results.concat(h))});p.push(r)}S(a)&&(r=l.getJSON(k.contextPath()+"/rest/recentlyviewed/1.0/recent/pages",{noTrashedContent:!0}).done(function(h){if(0<h.length||d){var m=[];
d&&(m=m.concat(d));0<h.length&&(m=m.concat(f.map(h,function(t){return B(t.id,f.escape(t.title),f.escape(t.space),"content-type-page",!0)})));b.results.push({text:"Suggested pages",children:m})}}).fail(function(){k.debug("Couldn't fetch recent pages")}),p.push(r));l.when.apply(l,f.map(p,function(h){var m=l.Deferred();h.always(function(){m.resolve()});return m})).done(function(){0===b.results.length&&(b.results=[{text:"",children:[]}]);g.callback(b)})}}},
ba=function(a){var b="";if(!a||2===a.length&&0<=a.indexOf("space")&&0<=a.indexOf("page"))b="type\x3dspacedesc\x26type\x3dpersonalspacedesc\x26type\x3dpage";else if(1===a.length&&"space"===a[0])b="type\x3dspacedesc\x26type\x3dpersonalspacedesc";else if(1===a.length&&"page"===a[0])b="type\x3dpage";else return;return window.Select2.query.ajax({url:k.contextPath()+"/rest/quicknav/1/search?"+b,data:function(c,d){return{query:c,maxPerCategory:25}},quietMillis:250,results:function(c,d){c=c.contentNameMatches;
if(1>=c.length)return{results:[]};d=[];for(var g=0;g<c.length-1;g++){for(var p=[],r=0;r<c[g].length;r++){var h=c[g][r];var m=void 0,t=h.spaceName,F=h.id,w=h.name,x=h.className;"content-type-spacedesc"===x||"content-type-personalspacedesc"===x?m=z(h.spaceKey,t,x,!0):"content-type-page"===x&&(m=B(F,w,t,x,!0));(h=m)&&p.push(h)}0<p.length&&(d=d.concat(p),d.push({id:"",text:"",subText:"",className:"",disabled:!0}))}return{results:[{text:"Search results",
children:d}]}}})},ca=function(a){var b=ba(a.contentType),c=aa(a);return function(d){2>d.term.length?c(d):b(d)}};return{build:function(a){var b=f.extend({},X,Y,a);a.data||(b=f.extend({},{initSelection:Z,query:ca(b)},b));a=l(b.orgElement);if(!a||1!==a.length)return b;a.val()||b.manualInit||a.val("SPACE-PAGE-TRIGGER-VALUE");a.addClass("select2-input");return b},setValue:function(a,b){K(a,b,function(c){b.auiSelect2("data",c)})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-page-picker', location = '/js/internal/space-page-picker-legacy.js' */
window.Confluence.UI.Components.SpacePagePicker=require("confluence-ui-components/js/space-page-picker");AJS.deprecate.prop(window.Confluence.UI.Components.SpacePagePicker,"build",{sinceVersion:"1.4.34",extraInfo:"Use require('confluence-ui-components/js/space-page-picker')"});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-page-picker', location = '/soy/space-page-picker.soy' */
// This file was automatically generated from space-page-picker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.templates == 'undefined') { Confluence.UI.Components.templates = {}; }


Confluence.UI.Components.templates.hiddenField = function(opt_data, opt_ignored) {
  return '<input type="hidden" id="' + soy.$$escapeHtml(opt_data.id) + '" name="' + soy.$$escapeHtml(opt_data.name) + '" />';
};
if (goog.DEBUG) {
  Confluence.UI.Components.templates.hiddenField.soyTemplateName = 'Confluence.UI.Components.templates.hiddenField';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:page-picker', location = '/js/page-picker.js' */
define("confluence-ui-components/js/page-picker",["ajs","confluence-ui-components/js/space-page-picker"],function(b,c){return{build:function(a){a.placeholder="Select a page";a.contentType=["page"];a.showRecentlyViewedSpaces=!1;a.spaceCatKeys=[];a.spaceKeys=[];return c.build(a)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:page-picker', location = '/js/internal/page-picker-legacy.js' */
window.Confluence.UI.Components.PagePicker=require("confluence-ui-components/js/page-picker");AJS.deprecate.prop(window.Confluence.UI.Components.PagePicker,"build",{sinceVersion:"1.4.34",extraInfo:"Use require('confluence-ui-components/js/page-picker')"});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:label-picker', location = '/js/label-picker.js' */
define("confluence-ui-components/js/label-picker",["ajs","confluence-ui-components/js/internal/soy-templates","jquery","underscore"],function(c,e,f,d){function m(a){return{id:a.name,text:a.name}}function g(a){if(!a||!a.length)return null;a=d.map(a,m);return d.sortBy(a,function(b){return b.text.toLowerCase()})}function h(a){return function(b){return f.extend({query:b,ignoreRelated:!0,maxResults:10},a)}}var k=/[;,\.\?&\[\(\)#\^\*@!<>\]]/g,n={placeholder:"Add labels",
multiple:!0,minimumInputLength:1,maximumSelectionSize:20,tokenSeparators:[" ",","],formatInputTooShort:function(a,b){return "Start typing to search for a label"},formatSelectionTooBig:function(a){return c.format("You can only input {0} labels",a)},formatResult:function(a){return e.LabelPicker().labelResult({label:{labelName:a.text,isNew:a.isNew}})},formatNoMatches:function(a){var b=d.uniq(a.match(k)).join(" ");return b?e.LabelPicker().labelInvalid({inputValue:a,
invalidCharacters:b}):this.noMatches},createSearchChoice:function(a){return!a||d.uniq(a.match(k)).join(" ")?null:{id:a,text:a,isNew:!0}},ajax:{data:h(),dataType:"json",url:c.contextPath()+"/labels/autocompletelabel.action",results:function(a){var b=a.contentNameMatches;a=g(b[0]);b=g(b[1]);a=a&&b?[{text:"Suggested",children:a},{text:"Other",children:b}]:a||b||[];return{results:a}},quietMillis:300},
dropdownCssClass:"labels-dropdown",containerCssClass:"labels-autocomplete",initSelection:function(a,b){a=a.val().split(",");a=d.map(a,function(l){return{id:l,text:l}});b(a)}};return{build:function(a){var b=f.extend({},n,a);a&&a.queryOpts&&(b.ajax.data=h(a.queryOpts),delete b.queryOpts);a&&a.noMatches||(b.noMatches=b.placeholder);return b}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:label-picker', location = '/js/internal/label-picker-legacy.js' */
window.Confluence.UI.Components.LabelPicker=require("confluence-ui-components/js/label-picker");AJS.deprecate.prop(window.Confluence.UI.Components.LabelPicker,"build",{sinceVersion:"1.4.18",extraInfo:"Use require('confluence-ui-components/js/label-picker')"});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:label-picker', location = '/soy/label-picker.soy' */
// This file was automatically generated from label-picker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.LabelPicker.templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.LabelPicker == 'undefined') { Confluence.UI.Components.LabelPicker = {}; }
if (typeof Confluence.UI.Components.LabelPicker.templates == 'undefined') { Confluence.UI.Components.LabelPicker.templates = {}; }


Confluence.UI.Components.LabelPicker.templates.labelResult = function(opt_data, opt_ignored) {
  return '' + ((opt_data.label.isNew) ? soy.$$escapeHtml(AJS.format('\x22{0}\x22 - add a new label',opt_data.label.labelName)) : soy.$$escapeHtml(opt_data.label.labelName));
};
if (goog.DEBUG) {
  Confluence.UI.Components.LabelPicker.templates.labelResult.soyTemplateName = 'Confluence.UI.Components.LabelPicker.templates.labelResult';
}


Confluence.UI.Components.LabelPicker.templates.labelInvalid = function(opt_data, opt_ignored) {
  var output = '';
  var inputValueHtml__soy9 = '<b>' + soy.$$escapeHtml(opt_data.inputValue) + '</b>';
  var invalidCharactersHtml__soy13 = '<b>' + soy.$$escapeHtml(opt_data.invalidCharacters) + '</b>';
  output += soy.$$filterNoAutoescape(AJS.format('{0} contains invalid characters {1}',inputValueHtml__soy9,invalidCharactersHtml__soy13));
  return output;
};
if (goog.DEBUG) {
  Confluence.UI.Components.LabelPicker.templates.labelInvalid.soyTemplateName = 'Confluence.UI.Components.LabelPicker.templates.labelInvalid';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:include-exclude-picker', location = '/js/include-exclude-picker.js' */
define("confluence-ui-components/js/include-exclude-picker",["jquery","underscore"],function(d,e){function g(a){var b=a.charAt(0);e.contains(["-"],b)?(c=b,a=a.substring(1)):c="";return a}function f(a){a=d.extend({},a);a.children?a.children=e.map(a.children,f):(a.id=c+a.id,a.text=c+a.text);return a}function h(a){return function(b){b=g(b);return a(b)}}function k(a){return function(b){b=a?a(b):b;c&&(b.results=e.map(b.results,f));return b}}function l(a){return function(b){return a(b,g,f)}}function m(a){if("-"===
a.text.charAt(0))return"select2-search-choice-subtle"}var c="";return{build:function(a){a=d.extend({formatSelectionCssClass:m},a);a.query?a.query=l(a.query):(a.ajax=d.extend({},a.ajax),a.ajax.data=h(a.ajax.data),a.ajax.results=k(a.ajax.results));return a}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:user-group-select2', location = '/js/user-group-select2.js' */
define("confluence-ui-components/js/user-group-select2",["ajs","confluence-ui-components/js/internal/soy-templates","jquery","confluence-ui-components/js/confluence-select"],function(b,g,d){return{bind:function(f){f=f||document.body;var n=function(){var c=d(".select2-drop-active \x3e .select2-results");0===c.children(".select2-result-selectable").length&&c.children(".select2-disabled").length&&c.append('\x3cli class\x3d"select2-no-results"\x3e'+b.escapeHtml("No matches found")+
"\x3c/li\x3e")};d("input.autocomplete-multiusergroup[data-autocomplete-bound !\x3d 'true']",f).each(function(){var c=d(this);c.attr("data-autocomplete-bound","true");var h=c.attr("data-include-groups");c.confluenceSelect({multiple:!0,minimumInputLength:2,formatInputTooShort:function(){return h?"Start typing to search for a user or group":"Start typing to search for a user"},ajax:{transport:function(a){var e=a.success;delete a.success;
return d.ajax.apply(d.ajax,arguments).done(e).done(n)},data:function(a){return{"max-results":6,query:a}},dataType:"json",url:b.contextPath()+"/rest/prototype/1/search/user"+(h?"-or-group":"")+".json",results:function(a){var e=[];d.each(a.result,function(){"user"===this.type?e.push({id:this.username,text:`${this.title} (${this.username})`,imgSrc:this.thumbnailLink.href,entity:this}):e.push({id:this.name,text:this.name,imgSrc:b.contextPath()+"/images/icons/avatar_group_48.png",entity:this})});return{results:e}},
quietMillis:300},formatResult:function(a){return g.UserGroupSelect2().avatarWithName({size:"small",displayName:a.text,userId:a.id,avatarImageUrl:a.imgSrc})},escapeMarkup:function(a){return a},formatSelection:function(a){return g.UserGroupSelect2().avatarWithName({size:"xsmall",displayName:a.text,userId:a.id,avatarImageUrl:a.imgSrc})},dropdownCssClass:"users-dropdown",containerCssClass:"users-autocomplete",hasAvatar:!0});if(c.data("autofill-user")){var k=b.Meta.get("remote-user"),l=b.Meta.get("current-user-fullname"),
m=b.Meta.get("current-user-avatar-uri-reference");k&&l&&m&&c.confluenceSelect("data",[{id:k,text:l,imgSrc:m}])}})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:user-group-select2', location = '/soy/user-group-select2.soy' */
// This file was automatically generated from user-group-select2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.UserGroupSelect2.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.UserGroupSelect2 == 'undefined') { Confluence.UI.Components.UserGroupSelect2 = {}; }


Confluence.UI.Components.UserGroupSelect2.avatarWithName = function(opt_data, opt_ignored) {
  return '' + aui.avatar.avatar({size: opt_data.size, avatarImageUrl: opt_data.avatarImageUrl, accessibilityText: opt_data.displayName, title: opt_data.displayName, extraAttributes: {'data-username': opt_data.userId}}) + soy.$$escapeHtml(opt_data.displayName);
};
if (goog.DEBUG) {
  Confluence.UI.Components.UserGroupSelect2.avatarWithName.soyTemplateName = 'Confluence.UI.Components.UserGroupSelect2.avatarWithName';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/cql/cql-component.soy' */
// This file was automatically generated from cql-component.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.CQL.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.CQL == 'undefined') { Confluence.UI.Components.CQL = {}; }
if (typeof Confluence.UI.Components.CQL.Templates == 'undefined') { Confluence.UI.Components.CQL.Templates = {}; }


Confluence.UI.Components.CQL.Templates.container = function(opt_data, opt_ignored) {
  return '<div class="cql-container"><div class="cql-error-container"></div><div class="cql-fields"></div></div>';
};
if (goog.DEBUG) {
  Confluence.UI.Components.CQL.Templates.container.soyTemplateName = 'Confluence.UI.Components.CQL.Templates.container';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/cql/cql-filter-field.soy' */
// This file was automatically generated from cql-filter-field.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.CQLFilters.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.CQLFilters == 'undefined') { Confluence.UI.Components.CQLFilters = {}; }
if (typeof Confluence.UI.Components.CQLFilters.Templates == 'undefined') { Confluence.UI.Components.CQLFilters.Templates = {}; }


Confluence.UI.Components.CQLFilters.Templates.baseFilterField = function(opt_data, opt_ignored) {
  var output = '<div class="cql-filter cql-field-' + soy.$$escapeHtml(opt_data.field.fieldName) + ' cql-type-' + soy.$$escapeHtml(opt_data.field.uiSupport.valueType) + '">';
  var id__soy8 = 'cql-field-' + soy.$$escapeHtml(opt_data.field.fieldName) + '-' + soy.$$escapeHtml(opt_data.counter);
  output += '<div class=\'cql-field-heading\'><label for="' + soy.$$escapeHtml(id__soy8) + '">' + soy.$$escapeHtml(opt_data.label) + ((! opt_data.field.fixed) ? '<button class="aui-icon aui-icon-small aui-iconfont-remove" title="' + soy.$$escapeHtml('Remove filter') + '"></button>' : '') + '</label></div><div class=\'cql-filter-field-input-container\'><input type="text" class="cql-field-input text" id="' + soy.$$escapeHtml(id__soy8) + '"></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.UI.Components.CQLFilters.Templates.baseFilterField.soyTemplateName = 'Confluence.UI.Components.CQLFilters.Templates.baseFilterField';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/cql/cql-filter-select.soy' */
// This file was automatically generated from cql-filter-select.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.CQL.FilterSelect.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.CQL == 'undefined') { Confluence.UI.Components.CQL = {}; }
if (typeof Confluence.UI.Components.CQL.FilterSelect == 'undefined') { Confluence.UI.Components.CQL.FilterSelect = {}; }
if (typeof Confluence.UI.Components.CQL.FilterSelect.Templates == 'undefined') { Confluence.UI.Components.CQL.FilterSelect.Templates = {}; }


Confluence.UI.Components.CQL.FilterSelect.Templates.container = function(opt_data, opt_ignored) {
  return '<div class="cql-add-filter-container"><button type="button" class="aui-button aui-button-link">' + soy.$$escapeHtml('Add a filter') + '</button><div class="input-wrapper hidden"><input class="select2-input" type="text" /></div></div>';
};
if (goog.DEBUG) {
  Confluence.UI.Components.CQL.FilterSelect.Templates.container.soyTemplateName = 'Confluence.UI.Components.CQL.FilterSelect.Templates.container';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/date-picker.soy' */
// This file was automatically generated from date-picker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.DatePicker.templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.DatePicker == 'undefined') { Confluence.UI.Components.DatePicker = {}; }
if (typeof Confluence.UI.Components.DatePicker.templates == 'undefined') { Confluence.UI.Components.DatePicker.templates = {}; }


Confluence.UI.Components.DatePicker.templates.input = function(opt_data, opt_ignored) {
  return '<div class="aui-navgroup-vertical"><ul class="aui-nav"><li class="aui-nav-selected"><a href="#" role="button" data-value="">' + soy.$$escapeHtml('Any date') + '</a></li role="button"><li><a href="#" role="button" data-value="now(\'-1d\')">' + soy.$$escapeHtml('Last 24 hours') + '</a></li><li><a href="#" role="button" data-value="now(\'-1w\')">' + soy.$$escapeHtml('Last week') + '</a></li><li><a href="#" role="button" data-value="now(\'-1M\')">' + soy.$$escapeHtml('Last month') + '</a></li><li><a href="#" role="button" data-value="now(\'-1y\')">' + soy.$$escapeHtml('Last year') + '</a></li><li><a href="#" role="button" data-value="custom">' + soy.$$escapeHtml('Custom') + '</a><span class="absolute-date-pickers"><input class="from-date-picker text" type="date" /><span>&ndash;</span><input class="to-date-picker text" type="date" /></span></li></ul></div>';
};
if (goog.DEBUG) {
  Confluence.UI.Components.DatePicker.templates.input.soyTemplateName = 'Confluence.UI.Components.DatePicker.templates.input';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/cql/cql-type-picker.soy' */
// This file was automatically generated from cql-type-picker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.CQL.TypePicker.templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.CQL == 'undefined') { Confluence.UI.Components.CQL = {}; }
if (typeof Confluence.UI.Components.CQL.TypePicker == 'undefined') { Confluence.UI.Components.CQL.TypePicker = {}; }
if (typeof Confluence.UI.Components.CQL.TypePicker.templates == 'undefined') { Confluence.UI.Components.CQL.TypePicker.templates = {}; }


Confluence.UI.Components.CQL.TypePicker.templates.suggestions = function(opt_data, opt_ignored) {
  var output = '<div class="aui-navgroup-vertical"><ul class="aui-nav">';
  var typeList4 = opt_data.types;
  var typeListLen4 = typeList4.length;
  for (var typeIndex4 = 0; typeIndex4 < typeListLen4; typeIndex4++) {
    var typeData4 = typeList4[typeIndex4];
    output += '<li ' + ((typeIndex4 == 0) ? ' class="aui-nav-selected"' : '') + '><a href="#" role="button" data-value="' + soy.$$escapeHtml(typeData4.type) + '">' + soy.$$escapeHtml(typeData4.label) + '</a></li>';
  }
  output += '<li><a href="#" role="button" data-value="custom">' + soy.$$escapeHtml('Custom') + '</a></li></ul></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.UI.Components.CQL.TypePicker.templates.suggestions.soyTemplateName = 'Confluence.UI.Components.CQL.TypePicker.templates.suggestions';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/cql/cql-space-field.soy' */
// This file was automatically generated from cql-space-field.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.CQL.SpaceField.templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.CQL == 'undefined') { Confluence.UI.Components.CQL = {}; }
if (typeof Confluence.UI.Components.CQL.SpaceField == 'undefined') { Confluence.UI.Components.CQL.SpaceField = {}; }
if (typeof Confluence.UI.Components.CQL.SpaceField.templates == 'undefined') { Confluence.UI.Components.CQL.SpaceField.templates = {}; }


Confluence.UI.Components.CQL.SpaceField.templates.archivedSpacesOption = function(opt_data, opt_ignored) {
  return '<span><input type="checkbox" value="true" id="search-filter-include-archived" name="includeArchivedSpaces"><label for="search-filter-include-archived">' + soy.$$escapeHtml('Search archived spaces') + '</label></span>';
};
if (goog.DEBUG) {
  Confluence.UI.Components.CQL.SpaceField.templates.archivedSpacesOption.soyTemplateName = 'Confluence.UI.Components.CQL.SpaceField.templates.archivedSpacesOption';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-soy-templates.js' */
define("confluence-ui-components/js/cql/internal/cql-soy-templates",[],function(){return{CQL:function(){return Confluence.UI.Components.CQL.Templates},Filters:function(){return Confluence.UI.Components.CQLFilters.Templates},FilterSelect:function(){return Confluence.UI.Components.CQL.FilterSelect.Templates},SpaceField:function(){return Confluence.UI.Components.CQL.SpaceField.templates},TypePicker:function(){return Confluence.UI.Components.CQL.TypePicker.templates}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-special-spaces.js' */
define("confluence-ui-components/js/cql/internal/cql-special-spaces",["underscore"],function(b){function d(a){return"search-screen"===a?b.omit(c,"conf_current"):c}var c={conf_current:"currentSpace()",conf_favorites:"favourite",conf_global:"global",conf_personal:"personal"},e=b.invert(c);return{getMap:d,getKeys:function(a){return b.keys(d(a))},getUIValue:function(a){return e[a]}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-ajax.js' */
define("confluence-ui-components/js/cql/internal/cql-ajax",["jquery","underscore","ajs"],function(b,d,e){var c;return{getFields:function(){c||(c=b.Deferred(),b.getJSON(e.contextPath()+"/rest/cql/fields?filter\x3dwithUiSupport").done(function(a){a=d.values(a);if(!a.length)throw Error("Unknown CQL field data returned from server - cannot initialise CQL fields.");a=d.union.apply(d,a);a=d.sortBy(a,"fieldName");c.resolve(a)}).fail(function(){c.reject()}));return c.promise()},parseClauses:function(a){return b.getJSON(e.contextPath()+
"/rest/cql/expressions?cql\x3d"+encodeURIComponent(a))},getTypes:function(){return b.getJSON(e.contextPath()+"/rest/cql/contenttypes?category\x3dall")},getContentTypes:function(){return b.getJSON(e.contextPath()+"/rest/cql/contenttypes?category\x3dcontent")}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-date-picker.js' */
define("confluence-ui-components/js/cql/internal/cql-date-picker",["ajs","jquery","confluence-ui-components/js/internal/soy-templates"],function(b,g,n){return{build:function(p){var c=g(n.DatePicker().input()),d=c.find(".aui-nav li"),k=c.find(".absolute-date-pickers").hide(),e=c.find(".from-date-picker"),f=c.find(".to-date-picker"),l=function(){};this.onChange=function(a){l=a;e.change(a);f.change(a)};c.on("click",".aui-nav a",function(a){a.preventDefault();a=d.filter("li.aui-nav-selected");var h=g(this).closest("li");
a[0]!==h[0]&&(d.not(h).removeClass("aui-nav-selected"),h.addClass("aui-nav-selected"),l());"custom"===g(this).data("value")?k.slideDown("fast"):k.slideUp("fast")});var m={overrideBrowserDefault:!0};b.DatePicker(e,m);b.DatePicker(f,m);e.attr("placeholder","From");e.attr("aria-label","From");f.attr("placeholder","To");f.attr("aria-label",
"To");p.replaceWith(c);return{getSelectedOption:function(){return d.filter(".aui-nav-selected").find("a").data("value")},selectOption:function(a){d.find('a[data-value\x3d"'+a+'"]').click()},getFromDate:function(){return e.val()},getToDate:function(){return f.val()},setFromDate:function(a){e.val(a);d.find("a[data-value\x3d'custom']").click()},setToDate:function(a){f.val(a);d.find("a[data-value\x3d'custom']").click()}}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-type-picker.js' */
define("confluence-ui-components/js/cql/internal/cql-type-picker","jquery underscore ajs confluence-ui-components/js/cql/internal/cql-ajax confluence-ui-components/js/cql/internal/cql-set-value-helper confluence-ui-components/js/cql/internal/cql-soy-templates confluence-ui-components/js/include-exclude-picker confluence-ui-components/js/confluence-select".split(" "),function(k,e,u,v,x,y,z){function A(c){l=e.map(c,function(h){return{id:h.type,text:h.label}})}function w(c,h){return 0===c.length?"":
1===c.length&&e.contains(e.pluck(h,"type"),c[0])?c[0]:"custom"}var f,l=[];return{build:function(c,h){var g,m,n,p=[];f||(f=h?v.getContentTypes():v.getTypes(),f.done(A));f.done(function(){if(c.length){var b=e.pluck(l,"id");p=[].concat(l);c.forEach(function(a){""===a.type||e.contains(b,a.type)||p.push({id:a.type,text:a.label})})}else p=l});var B={query:function(b,a,d){f.done(function(){a(b.term);window.Select2.query.local({results:e.map(p,d)})(b)})},initSelection:function(b,a){b=b.val().split(",");var d=
"",r=e.map(b,function(q){return"-"===q.charAt(0)?(d="-",q.substring(1)):q});f.done(function(){var q=e.filter(p,function(t){return e.contains(r,t.id)});a(e.map(q,function(t){return{id:d+t.id,text:d+t.text}}))})},multiple:!0,placeholder:"All content types"};return{setupInput:function(b){g=b;if(u.trace)g.on("change",function(){u.trace("type.field.changed")});c.length&&(b=k(y.TypePicker().suggestions({types:c})),m=b.find(".aui-nav li"),g.before(b),b.on("click",
".aui-nav a",function(a){a.preventDefault();a=k(this).closest("li");var d=m.filter(".aui-nav-selected");a[0]!==d[0]&&(d.removeClass("aui-nav-selected"),a.addClass("aui-nav-selected"),a=k(this).attr("data-value"),"custom"===a?(n.slideDown("fast"),k(this).attr("id","type-picker-custom")):n.hide(),g.select2("val",[a],!0))}));g.confluenceSelect(z.build(B),["type-picker-custom"]);c.length&&(n=g.closest(".cql-filter").find(".select2-container"),n.hide())},setValues:function(b){if(m){var a=w(b,c),d=m.find('[data-value\x3d"'+
a+'"]').parent();m.not(d).removeClass("aui-nav-selected");d.addClass("aui-nav-selected");"custom"===a&&n.show()}var r=k.Deferred();f.done(function(){x.setValues(g,b).done(function(){r.resolve()})});return r}}},_clearCache:function(){f=null;l=[]},_getPicklistKey:w}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-field-model.js' */
define("confluence-ui-components/js/cql/internal/cql-field-model",[],function(){return{getLabel:function(a){return a.uiSupport.label.translation}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-space-expression-adjuster.js' */
define("confluence-ui-components/js/cql/internal/cql-space-expression-adjuster",["underscore","confluence-ui-components/js/cql/internal/cql-special-spaces"],function(e,f){return{convertFunctionValues:function(a){var b=a.functionValues;if(!b||!b.length)return a;var c=[];e.each(b,function(d){if("currentSpace"===d.functionName)c.push(f.getUIValue("currentSpace()"));else throw Error(d.functionName+" is not a known function");});a.values=c.concat(a.values);return a}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-autocomplete-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-autocomplete-filter-field",["jquery","ajs","confluence-ui-components/js/cql/internal/cql-expression-builder","confluence-ui-components/js/cql/internal/cql-set-value-helper"],function(f,d,l,m){function g(a){return{query:a,searchContext:JSON.stringify({spaceKey:d.Meta.get("space-key"),contentId:d.Meta.get("content-id")})}}function h(a){return 0===a.indexOf("http://")||0===a.indexOf("https://")?a:d.contextPath()+a}var k={placeholder:"Start typing to search",
multiple:!0,tokenSeparators:[" ",","],createSearchChoice:function(a){return a?{id:a,text:"New result: "+a,isNew:!0}:null},createSearchChoicePosition:"bottom",ajax:{data:g,results:function(a){var b=a.suggestedResults;a=a.searchResults;b=b.length?a.length?[{text:"Suggestions",children:b},{text:"Search results",children:a}]:b:a;return{results:b}},quietMillis:300},initSelection:function(a,
b){a=a.val().split(",").map(function(c){return{id:c,text:c}});b(a)}};return{build:function(a){var b;return{setupInput:function(c){b=c;var e=f.extend({},k.ajax,{url:h(a.uiSupport.dataUri)});e=f.extend({},k,{ajax:e});c.auiSelect2(e)},asCqlFunc:function(){var c=this.input.val().trim();if(c)return l.buildEqualityExpressionFromValuesString(this.fieldName,c)},setValues:function(c){return m.setValues(b,c.values)}}},_getUrl:h,_ajaxData:g}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-content-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-content-filter-field",["jquery","confluence-ui-components/js/page-picker","confluence-ui-components/js/cql/internal/cql-expression-builder","confluence-ui-components/js/cql/internal/cql-set-value-helper","confluence-ui-components/js/confluence-select"],function(k,d,e,f){function g(b){return"page:"+b}function h(b){return"content-function:"+b.functionName+"()"}function c(b){return b.values.map(g).concat(b.functionValues.map(h))}return{build:function(){var b;
return{setupInput:function(a){b=a;a.confluenceSelect(d.build({multiple:"parent"!==this.fieldName,suggestedContentFunctions:["currentContent()"]}))},asCqlFunc:function(){var a=this.input.val().trim();if(a)return a=a.replace(/[a-z\-]+:/g,""),e.buildEqualityExpressionFromValuesString(this.fieldName,a)},_addValuePrefixes:c,setValues:function(a){a=c(a);return f.setValues(b,a)}}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-type-suggestions.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-type-suggestions",["ajs"],function(a){var b=[{type:"",label:"All content"},{type:"page",label:"Pages"},{type:"blogpost",label:"Blog posts"},{type:"attachment",label:"Attachments"},{type:"space",
label:"Spaces"}];return{getList:function(){return b}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-type-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-type-filter-field",["confluence/dark-features","confluence-ui-components/js/cql/internal/cql-type-picker","confluence-ui-components/js/cql/internal/filterfields/cql-type-suggestions"],function(f,g,h){return{build:function(k){var a;return{setupInput:function(b,c){var d=[],e=!0;if("search-screen"===c.environment&&"all"===c.searchType||f.isEnabled("cql.force.full.search.mode"))d=h.getList(),e=!1;a=g.build(d,e);a.setupInput(b)},setValues:function(b){return a.setValues(b.values)}}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-date-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-date-filter-field",["ajs","underscore","confluence-ui-components/js/cql/internal/cql-date-picker"],function(e,h,k){return{build:function(l){var g=l.fieldName,b;return{setupInput:function(a){b=k.build.call(this,a)},setValues:function(a){b?(a=a.expressions,1>a.length||2<a.length?e.warn("Can't set date value with expressions.length: "+a.length):1===a.length&&1===a[0].functionValues.length&&"now"===a[0].functionValues[0].functionName?"\x3e\x3d"!==
a[0].operator?e.warn("Unsupported date picker relative date operator: "+a[0].operator):b.selectOption("now('"+a[0].functionValues[0].parameters[0]+"')"):h.each(a,function(c){if(1===c.values.length){var d=c.values[0];"\x3e\x3d"===c.operator?b.setFromDate(d):"\x3c\x3d"===c.operator&&b.setToDate(d)}})):e.warn("DatePicker not set yet, can't set values")},asCqlFunc:function(){if(b){var a=b.getSelectedOption();if(!a)return"";if("custom"===a){a=b.getFromDate();var c=b.getToDate(),d,f;a&&(d=g+' \x3e\x3d "'+
a+'"');c&&(f=g+' \x3c\x3d "'+c+'"');return d&&f?d+" and "+f:d||f||""}return g+" \x3e\x3d "+a}e.warn("DatePicker not set yet, can't get CQL")}}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-label-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-label-filter-field","jquery ajs confluence-ui-components/js/label-picker confluence-ui-components/js/include-exclude-picker confluence-ui-components/js/cql/internal/cql-set-value-helper confluence-ui-components/js/confluence-select".split(" "),function(d,e,f,g,h){return{build:function(){var c;return{setupInput:function(a,b){c=a;b=d.extend({},b.select2CustomOptions,{noMatches:"No matching labels found"});
a.confluenceSelect(g.build(f.build(b)))},setValues:function(a){return h.setValues(c,a.values)}}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-space-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-space-filter-field","jquery confluence-ui-components/js/space-picker confluence-ui-components/js/include-exclude-picker confluence-ui-components/js/cql/internal/cql-special-spaces confluence-ui-components/js/cql/internal/cql-space-expression-adjuster confluence-ui-components/js/cql/internal/cql-space-expression-builder confluence-ui-components/js/cql/internal/cql-set-value-helper confluence-ui-components/js/cql/internal/cql-soy-templates confluence-ui-components/js/confluence-select".split(" "),
function(f,g,h,k,l,m,n,p){return{build:function(){var b;return{setupInput:function(a,c){b=a;a.confluenceSelect(h.build(g.build({multiple:!0,suggestCategories:k.getKeys(c.environment),disableMixedSpaceTypes:!0})));if("search-screen"===c.environment){var d=f(p.SpaceField().archivedSpacesOption());b.after(d);this.onChange=function(e){d.find("#search-filter-include-archived").change(e);b.change(e)}}},asCqlFunc:function(){return m.buildExpressionFromValuesString(this.input.val())},setValues:function(a){l.convertFunctionValues(a);
return n.setValues(b,a.values)}}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-user-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-user-filter-field",["jquery","ajs","confluence-ui-components/js/user-group-select2"],function(b,f,g){return{build:function(){function h(a){a=a[0].result[0];return{id:a.username,text:a.title,imgSrc:a.thumbnailLink.href}}var d;return{setupInput:function(a){d=a;a.addClass("select2-input autocomplete-multiusergroup");g.bind(a.parent())},setValues:function(a){if((a=a.values)&&a[0]){var e=a.map(function(c){return b.getJSON(f.contextPath()+
"/rest/prototype/1/search/user.json?query\x3d"+encodeURI(c))});return b.when.apply(b,e).done(function(){var c=(1<e.length?arguments:[arguments]).map(h);d.auiSelect2("data",c)})}}}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-filter-field-configs.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-filter-field-configs","confluence-ui-components/js/cql/internal/filterfields/cql-autocomplete-filter-field confluence-ui-components/js/cql/internal/filterfields/cql-content-filter-field confluence-ui-components/js/cql/internal/filterfields/cql-type-filter-field confluence-ui-components/js/cql/internal/filterfields/cql-date-filter-field confluence-ui-components/js/cql/internal/filterfields/cql-label-filter-field confluence-ui-components/js/cql/internal/filterfields/cql-space-filter-field confluence-ui-components/js/cql/internal/filterfields/cql-user-filter-field".split(" "),
function(d,e,f,g,h,k,l){var c={contentId:e,contentType:f,date:g,label:h,space:k,user:l};return{getConfig:function(a){var b=a.uiSupport;return b.dataUri?d.build(a):c[b.valueType]?c[b.valueType].build(a):{}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-filter-field.js' */
define("confluence-ui-components/js/cql/internal/cql-filter-field","jquery underscore ajs confluence-ui-components/js/cql/internal/cql-field-model confluence-ui-components/js/cql/internal/cql-expression-builder confluence-ui-components/js/cql/internal/filterfields/cql-filter-field-configs confluence-ui-components/js/cql/internal/cql-soy-templates".split(" "),function(e,g,t,h,k,l,m){function n(b){var d=h.getLabel(b);d=e(p().baseFilterField({label:d,field:b,counter:q++}));var c=d.find("input");d.data("fieldName",
b.fieldName);return e.extend({input:c,element:d,onChange:function(a){c.change(a)}},b)}var p=m.Filters,q=0;return{build:function(b,d){var c=b.fieldName;if(!b.uiSupport.valueType)throw Error("Can't create filter without valueType.");if(!c)throw Error("Can't create filter without fieldName.");c=l.getConfig(b);var a=n(b);a.asCql=g.bind(c.asCqlFunc||function(){return k.buildExpression(a,this.input.val())},a);var f=a.element.find("input");"function"===typeof c.setupInput&&(a.setupInput=c.setupInput,a.setupInput(f,
d.context));a.setValues=c.setValues||function(r){f.val(r.values.join(","))};a.element.find(".aui-iconfont-remove").click(function(){a.element.remove();d.removeField(a)});return a}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-filter-select.js' */
define("confluence-ui-components/js/cql/internal/cql-filter-select","jquery underscore ajs confluence-ui-components/js/cql/internal/cql-ajax confluence-ui-components/js/cql/internal/cql-field-model confluence-ui-components/js/cql/internal/cql-soy-templates".split(" "),function(k,c,b,t,l,u){var v=u.FilterSelect;return{build:function(g){function w(a){a.added&&(h.auiSelect2("val",""),n(a.added),b.debug("CQL Field selection made"),m.addClass("hidden"),d.show())}var p=g.cqlContainer,q=p.find(".cql-fields"),
n=g.onSelection;if(!n)throw Error("An onSelection callback must be provided to the FilterSelect.");var e=k(v().container()),d=e.children("button"),m=e.find(".input-wrapper"),h=e.find("input");d.click(function(a){a.preventDefault();m.removeClass("hidden");d.hide();e.find(".select2-choice").mousedown()});h.bind("select2-close",function(){b.debug("CQL Field selector closed");m.addClass("hidden");d.show();setTimeout(function(){b.log("Checking CQL Field selector focus");k(document.activeElement).closest(".cql-filter").length||
(b.debug("Setting CQL Field selector focus"),d.focus())},1)});p.append(e);t.getFields().done(function(a){"search-screen"===g.context.environment||b.DarkFeatures.isEnabled("cql.search.screen")||(a=c.reject(a,function(f){return"date"===f.type}));a=c.reject(a,function(f){return c.contains(g.ignoredFields,f.fieldName)});h.auiSelect2({id:"fieldName",data:function(){if(!q[0])throw Error("Why no cql-container?");var f=q.find(".cql-filter").map(function(){return k(this).data("fieldName")});return{results:c.reject(a,
function(r){return c.contains(f,r.fieldName)&&!c.contains(["label"],r.fieldName)}),text:l.getLabel}},formatResult:l.getLabel,formatSelection:l.getLabel,placeholder:"Add a filter"}).change(w)}).fail(function(){b.log("Couldn't fetch CQL fields - unable to initialise CQL field picker")});return h}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-space-expression-builder.js' */
define("confluence-ui-components/js/cql/internal/cql-space-expression-builder",["jquery","underscore","confluence-ui-components/js/cql/internal/cql-special-spaces","confluence-ui-components/js/cql/internal/cql-expression-builder"],function(l,e,f,g){return{buildExpressionFromValuesString:function(a){if(a=a.trim()){a=a.split(",");var h=f.getKeys(),d=[],c=[];e.each(a,function(b){"conf_current"===b?d.push("currentSpace()"):e.contains(h,b)?c.push(b):d.push(b)});a=[];if(c.length){var k=f.getMap();c=e.map(c,
function(b){return k[b]});a.push(g.buildEqualityExpressionFromValuesArray("space.type",c))}d.length&&a.push(g.buildEqualityExpressionFromValuesArray("space",d));return 1===a.length?a[0]:"("+a.join(" or ")+")"}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-expression-builder.js' */
define("confluence-ui-components/js/cql/internal/cql-expression-builder",["jquery","underscore"],function(q,e){function f(b){return e.contains(["currentContent()","currentSpace()"],b)?b:'"'+b.replace(/"/g,'\\"')+'"'}function g(b){var a={"+":[],"-":[],"":[]};e.each(b,function(c){var d=c.charAt(0);"+"===d?a["+"].push(c.substring(1)):"-"===d?a["-"].push(c.substring(1)):a[""].push(c)});return a}function h(b,a){return e.map(a,function(c){return b+" \x3d "+f(c)}).join(" AND ")}function k(b,a,c){if(0===
a.length)return"";a=e.map(a,f);if(1===a.length)return b+(c?" \x3d ":" !\x3d ")+a[0];a=a.join(",");return b+(c?" in ":" not in ")+"("+a+")"}function l(b,a){return k(b,a,!1)}function m(b,a){return k(b,a,!0)}function n(b,a){var c=g(a);a=[];var d=h(b,c["+"]);d&&a.push(d);(d=m(b,c[""]))&&a.push(d);(b=l(b,c["-"]))&&a.push(b);return a.join(" AND ")}function p(b,a){if(a=a.trim())return a=a.split(","),a=e.map(a,function(c){return c.trim()}),n(b,a)}return{buildExpression:function(b,a){if("equality"===b.type)return p(b.fieldName,
a);if("text"===b.type)return b=b.fieldName,a=(a=a.trim())?b+" ~ "+f(a):void 0,a;throw Error("buildExpression does not yet support type: "+b.type);},buildEqualityExpressionFromValuesString:p,buildEqualityExpressionFromValuesArray:n,makeValueMap:g,makePlusCql:h,makeMinusCql:l,makeRegularCql:m}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-space-type-expression-converter.js' */
define("confluence-ui-components/js/cql/internal/cql-space-type-expression-converter",["underscore","confluence-ui-components/js/cql/internal/cql-special-spaces"],function(b,d){return{convert:function(c,a){a=b.clone(a);var e=b.map(c.values,d.getUIValue);return{field:a,values:e,negate:c.negate}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-space-expression-aggregator.js' */
define("confluence-ui-components/js/cql/internal/cql-space-expression-aggregator",["underscore","confluence-ui-components/js/cql/internal/cql-space-type-expression-converter"],function(d,h){function g(a,b){a.values=a.values.concat(b.values);return a}return{aggregate:function(a,b){var c=d.filter(a,function(e){return"space.type"===e.field.fieldName});if(0===c.length)return a;if(1<c.length)throw Error("Only a single space.type expression is supported.");b=h.convert(c[0],b);var f=d.filter(a,function(e){return"space"===
e.field.fieldName});a=d.difference(a,c);f.length?f[0]=g(f[0],b):a.push(b);return a},combineSpaceExpressions:g}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-set-value-helper.js' */
define("confluence-ui-components/js/cql/internal/cql-set-value-helper",["jquery"],function(c){return{setValues:function(a,d){var b=c.Deferred();a.on("change",function(){b.resolve()});a.select2("val",d,!0);return b}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-date-expression-aggregator.js' */
define("confluence-ui-components/js/cql/internal/cql-date-expression-aggregator",["underscore","confluence-ui-components/js/cql/internal/cql-space-type-expression-converter"],function(f){return{aggregate:function(e){var b=[],c={};e.forEach(function(a){var d=a.field.fieldName;"date"!==a.field.type?b.push(a):c[d]?c[d].expressions.push(a):(a={field:a.field,expressions:[a]},c[d]=a,b.push(a))});return b}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-negation-converter.js' */
define("confluence-ui-components/js/cql/internal/cql-negation-converter",["jquery","underscore"],function(c,d){function b(a){a.values=d.map(a.values,function(e){return"-"+e})}return{convert:function(a){a=c.extend({},a);"equality"===a.field.type&&("!\x3d"===a.operator?(a.operator="\x3d",b(a)):"notin"===a.operator&&(a.operator="in",b(a)));return a}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-negation-aggregator.js' */
define("confluence-ui-components/js/cql/internal/cql-negation-aggregator",["underscore","confluence-ui-components/js/cql/internal/cql-negation-converter"],function(g,l){function m(e,b){if(!b.length)return e;var a=e[0];a||(a=b[0],b=g.rest(b));b.forEach(function(f){a.values=a.values.concat(f.values)});"\x3d"===a.operator&&1<a.values.length&&(a.operator="in");return[a].concat(g.rest(e))}return{aggregate:function(e){var b=[],a={},f={};e.forEach(function(c){var d=c.field.fieldName;g.contains(b,d)||(b.push(d),
a[d]=[],f[d]=[]);var h=l.convert(c);h.operator!==c.operator?f[d].push(h):a[d].push(h)});var k=[];b.forEach(function(c){c=m(a[c],f[c]);k=k.concat(c)});return k}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-ignored-field-expression-converter.js' */
define("confluence-ui-components/js/cql/internal/cql-ignored-field-expression-converter",[],function(){function c(a,b,d){b&&(a=a.filter(function(e){return-1<b.indexOf(e.field.fieldName)?d:!d}));return a}return{removeFieldsByName:function(a,b){return c(a,b,!1)},getFieldsByName:function(a,b){return c(a,b,!0)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/cql-component.js' */
define("confluence-ui-components/js/cql/cql-component","jquery underscore ajs confluence-ui-components/js/cql/internal/cql-ajax confluence-ui-components/js/cql/internal/cql-filter-field confluence-ui-components/js/cql/internal/cql-filter-select confluence-ui-components/js/cql/internal/cql-space-expression-aggregator confluence-ui-components/js/cql/internal/cql-date-expression-aggregator confluence-ui-components/js/cql/internal/cql-negation-aggregator confluence-ui-components/js/cql/internal/cql-ignored-field-expression-converter confluence-ui-components/js/cql/internal/cql-soy-templates".split(" "),
function(e,k,g,x,I,J,K,L,M,y,N){function O(c){var f=[];k.each(c,function(n){n.forEach(function(h){h&&(h=h.asCql())&&f.push(h)})});return f.join(" and ")}function z(c,f){return k.find(c,function(n){return n.fieldName===f})}var P=N.CQL;return{build:function(c){function f(a){var b=I.build(a,A);b.onChange(B);a=a.fieldName;d[a]=d[a]||[];d[a].push(b);p.trigger("cql-field-adding",b);a=C.find(".cql-field-"+a+":last");a.length?a.after(b.element):C.append(b.element);return b}function n(a){var b=e.Deferred();
if(!a)return b.resolve(),b;var l={},Q=k.findWhere(r,{fieldName:"space"});a=K.aggregate(a,Q);a=L.aggregate(a);a=M.aggregate(a);D=y.getFieldsByName(a,c.ignoredFields);a=y.removeFieldsByName(a,c.ignoredFields);var E=[];k.each(a,function(t){var m=t.field.fieldName,F=z(r,m),q=l[m];l[m]="number"===typeof q?q+1:0;m=l[m];q=F.fieldName;(t=(d[q]&&d[q][m||0]||f(F)).setValues(t))&&E.push(t)});e.when.apply(e,E).then(function(){b.resolve()});return b}function h(a){if(a){var b=k.escape(a);a="We can\u0027t load your filters";
b=g.format("Curses! We had trouble with \u0022{0}\u0022. Try refreshing the page, but you may need to re-enter your macro parameters.",b)}else a="We couldn\u0027t load the macro",b="If you refresh your page, we\u0027ll give it another shot.";g.messages.error(".cql-error-container",{title:a,body:b,closeable:!0})}function R(a){a=e.extend({},a,{fixed:!1});a=f(a);if(0===a.element.find(".aui-nav-selected").length)if(0!==a.element.find(".select2-container-multi").length){var b=a.element.find("input.select2-input");
b.focus().click()}else b=a.element.find("a.select2-choice.select2-default"),b.length||(b=e(":input:visible",a.element).first()),b.length||g.log("Unable to focus CQL field: "+a.fieldName),b.focus().mousedown()}var G=c.context||{environment:"macro-browser"},u=c.defaultFieldNames;u||(u=c.defaultFields?c.defaultFields.split(","):[]);var p=e(P().container());c.container&&e(c.container).append(p);var C=p.find(".cql-fields"),H=c.value||c.defaultValue;if(H)var v=x.parseClauses(H);else v=new e.Deferred,v.resolve();
var d={},D={},w=new e.Deferred,B=c.onChange||function(){},A={element:p,loading:w,context:c.context||{environment:"macro-browser",searchType:"content",select2CustomOptions:c.select2CustomOptions||{}},getValue:function(){return O(d)},getIgnoredFields:function(){return D},removeField:function(a){var b=a.fieldName;d[b]=k.without(d[b],a);0===d[b].length&&(delete d[b],B())},fieldArrays:d,fieldRegistry:d},r;x.getFields().done(function(a){r=a;u.forEach(function(b){var l=z(r,b);if(!l)throw Error("Unknown fieldname: "+
b);b=e.extend({fixed:!0},l);f(b)});J.build({onSelection:R,cqlContainer:p,context:G,ignoredFields:c.ignoredFields});v.done(function(b){n(b).done(function(){w.resolve()})}).fail(function(){"search-screen"===G.environment?g.log("Error parsing CQL param from search screen URL: "+c.value):h(c.value);w.resolve()})}).fail(function(){h()});return A}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:user-select2', location = 'user-select2/avatar.soy' */
// This file was automatically generated from avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace CreateContent.avatar.
 */

if (typeof CreateContent == 'undefined') { var CreateContent = {}; }
if (typeof CreateContent.avatar == 'undefined') { CreateContent.avatar = {}; }


CreateContent.avatar.avatarWithName = function(opt_data, opt_ignored) {
  return '' + aui.avatar.avatar({size: opt_data.size, avatarImageUrl: opt_data.avatarImageUrl, accessibilityText: opt_data.displayName, title: opt_data.displayName, extraAttributes: {'data-username': opt_data.userId}}) + soy.$$escapeHtml(opt_data.displayName);
};
if (goog.DEBUG) {
  CreateContent.avatar.avatarWithName.soyTemplateName = 'CreateContent.avatar.avatarWithName';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:user-select2', location = 'user-select2/user-multiselect.js' */
(function(k){k("confluence-ui-components/js/confluence-select");Confluence.Binder=Confluence.Binder||{};Confluence.Binder.autocompleteMultiUser=function(e){e=e||document.body;var c=AJS.$,l=function(){var b=c(".select2-drop-active \x3e .select2-results");0===b.children(".select2-result-selectable").length&&b.children(".select2-disabled").length&&b.append('\x3cli class\x3d"select2-no-results"\x3e'+AJS.escapeHtml("No matches found")+"\x3c/li\x3e")};c("input.autocomplete-multiuser[data-autocomplete-bound !\x3d 'true']",
e).each(function(){var b=c(this);b.confluenceSelect({multiple:!0,minimumInputLength:2,formatInputTooShort:function(){return "Start typing to search for a user"},ajax:{transport:function(a){var d=a.success;delete a.success;return c.ajax.apply(c.ajax,arguments).done(d).done(l)},data:function(a){return{"max-results":6,query:a}},dataType:"json",url:Confluence.getContextPath()+"/rest/prototype/1/search/user.json",results:function(a){var d=[];c.each(a.result,function(){d.push({id:this.username,
userKey:this.userKey,text:this.title,imgSrc:this.thumbnailLink.href})});return{results:d}},quietMillis:300},formatResult:function(a){return CreateContent.avatar.avatarWithName({size:"small",displayName:a.text,userId:a.id,avatarImageUrl:a.imgSrc})},escapeMarkup:function(a){return a},formatSelection:function(a){return CreateContent.avatar.avatarWithName({size:"xsmall",displayName:a.text,userId:a.id,avatarImageUrl:a.imgSrc})},dropdownCssClass:"users-dropdown",containerCssClass:"users-autocomplete",hasAvatar:!0});
if(b.data("autofill-user")){var f=AJS.Meta.get("remote-user"),m=AJS.Meta.get("remote-user-key"),g=AJS.Meta.get("current-user-fullname"),h=AJS.Meta.get("current-user-avatar-uri-reference");f&&g&&h&&b.confluenceSelect("data",[{id:f,userKey:m,text:g,imgSrc:h}])}})}})(require);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-parameter-serializer.js' */
define("confluence-macro-browser/macro-parameter-serializer",["jquery"],function(h){function e(d){return d.replace(/\\/g,"\\\\").replace(/=/g,"\\=").replace(/[|]/g,"\\|")}return{serialize:function(d){var a=[],b;for(b in d)a.push(e(b)+"="+e(d[b]));return a.join("|")},deserialize:function(d){function a(f,d){for(var c=[],b=[],a,f=f||"",g=0,e=f.length;g<e;g++)a=f[g],"\\"==a?c.push(a+(g+1!=f.length?f[++g]:"")):a==d?(b.push(c.join("")),c=[]):c.push(a);b.push(c.join(""));return b}var b={};h.each(a(d||"",
"|"),function(d,e){var c=a(e,"=");2===c.length&&c[0]&&(b[c[0].replace(/\\(.)/g,"$1")]=c[1].replace(/\\(.)/g,"$1"))});return b}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-macro-browser/macro-parameter-serializer","Confluence.MacroParameterSerializer");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-fields.js' */
define("confluence-macro-browser/macro-browser-fields",["ajs","jquery","underscore","confluence/legacy"],function(g,e,o,i){function n(j,h,l){return function(k,b){if(k.multiple)return j.string(k,b);var a=e(i.Templates.MacroBrowser.macroParameterSelect()),c=e("select",a),b=b||{};b.setValue=b.setValue||function(a){var b=!1;c.find("option").each(function(){if(this.value==a)return b=!0,!1});b?delete c.tempValue:(c.append(e("<option></option>").attr("value",a).text(a+" ("+"Not found"+
")")),c.tempValue=a);try{c.val(a)}catch(m){g.logError(m)}c.change()};a=h(a,c,b);a.updateDependencies=l;a.getData=function(a){if(a.title&&a.spaceKey||a.pageId||a.draftId){var f=c.tempValue||c.val();b.fileTypes&&(a.fileTypes=b.fileTypes);var m=g.contextPath()+(a.draftId?"/json/draftattachmentsearch.action":"/json/attachmentsearch.action");e.getJSON(m,a,function(a){if(!a.error){e("option",c).remove();a=a.attachments;if(!a||!a.length){c.append(e("<option></option>").attr("value","").html("No appropriate attachments"));
c.tempValue&&b.setValue(c.tempValue)}else{for(var d=0,m=a.length;d<m;d++)c.append(e("<option></option>").attr("value",a[d].name).text(a[d].name));f=f||c.tempValue;b.setValue(f||a[0].name)}c.attr("style","")}})}else g.log("Not enough parameters to send attachmentsearch request")};return a}}return function(j){var h=function(b,a,c){var c=c||{},d=c.setValue||function(b){a.val(b)},e=c.getValue||function(){return a.val()};a.change(c.onchange||j.paramChanged);return{paramDiv:b,input:a,setValue:d,getValue:e}},
l=function(b,a,c){if(a&&a.length)for(var d=0,e=a.length;d<e;d++)j.fields[a[d]]&&j.fields[a[d]].dependencyUpdated(b,c)},k={updateDependencies:l,username:function(b,a){var a=a||{},c=b.multiple?"autocomplete-multiuser":"autocomplete-user",d=e(i.Templates.MacroBrowser.macroParameter()),f=e("input[type='text']",d);b.selectInputId&&"string"===typeof b.selectInputId&&f.attr("id",b.selectInputId);f.addClass(c).attr("data-none-message","Not found");b.required&&f.keyup(j.processRequiredParameters);
b.multiple?(i.Binder.autocompleteMultiUser(d),a.setValue=function(a){f.val(a);for(var a=a.split(","),b=[],c=[],d=0,h=a.length;d<h;d++)b.push(function(a){return e.getJSON(g.contextPath()+"/rest/prototype/1/user/non-system/"+a).done(function(a){a&&a.name&&c.push({id:a.name,text:a.displayName,imgSrc:a.avatarUrl})}).fail(function(b){g.logError("Cannot parse user data for macro browser field with: "+b);c.push({id:a,text:g.format("Unknown User ({0})",a),imgSrc:g.contextPath()+"/images/icons/profilepics/default.png"})})}(a[d]));
e.when.apply(e,o.map(b,function(a){var b=e.Deferred();a.always(function(){b.resolve()});return b.promise()})).done(function(){c.length&&f.auiSelect2("data",c)})}):(f.bind("selected.autocomplete-content",function(c,d){if(a.onselect)a.onselect(d.selection);else a.setValue?a.setValue(d.content.username):(l(b.name,a.dependencies,f.val()),"function"===typeof a.onchange&&a.onchange.apply(f))}),g.Confluence.Binder.autocompleteUserOrGroup(d));return h(d,f,a)},spacekey:function(b,a){if(b.multiple)return k.string(b,
a);var a=a||{},c=e(i.Templates.MacroBrowser.macroParameter()),d=e("input[type='text']",c);d.addClass("autocomplete-space").attr("data-template","{key}").attr("data-none-message","Not found");b.required&&d.keyup(j.processRequiredParameters);d.bind("selected.autocomplete-content",function(c,e){if(a.onselect)a.onselect(e.selection);else a.setValue?a.setValue(e.content.key):(l(b.name,a.dependencies,d.val()),"function"===typeof a.onchange&&a.onchange.apply(d))});
g.Confluence.Binder.autocompleteSpace(c);return h(c,d)},attachment:n(k,h,l),full_attachment:n(k,h,l),"confluence-content":function(b,a){if(b.multiple)return k.string(b,a);a=a||{};b.options=b.options||{};var c=e(i.Templates.MacroBrowser.macroParameter()),d=e("input[type='text']",c).attr("data-none-message","Not found").attr("data-template","");b.required&&d.keyup(j.processRequiredParameters);a.onchange=a.onchange||function(){var c=d.val();l(b.name,a.dependencies,
c)};a.setValue=a.setValue||function(b){d.val(b);"function"===typeof a.onchange&&a.onchange.apply(d)};d.bind("selected.autocomplete-content",function(c,e){var f="";"true"==b.options.includeDatePath&&"blogpost"===e.content.type&&(f=e.content.createdDate.date.split("-"),f="/"+f[0]+"/"+f[1]+"/"+f[2].substring(0,2)+"/");var h=e.content.space&&e.content.space.key,i=h&&h!=g.Meta.get("space-key");-1!==e.content.title.indexOf(":")&&(i=!0);f=(i?h+":":"")+f+e.content.title;d.val(f);if(a.onselect)a.onselect(e.selection);
else a.setValue(f,d)});b.options.spaceKey&&("@self"===b.options.spaceKey.toLowerCase()&&(b.options.spaceKey=g.Meta.get("space-key")),d.attr("data-spacekey",b.options.spaceKey));var f=b.options.type;if("string"===typeof f)if("page"==f)d.addClass("autocomplete-page"),g.Confluence.Binder.autocompletePage(c);else if("blogpost"==f)d.addClass("autocomplete-blogpost"),g.Confluence.Binder.autocompleteBlogpost(c);else{if("attachment"===f||"full_attachment"===f)d.addClass("autocomplete-attachment"),g.Confluence.Binder.autocompleteAttachment(c)}else d.addClass("autocomplete-confluence-content"),
g.Confluence.Binder.autocompleteConfluenceContent(c);return h(c,d,a)},string:function(b,a){var c=e(i.Templates.MacroBrowser.macroParameter()),d=e("input",c);b.required&&d.keyup(j.processRequiredParameters);return h(c,d,a)},"boolean":function(b,a){var c=e(i.Templates.MacroBrowser.macroParameterBoolean()),d=e("input",c),a=a||{};a.setValue=a.setValue||function(a){(/true/i.test(a)||/true/i.test(b.defaultValue)&&!/false/i.test(a))&&d.prop("checked",!0)};return h(c,d,a)},"enum":function(b,a){if(b.multiple)return k.string(b,
a);var c=e(i.Templates.MacroBrowser.macroParameterSelect()),d=e("select",c);!b.required&&!b.defaultValue&&d.append(e("<option></option>").attr("value",""));e(b.enumValues).each(function(a,c){var g=c;if(b.enumToI18nKeyMapping){var h=[b.pluginKey,b.macroName,"param",b.name,this,"desc"].join(".");b.enumToI18nKeyMapping[c]!==h&&(g=b.enumToI18nKeyMapping[c])}d.append(e("<option></option>").attr("value",this).html(""+g))});return h(c,d,a)},_hidden:function(b,a){var c=e(i.Templates.MacroBrowser.macroParameterHidden()).hide(),
d=e("input",c);return h(c,d,a)}};return{Field:h,ParameterFields:k}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-fields");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-smartfields.js' */
define("confluence-macro-browser/macro-browser-smartfields",["ajs","confluence/macro-js-overrides"],function(c,f){return function(h,d){var e=function(a){this.fileTypes=a};e.prototype.beforeParamsSet=function(a){!a.page&&(!a.date&&!a.space)&&("page"==c.params.contentType||"blogpost"==c.params.contentType?a.page=c.Editor.getCurrentTitle():"comment"==c.params.contentType&&(a.page=c.params.pageTitle));if(a.date){var b=a.date.split("/");a.page=["",b[2],b[0],b[1],a.page].join("/")}a.space&&(a.page=a.space+
":"+a.page);return a};e.prototype.beforeParamsRetrieved=function(a){if(a.page){var b=a.page.split(":");1<b.length&&(a.space=b[0],a.page=b[1]);b=a.page.split("/");1<b.length&&(a.date=[b[2],b[3],b[1]].join("/"),a.page=b[4]);(("page"==c.params.contentType||"blogpost"==c.params.contentType)&&a.page==c.Editor.getCurrentTitle()||"comment"==c.params.contentType&&a.page==c.params.pageTitle)&&delete a.page}return a};e.prototype.fields={attachment:function(a){a=d.attachment(a,{fileTypes:this.fileTypes});a.dependencyUpdated=
function(a,g){c.debug("attachment:dependencyUpdated called: "+a+", "+g);var d=e.prototype.fields._parsePageLink(g);this.getData(d)};return a},full_attachment:function(a){a=d.full_attachment(a,{fileTypes:this.fileTypes});a.dependencyUpdated=function(a,d){c.debug("attachment:dependencyUpdated called: "+a+", "+d);var f=e.prototype.fields._parsePageLink(d);this.getData(f)};return a},"confluence-content":function(a){return d["confluence-content"](a,{dependencies:["name"]})},_parsePageLink:function(a){var b=
{},a=a.split(":",2);b.spaceKey=2===a.length&&a[0]||c.Meta.get("space-key");b.title=a[a.length-1];0===b.title.indexOf("/")&&(b.postingDay=b.title.substr(1,10),b.title=b.title.substr(12));b.title===c.Editor.getCurrentTitle()&&(b.title="");b.title||(c.params.newPage?b.draftId=c.Meta.get("content-id"):b.pageId=c.params.pageId);return b}};h.activateSmartFieldsAttachmentsOnPage=function(a,b){f.put(a,new e(b))}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-smartfields");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-utils.js' */
define("confluence-macro-browser/macro-browser-utils",["jquery"],function(a){return{makeDefaultKey:function(){return a.makeArray(arguments).join(".")}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-utils");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-cql.js' */
define("confluence-macro-browser/macro-browser-cql",["ajs","underscore","confluence/templates","confluence-ui-components/js/cql/cql-component","jquery"],function(i,g,m,n,d){function j(b){var a=b.param;return d.extend({},b,a.options,{defaultValue:a.defaultValue||a.options.defaultValue,select2CustomOptions:b.cqlSelect2CustomOptions})}function k(b){return d(m.MacroBrowser.CQL.sections({hasRenderParameters:0<b.renderParams.length}))}return{build:function(b){var a=k(b),e=b.container;e.append(a);e.bind("cql-field-adding",
function(b,c){c.element.addClass("macro-param-div");c.element.find(".cql-field-input").addClass("macro-param-input")});e.addClass("loading");a.filter(".cql-render-heading").find("button").click(function(){var b=d(this),c=b.closest(".cql-render-heading").next(),a=c.is(":visible");a?c.slideUp(300):(c.removeClass("hidden").show(),c=d(".cql-render-heading").position().top,d(".macro-input-fields").animate({scrollTop:c},300));a=a?"Show":"Hide";
b.text(a)});var f,h={param:b.cqlParam,value:b.cqlValue,container:a.filter(".cql-filter-fields"),cqlSelect2CustomOptions:b.cqlSelect2CustomOptions},h=j(h);f=n.build(h);e.data("cqlComponent",f);var l=d.Deferred();f.loading.done(function(){var a=b.cqlParam.options.requiredFields;if(a){var c=a.split(",");g.each(f.fieldRegistry||f.fieldArrays,function(a){var d=!1;g.each(a,function(a){!d&&g.contains(c,a.fieldName)&&(b.flagRequiredParam(a.element),d=!0,a.onChange(b.paramChanged))})})}e.removeClass("loading");
l.resolve()});return{elements:a,loading:l}},_makeCqlComponentOptions:j,_renderCqlSections:k}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'soy/macro-browser-cql.soy' */
// This file was automatically generated from macro-browser-cql.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.MacroBrowser.CQL.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.MacroBrowser == 'undefined') { Confluence.Templates.MacroBrowser = {}; }
if (typeof Confluence.Templates.MacroBrowser.CQL == 'undefined') { Confluence.Templates.MacroBrowser.CQL = {}; }


Confluence.Templates.MacroBrowser.CQL.sections = function(opt_data, opt_ignored) {
  return '<div class="cql-filter-fields"></div>' + ((opt_data.hasRenderParameters) ? '<h4 class="cql-render-heading"><span>' + soy.$$escapeHtml('Options') + '</span>' + aui.buttons.button({type: 'link', text: 'Show', extraAttributes: {type: 'button'}}) + '</h4><div class="cql-render-fields hidden"></div>' : '');
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.CQL.sections.soyTemplateName = 'Confluence.Templates.MacroBrowser.CQL.sections';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-editor.js' */
define("confluence-macro-browser/macro-browser-editor","ajs jquery confluence/legacy confluence-macro-browser/macro-browser-cql confluence/macro-js-overrides underscore".split(" "),function(r,f,q,v,s,t){return function(l){function o(c){var a=f("#macro-insert-container").find(".macro-name").val(),b,d=l,e={},g;g={};for(var j=0,h=c.formDetails.parameters.length;j<h;j++){var k=c.formDetails.parameters[j],i;if(k.type&&k.type.name==="cql")i=f(".macro-input-fields form").data("cqlComponent").getValue();
else{i=f("#macro-param-"+k.name);var n=i.val();i.attr("type")=="checkbox"&&(n=""+i.prop("checked"));i=n}if(i){k.shared&&(e[k.name]=i);if(k.hidden||!k.defaultValue||k.defaultValue!=i)g[k.name]=i}}g[""]&&(b=g[""]);f.extend(g,d.unknownParams);(j=s.getFunction(a,"beforeParamsRetrieved"))&&(g=j(g,c,e));return{name:a,bodyHtml:d.getMacroBody(),params:g,defaultParameterValue:b}}function w(c,a,b){a.pluginKey=c.pluginKey;a.macroName=c.macroName;var d=l,e,g=a.type.name,j="macro-param-"+a.name;if(b){var h=b.fields&&
b.fields[g];h&&typeof h!=="function"&&(h=h[a.name]);typeof h==="function"&&(e=h.call(b,a))}if(!e){g in d.ParameterFields&&typeof d.ParameterFields[g]==="function"||(g="string");a.selectInputId=j;e=d.ParameterFields[g](a)}d.fields[a.name]=e;b=e.paramDiv;e=e.input;b.attr("id","macro-param-div-"+a.name);e.addClass("macro-param-input").attr("id",j);a.hidden&&b.hide();e=c.pluginKey;if(a.displayName==l.Utils.makeDefaultKey(e,c.macroName,"param",a.name,"label"))a.displayName=a.name;if(a.description==l.Utils.makeDefaultKey(e,
c.macroName,"param",a.name,"desc"))a.description="";f("label",b).attr("for",j).text(a.displayName);a.required&&u(b);a.description&&b.append(q.Templates.MacroBrowser.macroParameterDesc({description:a.description}));return b}function u(c){var a=c.find("label"),b=a.text()+" *";a.text(b);c.addClass("required")}return{loadMacroInBrowser:function(c){if(!c||!c.formDetails){r.trigger("analytics",{name:"macro-browser.unknown-macro-error"});alert("Could not load unknown macro in the macro browser.")}else{var a=
require("tinymce"),b=l,d=c.formDetails,e=d.macroName,g=s.get(e),j=b.settings.selectedMacro,h=a.confluence.macrobrowser.editedMacroDiv;if(g&&typeof g.opener==="function"){b.close();g.opener({name:e})}else{var a=d.parameters,k=t.find(a,function(a){return a.type.name==="cql"});f("#save-warning-span").addClass("hidden");f("#macro-insert-container .macro-name").val(e);var i=f("#macro-insert-container .macro-input-fields form");i.empty();var n=c.extendedDescription||c.description;if(k)d.documentationLink&&
b.UI.setHelpLink(b.dialog,{href:d.documentationLink});else if(n||d.documentationLink){n=f(q.Templates.MacroBrowser.macroDescription({descriptionHtml:n,documentationLink:d.documentationLink}));i.append(n)}if(d.body&&d.body.bodyType!="NONE"&&h&&f(h).hasClass("editor-inline-macro")){h=c.pluginKey;if(d.body.label==l.Utils.makeDefaultKey(h,e,"body","label"))d.body.label="";if(d.body.description==l.Utils.makeDefaultKey(h,e,"body","desc"))d.body.description="";d=d.body;h=b.selectedMacroDefinition;n=l;e=
f(q.Templates.MacroBrowser.macroBody());h=h?h.body:n.settings.selectedText;f("textarea",e).val(h||"");d.label&&f("label",e).text(d.label);d.description&&e.append(q.Templates.MacroBrowser.macroParameterDesc({description:d.description}));d.hidden&&e.hide();e&&i.append(e)}var m=j?f.extend({},j.params):{},o=i;if(k){var p;g&&g.fields&&(p=f.extend({},g.fields.cqlSelect2CustomOptions));a=t.without(a,k);p=v.build({cqlParam:k,renderParams:a,cqlValue:m.cql,container:i,flagRequiredParam:u,paramChanged:l.paramChanged,
cqlSelect2CustomOptions:p});delete m.cql;o=p.elements.filter(".cql-render-fields");p.loading.done(function(){l.paramChanged();l.Preview.previewMacro(c,j);l.UI.focusOnMacroDetailsFirstInput()})}f(a).each(function(){o.append(w(c,this,g))});g&&typeof g.beforeParamsSet==="function"&&(m=g.beforeParamsSet(m,!j));f(a).each(function(){var a;a=this.name==""?b.selectedMacroDefinition?b.selectedMacroDefinition.defaultParameterValue:this.defaultValue:m[this.name];a!=null?delete m[this.name]:f(this.aliases).each(function(){if(m[this]){a=
m[this];delete m[this]}});if(a==null)a=this.defaultValue;a!=null&&b.fields[this.name].setValue(a)});b.unknownParams=m;f("a",i).click(function(){var a=window.open(this.href,"_blank");a.focus();a.opener=null;return false});f("#macro-browser-dialog:visible").length||b.showBrowserDialog();a={};f.extend(true,a,c);if(!a.formDetails)a.formDetails={};if(!a.formDetails.body)a.formDetails.body={};b.dialog.activeMetadata=a;a.formDetails.body.content=b.settings.selectedMacro?b.settings.selectedMacro.body:a.formDetails.body.bodyType&&
a.formDetails.body.bodyType.toLowerCase()==="plain_text"?b.settings.selectedText:b.settings.selectedHtml}}},getMacroParametersFromForm:function(c){return o(c).params},getMacroDefinitionFromForm:o,processRequiredParameters:function(){if(f(".macro-input-fields form").is(".loading")){r.log("Form still loading - cannot processRequiredParameters");return false}var c=f("#macro-insert-container .macro-param-div.required .macro-param-input").not(".select2-container").filter(function(){var a=f(this).val();
return a===null||a===""}).length===0,a=c?"":"disabled",b=a?"addClass":"removeClass";f("#macro-browser-dialog button.ok").prop("disabled",a);f("#macro-browser-dialog .macro-preview-header .refresh-link").prop("disabled",a)[b]("disabled");return c}}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-editor");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-preview.js' */
define("confluence-macro-browser/macro-browser-preview",["jquery","ajs","confluence/legacy","confluence/macro-js-overrides"],function(e,b,m,n){return function(d){function h(){return e("#macro-insert-container .macro-preview")}function l(){h().html("")}function i(b){b?(d.UI.showPreviewSpinner(!0),f.disable()):(d.UI.showPreviewSpinner(!1),f.enable())}var f={disable:function(){e("#macro-browser-preview-link").attr("disabled",!0).addClass("disabled")},enable:function(){e("#macro-browser-preview-link").removeAttr("disabled").removeClass("disabled")}};
return{previewMacro:function(j,g){var k=d;l();if(!d.Editor.processRequiredParameters())return b.trigger("analytics",{name:"macro-browser.missing-params-error"}),b.log("previewMacro: missing required params"),!1;"object"!==typeof g&&(g=d.Editor.getMacroDefinitionFromForm(j));var a=g.params,f=n.getFunction(j.macroName,"updateMacroParametersForPreview");f&&(a=f(a));a[""]&&delete a[""];k={contentId:m.getContentId(),macroName:j.macroName,params:a,body:k.getMacroBody(),defaultParameterValue:g.defaultParameterValue,
successCallback:function(a){var c=h().find("iframe")[0],c=c.contentDocument||c.contentWindow.document;c.write(a);c.close();e(c).ready(function(){b.trigger("macro-browser.preview-ready")});e("div.error span.error",c).length&&b.logError("Error rendering macro definition : ");setTimeout(function(){i(!1)},1E3)},errorCallback:function(a){b.logError(a);i(!1)}};a=b.params.staticResourceUrlPrefix+"/blank.html";h().html('<iframe src="'+a+'" frameborder="0" name="macro-browser-preview-frame" id="macro-preview-iframe"></iframe>');
i(!0);d.Rest.fetchMacroPreviewData(k)},removePreviewContainer:l}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-preview");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-model.js' */
define("confluence-macro-browser/macro-browser-model",["ajs"],function(h){return function(f){function g(a){a.title==f.Utils.makeDefaultKey(a.pluginKey,a.macroName,"label")&&(a.title=a.macroName.charAt(0).toUpperCase()+a.macroName.substring(1).replace(/-/g," "));a.description==f.Utils.makeDefaultKey(a.pluginKey,a.macroName,"desc")&&(a.description="");a.id="macro-"+(a.alternateId||a.macroName);var b=[a.macroName,a.title].concat(a.aliases||[]);a.keywordsNoDesc=b.join(",");var d=a.description&&a.description.replace(/,/g,
" ")||"";b.push(d);a.keywords=b.join(",");return a}return{loadMacros:function(a){if(a){var b=f;b.metadataList=[];b.aliasMap={};for(var d=0,i=a.length;d<i;d++){var c=a[d],c=g(c);if(c.aliases)for(var e=0,j=c.aliases.length;e<j;e++)c.aliases[e]=c.aliases[e].toLowerCase(),b.aliasMap[c.aliases[e]]=c.macroName.toLowerCase();b.metadataList.push(c)}b.metadataList.sort(function(a,b){return a.title.toLowerCase()>b.title.toLowerCase()?1:-1})}else h.log("AJS.MacroBrowser.loadModel - no macro data, aborting")},
transformMetaDataDefault:g}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-model");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-rest.js' */
define("confluence-macro-browser/macro-browser-rest",["jquery","ajs","wrm","confluence/api/constants"],function(b,f,g,d){function c(a){f.logError(a)}var h=g.data.claim("confluence.macro.metadata.provider:macro-browser-metadata-resources.macro-meta-client-cache-key");return{loadMacroMetadata:function(a){a.data=a.data||{};a.data.macroMetadataClientCacheKey=h;return b.ajax({type:"GET",cache:!0,timeout:a.timeout||3E4,dataType:"json",url:(a.context||d.CONTEXT_PATH)+"/plugins/macrobrowser/browse-macros.action",
data:a.data,success:a.successCallback,error:a.errorCallback||c}).promise()},fetchMacroMetadataDetails:function(a){var e={id:a.id};a.alternateId&&(e.alternateId=a.alternateId);b.ajax({type:"GET",dataType:"json",url:(a.context||d.CONTEXT_PATH)+"/plugins/macrobrowser/browse-macros-details.action",data:e,success:a.successCallback,error:a.errorCallback||c})},fetchMacroPreviewData:function(a){if(!a.contentId||!a.macroName)return(a.errorCallback||c)("invalid parameters");b.ajax({type:"POST",contentType:"application/json; charset=utf-8",
url:(a.context||d.CONTEXT_PATH)+"/rest/tinymce/1/macro/preview",data:b.toJSON({contentId:a.contentId,macro:{name:a.macroName,body:a.body,params:a.params,defaultParameterValue:a.defaultParameterValue}}),dataType:"html",success:a.successCallback,error:a.errorCallback||c})}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-rest");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-UI.js' */
define("confluence-macro-browser/macro-browser-UI",["jquery","ajs","confluence/legacy","confluence/api/constants"],function(d,e,j,o){return function(k){function m(a){return d(j.Templates.MacroBrowser.macroSummaryList({category:a}))}function p(a,b){var g=d(j.Templates.MacroBrowser.macroSummaryItem());a.icon?g.prepend("<img src='"+((a.icon.relative?e.params.staticResourceUrlPrefix:"")+a.icon.location)+"' alt='icon' width='"+a.icon.width+"' height='"+a.icon.height+"' title='"+a.title+"'/>"):g.prepend("<span class='macro-icon-holder icon-"+
a.macroName+"'></span>");d(".macro-title",g).text(a.title);d(".macro-desc",g).prepend(a.description);if("gadget"==a.macroName){var f=a.gadgetUrl;f&&(f.match("^https?://.*")||(f=o.CONTEXT_PATH+"/"+f),d(".macro-title",g).after(j.Templates.MacroBrowser.gadgetLink({url:f})))}g.click(function(d){b(d,a)});return g}function q(a,b){var d;d=b?j.Templates.Dialog.helpLink(b):j.Templates.MacroBrowser.helpLink();a.getPage(a.curpage).element.find(".dialog-title").prepend(d)}return{createDialog:function(a){for(var b=
a.macros,g=a.onClickMacroSummary,f={all:m("all")},h=0,r=b.length;h<r;h++){var i=b[h];if(i.hidden)if(k.isHiddenMacroShown(i))i.categories.push("hidden-macros");else continue;f.all.append(p(i,g).attr("id",i.id));for(var n=0,s=i.categories.length;n<s;n++){var l=i.categories[n];f[l]=f[l]||m(l);f[l].append(p(i,g).attr("id",l+"-"+i.id))}}var c=e.ConfluenceDialog({width:a.width||865,height:a.height||530,id:"macro-browser-dialog",onSubmit:a.onSubmit,onCancel:a.onCancel});c.popup.element.on("keydown",".aui-button",
function(a){a.stopPropagation()});c.getPage(0).element.attr("id","select-macro-page");c.addHeader(a.title);c.addPanel("All",f.all,"all","category-button-all").getPanel(0).setPadding(0);b=0;for(g=a.categories.length;b<g;b++)h=a.categories[b],c.addPanel(h.displayName,f[h.name]||m(h.name),h.name,"category-button-"+h.name).getPanel(b+1).setPadding(0);c.addCancel("Cancel",a.onCancel);q(c);"VANILLA"==e.Meta.get("confluence-flavour")?c.addHelpText("<a href='{0}' id='marketplace-link'><span class='icon icon-marketplace'></span>{1}</a>",
[o.CONTEXT_PATH+"/plugins/servlet/upm/marketplace/featured?category=Macros&source=macro_browser","Find more macros..."]):c.addHelpText("Hint: type \u0022\u003cstrong\u003e{\u003c/strong\u003e\u0022 in the Editor to insert macros on the page.");f=d(j.Templates.MacroBrowser.insertMacroPanel());f.find("form").submit(function(a){k.complete();a.stopPropagation();return!1});d("#macro-browser-preview-link",f).click(function(a){d(this).prop("disabled")||k.previewMacro(c.activeMetadata);a.stopPropagation();return!1});c.addPage().addPanel("X",
f,"macro-input-panel").addLink("Select macro",function(a){a.prevPage();a.searcher.focus()},"dialog-back-link").addButton("insert.name",function(){k.complete()},"ok").addCancel("Cancel",function(){return a.onCancel()}).getPanel(0).setPadding(0);c.getPage(1).element.attr("id","macro-details-page");d("#macro-browser-dialog .dialog-button-panel .ok").before("<span id='save-warning-span' class='hidden'></span>");c.searcher=j.DomFilterField({items:"#macro-browser-dialog .dialog-panel-body #category-all .macro-list-item",
formId:"macro-browser-search-form",inputId:"macro-browser-search",searcher:function(a,b){var e=null;if(""!=b){c.getCurrentPanel()!=c.getPanel(0)&&c.gotoPanel(0);var f=k.searchSummaries(b),e={};d.each(f,function(){e[this.id]=this})}a.each(function(){!e||this.id in e?d(this).show():d(this).hide()})},submitCallback:function(a,b){""!=b&&1===a.length&&a.click()}});c.page[0].header.append(c.searcher.form);c.page[0].ontabchange=function(a){a!=c.getPanel(0,0)&&c.searcher.reset()};f=d(j.Templates.MacroBrowser.missingUserMacroMetadataPanel({showAdminMessage:e.Meta.getBoolean("is-admin")}));
c.addPage().addPanel("No macro metadata",f,"missing-metadata-panel").addLink("Back",function(a){a.gotoPage(0);a.searcher.focus()},"dialog-back-link").addCancel("Cancel",function(){return a.onCancel()});c.gotoPage(2);c.addHeader("No macro metadata");c.gotoPanel(0,0);c.ready=!0;return c},showBrowserSpinner:function(a){var b=d("#macro-browser-dialog");a?b.spin("large"):b.spinStop()},
showPreviewSpinner:function(a){var b=d("#macro-browser-preview");a?b.spin("large"):b.spinStop()},updateButtonText:function(a){var b=d("#macro-browser-dialog .dialog-button-panel .ok");"edit"==a?b.text("Save"):b.text("Insert")},enableSaveButton:function(a){d("#macro-browser-dialog .dialog-button-panel .ok").prop("disabled",!a)},focusOnMacroDetailsFirstInput:function(){var a=d("#macro-insert-container").find(".macro-input-fields :input:visible:not(button,.select2-offscreen)").first();
if(a.length){if(a.hasClass("select2-input")){var b=a.closest(".select2-container").parent().find(".select2-offscreen");if("function"!==typeof b.select2){e.log("select2Hidden is not a select2 hidden input, skipping focus attempt.");return}b.select2("open");b.select2("close")}else a.focus();!k.selectedMacroDefinition&&""!==a.val()&&a.select()}else e.log("No input to focus")},setHelpLink:q}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-UI");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser.js' */
define("confluence-macro-browser/macro-browser","window jquery ajs confluence-macro-browser/macro-browser-utils confluence-macro-browser/macro-browser-editor confluence-macro-browser/macro-browser-fields confluence-macro-browser/macro-browser-model confluence-macro-browser/macro-browser-preview confluence-macro-browser/macro-browser-rest confluence-macro-browser/macro-browser-UI confluence-macro-browser/macro-browser-smartfields confluence-macro-browser/macro-parameter-serializer confluence/macro-js-overrides underscore".split(" "),
function(k,h,e,r,s,l,t,u,v,w,x,y,i){var a={},l=l(a);a.ParameterFields=l.ParameterFields;a.Field=l.Field;x(a,a.ParameterFields);a.Utils=r;a.Editor=s(a);a.Preview=u(a);a.Model=t(a);a.Rest=v;a.UI=w(a);var f,g=function(b,c){var d={id:b.macroName,successCallback:function(b){if(b&&b.details)b.details=a.Model.transformMetaDataDefault(b.details);a.Editor.loadMacroInBrowser(b.details,c);g.displayDetails();a.Preview.previewMacro(b.details)},errorCallback:function(){e.trigger("analytics",{name:"macro-browser.fetch-metadata-error"});
k.alert("There has been an error loading the macro browser. Please try again or see your system administrator.");g.displayDetails()}};if(b.alternateId)d.alternateId=b.alternateId;g.setUI(c,b.title);a.Rest.fetchMacroMetadataDetails(d)};g.setUI=function(b,c){var d=b=="edit"?a.editTitle:a.insertTitle;h("#macro-insert-container").hide();a.UI.updateButtonText(b);a.UI.enableSaveButton(false);a.dialog.gotoPage(1).addHeader(d.replace(/\{0\}/,c));a.dialog.show();a.UI.showBrowserSpinner(true)};g.displayDetails=function(){a.UI.showBrowserSpinner(false);a.UI.enableSaveButton(false);
h("#macro-insert-container").show();a.UI.focusOnMacroDetailsFirstInput()};a.reset=function(){f&&f.resolve&&f.resolve();f=null;a.initMacroBrowserAfterRequest=null;a.initData=null;a.hasInit=false;a.metadataList=[];a.aliasMap={};a.fields={};i.reset();a.Macros=i.elements()};a.getMacroJsOverride=i.get;a.setMacroJsOverride=i.put;a.Macros=i.elements();a.hasInit=false;a.metadataList=[];a.aliasMap={};a.fields={};a.processRequiredParameters=function(){return a.Editor.processRequiredParameters()};a.paramChanged=
function(){a.Editor.processRequiredParameters()};a.loadMacroInBrowser=function(b,c){a.Editor.loadMacroInBrowser(b,c)};a.getMacroDefinitionFromForm=function(b){a.Editor.getMacroDefinitionFromForm(b)};a.getMacroParametersFromForm=function(b){a.Editor.getMacroParametersFromForm(b)};a.previewMacro=function(b){a.Preview.previewMacro(b)};a.previewOnload=function(b){var c=i.getFunction(a.dialog.activeMetadata.macroName,"postPreview");c&&c(h("#macro-preview-iframe")[0],a.dialog.activeMetadata);e.Editor.disableFrame(b);
h(b).click(function(a){if(a.target.tagName.toLowerCase()==="a"){if((a=h(a.target).attr("href"))&&a.indexOf("#")!=0&&a.indexOf(k.location)==-1){a=k.open(a,"_blank");a.focus();a.opener=null}return false}})};a.getMacroMetadata=function(b){for(var c=0,d=a.metadataList.length;c<d;c++){var j=a.metadataList[c];if(j.macroName==b)return j}return null};a.getMetadataPromise=function(){return f};a.open=function(b){if(!b){b={};e.log("No settings to open the macro browser.")}var c=b.selectedMacro;!c&&b.presetMacroMetadata&&
(c={name:b.presetMacroMetadata.macroName});if(c&&c.name){var d=i.getFunction(c.name,"opener");if(d){d(c);return}}if(!a.hasInit){e.debug("init macro browser");a.UI.showBrowserSpinner(true);if(a.initData!==null&&h.isEmptyObject(a.initData)){e.trigger("analytics",{name:"macro-browser.init-reattempt"});e.logError("Macro browser preload failed. Trying again...");a.initMacroBrowserAfterRequest=b;a.preLoadMacro();return}if(a.initData)a.initBrowser();else{e.trigger("analytics",{name:"macro-browser.init-overlap"});
e.debug("Waiting for macro browser preloading...");a.initMacroBrowserAfterRequest=b;return}}a.openMacroBrowser(b)};a.openMacroBrowser=function(b){a.settings=b;a.selectedMacroDefinition=b.selectedMacro;var c=a.selectedMacroDefinition&&a.selectedMacroDefinition.name||b.presetMacroName;if(b.presetMacroName)b.presetMacroMetadata=a.getMacroMetadata(b.presetMacroName);var d=b.presetMacroMetadata;if(!d){var j=b.selectedMacro;if(j){var c=j.name.toLowerCase(),c=a.aliasMap[c]||c,f=i.getFunction(c,"updateSelectedMacro"),
g=i.getFunction(c,"getMacroDetailsFromSelectedMacro");f&&f(j);g&&(d=g(a.metadataList,j));d||(d=a.getMacroMetadata(c))}}j=h("#macro-browser-dialog").find("button.back");if(d){e.debug("Open macro browser to edit macro: "+d.macroName);j.hide();a.replicateSelectMacro(d,b.mode||"edit")}else if(c){j.show();a.dialog.overrideLastTab();a.dialog.gotoPage(2);a.showBrowserDialog()}else{j.show();if(b.selectedCategory){c=h("#select-macro-page .dialog-page-menu button").index(h("#category-button-"+b.selectedCategory));
c<0&&(c=0);a.dialog.overrideLastTab();a.dialog.gotoPanel(0,c)}else a.dialog.gotoPage(0);a.showBrowserDialog();a.dialog.searcher.focusAndSearch(b.searchText)}};a.showBrowserDialog=function(){a.dialog.show();a.UI.showBrowserSpinner(false)};a.complete=function(){if(h("#macro-browser-dialog .dialog-button-panel .ok").is(":visible:not(:disabled)")){var b=a.dialog.activeMetadata,c=i.getFunction(b.macroName,"manipulateMarkup");c&&c(b);b=a.Editor.getMacroDefinitionFromForm(b);a.close();if(a.settings.onComplete)a.settings.onComplete(b)}};
a.cancel=function(){a.close();if(typeof a.settings.onCancel==="function")a.settings.onCancel();return false};a.close=function(){this.unknownParams={};this.fields={};a.Preview.removePreviewContainer();this.dialog.hide()};a.replicateSelectMacro=function(a,c){g(a,c)};a.initBrowser=function(){var b=a.initData;if(!b.categories||!a.metadataList.length){e.trigger("analytics",{name:"macro-browser.init-browser-error"});k.alert("There has been an error loading the macro browser. Please try again or see your system administrator.");a.UI.showBrowserSpinner(false);
return false}a.editTitle=b.editTitle;a.insertTitle=b.insertTitle;var c;b.categories=h.map(b.categories,function(a){if(a.name=="hidden-macros"){c=a;return null}return a});b.categories.sort(function(a,b){return a.displayName.toLowerCase()>b.displayName.toLowerCase()?1:-1});c&&e.params.showHiddenUserMacros&&b.categories.push(c);a.dialog=a.UI.createDialog({title:b.title,categories:b.categories,macros:a.metadataList,onClickMacroSummary:function(a,b){a.preventDefault();g(b,"insert")},onSubmit:a.complete,
onCancel:a.cancel});return a.hasInit=true};a.searchSummaries=function(b,c){var c=h.extend({splitRegex:/[\s-]+/},c),d;d=a.metadataList;var e,f,i,g,m,k,l,p,n,o,q;if(b){e=c&&c.keywordsField||"keywords";f=c&&c.ignoreForCamelCase?"i":"";i=c&&c.matchBoundary?"\\b":"";g=c&&c.splitRegex||/\s+/;g=b.split(g);m=[];g.forEach(function(a){k=[RegExp(i+a,"i")];if(/^([A-Z][a-z]*) {2,}$/.test(this)){l=this.replace(/([A-Z][a-z]*)/g,"\\b$1[^,]*");k.push(RegExp(l,f))}m.push(k)});p=[];d.forEach(function(a){for(n=0;n<m.length;n++){q=
false;for(o=0;o<m[n].length;o++)if(m[n][o].test(a[e])){q=true;break}if(!q)return}p.push(a)});d=p}else d=[];return d};a.getMacroBody=function(){var b="";if(h("#macro-insert-container .macro-body-div textarea").length)b=h("#macro-insert-container .macro-body-div textarea").val();else if(a.selectedMacroDefinition){if(a.selectedMacroDefinition.body)b=a.selectedMacroDefinition.body}else if(a.dialog.activeMetadata)b=a.dialog.activeMetadata.formDetails.body.content;return b};a.getMacroParams=function(a){return y.deserialize(a.getAttribute("data-macro-parameters"))};
a.getMacroName=function(a){return!a.hasAttribute("data-macro-name")?void 0:a.getAttribute("data-macro-name")};a.isHiddenMacroShown=function(a){return e.params.showHiddenUserMacros&&a.pluginKey=="_-user-macro-_"};a.hasRequiredParameters=function(a){return a.anyParameterRequired};a.setWhitelist=function(b){a.whitelist=b};a.preLoadMacro=function(){a.initData=null;if(f&&f.state()==="pending")return f;f=a.Rest.loadMacroMetadata({data:a.whitelist?{whitelist:a.whitelist}:{detailed:false},successCallback:function(b){a.initData=
b;a.Model.loadMacros(b.macros);if(a.initMacroBrowserAfterRequest){a.initBrowser();a.openMacroBrowser(a.initMacroBrowserAfterRequest)}},errorCallback:function(b){e.trigger("analytics",{name:"macro-browser.preload-error"});e.logError("Error requesting macro browser metadata:");e.logError(b);a.initData={}}})};return a});require("confluence/module-exporter").exportModuleAsGlobal("confluence-macro-browser/macro-browser","AJS.MacroBrowser");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'soy/macro-browser.soy' */
// This file was automatically generated from macro-browser.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.MacroBrowser.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.MacroBrowser == 'undefined') { Confluence.Templates.MacroBrowser = {}; }


Confluence.Templates.MacroBrowser.macroSummaryList = function(opt_data, opt_ignored) {
  return '<ol id="category-' + soy.$$escapeHtml(opt_data.category) + '" class="macro-list"></ol>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroSummaryList.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroSummaryList';
}


Confluence.Templates.MacroBrowser.macroSummaryItem = function(opt_data, opt_ignored) {
  return '<li class="macro-list-item"><h4 class="macro-title"></h4>' + Confluence.Templates.MacroBrowser.macroDescription({description: ''}) + '</li>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroSummaryItem.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroSummaryItem';
}


Confluence.Templates.MacroBrowser.macroDescription = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="macro-desc">' + ((opt_data.descriptionHtml) ? soy.$$filterNoAutoescape(opt_data.descriptionHtml) : '') + ((opt_data.documentationLink) ? ' <a href="' + soy.$$escapeHtml(opt_data.documentationLink) + '" class="macro-doco-link">' + soy.$$escapeHtml('Documentation') + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroDescription.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroDescription';
}


Confluence.Templates.MacroBrowser.insertMacroPanel = function(opt_data, opt_ignored) {
  return '<div id="macro-insert-container"><input class="macro-name" type="hidden"/><div class="macro-input-fields dialog-panel"><form action="#" class="aui"></form></div><div class="macro-preview-container dialog-panel"><div class="macro-preview-header"><ul class="macro-preview-links"><li><a id="macro-browser-preview-link" class="refresh-link icon icon-refresh" href="#">' + soy.$$escapeHtml('Refresh') + '</a></li></ul><span>' + soy.$$escapeHtml('Preview') + '</span></div><div id="macro-browser-preview" class="macro-preview"></div></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.insertMacroPanel.soyTemplateName = 'Confluence.Templates.MacroBrowser.insertMacroPanel';
}


Confluence.Templates.MacroBrowser.missingUserMacroMetadataPanel = function(opt_data, opt_ignored) {
  return '<div id="macro-missing-metadata-container"><p>' + 'There is no metadata configured for this macro which means no configuration screen can be presented here.' + '</p>' + ((opt_data.showAdminMessage) ? '<p>' + AJS.format('If this is a user macro then you can add metadata to the template using the \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3eUser Macro Administration\x3c/a\x3e console.',"" + '/admin/usermacros.action') + '</p>' : '<p>' + 'You must contact an administrator to configure metadata for this macro.' + '</p>') + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.missingUserMacroMetadataPanel.soyTemplateName = 'Confluence.Templates.MacroBrowser.missingUserMacroMetadataPanel';
}


Confluence.Templates.MacroBrowser.macroParameter = function(opt_data, opt_ignored) {
  return '<div class="macro-param-div"><label></label><input type="text" class="text"/></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroParameter.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroParameter';
}


Confluence.Templates.MacroBrowser.macroParameterBoolean = function(opt_data, opt_ignored) {
  return '<div class="checkbox macro-param-div boolean-param"><input class="checkbox" type="checkbox" value="true"/><label></label></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroParameterBoolean.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroParameterBoolean';
}


Confluence.Templates.MacroBrowser.macroParameterSelect = function(opt_data, opt_ignored) {
  return '<div class="macro-param-div"><label></label><select class="select"></select></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroParameterSelect.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroParameterSelect';
}


Confluence.Templates.MacroBrowser.macroParameterHidden = function(opt_data, opt_ignored) {
  return '<div class="macro-param-div"><input type="hidden"/></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroParameterHidden.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroParameterHidden';
}


Confluence.Templates.MacroBrowser.macroParameterDesc = function(opt_data, opt_ignored) {
  return '<div class="macro-param-desc">' + soy.$$filterNoAutoescape(opt_data.description) + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroParameterDesc.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroParameterDesc';
}


Confluence.Templates.MacroBrowser.macroBody = function(opt_data, opt_ignored) {
  return '<div class="macro-body-div"><label>' + soy.$$escapeHtml('Body text') + '</label><textarea class="monospaceInput textarea" type="text" rows="10"></textarea></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroBody.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroBody';
}


Confluence.Templates.MacroBrowser.helpLink = function(opt_data, opt_ignored) {
  return '' + Confluence.Templates.Dialog.helpLink({href: "https://docs.atlassian.com/confluence/docs-85/Macros"});
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.helpLink.soyTemplateName = 'Confluence.Templates.MacroBrowser.helpLink';
}


Confluence.Templates.MacroBrowser.gadgetLink = function(opt_data, opt_ignored) {
  return '<a class=\'macro-uri\' href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.url) + '" target=\'_blank\'>' + soy.$$escapeHtml('Gadget URL') + '</a>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.gadgetLink.soyTemplateName = 'Confluence.Templates.MacroBrowser.gadgetLink';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-preload.js' */
define("confluence-macro-browser/macro-browser-preload",["jquery","ajs","window"],function(a,b,c){return{macroBrowserPreload:function(){a(c).bind("render-content-loaded",function(c,d){a("#macro-preview-iframe").contents().find("body")[0]==d&&b.MacroBrowser.previewOnload(d)});b.MacroBrowser.preLoadMacro()}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-preload",function(a){require("ajs").toInit(a.macroBrowserPreload)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:attachments-insert-utils-resources', location = 'utils/attachments-insert-utils.js' */
define("confluence-editor/utils/attachments-insert-utils",["underscore","confluence/meta","jquery"],function(c,b,d){return{insertFilePlaceholder:function(a,e,f){var g=require("tinymce");a.height="comment"===b.get("content-type")?"150":"250";a.ownerId&&a.ownerId===b.get("content-id")&&(delete a.page,delete a.space,delete a.date);a=c.omit(c.pick(a,"name","page","space","date","height"),function(a){return!a});a={contentId:b.get("content-id")||"0",macro:{name:"view-file",params:a}};g.confluence.MacroUtils.insertMacro(a,
e).done(function(a){f&&d(a).click()})}}});require("confluence/module-exporter").safeRequire("confluence-editor/utils/attachments-insert-utils");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:files-upload-analytics', location = 'js/analytics/files-upload-analytics.js' */
define("confluence-drag-and-drop/analytics/files-upload-analytics",["ajs","underscore"],function(d,e){return{triggerEvent:function(b,a,c){a&&a.length&&(a={multiple:1<a.length,number:a.length,isAllImage:void 0===c?this._isAllImages(a):c},d.trigger("analyticsEvent",{name:b,data:a}))},_isAllImages:function(b){return e.every(b,function(a){return a.nativeFile&&a.nativeFile.type&&0===a.nativeFile.type.indexOf("image/")})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-item/file-item.soy' */
// This file was automatically generated from file-item.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.File.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.fileDialogListItem = function(opt_data, opt_ignored) {
  return '<li class="attached-file loading" data-attachment-id="' + soy.$$escapeHtml(opt_data.file.id) + '" data-owner-id="' + soy.$$escapeHtml(opt_data.file.ownerId) + '" data-file-name="' + soy.$$escapeHtml(opt_data.file.fileName) + '"><div class="file-container" title="' + soy.$$escapeHtml(opt_data.tooltip) + '">' + ((opt_data.file.isImage) ? '<img class="thumbnail hidden" src="' + soy.$$escapeHtml(opt_data.file.nonceUrl) + '" ><a href="' + soy.$$escapeHtml(opt_data.file.downloadUrl) + '" class="abs-icon zoom">Zoom</a><p class="hidden image-preview-throbber">&nbsp;</p>' : (opt_data.file.isPreviewable) ? '<span class="thumbnail ' + soy.$$escapeHtml(opt_data.file.iconClass) + '" ><i class="aui-icon size-48 svg-icon ' + soy.$$escapeHtml(opt_data.file.iconAUIClass) + '">File</i></span><a href="' + soy.$$escapeHtml(opt_data.file.downloadUrl) + '" class="abs-icon zoom">Zoom</a><p class="hidden image-preview-throbber">&nbsp;</p>' : '<span class="thumbnail ' + soy.$$escapeHtml(opt_data.file.iconClass) + '" ><i class="aui-icon size-48 svg-icon ' + soy.$$escapeHtml(opt_data.file.iconAUIClass) + '">File</i></span>') + '<i class="abs-icon select">Select</i></div><span class="caption filename" title="' + soy.$$escapeHtml(opt_data.file.fileName) + '">' + soy.$$filterNoAutoescape(opt_data.highlightedImageNameContent) + '</span>' + ((opt_data.highlightedParentTitleContent) ? '<span class="caption owner-title" title="' + soy.$$escapeHtml(opt_data.file.parentTitle) + '">' + soy.$$filterNoAutoescape(opt_data.highlightedParentTitleContent) + '</span>' : '') + '</li>';
};
if (goog.DEBUG) {
  Confluence.Templates.File.fileDialogListItem.soyTemplateName = 'Confluence.Templates.File.fileDialogListItem';
}


Confluence.Templates.File.fileDialogListItemPlaceHolder = function(opt_data, opt_ignored) {
  return '<li class="attached-file loading" data-attachment-id="' + soy.$$escapeHtml(opt_data.file.id) + '" data-file-name="' + soy.$$escapeHtml(opt_data.file.fileName) + '"><div class="file-container" title="' + soy.$$escapeHtml(opt_data.file.fileName) + '">' + ((opt_data.file.isImage && opt_data.file.url) ? '<img class="thumbnail" src="' + soy.$$escapeHtml(opt_data.file.url) + '">' : '<span class="thumbnail"><i class="aui-icon size-48 svg-icon ' + soy.$$escapeHtml(opt_data.file.iconAUIClass) + '">File</i></span>') + '<div id="docs-progress-bar-' + soy.$$escapeHtml(opt_data.file.fileId) + '" class="aui-progress-indicator"><span class="aui-progress-indicator-value"></span></div><div class="overlay"></div><i class="aui-icon aui-icon-small aui-iconfont-close-dialog abs-icon cancel">Cancel</i></div><span class="caption filename" title="' + soy.$$escapeHtml(opt_data.file.fileName) + '">' + soy.$$escapeHtml(opt_data.file.fileName) + '</span><span class="caption owner-title hidden" title=""></span></li>';
};
if (goog.DEBUG) {
  Confluence.Templates.File.fileDialogListItemPlaceHolder.soyTemplateName = 'Confluence.Templates.File.fileDialogListItemPlaceHolder';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-item/file-item-model.js' */
define("confluence-editor/files/file-item/file-item-model",["backbone","confluence/legacy","confluence/api/constants","ajs"],function(e,c,f,d){return e.Model.extend({defaults:{id:-1,ownerId:-1,fileName:"",nonceUrl:"",isImage:!1,isFilePlaceHolder:!1,isSelect:!1,thumbnailUrl:"",downloadUrl:""},initialize:function(){var a=this;this._findDownloadUrl();this._findThumbnailUrl();this.findMetadata();this.findVersion();this.findContainer();this.set("fileName",this.getFileName());this.set("nonceUrl",this.getNonceUrl());
this.set("isImage",this.isImage());this.set("isPreviewable",this.isPreviewable());this.get("isFilePlaceHolder")&&this.set("id",this.get("fileId"));this.listenTo(this,"change:link",function(){a.set("nonceUrl",a.getNonceUrl());a._findDownloadUrl()});this.set("iconAUIClass",this._parseFileNameToAuiIconClass(this.get("fileName")))},isImage:function(){return this.get("isImage")?!0:!!this.get("thumbnailUrl")},isPreviewable:function(){return"application/pdf"===(this.get("niceType")||"").toLocaleLowerCase()||
this.isImage()},getFileName:function(){return this.get("fileName")||this.get("title")||""},getDestinationUrl:function(){return d.REST.wikiLink(this.attributes).destination},getNonceUrl:function(){var a=this.get("thumbnailUrl");if(0<=a.indexOf("modificationDate"))return a;var b=this.get("lastModifiedDate"),b=b?b.date:+new Date,b=encodeURIComponent(b);a&&(a+=(a.indexOf("?")+1?"&":"?")+"nonce="+b);return a},getRelativeUrl:function(a){var b=a;if(!a)return a;0===a.indexOf(c.getBaseUrl())&&(b=a.replace(c.getBaseUrl(),
""));return f.CONTEXT_PATH+b},_findThumbnailUrl:function(){var a=this.get("_links");!this.get("thumbnailUrl")&&(a&&a.thumbnail)&&this.set("thumbnailUrl",this.getRelativeUrl(a.thumbnail))},_findDownloadUrl:function(){var a=this.get("_links");!this.get("downloadUrl")&&a&&this.set("downloadUrl",this.getRelativeUrl(a.download))},findMetadata:function(){var a=this.get("metadata");!this.get("contentType")&&a&&(this.set("niceType",a.mediaType),this.set("contentType",a.mediaType))},findVersion:function(){var a=
this.get("version");!this.get("versionNumber")&&a&&this.set("versionNumber",a.number)},findContainer:function(){var a=this.get("container");a&&(-1===this.get("ownerId")&&this.set("ownerId",a.id),this.get("parentTitle")||this.set("parentTitle",a.title))},_getFileExtension:function(a){return a.substr(a.lastIndexOf(".")+1)},_parseFileNameToAuiIconClass:function(a){return d.Confluence.FileTypesUtils.getAUIIconFromExt(this._getFileExtension(a))}})});
require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/file-item/file-item-model","Confluence.Editor.FileDialog.FileItemModel");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-item/file-item-view.js' */
define("confluence-editor/files/file-item/file-item-view","backbone confluence/templates confluence/highlighter raphael underscore wrm jquery".split(" "),function(f,g,h,i,d,j,c){return f.View.extend({template:g.File.fileDialogListItem,model:null,initialize:function(a){var b=this;this.eventListener=a.eventListener;this.model=a.model;this.showContainerInfo=a.showContainerInfo;this.highlighter=a.highlighter;this.listenTo(this.model,"change:isSelect",function(){b.$el.toggleClass("selected",b.model.get("isSelect"))})},
render:function(){var a=this.highlighter||new h,b=this.model.get("space"),e=this.model.getFileName(),a={file:this.model.attributes,tooltip:this.showContainerInfo&&b?e+" ("+b.name+")":e,highlightedImageNameContent:a.highlight(e),highlightedParentTitleContent:this.showContainerInfo?a.highlight(this.model.get("container").title):null};this.$el=c(this.template(a));this.el=this.$el[0];this.delegateEvents();this.$el.find(".file-container").tooltip({aria:true});this.$el.attr("data-destination",this.model.getDestinationUrl());
this.model.get("isImage")?this._renderLoadingSpinner():this.$el.removeClass("loading");this.model.get("isPreviewable")&&this._renderPreviewButton();return this},_renderPreviewButton:function(){this.$(".zoom").on("click",d.bind(function(a){a.preventDefault();a={src:this.model.get("downloadUrl"),thumbnail:this.model.get("nonceUrl")||this.model.get("downloadUrl"),type:this.model.get("contentType"),rank:0,title:this.model.getFileName(),id:this.model.get("id"),ownerId:this.model.get("ownerId"),version:this.model.get("versionNumber")};
this._setupAndShowPreviewer(a)},this))},_setupAndShowPreviewer:function(a){var b=d.bind(function(a,b){this.loader=require("cp/confluence/file-preview-loader");var c=this.loader.setupPreviewForSingleFile([a],b);c.on("fv.open",b.openPreviewCallback);c.on("fv.close",b.closePreviewCallback);c.open();c.showFileWhere()},this);if(!this.dfd)this.dfd=j.require("wr!com.atlassian.confluence.plugins.confluence-previews:confluence-previews-resources");this.dfd.then(d.partial(b,a,{viewMode:"simple",openPreviewCallback:function(){c("#insert-image-dialog").hide();
c(".aui-blanket").hide()},closePreviewCallback:function(){c("#insert-image-dialog").show();c(".aui-blanket").show()}}))},_renderLoadingSpinner:function(){var a=this,b=this.$el.find(".image-preview-throbber").removeClass("hidden"),c=i.spinner(b[0],8,"#666"),d=this.$el.find("img").load(function(){c();b.remove();d.removeClass("hidden");a.$el.removeClass("loading")})}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/file-item/file-item-view","Confluence.Editor.FileDialog.FileItemView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-item/file-placeholder-view.js' */
define("confluence-editor/files/file-item/file-placeholder-view",["backbone","confluence/templates","underscore","ajs","jquery"],function(b,d,e,f,g){return b.View.extend({model:null,template:d.File.fileDialogListItemPlaceHolder,initialize:function(a){this.model=a.model;this.eventListener=a.eventListener;this.eventListener.on("file.placeholder.process",e.bind(this._setUploadInProgress,this))},events:{"click .cancel":"_cancelUpload"},render:function(){this.$el=g(this.template({file:this.model.attributes}));
this.el=this.$el[0];this.delegateEvents();return this},_setUploadInProgress:function(a,b){var c=this.$el.find("#docs-progress-bar-"+b||"");c.length&&(1===a&&this.$(".cancel").hide(),c.show(),f.progressBars.update(c,a))},_cancelUpload:function(){this.eventListener.trigger("uploadingfile.cancelled",this.model.get("fileId"))}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/file-item/file-placeholder-view","Confluence.Editor.FileDialog.FilePlaceHolderView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-list/file-list-collection.js' */
define("confluence-editor/files/file-list/file-list-collection",["backbone","confluence-editor/files/file-item/file-item-model","underscore"],function(c,d,e){return c.Collection.extend({model:d,clearSelection:function(){this.each(function(a){a.get("isSelect")&&a.set("isSelect",!1)});this.trigger("clear.selection")},getAllSelectItems:function(){return this.filter(function(a){return a.get("isSelect")})},setSelection:function(a){e.each(a,function(a){return a.set("isSelect",!0)})},resetFiles:function(a){this.reset();
for(var b=0;b<a.length;b++)this.addFile(a[b])},addFile:function(a){a=this.add(a);this.trigger("add-file",a.at(a.length-1))},removeFile:function(a){this.remove(a);this.trigger("remove-file",a)},replaceFile:function(a,b){this.remove(a);this.add(b);this.trigger("replace-file",a,b)}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/file-list/file-list-collection","Confluence.Editor.FileDialog.FileListCollection");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-list/file-list-view.js' */
define("confluence-editor/files/file-list/file-list-view","backbone confluence-editor/files/file-item/file-item-view confluence-editor/files/file-item/file-item-model confluence-editor/files/file-item/file-placeholder-view confluence/api/constants jquery".split(" "),function(f,g,h,i,j,c){return f.View.extend({eventListener:null,events:{click:"_clearSelection","click li.attached-file":"_clickItem","dblclick li.attached-file":"_doubleClickItem"},initialize:function(a){var b=this;this.collection=a.collection;
if(a.eventListener){this.eventListener=a.eventListener;this.listenTo(this.eventListener,"uploadingfile.completed",this._addUploadedFile);this.listenTo(this.eventListener,"uploadingfile.cancelled",this._cancelUploadingFile)}this.listenTo(this.collection,"reset",this._clearFileList);this.listenTo(this.collection,"add-file",this._renderNewItem);this.listenTo(this.collection,"remove-file",this._removeItem);this.listenTo(this.collection,"replace-file",this._replaceItem);this.listenTo(this.collection,"change:isSelect",
function(){this.context.setSelectItems(this.collection.getAllSelectItems())});this.listenTo(this.collection,"change:link",function(a){b.collection.removeFile(a);b.collection.addFile(a)});this.updateDialogContext(a.context);this.updatePanelContext(a.panelContext)},_addUploadedFile:function(a,b){var d=this;c.get(j.CONTEXT_PATH+"/rest/api/content/"+b+"?expand=version,container,space").done(function(b){var b=new h(b),c=d.collection.get(a);c||(c=d.collection.findWhere({fileName:b.get("fileName")}));c?
d.collection.replaceFile(c,b):d.collection.addFile(b)})},_cancelUploadingFile:function(a){(a=this.collection.get(a))&&(a.get("previousUploadedFile")?this.collection.replaceFile(a,a.get("previousUploadedFile")):this.collection.removeFile(a))},render:function(){return this},resetFileList:function(a,b){b=b||{};this.$el.find(".loading-message").addClass("hidden");this.$el.find(".no-files").remove();this.collection.resetFiles(a);this.collection.length===0&&this.$fileList.before(c("<p></p>").addClass("no-files").text(this.noFileMessage));
b.shouldClearSelection&&this.collection.clearSelection();this._checkError(b.errors);this.$el.sizeToFit()},_getViewFromModel:function(a){return a.get("isFilePlaceHolder")?(new i({model:a,eventListener:this.eventListener})).render():(new g({model:a,showContainerInfo:this.showContainerInfo,highlighter:this.highlighter,eventListener:this.eventListener})).render()},_renderNewItem:function(a){if(this.$fileList&&this.$fileList.length){var b=this._getViewFromModel(a);this.$fileList.prepend(b.el);a.get("isFilePlaceHolder")||
a.set("isSelect",true)}},_removeItem:function(a){if(this.$fileList&&this.$fileList.length)(a=this._getDomElementByFileName(a.get("fileName")))&&a.remove()},_replaceItem:function(a,b){if(this.$fileList&&this.$fileList.length){var c=this._getViewFromModel(b),e=this._getDomElementByFileName(a.get("fileName"));e&&e.length?e.replaceWith(c.el):this.$fileList.prepend(c.el);b.set("isSelect",true)}},_getDomElementByFileName:function(a){var b=null;this.$fileList.find("li").each(function(){var d=c(this);d.attr("data-file-name")===
a&&(b=d)});return b},updatePanelContext:function(a){if(a){this.panelContext=a;this.errors=this.panelContext.errors||[];this.$el=this.fileContainer=this.panelContext.fileContainer;this.el=this.$el[0];this.$fileList=this.$el.find(".file-list");this.delegateEvents();this.noFileMessage=this.panelContext.noFileMessage;this.showContainerInfo=this.panelContext.showContainerInfo;this.highlighter=this.panelContext.highlighter;this.displayErrors=this.panelContext.displayErrors}},updateDialogContext:function(a){if(a){this.context=
a;this.contextOptions=this.context.options}},_checkError:function(a){(a=a||[])&&a.length&&this.displayErrors(a)},_clearSelection:function(a){a=a&&c(a.target);if(!a||!a.hasClass("close-tip")){this.collection.clearSelection();this.$el.find(".current").removeClass("current")}},_clearFileList:function(){this.$fileList&&this.$fileList.empty()},_clickItem:function(a){a.stopPropagation();a.preventDefault();var b=c(a.target);if(!b.closest(".zoom").length){a.isTrigger||this.$fileList.find(".current").removeClass("current");
a=b.closest("li").attr("data-attachment-id");(a=this.collection.get(a))&&!a.get("isFilePlaceHolder")&&a.set("isSelect",!a.get("isSelect"))}},_doubleClickItem:function(a){var a=c(a.target).closest("li"),b=a.attr("data-attachment-id");if((b=this.collection.get(b))&&!b.get("isFilePlaceHolder")){a.click();this.context.insert()}}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/file-list/file-list-view","Confluence.Editor.FileDialog.FileListView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/base-panel/base-panel-view.js' */
define("confluence-editor/files/base-panel/base-panel-view",["backbone","ajs","jquery"],function(b,a,c){return b.View.extend({context:null,cssContainer:"",cssPanel:"",textErrorSearch:"Error searching for attachments from Confluence. The server may be unavailable.",textErrorRetrieving:"Error retrieving attachments from Confluence. The server may be unavailable.",textDefaultErrorMessage:"Could not upload the file to Confluence. The server may be unavailable.",textUploading:"Image uploading...",initialize:function(){},createPanel:function(d){this.context=
d;this.render();var a=this;if(d=this.context.getPanel(this.panelId))d.onselect=function(){a.context.clearSelection();a.focus&&a.focus()}},render:function(){return this},getPanelElement:function(){return c(this.cssPanel,this.context.baseElement)},getContainer:function(){return c(this.cssContainer)},getForm:function(){return c("form",this.getPanelElement())},clearContainer:function(){var a=this.getContainer();a.find(".loading-message").removeClass("hidden");a.find(".warning").addClass("hidden")},clearErrors:function(){this.messenger.clearMessages()},
displayErrors:function(a){this.uploader.displayErrors(a);this.getContainer().sizeToFit()},getNoFileContainer:function(){return this.getPanelElement().find(".no-files")},getFileListContainer:function(){return this.getPanelElement().find("ul.file-list")}})});
require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/base-panel/base-panel-view","Confluence.Editor.FileDialog.BasePanel",function(){var b=require("underscore"),a=require("backbone");require("confluence/legacy").Editor.FileDialog.eventListener=b.extend({},a.Events)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/attachments-panel/attachments-panel.soy' */
// This file was automatically generated from attachments-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.File.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.uploadFileForm = function(opt_data, opt_ignored) {
  return '' + ((opt_data.hasAttachPermission) ? '<div id="upload-attachment">' + ((opt_data.isNonSupportDragDrop) ? '<form action="' + soy.$$escapeHtml("") + '/pages/attachfile.action" method="post" enctype="multipart/form-data">' : '<form>') + '<button id="upload-files-button" class="aui-button upload-files"><span class="file-upload-icon aui-icon aui-icon-small aui-iconfont-upload"></span>&nbsp;&nbsp;' + soy.$$escapeHtml('Upload files') + ((opt_data.isNonSupportDragDrop) ? '<input name="file_0" type="file" class="upfile invisible">' : '') + '</button>' + ((opt_data.isNonSupportDragDrop) ? '<input type="hidden" name="minorEdit_0" value="true" /><input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '" />' : '') + '</form>' + ((opt_data.isNonSupportDragDrop) ? '<div class="upload-in-progress hidden">' + soy.$$escapeHtml('Image uploading...') + '</div>' : '') + '</div>' : '') + ((opt_data.hasAttachPermission) ? '<div class="divider"></div>' : '');
};
if (goog.DEBUG) {
  Confluence.Templates.File.uploadFileForm.soyTemplateName = 'Confluence.Templates.File.uploadFileForm';
}


Confluence.Templates.File.attachedFilesPanel = function(opt_data, opt_ignored) {
  return '<div id="attached-files" class="scroll-wrapper">' + aui.message.warning({title: '', closeable: 'true', content: ''}) + '<div class="loading-message hidden">' + soy.$$escapeHtml('Loading...') + '</div><ul class="file-list"></ul></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.File.attachedFilesPanel.soyTemplateName = 'Confluence.Templates.File.attachedFilesPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/attachments-panel/attachments-panel-view.js' */
define("confluence-editor/files/attachments-panel/attachments-panel-view","confluence-editor/files/file-list/file-list-view confluence-editor/files/file-item/file-item-model confluence-editor/files/file-list/file-list-collection confluence-editor/files/base-panel/base-panel-view confluence/templates confluence/legacy confluence/api/constants ajs confluence/meta underscore window jquery".split(" "),function(n,i,o,j,k,p,l,e,h,m,f,g){return j.extend({id:"attachments",panelId:"",cssPanel:".attachments-panel",
cssContainer:"#attached-files",textNoFileMessage:"There are no files attached to this page.",textPanelTitle:"Attached to this page",initialize:function(a){j.prototype.initialize.call(this);this.eventListener=a.eventListener;this.context=null;this.collection=new o;this.fileListView=new n({collection:this.collection,eventListener:this.eventListener});this.xhrCount=0},render:function(){var a=this;this.eventListener.trigger("AttachmentsPanelView.render",this);this.fileListView.updateDialogContext(this.context);
this.panelId=this.context.addPanel(this.textPanelTitle,this.getPanel(),"attachments-panel");this.el=this.getPanelElement();this.$el=g(this.el);this.delegateEvents();this.fileListView.updatePanelContext({fileContainer:this.getContainer(),noFileMessage:this.textNoFileMessage,showContainerInfo:false,errors:[],displayErrors:function(b){a.uploader.clearErrors();a.uploader.displayErrors(b)}});this.uploader=this.getUploaderController(this.context);this.messenger=this.uploader.getMessageHandler();this.collection.reset();
this._canAttachFiles()?this.refresh({shouldClearSelection:true}):this.refresh({errors:["You\u0027ll need to ask permission to insert files here."],shouldClearSelection:true});return this},getPanel:function(){return k.File.uploadFileForm({isNonSupportDragDrop:!this._hasXhrSupport(),atlToken:h.get("atl-token"),hasAttachPermission:this._canAttachFiles()})+k.File.attachedFilesPanel()},_overideUploaderClientForNonDragDropSupport:function(){var a=this;return{onUploadSuccess:function(b){for(var c=0;c<b.length;c++){var d=
b[c].id,e=a.collection.get(d);e&&a.collection.removeFile(e);g.get(l.CONTEXT_PATH+"/rest/api/content/"+d+"?expand=version,container,space").done(function(b){b=new i(b);a.collection.addFile(b)})}},pack:function(){a.getContainer().sizeToFit()},getDefaultErrorMessage:function(){return a.textDefaultErrorMessage},getDefaultUploadingMessage:function(){return a.textUploading},displayErrors:function(b){this.getMessageHandler().displayMessages(b);a._showErrorIconInMessageBox();this.pack()}}},getUploaderController:function(){return p.AttachmentUploader({baseElement:this.getPanelElement()},
m.bind(this._overideUploaderClientForNonDragDropSupport,this))},refresh:function(a){var b=this,c=a.shouldClearSelection?this.getPanelElement().find(".loading-message"):false,d=this.xhrCount=this.xhrCount+1;e.getJSONWrap({url:this._getUrlREST(),messageHandler:this.messenger,loadingElement:c,errorMessage:this.textErrorRetrieving,successCallback:function(c){if(d===b.xhrCount){a.data=c;b._onSuccessLoadFiles(a)}},errorCallback:m.bind(this._onErrorLoadFiles,this)})},_onSuccessLoadFiles:function(a){this.fileListView.resetFileList(a.data.results,
a)},_onErrorLoadFiles:function(){this._showErrorIconInMessageBox()},_showErrorIconInMessageBox:function(){var a=this.messenger.getMessageContainer().find("ul");a.toggleClass("one-message",a.find("li").length===1)},setUploadInProgress:function(a,b){this.eventListener.trigger("file.placeholder.process",a,b)},attachmentUploaded:function(a,b){this.eventListener.trigger("uploadingfile.completed",a,b)},attachmentUploadingCancelled:function(a){this.eventListener.trigger("uploadingfile.cancelled",a)},_hasXhrSupport:function(){var a,
b;try{a=new XMLHttpRequest;b=!(!a.sendAsBinary&&!a.upload)&&!(g.browser.mozilla&&g.browser.version.indexOf("1.9.1")>-1)}catch(c){b=false}return b},addPreviewImage:function(a){if(f.File&&f.FileReader&&f.FileList&&f.Blob){var b=this;a.isImage=a.nativeFile&&a.nativeFile.type&&this._isImageType(a.nativeFile.type);if(a.isImage&&a.nativeFile.size<5242880){var c=new FileReader;c.onload=function(){b._addFilePlaceHolderToCollection(a,c.result)};c.readAsDataURL(a.nativeFile)}else this._addFilePlaceHolderToCollection(a,
null)}},_addFilePlaceHolderToCollection:function(a,b){var c=null,d=this.collection.findWhere({fileName:a.name});if(d){this.collection.removeFile(d);d.get("isFilePlaceHolder")?d.get("previousUploadedFile")&&(c=d.get("previousUploadedFile")):c=d}c=new i({isFilePlaceHolder:true,fileName:a.name,fileId:a.id,fileNative:a.nativeFile,url:b||"",isImage:a.isImage,niceType:a.isImage?"Image":"",fileType:a.nativeFile.type,thumbnailUrl:b||"",previousUploadedFile:c});this.collection.addFile(c)},_isImageType:function(a){return e.Confluence.FileTypesUtils.isImage(a)},
_canAttachFiles:function(){return h.getBoolean("can-attach-files")},_getUrlREST:function(){var a=parseInt(h.get("attachment-source-content-id"),10);return l.CONTEXT_PATH+"/rest/api/content/"+a+"/child/attachment?expand=version,container,space"},focus:function(){this.collection.clearSelection()}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/attachments-panel/attachments-panel-view","Confluence.Editor.FileDialog.AttachmentsPanelView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/external-panel/external-panel.soy' */
// This file was automatically generated from external-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.File.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.webPanel = function(opt_data, opt_ignored) {
  return '<div class="insert-web-image"><form id="insert-web-image-form" action="#" class="aui"><fieldset class="inline"><div class="web-image-input"><label for="insert-web-image-image-url" id="insert-web-image-image-url-label">' + soy.$$escapeHtml('Image URL:') + '</label><input type="text" class="text image-url" id="insert-web-image-image-url" name="insert-web-image-image-url"></div><input type="submit" class="image-preview aui-button" value="' + soy.$$escapeHtml('Preview') + '"></fieldset></form><p class="faraway image-preview-area"></p><p class="hidden image-preview-error">' + soy.$$escapeHtml('This image couldn\x27t be loaded for preview. Please check the URL.') + '</p><p class="hidden image-preview-throbber">&nbsp;</p></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.File.webPanel.soyTemplateName = 'Confluence.Templates.File.webPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/external-panel/external-panel-view.js' */
define("confluence-editor/files/external-panel/external-panel-view",["confluence-editor/files/base-panel/base-panel-view","confluence/templates","jquery","raphael","ajs"],function(c,e,d,f,g){return c.extend({id:"external",panelId:"",cssPanel:".web-image-panel",cssContainer:".insert-web-image",textPanelTitle:"Images from the web",template:e.File.searchPanel,events:{"submit form":"_submit","keyup input.image-url":"_checkAllowInsert","click input.image-url":"_checkAllowInsert",
"blur input.image-url":"_checkAllowInsert"},initialize:function(){c.prototype.initialize.call(this);this.context=null;this.token=0},render:function(){this.panelId=this.context.addPanel(this.textPanelTitle,this.getPanel(),"web-image-panel");this.container=this.getContainer();this.preview=this.container.find(".image-preview-area");this.throbber=this.container.find(".image-preview-throbber");this.killSpinner=null;this.error=this.container.find(".image-preview-error")},focus:function(){this._getImageInput().focus();
this._checkAllowInsert()},getPanel:function(){this.$el=d(e.File.webPanel());this.el=this.$el[0];this.delegateEvents();return this.el},_getImageInput:function(){return d("input.image-url",this.context.baseElement)},_submit:function(b){b.preventDefault();b.stopPropagation();var a=this,b=this._getImageInput().val();if("http://"===b)return!1;this.token++;var c=this.token;this.preview.addClass("faraway").html("");this.throbber.removeClass("hidden");this.killSpinner||(this.killSpinner=f.spinner(this.throbber[0],
60,"#666"));this.error.addClass("hidden");d("<img>").load(function(){if(c===a.token){a.killSpinner();a.killSpinner=null;a.throbber.addClass("hidden");a.preview.removeClass("faraway");a._checkAllowInsert()}}).error(function(){if(c===a.token){a.killSpinner();a.killSpinner=null;a.throbber.addClass("hidden");a.error.removeClass("hidden");a._checkAllowInsert()}}).appendTo(this.preview).attr("src",b)},_checkAllowInsert:function(){var b=this.$el.find("input.image-url").val();this.context.setSelectItems(""!==
b&&"http://"!==b?b:[])}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/external-panel/external-panel-view","Confluence.Editor.FileDialog.ExternalPanelView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/search-panel/search-panel.soy' */
// This file was automatically generated from search-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.File.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.searchPanel = function(opt_data, opt_ignored) {
  return '<div class="search-panel-wrapper"><div id="search-image"><form class="aui search-form" id="search-image-form" action="#"><fieldset class="inline"><div class="search-input"><label for="search-image" class="assistive">' + soy.$$escapeHtml('Search') + '</label><input autofocus type="text" class="text search-image-text" size="50" autocomplete="off"></div><select class="search-space select" id="search-image-space-select"><option value="">' + soy.$$escapeHtml('All Spaces') + '</option><option value="' + soy.$$escapeHtml(opt_data.spaceKey) + '">' + soy.$$escapeHtml(opt_data.spaceName) + '</option></select><button type="submit" class="aui-button search-button">' + soy.$$escapeHtml('Search') + '</button></fieldset></form></div><div id="searched-images" class="scroll-wrapper"><div class="loading-message hidden">' + soy.$$escapeHtml('Searching...') + '</div><ul class="file-list"></ul></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.File.searchPanel.soyTemplateName = 'Confluence.Templates.File.searchPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/search-panel/search-panel-view.js' */
define("confluence-editor/files/search-panel/search-panel-view","confluence-editor/files/file-item/file-item-model confluence-editor/files/file-list/file-list-view confluence-editor/files/file-list/file-list-collection confluence-editor/files/base-panel/base-panel-view confluence/templates confluence/meta confluence/defaults confluence/highlighter confluence/api/constants underscore ajs jquery".split(" "),function(n,h,i,d,j,e,k,l,m,f,g,c){return d.extend({id:"search",panelId:"",cssPanel:".search-panel",
cssContainer:"#searched-images",template:j.File.searchPanel,events:{"submit form":"_submit"},initialize:function(){d.prototype.initialize.call(this);this.context=null;this.collection=new i;this.fileListView=new h({collection:this.collection})},getPanel:function(){this.$el=c(this.template({spaceKey:e.get("space-key"),spaceName:e.get("space-name")}));this.el=this.$el[0];this.delegateEvents();return this.el},render:function(){this.fileListView.updateDialogContext(this.context);this.panelId=this.context.addPanel("Search on other pages",
this.getPanel(),"search-panel");this.fileListView.updatePanelContext({fileContainer:this.getContainer(),noFileMessage:"No search results found.",showContainerInfo:true})},_submit:function(a){a.preventDefault();a.stopPropagation();if(this._getQuery()){this.clearContainer();this.collection.reset();this._loadImages().then(f.bind(this._onSuccessLoadFiles,this),f.bind(this._onErrorLoadFiles,this))}},_loadImages:function(){var a=this.getForm().find(".search-space").val(),b=this._getQuery(),
b='(title ~ "'+b+'*" OR parent.title ~ "'+b+'*") AND type = attachment';a&&a!==""&&(b=b+(" AND space.key = "+a));return c.ajax({type:"GET",dataType:"json",url:m.CONTEXT_PATH+"/rest/api/search",data:{cql:b,expand:"content.version,content.container,content.space",limit:k.maxResults}})},_onSuccessLoadFiles:function(a){a=a.results.map(function(a){return a.content});this.fileListView.highlighter=new l(this._getQuery().split(" "));this.fileListView.resetFileList(a,{shouldClearSelection:true})},_onErrorLoadFiles:function(){var a=
this.getContainer();a.find(".loading-message").addClass("hidden");a.append(c("<p class='warning'>"+c(this.textErrorSearch).text()+"</p>"))},_getSearchText:function(){return c("input.search-image-text",this.getForm())},_getQuery:function(){return this._getSearchText().val()||""},focus:function(){this.collection.clearSelection();this._getSearchText().focus()}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/search-panel/search-panel-view","Confluence.Editor.FileDialog.SearchPanelView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-dialog/file-dialog.soy' */
// This file was automatically generated from file-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.File.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.helpLink = function(opt_data, opt_ignored) {
  return '<div class="dialog-help-link"><a href="' + soy.$$escapeHtml("https://docs.atlassian.com/confluence/docs-85/Display+Files+and+Images") + '" target="_blank">' + soy.$$escapeHtml('Help') + '</a></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.File.helpLink.soyTemplateName = 'Confluence.Templates.File.helpLink';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-dialog/file-dialog-view.js' */
define("confluence-editor/files/file-dialog/file-dialog-view","backbone ajs confluence/templates underscore jquery document window".split(" "),function(l,f,m,h,e,j,n){function k(a,d){d.forEach(function(b){a.forEach(function(a){a(b)})})}return l.View.extend({dialogId:"insert-image-dialog",ESC_KEY_CODE:27,width:840,height:530,initialize:function(a){this.urlExternalImg="";this.selectItems=[];this.submitCallback=a.submitCallback;this.cancelCallback=a.cancelCallback;var d=a.beforeShowListeners||[],b,c;
if(d&&(!d.subscribe||!d.unsubscribe)){b=d.push;c=[];Object.assign(d,{push:function(){var a=Array.prototype.slice.apply(arguments);b.apply(d,a);k(c,a)},subscribe:function(a){c.push(a);k([a],d)},unsubscribe:function(){c.length=0}})}this.beforeShowListeners=d;this.panelComponents=a.panelComponents},render:function(){this._createDialog();this.clearSelection();e(j).on("keydown.insert-image",h.bind(this._onNavigationByKey,this));return this},_createDialog:function(){var a=new f.Dialog(this.width,this.height,
this.dialogId),d="Insert files and images",b="Insert";this.dialog=a;a.addHeader(d);a.addButton(b,h.bind(this._submitDialog,this),"insert");a.addCancel("Close",h.bind(this._killDialog,this));this.el=a.popup.element;this.$el=e(this.el);this.baseElement=this.el;this.$el.attr("data-tab-default","0");this.$insertButton=this.$el.find(".dialog-button-panel .insert");e("#"+this.dialogId+" .dialog-components .dialog-title").prepend(m.File.helpLink());
this.$el.find(".dialog-button-panel").append(e("<div></div>").addClass("dialog-tip").html("Hint: type \u0022\u003cstrong\u003e!\u003c/strong\u003e\u0022 in the Editor to insert attached images on the page."));this._createPanels();this.beforeShowListeners.subscribe(function(a){typeof a==="function"&&a()});f.debug(this.beforeShowListeners.length+" beforeShow listeners registered.");e(j).on("hideLayer",h.bind(function(c,b,d){if(!(b!=="popup"||d!==a.popup)){d.remove();this.teardown();typeof this.cancelCallback==="function"&&this.cancelCallback()}},this));f.bind("remove.dialog",
h.bind(function(a,b){b.dialog.id===this.dialog.id&&this.teardown()},this));a.show();return a},_createPanels:function(){var a=this;e.each(this.panelComponents,function(){this&&typeof this.createPanel==="function"&&this.createPanel(a)})},teardown:function(){e(j).unbind(".insert-image");e(".tipsy").remove();this.undelegateEvents();this.beforeShowListeners.unsubscribe()},_killDialog:function(){this.dialog.remove();this.clearSelection();typeof this.cancelCallback==="function"&&this.cancelCallback()},_submitDialog:function(){var a=
{url:this.urlExternalImg,contentId:f.Meta.get("attachment-source-content-id"),selectItems:this.selectItems};this.dialog.remove();typeof this.submitCallback==="function"&&this.submitCallback(a)},setSelectItems:function(a){if(typeof a==="string"){this.urlExternalImg=a;this.selectItems=[]}else{this.urlExternalImg="";this.selectItems=a}a=this.selectItems.length>0||this.urlExternalImg;if(this.$insertButton){this.$insertButton.prop("disabled",!a);this.$insertButton.attr("aria-disabled",!a)}},clearSelection:function(){this.setSelectItems([])},
insert:function(){this.$insertButton&&(!this.$insertButton.is(":disabled")||!this.$insertButton.attr("aria-disabled"))&&this.$insertButton.click()},addPanel:function(a,d,b,c){var e=this.dialog.getPage(0).panel.length;this.dialog.addPanel(a,d,b,c);return e},getPanel:function(a){return this.dialog.getPanel(a)},_onNavigationByKey:function(a){if(!e("#"+this.dialog.id).is(":hidden")){var d=this.dialog.getCurrentPanel().body,b=d.find(".attached-file");if(!(b.length===0||e(j.activeElement).is("input[type=text], select, button"))){var c=
n.tinymce.VK;switch(a.which){case c.LEFT:case c.UP:case c.RIGHT:case c.DOWN:var f=a.which,g;g=b.filter(".current");g.length||(g=b.filter(".selected"));if(g.length){g=b.index(g);var h=b.length,i={};i[c.LEFT]=-1;i[c.RIGHT]=1;i[c.UP]=-4;i[c.DOWN]=4;c=g+(i[f]?i[f]:0);b=b.eq(c<0||c>=h?g:c)}else b=b.first();b.parent().find("li.attached-file.current").removeClass("current");b.addClass("current");b.length&&d.find(".scroll-wrapper").simpleScrollTo(b);a.stopPropagation();return false;case c.SPACEBAR:d.find("li.attached-file.current").click();
a.stopPropagation();return false;case c.ENTER:this.insert();a.stopPropagation();return false}}}}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/file-dialog/file-dialog-view","Confluence.Editor.FileDialog.FileDialogView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:collaborative-helper', location = 'loader/collaborative-helper.js' */
define("confluence-editor/loader/collaborative-helper",["jquery","ajs","confluence/meta","confluence/legacy"],function(g,h,d,i){function b(a){var c=a||{},a=c.id||i.getContentId(),b=c.type||d.get("content-type"),c=c.editMode||d.get("edit-mode");return"collaborative"===c&&("page"===b||"blogpost"===b)&&a&&"0"!==a}var e,f=g.Deferred();return{registerPlugin:function(a){e=a;f.resolve()},isCollaborativeEditingAvailable:b,getEditorContent:function(){return f.pipe(function(){return b()&&"fake"!==d.get("collaborative-editor-status")?
e.getSynchronisedEditorContent():{content:h.Rte.getEditor().getContent()}})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-frontend:split_date-time~locale', location = 'date-time~locale.js' */
(window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73=window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73||[]).push([[9],{235:function(e,a){e.exports=require("confluence/meta")},50:function(e,a,c){"use strict";c.r(a),c.d(a,"getUserLocale",(function(){return s}));var n=c(235),t=c.n(n);const s=()=>t.a.get("user-locale").replace("_","-").match(/^([a-zA-Z]{2,5}(-[a-zA-Z]+)?)/)[0]}}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-frontend:split_locale', location = 'locale.js' */
(window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73=window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73||[]).push([[24],{550:function(e,r,t){"use strict";t.r(r);var n=t(15),o=t(50);function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object(n.a)("confluence/locale",()=>function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){c(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},o))}},[[550,0,3,1,9]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-editor-plugin:split_core', location = 'core.js' */
/*! For license information please see core.js.LICENSE.txt */
(window.atlassianWebpackJsonp1126d6c3ec4535e33734b1025bd581ff=window.atlassianWebpackJsonp1126d6c3ec4535e33734b1025bd581ff||[]).push([["core"],[,,,,,,,,,,,,,,,,function(e,t,n){var o,r=0,a=n(72),i={hmr:!0};i.insertInto=function(){return window.document.getElementById("wysiwygTextarea_ifr").contentDocument.head},"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(t.locals=a.locals),t.use=t.ref=function(){return r++||(o=n(12)(a,i)),t},t.unuse=t.unref=function(){r>0&&!--r&&(o(),o=null)}},function(e,t){e.exports=require("confluence-macro-browser/macro-browser")},function(e,t){e.exports=require("confluence-editor/i18n/translations.i18n")},,function(e,t){e.exports=require("confluence/table-color-names")},,function(e,t){e.exports=require("confluence-editor/utils/attachments-insert-utils")},,function(e,t){e.exports=require("confluence-rest/confluence-rest")},function(e,t){e.exports=require("confluence/aui-overrides")},function(e,t){e.exports=require("confluence-drag-and-drop/analytics/files-upload-analytics")},function(e,t){e.exports=require("confluence/form-state-control")},,function(e,t){e.exports=require("confluence/root")},,function(e,t,n){var o,r=0,a=n(80),i={hmr:!0};i.insertInto=function(){return window.document.getElementById("wysiwygTextarea_ifr").contentDocument.head},"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(t.locals=a.locals),t.use=t.ref=function(){return r++||(o=n(12)(a,i)),t},t.unuse=t.unref=function(){r>0&&!--r&&(o(),o=null)}},function(e,t,n){var o,r=0,a=n(85),i={hmr:!0};i.insertInto=function(){return window.document.getElementById("wysiwygTextarea_ifr").contentDocument.head},"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(t.locals=a.locals),t.use=t.ref=function(){return r++||(o=n(12)(a,i)),t},t.unuse=t.unref=function(){r>0&&!--r&&(o(),o=null)}},function(e,t,n){var o,r=0,a=n(88),i={hmr:!0};i.insertInto=function(){return window.document.getElementById("wysiwygTextarea_ifr").contentDocument.head},"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(t.locals=a.locals),t.use=t.ref=function(){return r++||(o=n(12)(a,i)),t},t.unuse=t.unref=function(){r>0&&!--r&&(o(),o=null)}},function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e.DIALOG_CONTROL="editor.charmap.dialog"}(o||(o={}))},function(e,t){e.exports=require("confluence/macro-js-overrides")},,function(e,t){e.exports=require("confluence-editor/loader/collaborative-helper")},function(e,t,n){e.exports=n(101)},,,,,,,,function(e,t){function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){"use strict";var e=e=>parseInt(e,10),t=(e,t)=>{var n=e-t;return 0===n?0:n>0?1:-1},o=(e,t,n)=>({major:e,minor:t,patch:n}),r=t=>{var n=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(t);return n?o(e(n[1]),e(n[2]),e(n[3])):o(0,0,0)},i=e=>t=>(e=>{var t,n,o,r,a=typeof e;return null===e?"null":"object"===a&&Array.isArray(e)?"array":"object"===a&&(t=n=e,(o=String).prototype.isPrototypeOf(t)||(null===(r=n.constructor)||void 0===r?void 0:r.name)===o.name)?"string":a})(t)===e,l=e=>t=>typeof t===e,s=e=>t=>e===t,c=i("string"),d=i("object"),u=i("array"),g=s(null),m=l("boolean"),p=s(void 0),f=e=>null==e,h=e=>!f(e),v=l("function"),b=l("number");class y{constructor(e,t){this.tag=e,this.value=t}static some(e){return new y(!0,e)}static none(){return y.singletonNone}static from(e){return h(e)?y.some(e):y.none()}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?y.some(e(this.value)):y.none()}bind(e){return this.tag?e(this.value):y.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:y.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}y.singletonNone=new y(!1);var w=()=>{},C=e=>()=>e,A=e=>e,x=(e,t)=>e===t;function M(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];var a=n.concat(o);return e.apply(null,a)}}var k=C(!1),E=C(!0),T=Array.prototype.slice,D=Array.prototype.indexOf,S=Array.prototype.push,I=(e,t)=>{return n=e,o=t,D.call(n,o)>-1;var n,o},O=(e,t)=>{for(var n=0,o=e.length;n<o;n++)if(t(e[n],n))return!0;return!1},j=(e,t)=>{for(var n=[],o=0;o<e;o++)n.push(t(o));return n},N=(e,t)=>{for(var n=e.length,o=new Array(n),r=0;r<n;r++){var a=e[r];o[r]=t(a,r)}return o},L=(e,t)=>{for(var n=0,o=e.length;n<o;n++)t(e[n],n)},B=(e,t)=>{for(var n=[],o=[],r=0,a=e.length;r<a;r++){var i=e[r];(t(i,r)?n:o).push(i)}return{pass:n,fail:o}},R=(e,t)=>{for(var n=[],o=0,r=e.length;o<r;o++){var a=e[o];t(a,o)&&n.push(a)}return n},P=(e,t)=>{if(0===e.length)return[];for(var n=t(e[0]),o=[],r=[],a=0,i=e.length;a<i;a++){var l=e[a],s=t(l);s!==n&&(o.push(r),r=[]),n=s,r.push(l)}return 0!==r.length&&o.push(r),o},$=(e,t,n)=>(((e,t)=>{for(var n=e.length-1;n>=0;n--)t(e[n],n)})(e,((e,o)=>{n=t(n,e,o)})),n),H=(e,t,n)=>(L(e,((e,o)=>{n=t(n,e,o)})),n),F=(e,t)=>((e,t,n)=>{for(var o=0,r=e.length;o<r;o++){var a=e[o];if(t(a,o))return y.some(a);if(n(a,o))break}return y.none()})(e,t,k),z=(e,t)=>(e=>{for(var t=[],n=0,o=e.length;n<o;++n){if(!u(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);S.apply(t,e[n])}return t})(N(e,t)),U=(e,t)=>{for(var n=0,o=e.length;n<o;++n)if(!0!==t(e[n],n))return!1;return!0},_=(e,t)=>{var n=T.call(e,0);return n.sort(t),n},Q=(e,t)=>t>=0&&t<e.length?y.some(e[t]):y.none(),W=e=>Q(e,0),V=e=>Q(e,e.length-1),K=(e,t)=>{for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o.isSome())return o}return y.none()},G=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x;return e.exists((e=>n(e,t)))},Y=(e,t,n)=>e.isSome()&&t.isSome()?y.some(n(e.getOrDie(),t.getOrDie())):y.none(),J=e=>e.bind(A),q=(e,t)=>e?y.some(t):y.none(),Z=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},X={fromHtml:(e,t)=>{var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){var o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return Z(n.childNodes[0])},fromTag:(e,t)=>{var n=(t||document).createElement(e);return Z(n)},fromText:(e,t)=>{var n=(t||document).createTextNode(e);return Z(n)},fromDom:Z,fromPoint:(e,t,n)=>y.from(e.dom.elementFromPoint(t,n)).map(Z)};"undefined"!=typeof window?window:Function("return this;")();var ee,te,ne=e=>e.dom.nodeName.toLowerCase(),oe=e=>e.dom.nodeType,re=e=>t=>oe(t)===e,ae=e=>8===oe(e)||"#comment"===ne(e),ie=re(1),le=re(3),se=re(9),ce=re(11),de=e=>t=>ie(t)&&ne(t)===e,ue=(e,t)=>{var n=e.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},ge=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,me=(e,t)=>e.dom===t.dom,pe=ue,fe=e=>X.fromDom(e.dom.ownerDocument),he=e=>se(e)?e:fe(e),ve=e=>y.from(e.dom.parentNode).map(X.fromDom),be=(e,t)=>{for(var n=v(t)?t:k,o=e.dom,r=[];null!==o.parentNode&&void 0!==o.parentNode;){var a=o.parentNode,i=X.fromDom(a);if(r.push(i),!0===n(i))break;o=a}return r},ye=e=>y.from(e.dom.previousSibling).map(X.fromDom),we=e=>y.from(e.dom.nextSibling).map(X.fromDom),Ce=e=>N(e.dom.childNodes,X.fromDom),Ae=v(Element.prototype.attachShadow)&&v(Node.prototype.getRootNode)?e=>X.fromDom(e.dom.getRootNode()):he,xe=e=>X.fromDom(e.dom.host),Me=e=>{var t=le(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var n,o,r=t.ownerDocument;return(e=>{var t,n=Ae(e);return ce(t=n)&&h(t.dom.host)?y.some(n):y.none()})(X.fromDom(t)).fold((()=>r.body.contains(t)),(n=Me,o=xe,e=>n(o(e))))},ke=(e,t)=>{var n=[];return L(Ce(e),(e=>{t(e)&&(n=n.concat([e])),n=n.concat(ke(e,t))})),n},Ee=(e,t)=>((e,n)=>R(Ce(e),(e=>ue(e,t))))(e),Te=(e,t)=>((e,t)=>{var n=void 0===t?document:t.dom;return ge(n)?[]:N(n.querySelectorAll(e),X.fromDom)})(t,e),De=(e,t,n)=>{for(var o=e.dom,r=v(n)?n:k;o.parentNode;){o=o.parentNode;var a=X.fromDom(o);if(t(a))return y.some(a);if(r(a))break}return y.none()},Se=(e,t,n)=>De(e,(e=>ue(e,t)),n),Ie=(e,t)=>((e,n)=>F(e.dom.childNodes,(e=>{return n=X.fromDom(e),ue(n,t);var n})).map(X.fromDom))(e),Oe=(e,t)=>((e,t)=>{var n=void 0===t?document:t.dom;return ge(n)?y.none():y.from(n.querySelector(e)).map(X.fromDom)})(t,e),je=(e,t,n)=>((e,t,n,o,r)=>((e,t)=>ue(e,t))(n,o)?y.some(n):v(r)&&r(n)?y.none():t(n,o,r))(0,Se,e,t,n),Ne=Object.keys,Le=Object.hasOwnProperty,Be=(e,t)=>{for(var n=Ne(e),o=0,r=n.length;o<r;o++){var a=n[o];t(e[a],a)}},Re=(e,t)=>{var n=[];return Be(e,((e,o)=>{n.push(t(e,o))})),n},Pe=e=>Re(e,A),$e=e=>Ne(e).length,He=(e,t)=>Fe(e,t)?y.from(e[t]):y.none(),Fe=(e,t)=>Le.call(e,t),ze=e=>{for(var t in e)if(Le.call(e,t))return!1;return!0},Ue=(e,t,n)=>{if(!(c(n)||m(n)||b(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},_e=(e,t,n)=>{Ue(e.dom,t,n)},Qe=(e,t)=>{var n=e.dom;Be(t,((e,t)=>{Ue(n,t,e)}))},We=(e,t)=>{var n=e.dom.getAttribute(t);return null===n?void 0:n},Ve=(e,t)=>y.from(We(e,t)),Ke=(e,t)=>{e.dom.removeAttribute(t)},Ge=e=>H(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),Ye=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,r=e.indexOf(t,n);return-1!==r&&(!!p(o)||r+t.length<=o)},Je=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),qe=e=>!(e=>e.length>0)(e),Ze=e=>void 0!==e.style&&v(e.style.getPropertyValue),Xe=(e,t,n)=>{((e,t,n)=>{if(!c(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Ze(e)&&e.style.setProperty(t,n)})(e.dom,t,n)},et=(e,t)=>{var n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||Me(e)?o:tt(n,t)},tt=(e,t)=>Ze(e)?e.style.getPropertyValue(t):"",nt=(e,t)=>{var n=e.dom,o=tt(n,t);return y.from(o).filter((e=>e.length>0))},ot=(e,t)=>{((e,t)=>{Ze(e)&&e.style.removeProperty(t)})(e.dom,t),G(Ve(e,"style").map(Je),"")&&Ke(e,"style")},rt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ve(e,t).map((e=>parseInt(e,10))).getOr(n)},at=e=>de("col")(e)?rt(e,"span",1)>1:((e,t)=>rt(e,"colspan",1))(e)>1,it=C(10),lt=(e,t)=>st(e,t,E),st=(e,t,n)=>z(Ce(e),(e=>ue(e,t)?n(e)?[e]:[]:st(e,t,n))),ct=["tfoot","thead","tbody","colgroup"],dt=(e,t,n)=>({element:e,rowspan:t,colspan:n}),ut=(e,t,n)=>({element:e,cells:t,section:n}),gt=(e,t,n)=>({element:e,isNew:t,isLocked:n}),mt=(e,t,n,o)=>({element:e,cells:t,section:n,isNew:o}),pt=(e,t)=>function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;return n(t)?y.none():I(e,ne(t))?y.some(t):Se(t,e.join(","),(e=>ue(e,"table")||n(e)))}(["td","th"],e,t),ft=e=>lt(e,"th,td"),ht=e=>ue(e,"colgroup")?Ee(e,"col"):z(yt(e),(e=>Ee(e,"col"))),vt=(e,t)=>je(e,"table",t),bt=e=>lt(e,"tr"),yt=e=>vt(e).fold(C([]),(e=>Ee(e,"colgroup"))),wt=e=>ve(e).map((e=>{var t=ne(e);return(e=>I(ct,e))(t)?t:"tbody"})).getOr("tbody"),Ct=(e,t)=>e.cells[t],At=(e,t)=>Ct(e,t).element,xt=e=>{var t=B(e,(e=>"colgroup"===e.section));return{rows:t.fail,cols:t.pass}},Mt="data-snooker-locked-cols",kt=e=>Ve(e,Mt).bind((e=>y.from(e.match(/\d+/g)))).map((e=>((e,t)=>{for(var n={},o=0,r=e.length;o<r;o++){var a=e[o];n[String(a)]=t(a,o)}return n})(e,E))),Et=(e,t)=>e+","+t,Tt=e=>{var t={},n=[],o=W(e).map((e=>e.element)).bind(vt).bind(kt).getOr({}),r=0,a=0,i=0,l=B(e,(e=>"colgroup"===e.section)),s=l.pass,c=l.fail;L(c,(e=>{var l=[];L(e.cells,(e=>{for(var n=0;void 0!==t[Et(i,n)];)n++;for(var r=((e,t)=>Fe(e,t)&&void 0!==e[t]&&null!==e[t])(o,n.toString()),s=((e,t,n,o,r,a)=>({element:e,rowspan:t,colspan:n,row:o,column:r,isLocked:a}))(e.element,e.rowspan,e.colspan,i,n,r),c=0;c<e.colspan;c++)for(var d=0;d<e.rowspan;d++){var u=n+c,g=Et(i+d,u);t[g]=s,a=Math.max(a,u+1)}l.push(s)})),r++,n.push(ut(e.element,l,e.section)),i++}));var d=V(s).map((e=>{var t=(e=>{var t={},n=0;return L(e.cells,(e=>{var o=e.colspan;j(o,(r=>{var a=n+r;t[a]=((e,t,n)=>({element:e,colspan:t,column:n}))(e.element,o,a)})),n+=o})),t})(e),n=((e,t)=>({element:e,columns:t}))(e.element,Pe(t));return{colgroups:[n],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),u=d.columns,g=d.colgroups,m=((e,t)=>({rows:e,columns:t}))(r,a);return{grid:m,access:t,all:n,columns:u,colgroups:g}},Dt=e=>{var t=(e=>{var t,n,o=bt(e);return t=[...yt(e),...o],n=wt,N(t,(e=>{if("colgroup"===ne(e)){var t=N(ht(e),(e=>{var t=rt(e,"span",1);return dt(e,1,t)}));return ut(e,t,"colgroup")}var o=N(ft(e),(e=>{var t=rt(e,"rowspan",1),n=rt(e,"colspan",1);return dt(e,t,n)}));return ut(e,o,n(e))}))})(e);return Tt(t)},St=Tt,It=(e,t,n)=>y.from(e.access[Et(t,n)]),Ot=(e,t,n)=>{var o=((e,t)=>{var n=z(e.all,(e=>e.cells));return R(n,t)})(e,(e=>n(t,e.element)));return o.length>0?y.some(o[0]):y.none()},jt=e=>Pe(e.columns),Nt=e=>Ne(e.columns).length>0,Lt=(e,t)=>y.from(e.columns[t]),Bt=e=>X.fromDom(e.getBody()),Rt=e=>t=>me(t,Bt(e)),Pt=e=>X.fromDom(e.selection.getStart()),$t=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Ht=(e,t,n)=>((e,t,n)=>((e,t,n)=>{var o=Ot(e,t,me),r=Ot(e,n,me);return o.bind((e=>r.map((t=>{return n=e,o=t,{startRow:Math.min(n.row,o.row),startCol:Math.min(n.column,o.column),finishRow:Math.max(n.row+n.rowspan-1,o.row+o.rowspan-1),finishCol:Math.max(n.column+n.colspan-1,o.column+o.colspan-1)};var n,o}))))})(e,t,n).bind((t=>((e,t)=>{for(var n=!0,o=M($t,t),r=t.startRow;r<=t.finishRow;r++)for(var a=t.startCol;a<=t.finishCol;a++)n=n&&It(e,r,a).exists(o);return n?y.some(t):y.none()})(e,t))))(Ft(e),t,n),Ft=Dt,zt=(e,t)=>{ve(e).each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},Ut=(e,t)=>{we(e).fold((()=>{ve(e).each((e=>{Qt(e,t)}))}),(e=>{zt(e,t)}))},_t=(e,t)=>{(e=>((e,t)=>{var n=e.dom.childNodes;return y.from(n[0]).map(X.fromDom)})(e))(e).fold((()=>{Qt(e,t)}),(n=>{e.dom.insertBefore(t.dom,n.dom)}))},Qt=(e,t)=>{e.dom.appendChild(t.dom)},Wt=(e,t)=>{zt(e,t),Qt(t,e)},Vt=(e,t)=>{L(t,((n,o)=>{var r=0===o?e:t[o-1];Ut(r,n)}))},Kt=(e,t)=>{L(t,(t=>{Qt(e,t)}))},Gt=e=>{e.dom.textContent="",L(Ce(e),(e=>{Yt(e)}))},Yt=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Jt=e=>{var t=Ce(e);t.length>0&&Vt(e,t),Yt(e)},qt=((e,t)=>{var n=t=>e(t)?y.from(t.dom.nodeValue):y.none();return{get:t=>{if(!e(t))throw new Error("Can only get text value of a text node");return n(t).getOr("")},getOption:n,set:(t,n)=>{if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=n}}})(le),Zt=e=>qt.get(e),Xt=(e,t)=>qt.set(e,t),en=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],tn=()=>({up:C({selector:Se,closest:je,predicate:De,all:be}),down:C({selector:Te,predicate:ke}),styles:C({get:et,getRaw:nt,set:Xe,remove:ot}),attrs:C({get:We,set:_e,remove:Ke,copyTo:(e,t)=>{var n=Ge(e);Qe(t,n)}}),insert:C({before:zt,after:Ut,afterAll:Vt,append:Qt,appendAll:Kt,prepend:_t,wrap:Wt}),remove:C({unwrap:Jt,remove:Yt}),create:C({nu:X.fromTag,clone:e=>X.fromDom(e.dom.cloneNode(!1)),text:X.fromText}),query:C({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:ye,nextSibling:we}),property:C({children:Ce,name:ne,parent:ve,document:e=>he(e).dom,isText:le,isComment:ae,isElement:ie,isSpecial:e=>{var t=ne(e);return I(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>ie(e)?Ve(e,"lang"):y.none(),getText:Zt,setText:Xt,isBoundary:e=>!!ie(e)&&("body"===ne(e)||I(en,ne(e))),isEmptyTag:e=>!!ie(e)&&I(["br","img","hr","input"],ne(e)),isNonEditable:e=>ie(e)&&"false"===We(e,"contenteditable")}),eq:me,is:pe}),nn=(e,t,n,o)=>{var r=t(e,n);return $(o,((n,o)=>{var r=t(e,o);return on(e,n,r)}),r)},on=(e,t,n)=>t.bind((t=>n.filter(M(e.eq,t)))),rn=tn(),an=e=>Se(e,"table"),ln=A,sn=e=>{var t=(e,t)=>Ve(e,t).exists((e=>parseInt(e,10)>1));return e.length>0&&U(e,(e=>t(e,"rowspan")||t(e,"colspan")))?y.some(e):y.none()},cn=(e,t,n)=>{return t.length<=1?y.none():(o=e,r=n.firstSelectedSelector,a=n.lastSelectedSelector,((e,t,n)=>Oe(e,t).bind((t=>Oe(e,n).bind((e=>{return(n=an,o=[t,e],((e,t,n)=>n.length>0?((e,t,n,o)=>o(e,t,n[0],n.slice(1)))(e,t,n,nn):y.none())(rn,((e,t)=>n(t)),o)).map((n=>({first:t,last:e,table:n})));var n,o})))))(o,r,a).bind((e=>{var t=e=>me(o,e),n="thead,tfoot,tbody,table",r=Se(e.first,n,t),a=Se(e.last,n,t);return r.bind((t=>a.bind((n=>me(t,n)?Ht(e.table,e.first,e.last):y.none()))))}))).map((e=>({bounds:e,cells:t})));var o,r,a},dn={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},un=e=>({element:e,mergable:y.none(),unmergable:y.none(),selection:[e]}),gn=(e,t,n)=>({element:n,mergable:cn(t,e,dn),unmergable:sn(e),selection:ln(e)}),mn=e=>(t,n)=>{var o,r=ne(t),a="col"===r||"colgroup"===r?vt(o=t).bind((e=>((e,t)=>((e,t)=>{var n=Te(e,t);return n.length>0?y.some(n):y.none()})(e,t))(e,dn.firstSelectedSelector))).fold(C(o),(e=>e[0])):t;return je(a,e,n)},pn=mn("th,td,caption"),fn=mn("th,td"),hn=e=>{return t=e.model.table.getSelectedCells(),N(t,X.fromDom);var t},vn=e=>{var t,n=!1;return function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n||(n=!0,t=e.apply(null,r)),t}},bn=(e,t)=>({element:e,offset:t}),yn=(e,t,n)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?n(t).bind((t=>yn(e,t,n).orThunk((()=>y.some(t))))):y.none(),wn=(e,t)=>e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length,Cn=(e,t)=>{var n=yn(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(n))return bn(n,wn(e,n));var o=e.property().children(n);return o.length>0?Cn(e,o[o.length-1]):bn(n,wn(e,n))},An=Cn,xn=tn(),Mn={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},kn=(()=>{var e="[0-9]+",t="[eE][+-]?[0-9]+",n=e=>`(?:${e})?`,o=["Infinity","[0-9]+\\."+n(e)+n(t),"\\.[0-9]+"+n(t),e+n(t)].join("|");return new RegExp(`^([+-]?(?:${o}))(.*)$`)})(),En=(e,t)=>y.from(kn.exec(e)).bind((e=>{var n=Number(e[1]),o=e[2];return((e,t)=>O(t,(t=>O(Mn[t],(t=>e===t)))))(o,t)?y.some({value:n,unit:o}):y.none()})),Tn=(e,t,n)=>((e,t)=>(e=>{var t=parseFloat(e);return isNaN(t)?y.none():y.some(t)})(e).getOr(t))(et(e,t),n),Dn=((e,t)=>{var n=e=>{var t=(e=>e.dom.offsetWidth)(e);if(t<=0||null===t){var n=et(e,"width");return parseFloat(n)||0}return t},o=(e,t)=>H(t,((t,n)=>{var o=et(e,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?t:t+r}),0);return{set:(e,t)=>{if(!b(t)&&!t.match(/^[0-9]+$/))throw new Error("width.set accepts only positive integer values. Value was "+t);var n=e.dom;Ze(n)&&(n.style.width=t+"px")},get:n,getOuter:n,aggregate:o,max:(e,t,n)=>{var r=o(e,n);return t>r?t-r:0}}})(),Sn=e=>Dn.get(e),In=e=>Dn.getOuter(e),On=e=>((e,t)=>{var n=e.dom,o=n.getBoundingClientRect().width||n.offsetWidth;return((e,t,n,o)=>t-Tn(e,"padding-left",0)-Tn(e,"padding-right",0)-Tn(e,"border-left-width",0)-Tn(e,"border-right-width",0))(e,o)})(e),jn=de("col"),Nn=(e,t,n)=>{var o,r=(o=e,y.from(o.dom.parentElement).map(X.fromDom)).getOrThunk((()=>(e=>{var t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return X.fromDom(t)})(fe(e))));return t(e)/n(r)*100},Ln=(e,t)=>{Xe(e,"width",t+"px")},Bn=(e,t)=>{Xe(e,"width",t+"%")},Rn=e=>((e,t)=>nt(e,t).orThunk((()=>Ve(e,t).map((e=>e+"px")))))(e,"width"),Pn=e=>Nn(e,Sn,On),$n=e=>{return jn(e)?Sn(e):Tn(t=e,"width",t.dom.offsetWidth);var t},Hn=(e,t,n)=>{Xe(e,"width",t+n)},Fn=C(/(\d+(\.\d+)?)%/),zn=(e,t)=>{if(!at(e)){var n=(e=>Rn(e).bind((e=>En(e,["fixed","relative","empty"]))))(e);n.each((n=>{var o=n.value/2;Hn(e,o,n.unit),Hn(t,o,n.unit)}))}},Un=de("col"),_n=de("colgroup"),Qn=e=>({element:e,colspan:rt(e,"colspan",1),rowspan:rt(e,"rowspan",1)}),Wn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qn,n=n=>{if((e=>"tr"===ne(e)||_n(e))(n))return _n((r={element:n}).element)?e.colgroup(r):e.row(r);var r,a=n,i=(t=>Un(t.element)?e.col(t):e.cell(t))(t(a));return o=y.some({item:a,replacement:i}),i},o=y.none();return{getOrInit:(e,t)=>o.fold((()=>n(e)),(o=>t(e,o.item)?o.replacement:n(e)))}},Vn=e=>N(e,C(0)),Kn=e=>(t,n,o,r)=>{if(e(o)){var a=Math.max(r,t[n]-Math.abs(o)),i=Math.abs(a-t[n]);return o>=0?i:-i}return o},Gn=Kn((e=>e<0)),Yn=Kn(E),Jn=()=>{var e=(e,t,n,o,r)=>{var a=Yn(e,o>=0?n:t,o,r);return((e,t,n,o,r)=>r(e.slice(0,t)).concat(o).concat(r(e.slice(n))))(e,t,n+1,[a,-a],Vn)};return{resizeTable:(e,t,n)=>{n&&e(t)},clampTableDelta:(e,t,n,o,r)=>{if(r){if(n>=0)return n;var a=H(e,((e,t)=>e+t-o),0);return Math.max(-a,n)}return Gn(e,t,n,o)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,n,o,r,a,i)=>e(t,o,r,a,i),calcRightEdgeDeltas:(e,t,n,o,r,a)=>{if(a)return Vn(e);var i=o/e.length;return N(e,C(i))},calcRedestributedWidths:(e,t,n,o)=>({delta:0,newSizes:e})}},qn=(e,t)=>X.fromDom(e.dom.cloneNode(t)),Zn=(de("th"),(e,t,n)=>gt(n(e.element,t),!0,e.isLocked)),Xn=()=>({transformRow:A,transformCell:Zn}),eo=()=>to(0,0),to=(e,t)=>({major:e,minor:t}),no={nu:to,detect:(e,t)=>{var n=String(t).toLowerCase();return 0===e.length?eo():((e,t)=>{var n=((e,t)=>{for(var n=0;n<e.length;n++){var o=e[n];if(o.test(t))return o}})(e,t);if(!n)return{major:0,minor:0};var o=e=>Number(t.replace(n,"$"+e));return to(o(1),o(2))})(e,n)},unknown:eo},oo=(e,t)=>{var n=String(t).toLowerCase();return F(e,(e=>e.search(n)))},ro=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ao=e=>t=>Ye(t,e),io=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ye(e,"edge/")&&Ye(e,"chrome")&&Ye(e,"safari")&&Ye(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ro],search:e=>Ye(e,"chrome")&&!Ye(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ye(e,"msie")||Ye(e,"trident")},{name:"Opera",versionRegexes:[ro,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ao("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ao("firefox")},{name:"Safari",versionRegexes:[ro,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ye(e,"safari")||Ye(e,"mobile/"))&&Ye(e,"applewebkit")}],lo=[{name:"Windows",search:ao("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ye(e,"iphone")||Ye(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ao("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ao("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ao("linux"),versionRegexes:[]},{name:"Solaris",search:ao("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ao("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ao("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],so={browsers:C(io),oses:C(lo)},co="Edge",uo="Chromium",go="Opera",mo="Firefox",po="Safari",fo=e=>{var t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isEdge:o(co),isChromium:o(uo),isIE:o("IE"),isOpera:o(go),isFirefox:o(mo),isSafari:o(po)}},ho=()=>fo({current:void 0,version:no.unknown()}),vo=fo,bo=(C(co),C(uo),C("IE"),C(go),C(mo),C(po),"Windows"),yo="Android",wo="Linux",Co="macOS",Ao="Solaris",xo="FreeBSD",Mo="ChromeOS",ko=e=>{var t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isWindows:o(bo),isiOS:o("iOS"),isAndroid:o(yo),isMacOS:o(Co),isLinux:o(wo),isSolaris:o(Ao),isFreeBSD:o(xo),isChromeOS:o(Mo)}},Eo=()=>ko({current:void 0,version:no.unknown()}),To=ko,Do=(C(bo),C("iOS"),C(yo),C(wo),C(Co),C(Ao),C(xo),C(Mo),e=>window.matchMedia(e).matches),So=vn((()=>((e,t,n)=>{var o=so.browsers(),r=so.oses(),a=t.bind((e=>((e,t)=>K(t.brands,(t=>{var n=t.brand.toLowerCase();return F(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:no.nu(parseInt(t.version,10),0)})))})))(o,e))).orThunk((()=>((e,t)=>oo(e,t).map((e=>{var n=no.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(o,e))).fold(ho,vo),i=((e,t)=>oo(e,t).map((e=>{var n=no.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e).fold(Eo,To),l=((e,t,n,o)=>{var r=e.isiOS()&&!0===/ipad/i.test(n),a=e.isiOS()&&!r,i=e.isiOS()||e.isAndroid(),l=i||o("(pointer:coarse)"),s=r||!a&&i&&o("(min-device-width:768px)"),c=a||i&&!s,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!s&&!d;return{isiPad:C(r),isiPhone:C(a),isTablet:C(s),isPhone:C(c),isTouch:C(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:C(d),isDesktop:C(u)}})(i,a,e,n);return{browser:a,os:i,deviceType:l}})(navigator.userAgent,y.from(navigator.userAgentData),Do))),Io=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,n=e.grid,o=j(n.columns,A),r=j(n.rows,A);return N(o,(n=>Oo((()=>z(r,(t=>It(e,t,n).filter((e=>e.column===n)).toArray()))),(e=>1===e.colspan&&t(e.element)),(()=>It(e,0,n)))))},Oo=(e,t,n)=>{var o=e();return F(o,t).orThunk((()=>y.from(o[0]).orThunk(n))).map((e=>e.element))},jo=(e,t)=>({left:e,top:t,translate:(n,o)=>jo(e+n,t+o)}),No=jo,Lo=(e,t)=>void 0!==e?e:void 0!==t?t:0,Bo=e=>{var t=e.dom.ownerDocument,n=t.body,o=t.defaultView,r=t.documentElement;if(n===e.dom)return No(n.offsetLeft,n.offsetTop);var a=Lo(null==o?void 0:o.pageYOffset,r.scrollTop),i=Lo(null==o?void 0:o.pageXOffset,r.scrollLeft),l=Lo(r.clientTop,n.clientTop),s=Lo(r.clientLeft,n.clientLeft);return Ro(e).translate(i-s,a-l)},Ro=e=>{var t=e.dom,n=t.ownerDocument.body;return n===t?No(n.offsetLeft,n.offsetTop):Me(e)?(e=>{var t=e.getBoundingClientRect();return No(t.left,t.top)})(t):No(0,0)},Po=(e,t)=>({col:e,x:t}),$o=e=>Bo(e).left+In(e),Ho=e=>Bo(e).left,Fo=(e,t)=>Po(e,Ho(t)),zo=(e,t)=>Po(e,$o(t)),Uo=(e,t,n)=>{if(0===n.length)return[];var o=N(n.slice(1),((t,n)=>t.map((t=>e(n,t))))),r=n[n.length-1].map((e=>t(n.length-1,e)));return o.concat([r])},_o=(ee={delta:A,edge:Ho,positions:e=>Uo(Fo,zo,e)},te={delta:e=>-e,edge:$o,positions:e=>Uo(zo,Fo,e)},e=>"rtl"===(e=>"rtl"===et(e,"direction")?"rtl":"ltr")(e)?te:ee),Qo=e=>_o(e).edge(e),Wo=de("col"),Vo=(e,t,n,o,r,a)=>e.filter(o).fold((()=>a(((e,t)=>{if(t<0||t>=e.length-1)return y.none();var n=e[t].fold((()=>{var n=(e=>{var t=T.call(e,0);return t.reverse(),t})(e.slice(0,t));return K(n,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>y.some({value:e,delta:0}))),o=e[t+1].fold((()=>{var n=e.slice(t+1);return K(n,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>y.some({value:e,delta:1})));return n.bind((e=>o.map((t=>{var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))))})(n,t))),(e=>r(e))),Ko=(e,t,n,o)=>{var r,a=Io(e),i=Nt(e)?(e=>N(jt(e),(e=>y.from(e.element))))(e):a,l=[y.some(Qo(t))].concat(N(((e,t)=>_o(t).positions(e,t))(a,t),(e=>e.map((e=>e.x))))),s=(r=at,e=>!r(e));return N(i,((e,t)=>Vo(e,t,l,s,(e=>{if((e=>{var t=So().browser,n=t.isChromium()||t.isFirefox();return!Wo(e)||n})(e))return n(e);var r=((e,t)=>null!=e?t(e):y.none())(a[t],A);return Vo(r,t,l,s,(e=>o(y.some(Sn(e)))),o)}),o)))},Go=(e,t,n)=>Ko(e,t,$n,(e=>e.getOrThunk(n.minCellWidth))),Yo=(e,t)=>()=>Me(e)?t(e):parseFloat(nt(e,"width").getOr("0")),Jo=e=>Rn(e).fold((()=>(e=>{var t=Yo(e,Sn),n=C(0);return{width:t,pixelWidth:t,getWidths:(t,n)=>Go(t,e,n),getCellDelta:n,singleColumnWidth:C([0]),minCellWidth:n,setElementWidth:w,adjustTableWidth:w,isRelative:!0,label:"none"}})(e)),(t=>{return n=e,o=t,null!==Fn().exec(o)?(e=>{var t=Yo(e,(e=>parseFloat((e=>Nn(e,Sn,On)+"%")(e)))),n=Yo(e,Sn);return{width:t,pixelWidth:n,getWidths:(t,n)=>((e,t,n)=>Ko(e,t,Pn,(e=>e.fold((()=>n.minCellWidth()),(e=>e/n.pixelWidth()*100)))))(t,e,n),getCellDelta:e=>e/n()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>it()/n()*100,setElementWidth:Bn,adjustTableWidth:n=>{var o=t();Bn(e,o+n/100*o)},isRelative:!0,label:"percent"}})(n):(e=>{var t=Yo(e,Sn);return{width:t,pixelWidth:t,getWidths:(t,n)=>Go(t,e,n),getCellDelta:A,singleColumnWidth:(e,t)=>[Math.max(it(),e+t)-e],minCellWidth:it,setElementWidth:Ln,adjustTableWidth:n=>{var o=t()+n;Ln(e,o)},isRelative:!1,label:"pixel"}})(n);var n,o})),qo=(e,t,n,o)=>{n===o?Ke(e,t):_e(e,t,n)},Zo=(e,t,n)=>{V(Ee(e,t)).fold((()=>_t(e,n)),(e=>Ut(e,n)))},Xo=(e,t)=>{var n=[],o=[],r=e=>N(e,(e=>{e.isNew&&n.push(e.element);var t=e.element;return Gt(t),L(e.cells,(e=>{e.isNew&&o.push(e.element),qo(e.element,"colspan",e.colspan,1),qo(e.element,"rowspan",e.rowspan,1),Qt(t,e.element)})),t})),a=e=>z(e,(e=>N(e.cells,(e=>(qo(e.element,"span",e.colspan,1),e.element))))),i=(t,n)=>{var o=((e,t)=>{var n=Ie(e,t).getOrThunk((()=>{var n=X.fromTag(t,fe(e).dom);return"thead"===t?Zo(e,"caption,colgroup",n):"colgroup"===t?Zo(e,"caption",n):Qt(e,n),n}));return Gt(n),n})(e,n),i=("colgroup"===n?a:r)(t);Kt(o,i)},l=(t,n)=>{t.length>0?i(t,n):(t=>{Ie(e,t).each(Yt)})(n)},s=[],c=[],d=[],u=[];return L(t,(e=>{switch(e.section){case"thead":s.push(e);break;case"tbody":c.push(e);break;case"tfoot":d.push(e);break;case"colgroup":u.push(e)}})),l(u,"colgroup"),l(s,"thead"),l(c,"tbody"),l(d,"tfoot"),{newRows:n,newCells:o}},er=(e,t)=>{if(0===e.length)return 0;var n=e[0],o=((e,o)=>{for(var r=0,a=e.length;r<a;r++)if(i=e[r],!t(n.element,i.element))return y.some(r);var i;return y.none()})(e);return o.getOr(e.length)},tr=(e,t)=>{var n=N(e,(e=>N(e.cells,k)));return N(e,((o,r)=>{var a=z(o.cells,((o,a)=>{if(!1===n[r][a]){var i=((e,t,n,o)=>{var r=((e,t)=>e[t])(e,t),a="colgroup"===r.section,i=er(r.cells.slice(n),o),l=a?1:er(((e,t)=>N(e,(e=>Ct(e,t))))(e.slice(t),n),o);return{colspan:i,rowspan:l}})(e,r,a,t);return((e,t,o,r)=>{for(var a=e;a<e+o;a++)for(var i=t;i<t+r;i++)n[a][i]=!0})(r,a,i.rowspan,i.colspan),[(l=o.element,s=i.rowspan,c=i.colspan,d=o.isNew,{element:l,rowspan:s,colspan:c,isNew:d})]}return[];var l,s,c,d}));return{element:o.element,cells:a,section:o.section,isNew:o.isNew}}))},nr=(e,t)=>K(e.all,(e=>F(e.cells,(e=>me(t,e.element))))),or=(e,t,n)=>{var o=(e=>{for(var t=[],n=e=>{t.push(e)},o=0;o<e.length;o++)e[o].each(n);return t})(N(t.selection,(t=>pt(t).bind((t=>nr(e,t))).filter(n))));return q(o.length>0,o)},rr=(e,t,n,o,r)=>(a,i,l,s)=>{var c=Dt(a),d=y.from(null==s?void 0:s.section).getOrThunk(Xn),u=t(c,i).map((t=>{var n,o=((e,t)=>((e,t,n)=>{var o=[];L(e.colgroups,(r=>{for(var a=[],i=0;i<e.grid.columns;i++){var l=Lt(e,i).map((e=>gt(e.element,n,!1))).getOrThunk((()=>gt(t.colGap(),!0,!1)));a.push(l)}o.push(mt(r.element,a,"colgroup",n))}));for(var r=0;r<e.grid.rows;r++){for(var a=[],i=0;i<e.grid.columns;i++){var l=It(e,r,i).map((e=>gt(e.element,n,e.isLocked))).getOrThunk((()=>gt(t.gap(),!0,!1)));a.push(l)}var s=e.all[r],c=mt(s.element,a,s.section,n);o.push(c)}return o})(e,t,!1))(c,l),a=e(o,t,me,r(l),d),i=(e=>{var t=H(xt(e).rows,((e,t)=>(L(t.cells,((t,n)=>{t.isLocked&&(e[n]=!0)})),e)),{}),n=Re(t,((e,t)=>parseInt(t,10)));return _(n)})(a.grid);return{info:t,grid:(n=a.grid,tr(n,me)),cursor:a.cursor,lockedColumns:i}}));return u.bind((e=>{var t=Xo(a,e.grid),r=y.from(null==s?void 0:s.sizing).getOrThunk((()=>Jo(a))),i=y.from(null==s?void 0:s.resize).getOrThunk(Jn);return n(a,e.grid,e.info,{sizing:r,resize:i,section:d}),o(a),Ke(a,Mt),e.lockedColumns.length>0&&_e(a,Mt,e.lockedColumns.join(",")),y.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))},ar=(e,t)=>pt(t.element).bind((t=>nr(e,t))),ir=(e,t)=>or(e,t,E),lr=(e,t)=>U(t,(t=>((e,t)=>nr(e,t).exists((e=>!e.isLocked)))(e,t))),sr=(e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>lr(e,t.cells))),cr=(e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>lr(e,t))),dr=["img","br"],ur=e=>{return(t=e,qt.getOption(t)).filter((e=>0!==e.trim().length||e.indexOf("Â ")>-1)).isSome()||I(dr,ne(e));var t},gr={scope:["row","col"]},mr=e=>()=>{var t=X.fromTag("td",e.dom);return Qt(t,X.fromTag("br",e.dom)),t},pr=e=>()=>X.fromTag("col",e.dom),fr=e=>()=>X.fromTag("colgroup",e.dom),hr=e=>()=>X.fromTag("tr",e.dom),vr=(e,t,n)=>{var o=((e,t)=>{var n=((e,t)=>{var n=X.fromTag(t),o=Ge(e);return Qe(n,o),n})(e,t),o=Ce((e=>qn(e,!0))(e));return Kt(n,o),n})(e,t);return Be(n,((e,t)=>{null===e?Ke(o,t):_e(o,t,e)})),o},br=(e,t,n)=>{return(o=e,((e,t)=>{var n=e=>{for(var o=0;o<e.childNodes.length;o++){var r=X.fromDom(e.childNodes[o]);if(t(r))return y.some(r);var a=n(e.childNodes[o]);if(a.isSome())return a}return y.none()};return n(e.dom)})(o,ur)).map((o=>{var r=((e,t,n)=>((e,n,o)=>R(be(e,o),(e=>ue(e,t))))(e,0,n))(o,n.join(","),(t=>me(t,e)));return $(r,((e,t)=>{var n=qn(t,!1);return Ke(n,"contenteditable"),Qt(e,n),n}),t)})).getOr(t);var o},yr=(e,t,n)=>{var o=(e,t)=>{((e,t)=>{var n=e.dom,o=t.dom;Ze(n)&&Ze(o)&&(o.style.cssText=n.style.cssText)})(e.element,t),ot(t,"height"),1!==e.colspan&&ot(t,"width")};return{col:n=>{var r=X.fromTag(ne(n.element),t.dom);return o(n,r),e(n.element,r),r},colgroup:fr(t),row:hr(t),cell:r=>{var a=X.fromTag(ne(r.element),t.dom),i=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),l=i.length>0?br(r.element,a,i):a;return Qt(l,X.fromTag("br")),o(r,a),((e,t)=>{Be(gr,((n,o)=>Ve(e,o).filter((e=>I(n,e))).each((e=>_e(t,o,e)))))})(r.element,a),e(r.element,a),a},replace:vr,colGap:pr(t),gap:mr(t)}},wr=e=>Dt(e).grid,Cr=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Me(e)?e.dom.isContentEditable:(t=e,je(t,"[contenteditable]")).fold(C(n),(e=>"true"===Ar(e)))},Ar=e=>e.dom.contentEditable,xr=(e,t,n,o,r)=>N(e,(e=>{var a=t>0&&t<e.cells.length&&o(At(e,t-1),At(e,t)),i=((e,t,n,o,r,a,i)=>{if("colgroup"!==n&&o)return Ct(e,t);var l=Ct(e,r);return gt(i(l.element,a),!0,!1)})(e,t,e.section,a,n,o,r);return((e,t,n)=>((e,t,n)=>{var o=e.cells,r=o.slice(0,t),a=o.slice(t);return((e,t)=>mt(e.element,t,e.section,e.isNew))(e,r.concat(n).concat(a))})(e,t,[n]))(e,t,i)})),Mr=a({},(e=>{if(!u(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return L(e,((o,r)=>{var a=Ne(o);if(1!==a.length)throw new Error("one and only one name per case");var i=a[0],l=o[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!u(l))throw new Error("case arguments must be an array");t.push(i),n[i]=function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=o.length;if(s!==l.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+l.length+" ("+l+"), got "+s);return{fold:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+n.length);return n[r].apply(null,o)},match:e=>{var n=Ne(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!U(t,(e=>I(n,e))))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,o)},log:e=>{console.log(e,{constructors:t,constructor:i,params:o})}}}})),n})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])),kr=(e,t,n)=>{var o=((e,t)=>Nt(e)?((e,t)=>{var n=jt(e);return N(n,((e,n)=>({element:e.element,width:t[n],colspan:e.colspan})))})(e,t):((e,t)=>{var n=(e=>z(e.all,(e=>e.cells)))(e);return N(n,(e=>{var n=((e,t,n)=>{for(var o=0,r=e;r<t;r++)o+=void 0!==n[r]?n[r]:0;return o})(e.column,e.column+e.colspan,t);return{element:e.element,width:n,colspan:e.colspan}}))})(e,t))(e,t);L(o,(e=>{n.setElementWidth(e.element,e.width)}))},Er=e=>H(e,((e,t)=>O(e,(e=>e.column===t.column))?e:e.concat([t])),[]).sort(((e,t)=>e.column-t.column)),Tr=e=>Cr(e,!0),Dr=(e,t,n)=>((e,t)=>({grid:e,cursor:t}))(e,((e,t,n)=>{var o,r,a=xt(e).rows;return y.from(null===(r=null===(o=a[t])||void 0===o?void 0:o.cells[n])||void 0===r?void 0:r.element).filter(Tr).orThunk((()=>(e=>K(e,(e=>K(e.cells,(e=>{var t=e.element;return q(Tr(t),t)})))))(a)))})(e,t,n)),Sr=(e,t,n,o)=>((e,t,n,o,r)=>{var a=St(t),i=o.getWidths(a,o),l=o.pixelWidth(),s=r.calcRedestributedWidths(i,l,n.pixelDelta,o.isRelative),c=s.newSizes,d=s.delta;kr(a,c,o),o.adjustTableWidth(d)})(0,t,n,o.sizing,o.resize),Ir=(e,t)=>{var n=Io(e),o=Er(t);return H(o,((e,t)=>e+n[t.column].map(In).getOr(0)),0)},Or=rr(((e,t,n,o)=>{var r=t.detail,a=r.column,i=r.column,l=xr(e,i,a,n,o.getOrInit);return Dr(l,r.row,i)}),((e,t)=>ar(e,t).filter((e=>!O([e],(e=>0===e.column&&e.isLocked)))).map((t=>({detail:t,pixelDelta:Ir(e,[t])})))),Sr,w,Wn),jr=rr(((e,t,n,o)=>{var r=Er(t.details),a=((e,t)=>z(e,(e=>{var n=e.cells,o=$(t,((e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e),n);return o.length>0?[mt(e.element,o,e.section,e.isNew)]:[]})))(e,N(r,(e=>e.column))),i=a.length>0?a[0].cells.length-1:0;return Dr(a,r[0].row,Math.min(r[0].column,i))}),((e,t)=>((e,t)=>or(e,t,(e=>!e.isLocked)))(e,t).map((t=>({details:t,pixelDelta:-Ir(e,t)})))),Sr,(e=>{0===ft(e).length&&Yt(e)}),Wn),Nr=(e,t)=>{var n=We(e,t);return void 0===n||""===n?[]:n.split(" ")},Lr=e=>void 0!==e.dom.classList,Br=e=>e.dom.textContent,Rr=de("th"),Pr=(e,t)=>e&&t?"sectionCells":e?"section":"cells",$r=e=>{var t=R(e,(e=>Rr(e.element)));return 0===t.length?y.some("td"):t.length===e.length?y.some("th"):y.none()},Hr=e=>{var t=N(e,(e=>(e=>{var t="thead"===e.section,n=G($r(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||n?{type:"header",subType:Pr(t,n)}:{type:"body"}})(e).type)),n=I(t,"header"),o=I(t,"footer");if(n||o){var r=I(t,"body");return!n||r||o?n||r||!o?y.none():y.some("footer"):y.some("header")}return y.some("body")},Fr={structure:!1,style:!0},zr={structure:!0,style:!1},Ur=(e,t,n)=>({value:t+1}),_r=(e,t,n)=>{for(var o="A".charCodeAt(0),r=[],a=t;a>=0;)r.push(String.fromCharCode(o+a%26)),a=Math.floor(a/26)-1;return{value:r.reverse().join("")}},Qr=e=>e.options.get("advtable_value_series"),Wr=e=>{var t=parseFloat(e);return isNaN(t)?y.none():y.some(t)},Vr=(e,t)=>e<t?-1:e>t?1:0,Kr=(e,t)=>Y(Wr(e),Wr(t),Vr).getOrThunk((()=>((e,t)=>e.localeCompare(t))(e,t))),Gr="data-snooker-locked-cols",Yr=e=>Ve(e,Gr).map((e=>z(e.split(","),(e=>{var t=parseInt(e,10);return isNaN(t)?[]:[t]})))).getOr([]),Jr=(e,t)=>_e(e,Gr,_(t).join(",")),qr=(e,t)=>{var n=Yr(e);I(n,t)||Jr(e,n.concat([t]))},Zr=(e,t)=>{var n=Yr(e);Jr(e,R(n,(e=>t!==e)))},Xr="data-snooker-col-series",ea=e=>Ve(e,Xr),ta=(e,t)=>G(ea(e).map((e=>e.toLowerCase())),t.toLowerCase()),na=e=>((e,t)=>{var n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute("data-snooker-col-series")})(e),oa=(e,t,n,o,r)=>{((e,t)=>{var n=O(Yr(e),(e=>0===e));n&&Zr(e,0),t(),n&&qr(e,1)})(e,(()=>{n.column(0,t.insertColumnBefore,!0,!0),(e=>{var t=Jo(e),n=Dt(e),o=It(n,0,0).bind((e=>{var t=e.element;return En(et(t,"width"),["fixed"])})).map((e=>28-e.value)).getOr(0);((e,t,n,o,r)=>{var a=Dt(e),i=r.getCellDelta(t),l=r.getWidths(a,r),s=0==a.grid.columns-1,c=o.clampTableDelta(l,0,i,r.minCellWidth(),s),d=((e,t,n,o,r)=>{var a=e.slice(0),i=((e,t)=>0===e.length?Mr.none():1===e.length?Mr.only(0):Mr.left(0,1))(e),l=C(N(a,C(0)));return i.fold(l,(e=>o.singleColumnWidth(a[e],n)),((e,t)=>r.calcLeftEdgeDeltas(a,e,t,n,o.minCellWidth(),o.isRelative)),((e,t,i)=>r.calcMiddleDeltas(a,e,t,i,n,o.minCellWidth(),o.isRelative)),((e,t)=>r.calcRightEdgeDeltas(a,e,t,n,o.minCellWidth(),o.isRelative)))})(l,0,c,r,o),u=N(d,((e,t)=>e+l[t]));kr(a,u,r),o.resizeTable(r.adjustTableWidth,c,s)})(e,o,0,Jn(),t)})(e),ra(e,t,n,o,r)}))},ra=(e,t,n,o,r)=>{n.table(e,0,0,t.populateColumn(0,((e,t,n)=>{var o=r.generator(e,t,n);return{raw:o,value:o.value,classes:o.classes,attributes:a(a({contenteditable:"false"},o.attributes),{},{"data-mce-resize":!1===r.resizable?"false":null})}})),!0,!0),((e,t)=>{_e(e,Xr,t)})(e,o),qr(e,0)},aa=e=>{var t=e;return{get:()=>t,set:e=>{t=e}}},ia=e=>vt(Pt(e),Rt(e)),la=(e,t)=>{e.execCommand("mceTableToggleSeries",!1,t)},sa=(e,t,n)=>t.onSetupCellOrRowToggle((()=>((e,t)=>ia(e).exists((e=>qe(t)?!na(e):ta(e,t))))(e,n))),ca=(e,t)=>({type:"togglemenuitem",text:"None",onAction:()=>{(e=>ia(e).bind(ea))(e).each((t=>{la(e,{name:t})}))},onSetup:sa(e,t,"")}),da=(e,t,n,o,r)=>({type:"togglemenuitem",text:n,value:o,icon:r,onAction:()=>la(e,{name:o}),onSetup:sa(e,t,o)}),ua=(e,t,n)=>Re(n,((n,o)=>{var r=y.from(n.title).getOrThunk((()=>{return""===(e=o)?"":e.charAt(0).toUpperCase()+e.substring(1);var e}));return da(e,t,r,o)})),ga=e=>t=>{var n=t.getData();t.close(),e.undoManager.transact((()=>{e.execCommand("mceSortTableAdvanced",!1,n),e.focus(),e.addVisual()}))},ma=e=>{var t={type:"selectbox",name:"sortby",label:"Sort by",items:[{text:"Column",value:"column"},{text:"Row",value:"row"}]},n=aa(y.none()),o=t=>({type:"selectbox",name:"roworcol",label:"column"===t?"Column":"Row",items:"column"===t?(()=>{var t=n.get().getOrDie("state must be present"),o=t.limit?t.finishCol+1-t.startCol:t.columns;return j(o,(n=>{var o=t.limit?t.startCol:0,r=(e=>{for(var t=e,n="";Math.floor(t)>0;)--t,n+=String.fromCharCode("A".charCodeAt(0)+t%26),t/=26;return n.split("").reverse().join("")})(n+o+1);return{text:e.translate(["Column {0}",r]),value:`${n+o}`}}))})():(()=>{var t=n.get().getOrDie("state must be present"),o=t.limit?t.finishRow+1-t.startRow:t.rows;return j(o,(n=>{var o=t.limit?t.startRow:0,r=(n+o+1).toString();return{text:e.translate(["Row {0}",r]),value:`${n+o}`}}))})()}),r=e=>({type:"selectbox",name:"sort",label:"Sort",items:["column"===e?{text:"Column",value:"column"}:{text:"Row",value:"row"},{text:"Selection",value:"selection"},{text:"Table",value:"table"}]}),i={type:"selectbox",name:"order",label:"Order",items:[{text:"Ascending",value:"ascending"},{text:"Descending",value:"descending"}]},l=e=>({type:"panel",items:[{type:"grid",columns:2,items:[t,o(e),r(e),i]}]}),s=e=>({title:"Advanced Sort",size:"normal",body:l(e),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"sort",text:"Sort",primary:!0}]}),c=()=>{n.set(y.none())},d=(t,o)=>{if("sortby"===o.name){var r=t.getData(),i=(u=r,g=n.get().getOrDie("state must be present"),"column"===u.sortby?{sortby:"column",roworcol:`${g.startCol}`,sort:"row"===u.sort?"column":u.sort,order:u.order}:{sortby:"row",roworcol:`${g.startRow}`,sort:"column"===u.sort?"row":u.sort,order:u.order}),l=a(a({},s(r.sortby)),{},{onChange:d,onClose:c,onSubmit:ga(e),initialData:i});t.redial(l),t.focus("sortby")}var u,g};fn(Pt(e)).each((t=>{vt(t,Rt(e)).each((o=>{var r=gn(hn(e),o,t),i=t=>{n.set(y.some(t));var o={sortby:"column",roworcol:`${t.startCol}`,sort:"column",order:"ascending"},r=a(a({},s("column")),{},{onChange:d,onClose:c,onSubmit:ga(e),initialData:o});e.windowManager.open(r)},l=wr(o);r.mergable.fold((()=>{Ht(o,t,t).each((e=>{var t=a(a(a({},e),l),{},{limit:!1});i(t)}))}),(e=>{var t=a(a(a({},e.bounds),l),{},{limit:!0});i(t)}))}))}))};tinymce.PluginManager.requireLangPack("advtable","ar,bg_BG,ca,cs,da,de,el,es,eu,fa,fi,fr_FR,he_IL,hi,hr,hu_HU,id,it,ja,kk,ko_KR,ms,nb_NO,nl,pl,pt_BR,pt_PT,ro,ru,sk,sl_SI,sv_SE,th_TH,tr,uk,vi,zh_CN,zh_TW"),tinymce.PluginManager.add("advtable",(e=>{if(((e,n)=>!!e&&-1===((e,n)=>{var o=t(e.major,n.major);if(0!==o)return o;var r=t(e.minor,n.minor);if(0!==r)return r;var a=t(e.patch,n.patch);return 0!==a?a:0})((e=>r((e=>[e.majorVersion,e.minorVersion].join(".").split(".").slice(0,3).join("."))(e)))(e),r("6.0.0")))(tinymce))return console.error("Please use Advanced Tables with TinyMCE 6.0.0 or later."),{};(e=>{(0,e.options.register)("advtable_value_series",{processor:"object",default:{numeric:{title:"Numeric",update:!0,resizable:!1,generator:Ur},alpha:{title:"Alpha",update:!0,resizable:!1,generator:_r}}})})(e);var o=(e=>{var t=(e=>y.from(e.options.get("table_clone_elements")))(e),n=(n,r,i,l)=>function(s,c,d,u){var g=arguments.length>4&&void 0!==arguments[4]&&arguments[4],m=X.fromDom(e.getDoc()),p=yr(i,m,t);return r(s)?n(s,c,p).bind((t=>{L(t.newRows,(t=>{((e,t)=>{e.dispatch("NewRow",{node:t})})(e,t.dom)})),L(t.newCells,(t=>{((e,t)=>{e.dispatch("NewCell",{node:t})})(e,t.dom)}));var n=((t,n,r,a)=>{var i=r.filter((e=>Me(e)&&o(e))).or(n.cursor);return i.fold((()=>{var n=ft(t);return W(n).filter(Me).map((n=>{var o=e.dom.createRng();return o.selectNode(n.dom),a&&(e.model.table.clearSelectedCells(t.dom),e.selection.setRng(o),_e(n,"data-mce-selected","1")),o}))}),(n=>{var o=e.dom.createRng(),r=An(xn,n);return o.setStart(r.element.dom,r.offset),o.setEnd(r.element.dom,r.offset),a&&(e.model.table.clearSelectedCells(t.dom),e.selection.setRng(o)),y.some(o)}))})(s,t,d,u);return Me(s)&&((e=>{Ke(e,"data-mce-style");var t=e=>Ke(e,"data-mce-style");L(ft(e),t),L(ht(e),t),L(bt(e),t)})(s),g||((e,t,n)=>{e.dispatch("TableModified",a(a({},n),{},{table:t}))})(e,s.dom,l)),n.map((e=>({rng:e,effect:l})))})):y.none()},o=e=>Cr(e,!0),r=(e,t,n)=>((e,t)=>({grid:e,cursor:t}))(e,((e,t,n)=>{var r,a,i=xt(e).rows;return y.from(null===(a=null===(r=i[t])||void 0===r?void 0:r.cells[n])||void 0===a?void 0:a.element).filter(o).orThunk((()=>(e=>K(e,(e=>K(e.cells,(e=>{var t=e.element;return q(o(t),t)})))))(i)))})(e,t,n)),i=(e,t,n,o)=>{var r=xt(e),a=r.cols,i=r.rows,l=P(i,(e=>e.section)),s=N(l,(e=>P(e,(e=>{var n=Ct(e,t).element;return ne(n)})))),c=z(s,(e=>z(e,(e=>{var r=Ct(e[0],t).element;return"th"===ne(r)?e:(e=>{var r=N(e,(e=>{var n=Ct(e,t).element;return{row:e,text:y.from(Br(n)).getOr("")}})),a=_(r,((e,t)=>{var r=n(e.text,t.text);return o?r:-1*r}));return N(a,(e=>e.row))})(e)}))));return[...a,...c]},l=(e,t,n,o)=>{var r=xt(e),i=r.cols,l=r.rows,s=l[t].cells,c=N(s,(e=>{var t=e.element;return y.from(Br(t)).getOr("")})),d=de("th"),u=N(l,(e=>{var t=N(e.cells,((e,t)=>({cell:e,column:t,reference:s[t],referenceText:c[t]})));return a(a({},e),{},{zippedCells:t})})),g=N(u,(e=>{var t=P(e.zippedCells,(e=>{var t=e.reference.element;return ne(t)})),r=z(t,(e=>{var t=e[0].reference.element;if(d(t))return N(e,(e=>e.cell));var r=B(e,(e=>e.cell.isLocked)),a=r.pass,i=r.fail,l=_(i,((e,t)=>{var r=n(e.referenceText,t.referenceText);return o?r:-1*r})),s=H(a,((e,t)=>{var n=t.column,o=e.slice(0,n),r=e.slice(n);return o.concat([t]).concat(r)}),l);return N(s,(e=>e.cell))}));return mt(e.element,r,e.section,e.isNew)}));return[...i,...g]},s=i,m=l,p=(e,t,n,o,r)=>{var i=xt(e),l=i.cols,s=i.rows,c=s.slice(0,t),d=[...l,...s.slice(t,n+1)];return{beforeRows:c,afterRows:s.slice(n+1,e.length),selectionGridBefore:d.map((e=>a(a({},e),{},{cells:e.cells.slice(0,o)}))),selectionGrid:d.map((e=>a(a({},e),{},{cells:e.cells.slice(o,r+1)}))),selectionGridAfter:d.map((e=>a(a({},e),{},{cells:e.cells.slice(r+1,e.cells.length)})))}},f=(e,t)=>{var n=N(t,((t,n)=>{var o=e.selectionGridBefore[n].cells,r=e.selectionGridAfter[n].cells;return a(a({},t),{},{cells:o.concat(t.cells).concat(r)})})),o=xt(n),r=o.cols,i=o.rows;return[...r,...e.beforeRows,...i,...e.afterRows]},h=(e,t,n,o,r,a,l,s)=>{var c=p(e,n,o,r,a),d=i(c.selectionGrid,t-r,l,s);return f(c,d)},v=(e,t,n,o,r,a,i,s)=>{var c=p(e,n,o,r,a),d=l(c.selectionGrid,t-n,i,s);return f(c,d)},x=e=>H(e,((e,t)=>O(e,(e=>e.row===t.row))?e:e.concat([t])),[]).sort(((e,t)=>e.row-t.row)),M=e=>H(e,((e,t)=>O(e,(e=>e.column===t.column))?e:e.concat([t])),[]).sort(((e,t)=>e.column-t.column)),k=e=>H(e,((e,t)=>O(e,(e=>me(e.element,t.element)))?e:e.concat([t])),[]),T=e=>{var t=d(e.attributes)?Re(e.attributes,((e,t)=>g(e)?e=>Ke(e,t):n=>_e(n,t,e))):[];return[...t,...((e,t)=>{if(u(e)){for(var n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1})(e.classes,c)?N(e.classes,(e=>t=>((e,t)=>{Lr(e)?e.dom.classList.add(t):((e,t)=>{((e,t,n)=>{var o=Nr(e,t).concat([n]);_e(e,t,o.join(" "))})(e,"class",t)})(e,t)})(t,e))):[],t=>{var n,o=Br(t)||"",r=(n=e.value,b(n)?String(n):c(n)?n:void 0),a=c(r)?r:o;qe(a)?((e,t)=>{var n=fe(e).dom,o=X.fromDom(n.createDocumentFragment()),r=((e,t)=>{var n=(t||document).createElement("div");return n.innerHTML=e,Ce(X.fromDom(n))})("<br>",n);Kt(o,r),Gt(e),Qt(e,o)})(t):((e,t)=>{e.dom.textContent=t})(t,a)}]},D=(e,t,n,o,r,a,i,l)=>{var s;L(t,((t,c)=>{var d,u=t.element,g={sectionType:a(c),cellType:ne(u),getRowType:i(c),getColType:l(c),classes:(d=u,Lr(d)?(e=>{for(var t=e.dom.classList,n=new Array(t.length),o=0;o<t.length;o++){var r=t.item(o);null!==r&&(n[o]=r)}return n})(d):(e=>Nr(e,"class"))(d)),prev:null==s?void 0:s.raw,direction:n},m=e(g,o(c),r(c)),p=T(m);L(p,(e=>e(u))),s=m}))},S=(e,t,n,o,a)=>{var i=h(e,a,0,e.length,a,a,n,o);return r(i,t[0].row,t[0].column)},I=(e,t,n,o,a)=>{var i=x(t),l=M(t),s=h(e,a,i[0].row,i[i.length-1].row,l[0].column,l[l.length-1].column,n,o);return r(s,t[0].row,t[0].column)},j=(e,t,n,o,a)=>{var i=s(e,a,n,o);return r(i,t.row,t.column)},R=(e,t,n,o,a)=>{var i=v(e,a,a,a,0,e[t[0].row].cells.length,n,o);return r(i,t[0].row,t[0].column)},$=(e,t,n,o,a)=>{var i=x(t),l=M(t),s=v(e,a,i[0].row,i[i.length-1].row,l[0].column,l[l.length-1].column,n,o);return r(s,t[0].row,t[0].column)},F=(e,t,n,o,a)=>{var i=m(e,a,n,o);return r(i,t.row,t.column)},U=(e,t,n,o)=>{var a=xt(e).rows,i=N(a,(e=>Ct(e,o))),l=k(i),s=vn((()=>$r(l).getOr("")));return D(n,l,"column",A,C(o),(e=>a[e].section),(e=>vn((()=>{var t=a[e];return Hr([{cells:t.cells,section:t.section}]).getOr("")}))),(e=>s)),r(e,t.row,t.column)},Q=(e,t,n,o)=>{var a=xt(e).rows,i=a[o],l=k(i.cells),s=vn((()=>Hr([{cells:i.cells,section:i.section}]).getOr("")));return D(n,l,"row",C(o),A,(e=>i.section),(e=>s),(e=>vn((()=>{var t=N(a,(t=>Ct(t,e)));return $r(t).getOr("")})))),r(e,t.row,t.column)},V=(e,t,n,o,r)=>(a,i,l)=>{var s=rr(((r,a)=>e(r,a,t,n,o)),r,w,w,Wn);return s(a,i,l)},G=(e,t,n,o)=>(r,a,i)=>{var l=rr(((o,r)=>e(o,r,t,n)),o,w,w,Wn);return l(r,a,i)},Y=n(Or,E,zn,zr),J=n(jr,(t=>0==("table"===ne(Bt(e)))||wr(t).columns>1),w,zr);return{sortColumnRowsAsc:e=>n(V(S,Kr,!0,e,ir),E,w,zr),sortColumnRowsDesc:e=>n(V(S,Kr,!1,e,ir),E,w,zr),sortSelectionRowsAsc:e=>n(V(I,Kr,!0,e,ir),E,w,zr),sortSelectionRowsDesc:e=>n(V(I,Kr,!1,e,ir),E,w,zr),sortTableRowsAsc:e=>n(V(j,Kr,!0,e,ar),E,w,zr),sortTableRowsDesc:e=>n(V(j,Kr,!1,e,ar),E,w,zr),sortRowColumnsAsc:e=>n(V(R,Kr,!0,e,ir),E,w,zr),sortRowColumnsDesc:e=>n(V(R,Kr,!1,e,ir),E,w,zr),sortSelectionColumnsAsc:e=>n(V($,Kr,!0,e,ir),E,w,zr),sortSelectionColumnsDesc:e=>n(V($,Kr,!1,e,ir),E,w,zr),sortTableColumnsAsc:e=>n(V(F,Kr,!0,e,ar),E,w,zr),sortTableColumnsDesc:e=>n(V(F,Kr,!1,e,ar),E,w,zr),insertColumnBefore:Y,deleteColumn:J,populateColumn:(e,t)=>n(G(U,t,e,ar),E,w,Fr),populateRow:(e,t)=>n(G(Q,t,e,ar),E,w,Fr)}})(e),i=(e=>{var t=aa(y.none()),n=aa([]),o=y.none(),r=de("caption"),a=()=>pn(Pt(e),Rt(e)).bind((t=>J(Y(vt(t),pn((e=>X.fromDom(e.selection.getEnd()))(e),Rt(e)).bind(vt),((n,o)=>me(n,o)?r(t)?y.some(un(t)):y.some(gn(hn(e),n,t)):y.none()))))),i=e=>vt(e.element).map((t=>{var n=Dt(t),o=ir(n,e).getOr([]),r=H(o,((e,t)=>(t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=n.grid.columns&&(e.onLast=!0)),e)),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:sr(n,e).isSome(),unmergeable:cr(n,e).isSome(),locked:r}})),l=()=>{t.set(vn(a)()),o=t.get().bind(i),L(n.get(),(e=>e()))},s=e=>(e(),n.set(n.get().concat([e])),()=>{n.set(R(n.get(),(t=>t!==e)))}),c=(e,n)=>s((()=>t.get().fold((()=>{e.setEnabled(!1)}),(t=>{e.setEnabled(!n(t))}))));return e.on("NodeChange ExecCommand TableSelectorChange",l),{onSetupTable:e=>c(e,(e=>!1)),onSetupCellOrRow:e=>c(e,(e=>r(e.element))),onSetupColumn:e=>t=>c(t,(t=>r(t.element)||(e=>o.exists((t=>t.locked[e])))(e))),onSetupCellOrRowToggle:e=>n=>((e,n,o)=>s((()=>t.get().fold((()=>{e.setEnabled(!1),e.setActive(!1)}),(t=>{e.setEnabled(!(e=>r(e.element))(t)),e.setActive(o(t))})))))(n,0,e),resetTargets:l,targets:()=>t.get()}})(e),l=(e=>{var t=t=>{e.focus()},n=t=>vt(t,Rt(e)),o=(o,r,a,i,l)=>{fn(Pt(e)).each((e=>{n(e).each((n=>{var s=Dt(n),c=(e,t)=>Ot(s,e,me).map((e=>e[t])),d=o.orThunk((()=>c(e,"row"))),u=r.orThunk((()=>c(e,"column"))),g=J(Y(d,u,((e,t)=>It(s,e,t).map((e=>e.element)))));g.bind((t=>{var o=un(t);return a(n,o,q(i,e),!0,l)})).each(t)}))}))};return{selection:(o,r)=>{fn(Pt(e)).each((a=>{n(a).each((n=>{var i=gn(hn(e),n,a);o(n,i,y.none(),!0,r).each(t)}))}))},row:(e,t,n,r)=>o(y.some(e),y.none(),t,n,r),column:(e,t,n,r)=>o(y.none(),y.some(e),t,n,r),table:(n,o,r,a,i,l)=>{var s=Dt(n),c=It(s,o,r).map((e=>e.element)),d=fn(Pt(e)),u=d.bind((e=>Ot(s,e,me))).isSome(),g=c.bind((e=>{var t=un(e),o=u&&i?d:y.none();return a(n,t,o,u,l)}));g.each(t)}}})(e),s=Qr(e);return((e,t,n,o)=>{var r=e=>"selection"===e,a=e=>"ascending"===e,i=t=>vt(t,Rt(e)),l=()=>fn(Pt(e),Rt(e)).bind((e=>i(e).bind((t=>Ht(t,e,e))))),s=()=>l().map((e=>e.startCol)),d=()=>l().map((e=>e.startRow));e.addCommand("mceSortTableByColumnAsc",(()=>{s().each((e=>{n.selection(t.sortTableRowsAsc(e))}))})),e.addCommand("mceSortTableByColumnDesc",(()=>{s().each((e=>{n.selection(t.sortTableRowsDesc(e))}))})),e.addCommand("mceSortTableByRowAsc",(()=>{d().each((e=>{n.selection(t.sortTableColumnsAsc(e))}))})),e.addCommand("mceSortTableByRowDesc",(()=>{d().each((e=>{n.selection(t.sortTableColumnsDesc(e))}))})),e.addCommand("mceSortTableAdvanced",((e,o)=>(e=>{var o=parseInt(e.roworcol,10);"column"===e.sortby?((e,o)=>{(e=>"column"===e)(e.sort)?a(e.order)?n.selection(t.sortColumnRowsAsc(o)):n.selection(t.sortColumnRowsDesc(o)):r(e.sort)?a(e.order)?n.selection(t.sortSelectionRowsAsc(o)):n.selection(t.sortSelectionRowsDesc(o)):a(e.order)?n.selection(t.sortTableRowsAsc(o)):n.selection(t.sortTableRowsDesc(o))})(e,o):((e,o)=>{(e=>"row"===e)(e.sort)?a(e.order)?n.selection(t.sortRowColumnsAsc(o)):n.selection(t.sortRowColumnsDesc(o)):r(e.sort)?a(e.order)?n.selection(t.sortSelectionColumnsAsc(o)):n.selection(t.sortSelectionColumnsDesc(o)):a(e.order)?n.selection(t.sortTableColumnsAsc(o)):n.selection(t.sortTableColumnsDesc(o))})(e,o)})(o))),e.addCommand("mceAdvancedTableSort",(()=>ma(e))),e.addCommand("mceTableToggleSeries",((r,a)=>{var l=y.from(a.name).filter(c),s=i(Pt(e));Y(l,s,((e,r)=>{ta(r,e)?((e,t,n)=>{Zr(e,0),(e=>{Ke(e,Xr)})(e),n.column(0,t.deleteColumn,!0,!0)})(r,t,n):He(o,e).each((o=>{(na(r)?ra:oa)(r,t,n,e,o)}))}))}))})(e,o,l,s),((e,t,o,r)=>{var a=()=>vt(Pt(e),Rt(e)),i=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,l=ea(n),s=l.bind((e=>He(r,e)));Y(l,s,((r,l)=>{1===Dt(n).grid.columns?a().exists((e=>me(n,e)))?e.execCommand("mceTableDelete"):e.undoManager.transact((()=>{Yt(n)})):!0===l.update&&i()&&ra(n,t,o,r,l)}))};e.on("TableModified",(e=>{var t=X.fromDom(e.table);i(t,(()=>!1!==e.structure))})),e.on("PreInit",(()=>{((e,t)=>{var o=e=>{var t=[];return f(e)?t:((e=>"thead"===e.name||"tbody"===e.name||"tfoot"===e.name)(e)?t.push(...o(e.firstChild)):"tr"===e.name&&t.push(e),t.concat(o(e.next)))},r=e=>o(e.firstChild);e.parser.addAttributeFilter(Xr,(e=>{var o,a,i=n(e);try{for(i.s();!(a=i.n()).done;){var l=a.value;if("table"===l.name){var s=l.attr(Xr);if(!1===(null===(o=t[s])||void 0===o?void 0:o.resizable)){var c,d=n(r(l));try{for(d.s();!(c=d.n()).done;){var u=c.value;h(u.firstChild)&&u.firstChild.attr("data-mce-resize","false")}}catch(e){d.e(e)}finally{d.f()}}}}}catch(e){i.e(e)}finally{i.f()}}))})(e,r)})),e.on("init",(()=>{var t=()=>{var t=fn(Pt(e),Rt(e));return e.selection.isCollapsed()&&t.exists((t=>e.dom.isEmpty(t.dom)))};e.on("ExecCommand",(e=>{var n=e.command.toLowerCase();"delete"!==n&&"forwarddelete"!==n||!t()||a().each(i)}),!0),e.on("keyup",(e=>{var n=e.keyCode;8!==n&&46!==n||!t()||a().each(i)}))}))})(e,o,l,s),e.hasPlugin("table")&&(((e,t)=>{var n=(t,n)=>()=>e.execCommand(t,!1,n),o=t.onSetupCellOrRow,r=[{type:"menuitem",text:"Sort table by column ascending",onAction:n("mceSortTableByColumnAsc"),onSetup:o},{type:"menuitem",text:"Sort table by column descending",onAction:n("mceSortTableByColumnDesc"),onSetup:o},{type:"separator"},{type:"menuitem",text:"Advanced sort...",onAction:()=>ma(e),onSetup:o}];e.ui.registry.addNestedMenuItem("advtablesort",{type:"nestedmenuitem",text:"Sort",getSubmenuItems:C(r)});var a=Qr(e);if(1===$e(a)){var i=Ne(a)[0];e.ui.registry.addToggleMenuItem("advtablerownumbering",da(e,t,"Row numbering",i,"table-row-numbering"))}else ze(a)||e.ui.registry.addNestedMenuItem("advtablerownumbering",{type:"nestedmenuitem",text:"Row numbering",icon:"table-row-numbering",getSubmenuItems:()=>{var n=ca(e,t),o=ua(e,t,a);return[n].concat(o)}})})(e,i),((e,t)=>{var n=Qr(e);if(1===$e(n)){var o=Ne(n)[0];e.ui.registry.addToggleButton("advtablerownumbering",{type:"togglebutton",tooltip:"Row numbering",icon:"table-row-numbering",onAction:()=>la(e,{name:o}),onSetup:sa(e,t,o)})}else ze(n)||e.ui.registry.addMenuButton("advtablerownumbering",{type:"menubutton",icon:"table-row-numbering",tooltip:"Row numbering",fetch:o=>{var r=ca(e,t),a=ua(e,t,n);return o([r].concat(a))},onSetup:t.onSetupCellOrRow})})(e,i)),{}}))}()},,function(e,t,n){var o=n(49);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(12)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,'#autocomplete-dropdown span.editor-icon{padding:0}#autocomplete-dropdown span.icon{height:20px;width:20px;background-position:50%;background-repeat:no-repeat}#autocomplete-dropdown .dropdown-insert-link span.icon{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAMFBMVEX///9wcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHAnFTKsAAAAD3RSTlMAESIzRFVmd4iZqrvM3e5GKvWZAAAAWUlEQVQIW2NgQAZWJyA0+++5l8AM3gSG6zDJUyCCeaYCyxUQI/bMY74FQJrxJoPhWQEgQ/bADKmHIJl1AnlvDUCMqwwMAmCdjxnkAsCMvSV3ICKc7zcwYAUAjz0WbHRhn40AAAAASUVORK5CYII=")}#autocomplete-dropdown .dropdown-insert-image span.icon{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gcLBBgu2AWxpAAAAUdJREFUOMuVUzFOw0AQnLlzHhCKVNBQwBPgC8ALEAUKRQQozp1p6JEoaPDZipAgzwAp4ilRygQ+QBGa3KaxE8ckFp7uRrPj2bkzUYK19gTAK4A9VGPive8EZVZE3rz312maflRN93q9G6XUABsSyH9hrZVg2xeiKFo7x3G8xsVxDAAIUAP5UBFBHfGmBKzbepIkw6JhUKd1rfUwT7FMWNW6MeYxDMOLYuu5YRiGZ8aYydYOut3uYaPRGCmlvsvXnK8EYPWQrLVPAFrOuTYA9Pv9kbX2DsAYwHuuc86xaKiy4ReS9yTbxpjzgvhZa/1V1Y0CAJK3S0KpZDabpZnx5Xw+f4iiyG0zYLGYwv8wIPlD8iDnvPdjklF5hUBEpiR3Sx5XIvIpIjskWyLSBHAkItM/K5DsZI2uYpGa5CnJYwD7JJskfzPtGhZ44Nh/W3weYAAAAABJRU5ErkJggg==")}#autocomplete-dropdown .dropdown-insert-macro span.icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik0xMyA2LjVhMS41IDEuNSAwIDEwLjAwMSAzLjAwMUExLjUgMS41IDAgMDAxMyA2LjVtLTUgMGExLjUgMS41IDAgMTAuMDAxIDMuMDAxQTEuNSAxLjUgMCAwMDggNi41TTQuNSA4YTEuNSAxLjUgMCAxMS0zLjAwMS0uMDAxQTEuNSAxLjUgMCAwMTQuNSA4IiBpZD0iYSIvPjwvZGVmcz48dXNlIGZpbGw9IiM5N0EwQUYiIHhsaW5rOmhyZWY9IiNhIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=");background-size:20px 20px}#autocomplete-dropdown .insert-create-page-link span.icon{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAADFBMVEX///9wcHBwcHBwcHD6E60rAAAAA3RSTlMAmaps9r97AAAAJ0lEQVQIW2NgQADGC0CC+QMywfj//wUG5v//P4BYD9BlGRiBQqgAAJ+HEATHbgMnAAAAAElFTkSuQmCC")}#autocomplete-dropdown .aui-dropdown ol.top-menu-item{display:none}#autocomplete-dropdown .aui-dropdown h2.top-menu-title{background:#f5f5f5;font-size:14px;font-weight:400;line-height:24px;margin:0;padding:2px 5px;border-bottom:1px solid #ccc;cursor:pointer}#autocomplete-dropdown .aui-dropdown.fabric h2.top-menu-title{display:none}#autocomplete-dropdown .aui-dropdown .hidden-div{position:absolute;top:-10000px}',""])},,,,function(e,t,n){var o=n(54);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(12)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(11)(!1);var o=n(28),r=o(n(55)),a=o(n(56)),i=o(n(57)),l=o(n(58)),s=o(n(59)),c=o(n(60));t.push([e.i,".aui-toolbar .icon.table-align-top{background:url("+r+") 50% no-repeat}.aui-toolbar .icon.table-align-middle{background:url("+a+") 50% no-repeat}.aui-toolbar .icon.table-align-bottom{background:url("+i+") 50% no-repeat}.aui-toolbar .aui-button.active .icon.table-align-top{background:url("+l+") 50% no-repeat}.aui-toolbar .aui-button.active .icon.table-align-middle{background:url("+s+") 50% no-repeat}.aui-toolbar .aui-button.active .icon.table-align-bottom{background:url("+c+") 50% no-repeat}",""])},function(e,t,n){e.exports=n.p+"71d1ac0284b0f6b4af603d062d1b1978.svg"},function(e,t,n){e.exports=n.p+"1241bf53c4c1c7b3b89f40c6998d6f6a.svg"},function(e,t,n){e.exports=n.p+"d0f7da3ee30a5ee2eab33a94a732909c.svg"},function(e,t,n){e.exports=n.p+"3dc0661dc0b27ad9db2d26599f662478.svg"},function(e,t,n){e.exports=n.p+"36825b8cf0d1cb29fb4f86b8da6c8589.svg"},function(e,t,n){e.exports=n.p+"6c6978d8ee656416348ee064ebbfd6bf.svg"},function(e,t,n){var o=n(62);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(12)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,"table.draggable{margin-left:-10px;margin-top:-10px}table.draggable:hover>tbody>tr>td.draggable-column,table.draggable:hover>tbody>tr>td.draggable-row,table.draggable:hover>tbody>tr>td.draggable-table{background-color:#777;border-top:1px solid #777;border-left:1px solid #777}table.draggable:hover>tbody>tr>td.draggable-column,table.draggable:hover>tbody>tr>td.draggable-table{border-right:1px solid #aaa}table.draggable:hover>tbody>tr>td.draggable-row,table.draggable:hover>tbody>tr>td.draggable-table{border-bottom:1px solid #aaa}td.draggable-column,td.draggable-row,td.draggable-table{background-color:initial;border-top:1px solid transparent;border-left:1px solid transparent;cursor:move}td.draggable-column,td.draggable-table{border-right:1px solid transparent}td.draggable-row,td.draggable-table{border-bottom:1px solid transparent}td.draggable-column{height:10px}td.draggable-row{width:10px}.wiki-content img.confluence-embedded-image,.wiki-content img.editor-inline-macro,.wiki-content table.wysiwyg-macro{cursor:move}.wiki-content table.wysiwyg-macro>tbody>tr>td.wysiwyg-macro-body{cursor:text}#move-indicator{font-weight:400!important}",""])},function(e,t,n){var o=n(64);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(12)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,".quick-comment-form #rte-toolbar .insert-files.toolbar-item{padding:0 6px}.quick-comment-form #rte-toolbar .insert-files .toolbar-trigger{margin:0 -6px}#rte-toolbar .insert-files.toolbar-item{padding:0}#rte-toolbar .insert-files .trigger-text{display:none}#rte-toolbar .insert-files .aui-button{padding:0 6px}",""])},function(e,t,n){var o=n(66);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(12)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,'.aui-dialog .wiki-parser-selector{font-size:14px;margin-right:5px}.insert-wiki-markup-panel div,.insert-wiki-markup-panel div form{height:100%;text-align:center}.insert-wiki-markup-panel .spinner{position:absolute;top:50%;left:50%;margin-top:-73px;margin-left:-60px}#insert-wiki-info-title{text-align:left;margin-left:10px}#insert-wiki-markup-form{height:95%}#insert-wiki-markup-form .wiki-title span{box-sizing:border-box;display:-moz-inline-stack;display:inline-block;margin-bottom:10px;max-width:48%;text-align:left;vertical-align:middle;width:48%}#insert-wiki-markup-form .wiki-title span:first-child{margin-right:20px}#insert-wiki-textarea,#insert-wiki-textarea-preview{box-sizing:border-box;display:-moz-inline-stack;display:inline-block;font-size:14px;height:84%;max-width:48%;vertical-align:middle;width:48%;resize:none}#insert-wiki-textarea.originalDefault{height:100%;min-width:100%;width:100%}#insert-wiki-textarea{font-family:Monaco,Consolas,Courier New,"monospace";margin-right:20px}#insert-wiki-textarea-preview{border:1px solid #ccc;border-radius:3px;position:relative}#insert-wiki-textarea-preview iframe{border:0;height:100%;left:0;min-height:100%;overflow:hidden;position:absolute;top:0;width:100%}',""])},function(e,t,n){var o=n(68);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(12)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,"body.ios{min-height:150px}",""])},function(e,t,n){e.exports=void 0},function(e,t,n){e.exports=void 0},function(e,t,n){e.exports=void 0},function(e,t,n){t=e.exports=n(11)(!1);var o=n(28),r=o(n(73)),a=o(n(74));t.push([e.i,'html{height:100%}html.insert-wiki-markup-dialog{box-sizing:border-box;height:96%;overflow:auto}html .assistive{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}body.wiki-content{height:100%;min-height:100%}body.previewWiki{box-sizing:border-box;background:#fff;height:100%;overflow:auto;padding:10px}body.resizable{height:auto;margin:0;padding:0}body.fullsize{box-sizing:border-box;border:0;margin:0 10px;padding:10px 0}body.mceContentBody{background:#fff;border:none;text-align:left}.mceContentBody .wysiwyg-macro-body-preformat{border:1px solid #ccc;margin:5px 20px}.mceContentBody .wysiwyg-macro-inline{display:inline}.mceContentBody .user-new-line,.mceContentBody .wysiwyg-macro-body-newline{display:none;line-height:0}img.emoticon{vertical-align:text-bottom;width:16px;height:16px}#autocomplete-container{background-color:#ebecf0;border-radius:3px;padding:1px 0}#autocomplete-container.fabric{color:#0052cc}#autocomplete-container.fabric,#autocomplete-container.fabric #autocomplete-trigger{background-color:initial;border:transparent}#autocomplete-trigger{background-color:#ebecf0;padding:0 2px;border-radius:3px 0 0 3px}#autocomplete-search-text{padding:1px 6px 1px 3px}.macro span.macro-name{border-radius:3px;background-clip:padding-box;background-color:#f0f0f0;padding:4px}.wysiwyg-macro{background-color:#f0f0f0;background-position:0 2px;background-repeat:no-repeat;border:1px solid #ddd}.wiki-content .wysiwyg-macro{padding:24px 2px 2px;width:100%}.wiki-content .wysiwyg-macro-body{background-color:#fff;border:1px solid #ddd;margin:0;padding:10px}.wiki-content .wysiwyg-macro-body>p:first-child{margin-top:0}.wiki-content .wysiwyg-macro-body>p:last-child{margin-bottom:0}.wiki-content .wysiwyg-macro-body>pre{-moz-tab-size:4;tab-size:4;margin:0;white-space:pre-wrap}.wiki-content td .wysiwyg-macro-body{min-width:200px}.wiki-content .confluence-embedded-image{cursor:default;max-width:calc(100% - 4px);margin-left:2px;margin-right:2px;vertical-align:text-bottom}.wiki-content .confluence-embedded-image[height],.wiki-content .confluence-embedded-image[width]{max-width:none}.wiki-content .image-left{float:left;margin:0 10px 10px 0}.wiki-content .image-center{margin-left:auto;margin-right:auto;display:block}.wiki-content .image-right{float:right;margin:0 0 10px 10px}.wiki-content table.wysiwyg-macro{border-collapse:initial}.wiki-content .highlight-marker{background-color:#feeecd}.wiki-content table tbody td.mceSelected,.wiki-content table tbody th.mceSelected.nohighlight{background-color:#edf5ff!important}.wiki-content table tbody td.mceSelected.highlight,.wiki-content table tbody th.mceSelected{background-color:#e0e0e0!important}.wiki-content table tbody td.mceSelected.highlight-blue,.wiki-content table tbody td.mceSelected.info,.wiki-content table tbody th.mceSelected.highlight-blue,.wiki-content table tbody th.mceSelected.info{background-color:#d3e3f7!important}.wiki-content table tbody td.mceSelected.highlight-green,.wiki-content table tbody td.mceSelected.success,.wiki-content table tbody th.mceSelected.highlight-green,.wiki-content table tbody th.mceSelected.success{background-color:#d3f4cc!important}.wiki-content table tbody td.mceSelected.highlight-red,.wiki-content table tbody td.mceSelected.warning,.wiki-content table tbody th.mceSelected.highlight-red,.wiki-content table tbody th.mceSelected.warning{background-color:#f3dada!important}.wiki-content table tbody td.mceSelected.highlight-yellow,.wiki-content table tbody td.mceSelected.note,.wiki-content table tbody th.mceSelected.highlight-yellow,.wiki-content table tbody th.mceSelected.note{background-color:#f6f7ca!important}.wiki-content.show-eol-markup h1:after,.wiki-content.show-eol-markup h2:after,.wiki-content.show-eol-markup h3:after,.wiki-content.show-eol-markup h4:after,.wiki-content.show-eol-markup h5:after,.wiki-content.show-eol-markup h6:after,.wiki-content.show-eol-markup li:after,.wiki-content.show-eol-markup p:after{color:#777;content:" \\00B6"}.wysiwyg-unknown-macro{vertical-align:text-bottom}p+table.wysiwyg-macro,table.wysiwyg-macro+p{margin-top:10px}.editor-inline-macro{background-color:#f0f0f0;border:1px solid #ddd;margin:0 2px;min-height:24px;vertical-align:text-bottom}.editor-inline-macro.with-chrome{background-position:0 0;background-repeat:no-repeat;height:auto;padding:24px 2px 2px}.confluenceTd>.editor-inline-macro,.confluenceTd>.wysiwyg-unknown-macro,.confluenceTh>.editor-inline-macro,.confluenceTh>.wysiwyg-unknown-macro{vertical-align:inherit}.macro-placeholder-icon{background-image:url('+r+");background-position:0 3px;background-repeat:no-repeat}.image-hotswap{background-image:url("+a+");background-position:4px 50%;background-repeat:no-repeat}table.layout,table.layout td.layout-cell{border:1px dotted #ccc}table.confluenceTable{margin-bottom:0}.find-current{background-color:inherit;color:inherit}.find-current[data-searching]{border-radius:5px;background-clip:padding-box;box-shadow:0 2px 2px #ccc;background-color:#ffde00;margin:-2px;padding:2px;position:relative}",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAONJREFUeNpi/P//PwM1ARMDlQHVDWRB5mzbtg3D/9+/f0fhf/v2Dc6OjY1lRFfPCAtDkGHa2toMV69eZTAxMSHKNRs2bGBIS0tjxOlCcXFxsIF8fHzU8fK+ffvANCsrK+UGenl5gZ2+du1acBh8+fKF4cOHD1g1CQgIMPDw8BB2ITIAacClCQY+ffpEvIED4kKiDISls8HrQpjrqJIOYVkN5tWdO3fijE0Q+Pr1K0NjYyM4mdXX1zPidOHjx4/hbHd3d7wuAqndu3cvZl5GBiBbubm5cboKHcBch9PA4V3AAgQYAMuAZaztNwK5AAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/gif;base64,R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+FogNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs="},function(e,t,n){var o=n(76);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(12)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(11)(!1);var o=n(28)(n(77));t.push([e.i,"#insert-image-dialog.aui-dialog .dialog-panel-body{overflow:hidden;position:relative;padding:10px 10px 0}#insert-image-dialog.aui-dialog .dialog-panel-body .aui-message p{margin-top:0}#insert-image-dialog.aui-dialog .dialog-panel-body .aui-message ul{padding-left:15px;margin:0}#insert-image-dialog.aui-dialog .dialog-panel-body .aui-message ul.one-message{padding-left:0}#insert-image-dialog.aui-dialog .dialog-panel-body .aui-message ul.one-message li{list-style:none}#insert-image-dialog.aui-dialog .dialog-panel-body.web-image-panel{overflow:auto}#insert-image-dialog.aui-dialog .dialog-panel-body .no-files{margin-top:0}#insert-image-dialog.aui-dialog .dialog-panel-body .message-handler{margin-right:10px;margin-bottom:10px}#insert-image-dialog.aui-dialog .aui-progress-indicator,#insert-image-dialog.aui-dialog .aui-progress-indicator .aui-progress-indicator-value{height:4px;border-radius:0}#insert-image-dialog.aui-dialog .scroll-wrapper{position:relative}#insert-image-dialog.aui-dialog .divider{border-top:1px solid #ccc;width:110%;height:1px;margin-left:-10px}#insert-image-dialog.aui-dialog .search-panel-wrapper{height:100%}#upload-attachment form{padding:0}#upload-attachment form .invisible{height:1px;width:1px;opacity:0;z-index:1}#upload-attachment .file-upload-icon{vertical-align:text-bottom}.attach-tip-discovery{position:relative;border-top:1px solid #ccc;padding-top:20px;margin-right:10px;margin-top:10px;margin-bottom:20px;overflow:hidden;color:#707070}.attach-tip-discovery .img{display:block;width:50px;height:50px;float:left;margin-right:15px;background-image:url("+o+');background-repeat:no-repeat;background-size:50px 50px}.attach-tip-discovery .text p{display:inline}.attach-tip-discovery a{text-decoration:none}#attached-files{padding:10px 0}.file-list,.image-list{padding:0;list-style:none;overflow:hidden;margin-top:0}.file-list li,.image-list li{width:23%;cursor:default;float:left;margin:0 10px 8px 0;padding:0;text-align:center}.file-list li .caption,.image-list li .caption{text-overflow:ellipsis;display:block;overflow:hidden;white-space:nowrap;margin:0 auto;font-size:12px}.file-list li .owner-title,.image-list li .owner-title{font-size:10px}.file-list li .image-preview-throbber,.image-list li .image-preview-throbber{text-align:center;padding:0;position:absolute;top:50%;left:50%;margin-top:-10px;margin-left:-10px}.file-list li .file-container,.file-list li .image-container,.image-list li .file-container,.image-list li .image-container{border-radius:3px;background-color:#f5f5f5;border:1px solid #f5f5f5;padding:5px;margin-bottom:5px;position:relative;vertical-align:top;box-sizing:border-box;height:90px}.file-list li .file-container img,.file-list li .image-container img,.image-list li .file-container img,.image-list li .image-container img{width:auto;height:auto;position:relative;top:50%;transform:translateY(-50%);box-shadow:0 1px 3px rgba(0,0,0,.2);max-width:100%;max-height:100%}.file-list li .file-container .thumbnail,.file-list li .image-container .thumbnail,.image-list li .file-container .thumbnail,.image-list li .image-container .thumbnail{position:relative;top:50%;transform:translateY(-50%);background-image:none;display:inline-block}.file-list li .aui-progress-indicator,.image-list li .aui-progress-indicator{position:absolute;top:50%;left:10%;width:80%;z-index:2;transform:translateY(-50%)}.file-list li .overlay,.image-list li .overlay{width:100%;height:100%;display:none;position:absolute;z-index:1;background-color:rgba(0,0,0,.8);top:0;left:0}.file-list li .abs-icon,.image-list li .abs-icon{width:20px;height:20px;line-height:20px;border:1px solid #ccc;box-sizing:border-box;border-radius:3px;position:absolute;outline:none;display:none;cursor:pointer;color:#707070;background-color:#fff;background-repeat:no-repeat;background-position:50%;vertical-align:text-bottom;text-indent:-999em}.file-list li .abs-icon.zoom,.image-list li .abs-icon.zoom{top:5px;right:27px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAeElEQVQoz62Ovw1AYBTEz0pKWqUZPhNI7p4V6CzBPGIBo0g8xReJwuvctb/7A/wuHfTH30CniT2XEAAASzq1hYAGXlqtiiYaumYvrA0bWAMAS+2v5+pyOso4R0ADPae/gN4SL81xw6JTqxcx4NqsspZlCGS/nv+mG6d9RJUXBH/5AAAAAElFTkSuQmCC")}.file-list li .abs-icon.select,.image-list li .abs-icon.select{top:5px;right:5px}.file-list li .abs-icon.cancel,.image-list li .abs-icon.cancel{width:16px;height:16px;line-height:16px;top:5px;right:5px;border:0;color:#fff}.file-list li .abs-icon.select,.image-list li .abs-icon.select{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAW0lEQVQYlWP4jwYYSBPYewFV4FhBL4rA+aLaV8gC14srnyKbca+s/AHU0HdT3v3//6Sy5BbMlukFTe9e1RRfhlv7ZUJBU2PhGSR3/JpXUHAUxWH/1u8h1y8gAADgQu+TLTiA3gAAAABJRU5ErkJggg==")}.file-list li .abs-icon.cancel,.image-list li .abs-icon.cancel{display:block;background-color:initial}.file-list li.loading .overlay,.image-list li.loading .overlay{display:block}.file-list li.loading,.image-list li.loading{color:#707070}.file-list li.loading .cancel,.image-list li.loading .cancel{z-index:2}.file-list li.hover,.file-list li:hover,.image-list li.hover,.image-list li:hover{cursor:pointer}.file-list li.hover .select,.file-list li.hover .zoom,.file-list li:hover .select,.file-list li:hover .zoom,.image-list li.hover .select,.image-list li.hover .zoom,.image-list li:hover .select,.image-list li:hover .zoom{display:block}.file-list li.selected .select,.image-list li.selected .select{display:block;background-color:#3572b0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAgUlEQVR4AcXKrw5BcRzG4e803QWcRDRN0CRJMkU3V8BluBFXoEiSizDJFIKZMR7bUfw5v2jeT3nDE3+csZ4QobghVmnQd7NVTYGOi726KAYtJ0dN8QoyC1n+Gg7O2uIdzLGWqdm56opPULHMycbdQHyDUDYDI1EMQsnURCTBs1+ABxXN3umBGxghAAAAAElFTkSuQmCC");border:0}.file-list li.selected.hover .select,.file-list li.selected:hover .select,.image-list li.selected.hover .select,.image-list li.selected:hover .select{background-color:#3572b0}.file-list li.current .file-container,.file-list li.hover .file-container,.file-list li.selected .file-container,.file-list li:hover .file-container,.image-list li.current .file-container,.image-list li.hover .file-container,.image-list li.selected .file-container,.image-list li:hover .file-container{background-color:#ebf2f9;border-color:#ebf2f9}.file-list li.current .caption,.file-list li.hover .caption,.file-list li.selected .caption,.file-list li:hover .caption,.image-list li.current .caption,.image-list li.hover .caption,.image-list li.selected .caption,.image-list li:hover .caption{color:#000}.file-list li.current .file-container,.image-list li.current .file-container{border:1px solid #ccc}.file-list li.last,.file-list li:nth-child(4n),.image-list li.last,.image-list li:nth-child(4n){margin-right:0}ul.image-list li{width:175px}ul.image-list li.image-effect-preview.hover{background-color:#e9e9e9;border:0}ul.image-list li.image-effect-preview .caption{font-size:14px}ul.image-list li.image-effect-preview.selected{background-color:#3572b0;border:0}ul.image-list li.image-effect-preview.selected .caption{color:#fff;font-weight:700;font-size:14px;width:145px}ul.image-list li.image-effect-preview .image-container{margin:0 15px 5px;padding:0;width:145px;height:auto}ul.image-list li.image-effect-preview .image-container img{box-shadow:none;position:static;transform:translate(0)}#image-properties-dialog .image-effects-panel ul.image-list .image-container{height:auto}.svg-icon:before{display:none;content:""}.svg-icon.size-48{width:48px;height:48px}.svg-icon.aui-iconfont-file-image.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAxIDQuMDEgMCAwMDQuMDEgNDhoMzkuOThBNC4wMSA0LjAxIDAgMDA0OCA0My45OVY0LjAxQTQuMDEgNC4wMSAwIDAwNDMuOTkgMEg0LjAxQTQuMDEgNC4wMSAwIDAwMCA0LjAxek00My45OSAxQTMuMDEgMy4wMSAwIDAxNDcgNC4wMXYzOS45OEEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDQuMDFBMy4wMSAzLjAxIDAgMDExIDQzLjk5VjQuMDFBMy4wMSAzLjAxIDAgMDE0LjAxIDFoMzkuOTh6TTI5LjkgMTkuNTZsLTEuNjgxIDMgLjQwMi0zLjQxNWE1LjY4MyA1LjY4MyAwIDAxLTEuNzc3LTEuMjkzbC0zLjEyNSAxLjQzOCAyLjMzMy0yLjUyNmE1LjYzIDUuNjMgMCAwMS0uNjgtMi4wOTFMMjIgMTRsMy4zNzMtLjY3M2E1LjYzIDUuNjMgMCAwMS42NzktMi4wOUwyMy43MTkgOC43MWwzLjEyNSAxLjQzOGMuNS0uNTM5IDEuMTAyLS45OCAxLjc3Ny0xLjI5M0wyOC4yMiA1LjQ0bDEuNjgyIDNhNS42OTUgNS42OTUgMCAwMTIuMTk4IDBsMS42ODItMy0uNDAyIDMuNDE1YTUuNjgzIDUuNjgzIDAgMDExLjc3NyAxLjI5M2wzLjEyNS0xLjQzOC0yLjMzMyAyLjUyNmE1LjYzIDUuNjMgMCAwMS42OCAyLjA5MUw0MCAxNGwtMy4zNzMuNjczYTUuNjMgNS42MyAwIDAxLS42NzkgMi4wOWwyLjMzMyAyLjUyNy0zLjEyNS0xLjQzOGMtLjUuNTM5LTEuMTAyLjk4LTEuNzc3IDEuMjkzbC40MDIgMy40MTUtMS42ODItM2E1LjY5NSA1LjY5NSAwIDAxLTIuMTk4IDB6TTI2LjMzNCAxNGE0LjY2NyA0LjY2NyAwIDExOS4zMzQgMCA0LjY2NyA0LjY2NyAwIDAxLTkuMzM0IDB6bTEuNDg0IDIwLjY4M0wzMyA0MmwtLjUgMUwxNiAxOS41IDUuNSAzMiA1IDMxbDExLTEzIDExLjE5NSAxNS44MDVMMzUgMjZsOCAxMC0uNSAxLTcuNS05LjUtNy4xODMgNy4xODN6IiBmaWxsPSIjNzE3MTcxIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=")}.svg-icon.aui-iconfont-file-pdf.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQzLjk5IDBINC4wMUE0LjAwOSA0LjAwOSAwIDAwMCA0LjAxdjM5Ljk4QTQuMDA5IDQuMDA5IDAgMDA0LjAxIDQ4aDM5Ljk4QTQuMDA5IDQuMDA5IDAgMDA0OCA0My45OVY0LjAxQTQuMDA5IDQuMDA5IDAgMDA0My45OSAwek00LjAxIDQ3QTMuMDEgMy4wMSAwIDAxMSA0My45OVYxNC45ODVjOS4zODQtLjA3NyAxOS4xMzItMi4zMjUgMjktNi43MTJWNDdINC4wMXpNNDAgNDdoLTRWMTZoMy41MDJjLjI3NCAwIC40OTguMjIxLjQ5OC40OTNWNDd6bS01IDBoLTRWMTJoMy41MDJhLjUuNSAwIDAxLjQ5OC41VjQ3em04Ljk5IDBINDFWMTYuNDkzQzQxIDE1LjY3IDQwLjMyOCAxNSAzOS41MDIgMTVIMzZ2LTIuNWExLjUgMS41IDAgMDAtMS40OTgtMS41SDMxVjYuNzI0bC0uNzA3LjMyMUMyMC4zMTUgMTEuNTgxIDEwLjQ2NCAxMy45MDYgMSAxMy45ODVWNC4wMUEzLjAxIDMuMDEgMCAwMTQuMDEgMWgzOS45OEEzLjAxIDMuMDEgMCAwMTQ3IDQuMDF2MzkuOThBMy4wMSAzLjAxIDAgMDE0My45OSA0N3pNNSAyNGM4LjUtLjUgMTItMSAyMC00di0xYy04IDMtMTIgMy41LTIwIDR2MXptMCA2YzguNS0uNSAxMi0xIDIwLTR2LTFjLTggMy0xMiAzLjUtMjAgNHYxem0wIDZjOC41LS41IDEyLTEgMjAtNHYtMWMtOCAzLTEyIDMuNS0yMCA0djF6bTAgNmM4LjUtLjUgMTItMSAyMC00di0xYy04IDMtMTIgMy41LTIwIDR2MXoiIGZpbGw9IiM3MzZGNkUiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}.svg-icon.aui-iconfont-file-txt.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAxIDQuMDEgMCAwMDQuMDEgNDhoMzkuOThBNC4wMSA0LjAxIDAgMDA0OCA0My45OVY0LjAxQTQuMDEgNC4wMSAwIDAwNDMuOTkgMEg0LjAxQTQuMDEgNC4wMSAwIDAwMCA0LjAxek00My45OSAxQTMuMDEgMy4wMSAwIDAxNDcgNC4wMXYzOS45OEEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDQuMDFBMy4wMSAzLjAxIDAgMDExIDQzLjk5VjQuMDFBMy4wMSAzLjAxIDAgMDE0LjAxIDFoMzkuOTh6TTUgMzF2MWgzOHYtMUg1em0wLTE0djFoMzN2LTFINXptMC03djFoMjh2LTFINXptMCAxNHYxaDI0di0xSDV6bTAgMTR2MWgyOHYtMUg1eiIgZmlsbD0iIzcwNzA3MCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+")}.svg-icon.aui-iconfont-file-doc.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAwOSA0LjAwOSAwIDAwNC4wMSA0OGgzOS45OEE0LjAwOSA0LjAwOSAwIDAwNDggNDMuOTlWNC4wMUE0LjAwOSA0LjAwOSAwIDAwNDMuOTkgMEg0LjAxQTQuMDA5IDQuMDA5IDAgMDAwIDQuMDF6TTQzLjk5IDFBMy4wMSAzLjAxIDAgMDE0NyA0LjAxdjM5Ljk4QTMuMDEgMy4wMSAwIDAxNDMuOTkgNDdINC4wMUEzLjAwOSAzLjAwOSAwIDAxMSA0My45OVY0LjAxQTMuMDEgMy4wMSAwIDAxNC4wMSAxaDM5Ljk4ek01IDM5aDI4di0xSDV2MXptMC03aDMydi0xSDV2MXptMC0yMWgxN3YtMUg1djF6bTAgN2gxNHYtMUg1djF6bTAgN2gxOXYtMUg1djF6bTM2LjAwOC0xNUgyOS45OTJjLTEuMSAwLTEuOTkyLjg5NC0xLjk5MiAxLjk5MnYxMS4wMTZjMCAxLjEwMS44OTQgMS45OTIgMS45OTIgMS45OTJoMTEuMDE2YzEuMSAwIDEuOTkyLS44OTMgMS45OTItMS45OTJWMTEuOTkyYzAtMS4xLS44OTQtMS45OTItMS45OTItMS45OTJ6TTI5Ljk5MiAyNGEuOTkyLjk5MiAwIDAxLS45OTItLjk5MlYyMWwzLTMuNSA1IDYuNWgtNy4wMDh6bTExLjAxNiAwaC0yLjg5MWwtMS4wOTgtMS40MzUgMi40NjUtMi4wNjUgMi40MzMgMi45MDFhLjk5Mi45OTIgMCAwMS0uOTA5LjU5OXpNNDIgMjEuOTJMMzkuNDg0IDE5bC0zLjEzIDIuNjk1TDMyIDE2bC0zIDMuNXYtNy41MDhjMC0uNTQ3LjQ0NS0uOTkyLjk5Mi0uOTkyaDExLjAxNmMuNTQ3IDAgLjk5Mi40NDUuOTkyLjk5MnY5LjkyOHptLTEuNzY0LTkuMTAzbC0xLjk3Ni42MDYtLjc2LTEuOTIzLS43NiAxLjkyMy0xLjk3Ni0uNjA2IDEuMDMgMS43OTQtMS43MDYgMS4xNjggMi4wNDQuMzEyLS4xNTEgMi4wNjNMMzcuNSAxNi43NWwxLjUxOSAxLjQwNC0uMTUxLTIuMDYzIDIuMDQ0LS4zMTItMS43MDYtMS4xNjggMS4wMy0xLjc5NHpNMzcuNSAxNi4zYTEuMyAxLjMgMCAxMTAtMi42IDEuMyAxLjMgMCAwMTAgMi42eiIgZmlsbD0iIzcwNzA3MCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+")}.svg-icon.aui-iconfont-file-xls.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAwOSA0LjAwOSAwIDAwNC4wMSA0OGgzOS45OEE0LjAwOSA0LjAwOSAwIDAwNDggNDMuOTlWNC4wMUE0LjAwOSA0LjAwOSAwIDAwNDMuOTkgMEg0LjAxQTQuMDA5IDQuMDA5IDAgMDAwIDQuMDF6TTQ3IDE2VjQuMDFBMy4wMSAzLjAxIDAgMDA0My45OSAxSDE2djE1aDMxem0wIDF2MTBIMzJWMTdoMTV6bTAgMTF2MTBIMzJWMjhoMTV6bTAgMTF2NC45OUEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDMydi04aDE1em0tMTYgOEgxNnYtOGgxNXY4em0tMTYgMEg0LjAxQTMuMDEgMy4wMSAwIDAxMSA0My45OVYxN2gxNHYzMHpNMSAxNlY0LjAxQTMuMDEgMy4wMSAwIDAxNC4wMSAxSDE1djE1SDF6bTE1IDEyaDE1djEwSDE2VjI4em0wLTExaDE1djEwSDE2VjE3eiIgZmlsbD0iIzcwNzA3MCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+")}.svg-icon.aui-iconfont-file-ppt.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAxIDQuMDEgMCAwMDQuMDEgNDhoMzkuOThBNC4wMSA0LjAxIDAgMDA0OCA0My45OVY0LjAxQTQuMDEgNC4wMSAwIDAwNDMuOTkgMEg0LjAxQTQuMDEgNC4wMSAwIDAwMCA0LjAxek00My45OSAxQTMuMDEgMy4wMSAwIDAxNDcgNC4wMXYzOS45OEEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDQuMDFBMy4wMSAzLjAxIDAgMDExIDQzLjk5VjQuMDFBMy4wMSAzLjAxIDAgMDE0LjAxIDFoMzkuOTh6TTI4IDEydjFoMTV2LTFIMjh6bTAgNnYxaDE1di0xSDI4em0tMiA2djFoMTd2LTFIMjZ6TTUgMzh2MWgzOHYtMUg1em0wLTd2MWgzOHYtMUg1em0wLTE0LjVhOS41IDkuNSAwIDAwOS41IDkuNSA5LjUgOS41IDAgMDA5LjUtOS41QTkuNSA5LjUgMCAwMDE0LjUgNyA5LjUgOS41IDAgMDA1IDE2LjV6bTEgMGE4LjUgOC41IDAgMDE4LTguNDg1djguMTM4bC03LjYyMyAyLjg1OUE4LjUwOSA4LjUwOSAwIDAxNiAxNi41em04LjUgOC41YTguNTAyIDguNTAyIDAgMDEtNy43NzItNS4wNTJsNy42NDYtMi44NjcgNS43NzMgNS43NzNBOC40NyA4LjQ3IDAgMDExNC41IDI1em02LjM1My0yLjg1M0wxNSAxNi4yOTNWOC4wMTVhOC41IDguNSAwIDAxNS44NTMgMTQuMTMyeiIgZmlsbD0iIzcwNzA3MCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+")}.svg-icon.aui-iconfont-file-code.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAxIDQuMDEgMCAwMDQuMDEgNDhoMzkuOThBNC4wMSA0LjAxIDAgMDA0OCA0My45OVY0LjAxQTQuMDEgNC4wMSAwIDAwNDMuOTkgMEg0LjAxQTQuMDEgNC4wMSAwIDAwMCA0LjAxek00My45OSAxQTMuMDEgMy4wMSAwIDAxNDcgNC4wMXYzOS45OEEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDQuMDFBMy4wMSAzLjAxIDAgMDExIDQzLjk5VjQuMDFBMy4wMSAzLjAxIDAgMDE0LjAxIDFoMzkuOTh6TTYgMTcuNWwxMC0xMCAuNSAxLTkgOSA5IDktLjUgMS0xMC0xMHptMzcgMTJsLTEwLTEwLS41IDEgOSA5LTkgOSAuNSAxIDEwLTEwek0xOCA0Mi45NjJoMUwzMCA2aC0xTDE4IDQyLjk2MnoiIGZpbGw9IiM3MDcwNzAiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}.svg-icon.aui-iconfont-file-video.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQzLjk5IDBINC4wMUE0LjAwOSA0LjAwOSAwIDAwMCA0LjAxdjM5Ljk4QTQuMDA5IDQuMDA5IDAgMDA0LjAxIDQ4aDM5Ljk4QTQuMDA5IDQuMDA5IDAgMDA0OCA0My45OVY0LjAxQTQuMDA5IDQuMDA5IDAgMDA0My45OSAwek00NyAxMXYzMi45OUEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDQuMDFBMy4wMSAzLjAxIDAgMDExIDQzLjk5TDEuMDMxIDExSDQ3em0tMTIuNzkyLTFoLTUuMzMxbDguODU2LTloNS4zMzFsLTguODU2IDl6bS03IDBoLTUuMzMxbDguODU2LTloNS4zMzFsLTguODU2IDl6bS03IDBoLTUuMzMxbDguODU2LTloNS4zMzFsLTguODU2IDl6bS03IDBINy44NzdsOC44NTYtOWg1LjMzMWwtOC44NTYgOXptLTcgMEgxLjAzMnYtLjI1MUw5LjcyNiAxaDUuMzM4bC04Ljg1NiA5ek0xIDQuMDFBMy4wMSAzLjAxIDAgMDE0LjAxIDFoMy45OTNMMSA4LjA0OFY0LjAxek00Mi45NzQgMTBMNDcgNS45MzNWMTBoLTQuMDI2em0tNy4wOTcgMGw4Ljc4My04LjkyNUM0NiAxLjM3OSA0NyAyLjU3NyA0NyA0LjEyNkw0MS4xODYgMTBoLTUuMzA5ek0xOSAzOWwxMi0xMC41TDE5IDE5djIwem0xLTE4bDkuNSA3LjVMMjAgMzdWMjF6IiBmaWxsPSIjNzA3MDcwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=")}.svg-icon.aui-iconfont-file-zip.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAxIDQuMDEgMCAwMDQuMDEgNDhoMzkuOThBNC4wMSA0LjAxIDAgMDA0OCA0My45OVY0LjAxQTQuMDEgNC4wMSAwIDAwNDMuOTkgMEg0LjAxQTQuMDEgNC4wMSAwIDAwMCA0LjAxek00My45OSAxQTMuMDEgMy4wMSAwIDAxNDcgNC4wMXYzOS45OEEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDQuMDFBMy4wMSAzLjAxIDAgMDExIDQzLjk5VjQuMDFBMy4wMSAzLjAxIDAgMDE0LjAxIDFoMzkuOTh6TTIwIDMxLjAwMnY4Ljk5QzIwIDQxLjEgMjAuODg3IDQyIDIxLjk5OCA0Mmg0LjAwNEEyLjAwNSAyLjAwNSAwIDAwMjggMzkuOTkxdi04Ljk4OWMwLS41NTMtLjQ1My0xLjAwMi0uOTk3LTEuMDAyaC02LjAwNmMtLjU1IDAtLjk5Ny40NTYtLjk5NyAxLjAwMnpNMjcuMDAzIDMxYy0uMDA2IDAtLjAwMyA4Ljk5MS0uMDAzIDguOTkxIDAgLjU1Ny0uNDUgMS4wMDktLjk5OCAxLjAwOWgtNC4wMDRBLjk5OC45OTggMCAwMTIxIDM5Ljk5MXYtOC45ODlMMjcuMDAzIDMxek0yMiAzNy45OTl2MS4wMDJjMCAuNTUyLjQ0My45OTkgMS4wMS45OTloMS45OGMuNTU4IDAgMS4wMS0uNDQzIDEuMDEtLjk5OXYtMS4wMDJBLjk5OS45OTkgMCAwMDI0Ljk5IDM3aC0xLjk4Yy0uNTU4IDAtMS4wMS40NDMtMS4wMS45OTl6bTIuOTkuMDAxYy4wMTIgMCAuMDEtLjAwMi4wMS0uMDAxdjEuMDAyTDI0Ljk5IDM5aC0xLjk4Yy0uMDEyIDAtLjAxLjAwMi0uMDEuMDAxdi0xLjAwMmwuMDEuMDAxaDEuOTh6TTIwIDZ2MWg1VjZoLTV6bTAtNHYxaDVWMmgtNXptMyA2djFoNVY4aC01em0wLTR2MWg1VjRoLTV6bS0zIDZ2MWg1di0xaC01em0zIDJ2MWg1di0xaC01em0tMyAydjFoNXYtMWgtNXptMyAydjFoNXYtMWgtNXptLTMgMnYxaDV2LTFoLTV6bTAgNHYxaDV2LTFoLTV6bTAgNHYxaDV2LTFoLTV6bTMtNnYxaDV2LTFoLTV6bTAgNHYxaDV2LTFoLTV6bTAgNHYxaDV2LTFoLTV6IiBmaWxsPSIjNzA3MDcwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=")}.svg-icon.aui-iconfont-file-generic.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAxIDQuMDEgMCAwMDQuMDEgNDhoMzkuOThBNC4wMSA0LjAxIDAgMDA0OCA0My45OVY0LjAxQTQuMDEgNC4wMSAwIDAwNDMuOTkgMEg0LjAxQTQuMDEgNC4wMSAwIDAwMCA0LjAxek00My45OS45OEEzLjAxIDMuMDEgMCAwMTQ3IDMuOTkxdjQwLjAxNmEzLjAxIDMuMDEgMCAwMS0zLjAxIDMuMDEzSDQuMDFBMy4wMSAzLjAxIDAgMDExIDQ0LjAwOFYzLjk5MkEzLjAxIDMuMDEgMCAwMTQuMDEuOTc5aDM5Ljk4ek0xOSAzMC45OTVDMTkgMzQgMjEgMzYgMjQgMzZzNS0yIDUtNVYxMy45ODZjMC0zLjk4Ni0zLTYuOTk3LTcuMDA0LTYuOTk3UzE0Ljk5MiAxMCAxNC45OTIgMTMuOTl2MTguMDA1YzAgNS4wMDUgNCA5IDkuMDA0IDlBOC45NjMgOC45NjMgMCAwMDMzIDMxLjk4MlYxMi45OTRoLTF2MTguOTg4YzAgNC41MTgtMy41IDguMDEzLTguMDA0IDguMDEzcy04LjAwNC0zLjQ5NS04LjAwNC04VjEzLjk5YzAtMy40OSAyLjUtNiA2LjAwNC02QzI1LjUgNy45OSAyOCAxMC41IDI4IDEzLjk4NVYzMWMwIDIuNS0yIDQtNCA0cy00LTEuNS00LTQuMDA0VjIwaC0xdjEwLjk5NnoiIGZpbGw9IiM3MDcwNzAiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}',""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGEAAABgCAIAAACCOItRAAALGElEQVR4Ae2ai1cTxx7H+7/ee0572qprtUW9gq+T+giicPWktnhFqpeigDwOPkLL44KNiJqLqIiCFPISMOGVTWJIMvfL/s6u2x2g2cck2Xv4HM3ZnVlmdz77m9mdmf2MGVgJjXY2X6iukjapAvi18O/wPgkcrPFcbu+fWs4wN6N3lJm645PE4GkPrLreUS52/6QklC+Ptbz56GJH8qPTkp49VZ6fu/1DgcCwVQb8/t86Wxq+lfR8/n3XkksdZUebJR11v07IzClyoaEWSceJhzE3Ooq1fi1pNI4nmNNkX/bqLNU/L7jO0bz/UxO7McbEEGn1SCpNU7LbHE11qRdfM7jORJGcqN0rEb6pVZc5Wu7TnvfeZ1lWBJnFxcVEYnWDmSJ256BEfNMx6TJH7zs82kOniPube32tho4/MjjLTCCPnHCto4UOr6Tw1TE4MhEOe6ua53Ydbd+t1A8P44le9fv6riOeXOyXzTjyTiy/bTra/C6/62jbqnqerCUedw5vefyuo8yTuioc/FN384mGfnnX0ZZox+/recu2ZNdR6mEzHb+3Z9KOo6ScisZioU3mI5EIfi38w38Qi0XlJB4fhUpxxGb8dHz1r1bfj1rHQ2KQk2uV4SgX+nmPBDyDIYuOmv4TEkYsFkZAldtRcvLSXkww4S98r/O2HEUi4ZSc3NjYyFolnU6jzYbRVHUsLUTL7CjeXS+pHDERSvLA8T85yqZl5hzp7EZIRz6bLuM75GzjZkOrudJMpjxFTxXIXdWfHLFcljlNNs90lubK5YiCCKNf/waT/UckGgkXM7GYL8jdqqMDLWNMDMvJVEiF5TfK4Sg5SXNADS+VA6PDtED0t9q2v5zMz5Ijwe9HBcbmy+so1OFRhvttMd0k7KlNTaDm5kBwLrYJfudfBQOBwGhwIqyurMmZFdGOiDm1/04nV0ruaCVIOq7OULVzmcRieHYyUCftzNGOIG7oqhw35Sixtk5VzWVSzAyhhcWyOaKpNayRjU+Odf9UT61MXWiq8XoRYhpVl9v9CKIXwbHffsRu45J5R1o4RCLzLnEU7ScpGscbGtv7hv87HVqSM4xIxoKdzRRrxP7vvReqpf1Sm2zOkdatzGU3n+jzSKhwRzk5OqE874Gnoy/wOryYzrHtySTeTf7+oOtfvnoE1ymvr2sGpVqJI3p+h2Phio6jjfmx5nOSSk2f9ZOadURVnVeGvsmKdZSb7/FJOr67h5mQ0jmKxROoZ0pOxeMLlelIDl6poc748D7Koud9yRzh+DRVNSOvVaKj1EgjfTr0z3MwBTxDtk+3sPC+u6O9vr7+FDjtrauru3TpUldXFyqzdbddKOQUsFF5jnQDdAqif9teVn3//r3X6z21Dd3d3Yxjo8Coqtl0JfZHmefnJZWa9qkEK5o/FBhHa2vrqR0ZGhraorTQJhuV+g6Zi4feTk7OxvOsGDCJg1ZzUgd2kchUtHTNIAUX3FH6uXPnGhoaaJt2UcLy8nKE3gAqxhG/ll2soCtXrpzkOHv2LCwYHDEOLWvLEuCUhiNldkRfvVAcLTHTDA4OnlD5QUHb1TRpKYyD0jWamprQrxtKwG2ALGyUzVHy00ds3sdpZpaLFy8eV3j06JHWK505c4YSsYG60TZgHFrWwMAAI7gSaIO2cVgZHBU+fX9U1fUhx0yyZf3hRaubz+crxpEhnczyUIGIrJI6oqky4u+1fpmZ45gCrtuQjomkYxyMo5gscO3atdOnT+t3cUA+X8B6Ad6jGCsIdsQSNOtKHL83yXbATCXRLhxxNDs7yxcYDAbJhWpkVaQjMNUr6TjwQ+90qthGhzfmGgUEzg65BOMwm9XR0UGJKBlrs4UcyMdX1kKhP8Q6AtM3MOwwzBD5mosAF12tcPfuXcbx7Nmzah2Mw2wWeiKPx0PpuCtwgVGOsiY+K9oRyLy85ZXM8+rVK7piXDrflVKVHHQE2tvbKb2/vz+eSCxtssgKOeGOiLVxP1Y+zFJbW3tUobe3l3HcvHmTcgHjsJCF2KT0q1evluq5ZiQTeh64c72xfhNfMSCUtPpgAGEo7uHDh846ikajlI57U3pH1mlsbPyHQltbmyHr3bt3SCcYh+NZkYXFcDgMR6n1lbwCza6U3xFEHFHhQ0nLYkBkFl6XVlZW8Pl4TAXvoolE4uPHj+V3BDBwp+tG4yqLIwiCkdg2wF2pHc3MzNy+fftHhZGREdyrp0+fHlaALMPBGJoiHb8MFJ2FdKLILFxDbEfW19dL56inp+cwhz4Rl8t0kEF9Ip9lzZG+r4mqUMvSgguFUzqiDM2QtmkXwYV3UOcd3bp1q+qvQGQx22il7ZCFesKCwRHjiG4PSoBTJx29ePGiSgVTRWhxT548wRDf4Oj69evMNlQsfndwRJWEJlOOPnz4sLCwoO1SCQhJyMKGXUcYfH+nYLDQ19dH6RrMNmgjKBa//Ls7nQIjW30li3Gk75JgBH+olaBXhsOsO6KLw5ASF8r34kjXHGGXiQEl0ykQyFrdMB4pxpEhnczyUIGILCuOvlXgZ4sITNFjGEXH+P1+JgaUTKfAkgFfSVOOgKEN4vGn37Xi6KAChqlsG7CeQcdgZpqJAbMidIqxsTHsol044oh6bkOBqVTKtCOMkuj60HmzrZient7Zo/1O6qCK1t7RAdt3xHRgqECJKNm0o5aWlgMK/EyI3iMdwATw4MEDugCariVwtyM6GIfZLPREaHSUjuZszhG8YCRJV9nZ2bndrUZN8MsEoJ398ePHfJWcckShROlra2vmHAGsO3+jMjExwUoIvNB5sfxtyIrH48460mITPbdpR+Dy5cv7FTCqpNJLA9TQee/fv2/ISiaTzjrKZrOUjtcLK47Q4jBWosvFByHYLU0Q0Rlxav6MeCo55YjPsuKI/l5SKYEmuit0OgQRzs6PRSvOERgdHZVUMGnNRHLv3j060aFDh+AL143G5QJHtNq1T0WcJnSfUENnwScYdN2Y5eCXv6n7YKDYLPGOwI0bN/aqYBv1YU6DlTsqH4v9mPGJEFxzw64sy/pEPqsMjnhNmFF0VhNKwxwIFY5PU8I6qLnZRCtthywHHJGmPSoYkaNcB4OIisVMSPjP4J2I2QYNEEXhV6AjvjIE7rkjQQTjWoF45TVoYrZBA0Sx+OU/7KVTYNTmmCMwPj6OKYuvVexrQglUFGamtPcgXLTmCLtMDCiZToGJJCcdASz+Ya7yKxXsMhtoRWFp3/AGTBVACDAxaDGLgednIh7VmGmjul24cMGObs214TmApxtVgKbBRIBZEToFHojOO6Lqfany5s0bZgl8YUElYE7WkJXJZKgCGO4zAaB7CqugYxLiCGBRgGpoeY0EMUglBAKBLV9ecCcEOVpdXQ0pUJyKcjQ1NfWFguXJti9UqKHxtxo1wS8TAN0AgIYmxBFfSWYe3ED6W0y/0IC5ZMALCaIgFevocxVrYUh/e/78edxVPMtYqYAacoQ4dYcjfIiFy8V7MPrOUgYRbgzOKNxRUoWZB99W4Q8xqYwVxxAoiSaUDzX6IBLpSMCNBfwATdDjjB75rnFESxQl0EQDNDoLv97vAqBmXgXbqI+IIKLyaT2Sc+Q2TdQ3OR5EVDj6QVc64jWhSnghEBRErnTEV0a75wKCyOWOaF4BVXJQE0rggsjljmgKCW/DmiabjU4rCnNGrnfEv+9R3TDXY0e35hpluseR+ephRslmB4c5WfPf1brqSYcNy/ONO/Zr7neE8JlTsDzZNqeChuY2R+YraW1Olv6WW6fddcSFIVrc/7OjsIrNRTS2Pf8DLXWvw5qCl2YAAAAASUVORK5CYII="},function(e,t,n){var o=n(79);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(12)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,'#insert-image-dialog .loading-message,#insert-image-dialog .upload-in-progress,#insert-image-dialog ul.image-list li .loading,#searched-images .loading-message{background-image:url("data:image/gif;base64,R0lGODlhEAAQAPMPALu7u5mZmTMzM93d3REREQAAAHd3d1VVVWZmZqqqqoiIiO7u7kRERCIiIgARAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAPACwAAAAAEAAQAEAEcPDJtyg6dUrFetDTIopMoSyFcxxD1krD8AwCkASDIlPaUDQLR6G1Cy0SgqIkE1IQGMrFAKCcGWSBzwPAnAwarcKQ15MpTMJYd1ZyUDXSDGelBY0qIoBh/ZoYGgELCjoxCRRvIQcGD1kzgSAgAACQDxEAIfkEBQcADwAsAAAAAA8AEAAABF3wyfkMkotOJpscRKJJwtM4ZgGMUtAQQcFNB/wQglUUWSYdD8FgAhiyZqxHAmEwrJKPwAGBeEI/gZFvkmAANYuBT8EQBRKDtFGsQQwAiYVVY8jCJXNMIHN/GJNpIxEAIfkEBQcADwAsAAAAABAADwAABFrwyfmColgiydpaQiY5x9MtZbZUT9Il0wBIhgALjKKEg1IUAw0hJRkEfoXZBIBYLQsXCUAXCGKckoRhK+q2vBiEAtsNGGYAwOcjcioG8MeATAnM4gtrBia3kiMAIfkEBQcADwAsAAAAABAAEAAABFzwySkDvdKsd5g8APYIBuch2CYRQBeiyyApiMwYQeAtFqEapIfqAWiIHiWKrLbYBBIJEYJAcIByAdkFUegKKKHLYDxQDRSW4wSQfYzVQskC0BweAbIm3C23w/UYEQAh+QQFBwAIACwAAAAAEAAOAAAERRDJiYyhWB5ZCs/c1iEEKBleF5DYQQBIIVheNWrFhtUrpWOCySBABAk6hZLlkiEga5IBBiDL9CjUjhSxNSEzXewvappEAAAh+QQFBwAOACwAAAAAEAAQAAAEa9DJ6QCg2K0klZHGkC0GpyiO0ojZgAznQKAUkIhKYBlC1TCSBUABWEwWg4NDwJIMOJQFI7CoIgcDIyZwODAUWKyWEmg0CIgoZiAIYK6UpwQYzFolhELSQRhnEgVKDlBqEw0FFyNrBW4Zjn4RACH5BAUHAA8ALAAAAAAQABAAAARc8Mn5xqBYAhkCz9yVeAEDSsoyPkyCWcuTAFaASMwtDXSGEAfM4oJBJBbIZCyTQCCCSlCCIRAYTpPDcYndPBBcjAHReCxughOhoHhceaDFmkiMOwoXh+u0OAjCEhEAIfkEBQcADgAsAQABAA8ADwAABFnQySEBkEnqWi9A2+ZdyOUspzZQTmI4w6Es9ICGhvBu96aYoSDAQMwENZ+D7ChZlIKLVXPQcOw2hYJCwagqHAxfwdBoBBzf0CA7IBAWgmOicHGjGkCV5nCMAAAh+QQFBwAPACwAAAAAEAAQAAAEXfDJ+daiWN43hgQbNlwdF4TU4nWL4mFWbAGJpAQZHCB4jgUvH2WgKAonA4Oy9mkAMK4ho1DoTRgEhcZREHgagQSC8Qg0EJLA0yYQ1HrBSWPRfhwcPsdXICHnNko5EQAh+QQFBwAOACwAAAEAEAAPAAAEWtDJ6daSg2ppJdha922ZNpTBCE6JAlxUSakOQtwImOyAUPwMUCDgWpwCBJkksHK8JguEgClp1BYNRsKhODgPBklCFjgwAIQtTCNwmB2G9gZgdTCCNeVGoQBFAAAh+QQFBwAPACwAAAEAEAAPAAAEWvDJSd+qeK5RB8fDRRWFspyotAAfQBbfNLCVUSSdKDV89gDAwcFBIBgywMRnkWBgcJWDJCZRIKAPwePIOAADCIkhIAFIyAkDYqD1EZzqR8AJoiMOp6PvTMZEAAAh+QQFBwAPACwAAAEADwAPAAAEWvBJQIa8+ILSspdHkXxS9wxF4Q3LaQbjtbBY4ABZKykCwyie2WBgaBiBuSGrBTh4cDLDg+BJKKBOIMIwTAROsNOEAFBIEZaHTi1APMyPhGF9cb+ljy8pHsNEAAA7");background-repeat:no-repeat}#insert-image-dialog .loading-message,#insert-image-dialog .upload-in-progress,#searched-images .loading-message{background-position:left 50%;height:20px;line-height:20px;padding-left:24px}#insert-image-dialog h2.dialog-title{white-space:normal}#insert-web-image-form fieldset.inline,#search-image-form fieldset.inline{padding:0;margin-right:-10px}#insert-web-image-form,#search-image-form,#upload-attachment{padding:0 0 10px}#attached-files,#attached-images,#searched-images{overflow:auto;margin-right:-10px}#upload-attachment .upfile{margin-left:8px;padding:0}#insert-web-image-form .web-image-input{display:inline}.insert-web-image .image-preview-area{margin-top:0}#insert-web-image-image-url{max-width:420px}.insert-web-image .image-preview-error{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABA0lEQVR42p2QP0tCURiH7zdQRA3u4OJUiyDY4CDtTuEXuXs0JEQ4uDk5C0EuKoEu+SWcg5baLCS7tNTx98IzyMWjXoeHe95/z3vODdzi2kdTvIo30fL1+YbLIhYOfsV5GsFAOL59zsNjBRfij60lEXKbf1E5RvDExl4URYGwXJfc6JCgwqZYhBp2hs5n4odadZ9gzKYu2x1YrUPt2SeosWEtijsEBfGN5HKXYErxweKkAMk9PbOkoE5hJXI+AbUVvfVtwZzkHTECAGptel8cgisSnyJDk+8GRlZ8MdOwxITghoa9ArhlZmzB+/abDjwh+c8+LBgRnMLEBHnxKJYpBpfMFDbGjWcGPFD11gAAAABJRU5ErkJggg==") 60px no-repeat;text-align:center}#insert-image-dialog .image-preview,#insert-web-image-image-url{margin-left:8px}.insert-web-image .image-preview-throbber{text-align:center;padding-top:50px}.insert-web-image .faraway{position:absolute;left:-9999em;top:-9999em}#search-image-form .search-input{display:inline}#search-image-form .search-input .search-image-text{max-width:250px}#search-image-form .aui-button,#search-image-space-select{margin-left:8px}',""])},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,".wiki-content .columnLayout{border-spacing:8px}.wiki-content .cell,.wiki-content .footer,.wiki-content .header{border:2px dashed #ccc;margin:8px;padding:4px 8px}.wiki-content .header,.wiki-content .header .innerCell{margin-bottom:0}.wiki-content .footer,.wiki-content .footer .innerCell{margin-top:0}.wiki-content .innerCell{outline:0;overflow:auto;overflow-y:hidden;height:100%}.section-decorator{display:table-cell;width:14px;overflow:visible}.section-decorator button{border:0;background:transparent;box-shadow:none;padding:7px 0;text-align:center;width:14px;height:20px;color:#aaa}.show-property-panel .icon{width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid #333}.section-decorator .move-section{cursor:move}body.mceContentBody.pl2-contextual{margin:0;padding:0}.wiki-content .contentLayout2 .columnLayout{border-spacing:4px 2px;margin-top:0;margin-bottom:0}.wiki-content .contentLayout2 .cell{border:1px dashed #999;border-radius:5px;padding:0}.wiki-content .contentLayout2 .innerCell{padding:5px;min-height:20px}.wiki-content .contentLayout2>:first-child{margin-top:5px}",""])},function(e,t,n){var o=n(82);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(12)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,"#property-panel.page-layout-2-panel .icon-fat .icon,#rte-toolbar-row-pl2-toolbar .icon-fat{width:20px;height:20px}#property-panel.page-layout-2-panel .icon-fat,#rte-toolbar-row-pl2-toolbar .layouts button{padding-left:6px;padding-right:6px}#property-panel.page-layout-2-panel a.icon-fat span.icon,#property-panel.page-layout-2-panel a span.icon{display:inline}",""])},function(e,t,n){var o=n(84);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(12)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,"#property-panel a.macro-placeholder-property-panel-display-newline-button span.icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvklEQVR42rVTPQuFIBT1p1t7e2EFDrXnVmNb4Ca4BS5BW9AfOA+F+wjfAwfpwuHcDzn3olcGIAv5An3fo+u6L55x27bE5P+cZdkWqVJH6pDMsWxTSsFjmqbAMZIC4zjivm9c14XjOLDvO4wx2LYNwzCkBZqmwXmecM7BWgutNdZ1xTzP8LWkQFVVWJYFUspwQUII1HUd2NeSApxzeJRlCfKLovBxYPa6xe9KsedHLc7TXryzidQpnurvZNm/8QMbqb4yyqv4rAAAAABJRU5ErkJggg==);width:16px;height:16px;display:inline-block}#property-panel a.macro-placeholder-property-panel-display-inline-button span.icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAw0lEQVR42q1TMQqAMBDr0/UBroJiBUEf0E51dRMcxUlwFBcHPxA5IUuLONSDcDmupO01VQCiEC+gtYagrusH5FVVCfdz0FfRQVVR5CmoLtzfnWBf/R7WWhhjIFnAmvlToOs6XNeF8zyx7zvWdcU8zxjHEW3bhgK8NydaFAWO48C2bViWBdM0YRgGOOcgPc7t9RWyLEPf92ia5hEuyxJ5nj+Lpae+IkkSpGkKZnLW6u/gDHzX+c6kP4j/nfjmNJ8HiP6NN81gzxU6QYojAAAAAElFTkSuQmCC);width:16px;height:16px;display:inline-block}#property-panel a.macro-placeholder-property-panel-display-inline-button,#property-panel a.macro-placeholder-property-panel-display-newline-button{padding:0 6px}",""])},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,".editor-inline-macro[data-macro-name=status]{background:transparent;border:0;min-height:16px;margin:0;vertical-align:-4px}",""])},function(e,t,n){var o=n(87);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(12)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,"#property-panel a.macro-property-panel-Grey span.icon{background-color:#42526e}#property-panel a.macro-property-panel-Green span.icon{background-color:#00875a}#property-panel a.macro-property-panel-Red span.icon{background-color:#bf2600}#property-panel a.macro-property-panel-Yellow span.icon{background-color:#ff991f}#property-panel a.macro-property-panel-Blue span.icon{background-color:#0052cc}#property-panel a.macro-property-panel-Blue,#property-panel a.macro-property-panel-Brown,#property-panel a.macro-property-panel-Green,#property-panel a.macro-property-panel-Grey,#property-panel a.macro-property-panel-Red,#property-panel a.macro-property-panel-Yellow{padding:6px;display:inline-block}#property-panel a.macro-property-panel-Blue span.icon,#property-panel a.macro-property-panel-Brown span.icon,#property-panel a.macro-property-panel-Green span.icon,#property-panel a.macro-property-panel-Grey span.icon,#property-panel a.macro-property-panel-Red span.icon,#property-panel a.macro-property-panel-Yellow span.icon{display:inline-block;background-image:none;margin:0;border:0;min-width:auto;border-radius:3px;width:16px;height:16px}#property-panel .editable.status-macro-title{margin-right:10px;float:none;text-transform:uppercase;text-decoration:none;width:88px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:11px;padding:0 5px}#property-panel input.editable.status-macro-title{outline:none;height:30px;line-height:20px;vertical-align:bottom;padding-top:2px}",""])},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,".mce-content-body .mce-visual-caret{background-color:#000;background-color:currentColor;position:absolute;display:none}.mce-content-body .mce-visual-caret-hidden{display:none}.mce-content-body [data-mce-caret]{left:-1000px;margin:0;padding:0;position:absolute;right:auto;top:0}.mce-content-body .mce-offscreen-selection{left:-2000000px;max-width:1000000px;position:absolute}.ephox-snooker-resizer-bar{background-color:#22b5fe;opacity:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ephox-snooker-resizer-bar:hover{opacity:1}.ephox-snooker-resizer-cols{cursor:col-resize;width:3px!important}.ephox-snooker-resizer-rows{cursor:default;height:0!important}.ephox-snooker-resizer-bar.ephox-snooker-resizer-bar-dragging{opacity:1}table[data-mce-selected]{outline:1px solid #fff}",""])},function(e,t,n){e.exports=void 0},function(e,t,n){e.exports=void 0},function(e,t,n){e.exports=void 0},function(e,t,n){e.exports=void 0},function(e,t,n){e.exports=void 0},,,,,,,,function(e,t,n){"use strict";n.r(t);var o=n(6),r=n.n(o),a=n(7),i=n.n(a),l=(n(39),n(41),n(43),n(1)),s=n.n(l),c=n(0),d=n.n(c);function u(){return i.a.Env.browser.isSafari()||i.a.Env.browser.isChromium()}function g(){return c.AJS.Rte}var m=n(3),p=n(4);function f(e){return(e=e&&e.jquery?e[0]:e)?("BR"!==e.tagName&&3!==e.nodeType||(e=e.parentNode),e&&9===e.nodeType&&(e=null),e):null}var h={};h.Rte={HIDDEN_CHAR:"\ufeff",ZERO_WIDTH_WHITESPACE:"&#x200b;",editorId:"wysiwygTextarea",isQuickEdit:!1,getEditor:()=>c.tinymce.activeEditor,getCurrentBaseUrl(){if(!this.currentBaseUrl){var e=c.document.location;this.currentBaseUrl=`${e.protocol}//${e.hostname}${e.port?`:${e.port}`:""}`}return this.currentBaseUrl},showSelection:e=>{g().showElement(c.tinymce.activeEditor.selection.getStart(),e)},isAnyPartShown:e=>{var t=f(e);if(!t)return p.a.error("AJS.Rte.isAnyPartShown: no element to find"),!1;var n=s()(t),o=n.offset().top,r=o+n.outerHeight(),a=s()(g().getEditor().getDoc()).scrollTop(),i=a+s()(g().getEditorFrame()).height();return r>a&&o<i},showElement:(e,t)=>{var n=f(e);if(n){var o=s()(n),r=g().getEditor(),a=s()(r.getDoc()),i=o.offset().top,l=i+o.outerHeight(),c=a.scrollTop(),d=c+s()(g().getEditorFrame()).height(),u=()=>{g().bindScroll("AJS.Rte.showElement",(()=>{g().unbindScroll("AJS.Rte.showElement"),setTimeout(t,1)}))};i<c?(g().scrollTo(i),t&&u()):l>d?(g().scrollTo(Math.min(i,c+l-d)),t&&u()):t&&t()}else p.a.debug("AJS.Rte.showElement: no element to show - skipping")},scrollTo:e=>{var t=g().getEditor();e=Math.ceil(e),s()(t.getDoc()).scrollTop(e)},bindScroll:(e,t)=>{var n=g().getEditor();s()(c.document).add(n.getDoc()).add(n.getWin()).bind(`scroll.${e}`,t)},unbindScroll:e=>{var t=g().getEditor();t?s()(c.document).add(t.getDoc()).add(t.getWin()).unbind(`scroll.${e}`):s()(c.document).unbind(`scroll.${e}`)},getEditorContainer:()=>c.document.getElementById("wysiwyg"),getEditorFrame:()=>c.document.getElementById(`${g().getEditor().id}_ifr`),webResourcePath:"/download/resources/com.atlassian.confluence.tinymceplugin%3Atinymceeditor/",getResourceUrlPrefix(){return this.resourceUrlPrefix||(this.resourceUrlPrefix=this.getCurrentBaseUrl()+m.a.get("editor-plugin-resource-prefix")),this.resourceUrlPrefix},getTinyMceBaseUrl(){return this.absoluteUrl||(this.absoluteUrl=`${this.getResourceUrlPrefix()+this.webResourcePath}tinymcesource/`),this.absoluteUrl},getMinEditorHeight:()=>+m.a.get("min-editor-height"),getTinyMceEditorMinHeight:e=>{e=e||0;var t=g().getMinEditorHeight(),n=0;return t||(Array.prototype.forEach.call(c.document.querySelectorAll("#editor-precursor,#header-precursor,#header"),(e=>{n+=s()(e).outerHeight(!0)})),s()(d.a).height()-n-e)},editorFocus:e=>{if(e&&!e.destroyed){var t,n=(t=e.dom.getRoot(),u()&&!s()(t).parents("body").length&&(t=s()(e.getBody()).find("p:first-child")[0]),t);n?(e.selection.select(n,!0),e.selection.collapse(!0),n.focus()):p.a.error("editorFocus was called with an invalid node"),e.getBody().focus(),e.getWin().focus()}}},h.KEYS={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,META:91};var v=h,b={offset(e){var t=s()(e).offset(),n=c.tinymce.activeEditor.iframeElement,o=s()(n).offset(),r=n.contentWindow.document,a=s()(c.tinymce.activeEditor.getBody()),i=s.a.support.boxModel&&r.documentElement.scrollTop||a.scrollTop(),l=s.a.support.boxModel&&r.documentElement.scrollLeft||a.scrollLeft();return{top:t.top-i+o.top,left:t.left-l+o.left}},getSelectedText(){var e=c.tinymce.activeEditor.selection;return e.getRng().text||e.getSel()&&e.getSel().toString&&e.getSel().toString()||""},setHtml(e){e&&c.tinymce.activeEditor.setContent(e)},getHtml:()=>`${c.tinymce.activeEditor.getContent()}`,isEmpty(){var e=c.tinymce.activeEditor.getContent().replace("&nbsp;","").replace("<br />","");return"<p></p>"===e.trim()||0===e.length},editorHasContentChanged:()=>c.tinymce.activeEditor.isDirty(),editorResetContentChanged(){c.tinymce.activeEditor.setDirty(!1)},getChildIndex(e,t){for(var n=e.childNodes,o=0,r=n.length;o<r;o++)if(n[o]==t)return o;return-1}},y=()=>!!m.a.get("collaborative-content")&&w(),w=()=>{var e=m.a.get("content-type");return"page"===e||"blogpost"===e},C=n(2),A=n(8),x=(n(46),n(14)),M=n.n(x),k=n(20),E=n.n(k);function T(){return s()("#table-highlight-group").attr("data-highlight-colour")||""}var D={areCellsHeadings(e){var t=e.filter("th").length;return e.length===t},areCellsHighlighted(e){var t=e.filter("td[data-highlight-colour],th[data-highlight-colour]"),n=t.length;return e.length===n&&function(e){var t,n,o=T();for(t=0,n=e.length;t<n;t++)if((e.eq(t).attr("data-highlight-colour")||"")!==o)return!1;return!0}(t)},getSelectedHighlightColour:T},S=e=>{function t(t){var o,r,a=function(t){return e.translate(t)};n(t),D.getSelectedHighlightColour()&&(o=D.getSelectedHighlightColour(),r=a([a("table.cell_background_color"),E.a.colorNames[o.substring(1,o.length)]]),t.attr("data-highlight-colour",o),t.attr("title",r),t.children().attr("title",""),t.addClass(`highlight-${o}`))}function n(e){var t,n,o;for(t=0,n=e.length;t<n;t++)(o=e.eq(t)).attr("data-highlight-colour")&&o.removeAttr("data-highlight-colour"),o.attr("title")&&o.removeAttr("title"),o[0].className=o[0].className.replace(/( |^)highlight-[#\w]+/g,"")}e.on("init",(function(){var o=function(e){return s()(e.selection.getNode()).closest("th.confluenceTh,td.confluenceTd")},r=function(e){var t=s()(e.getBody()).find("th.confluenceTh[data-mce-selected],td.confluenceTd[data-mce-selected]");return t.length?t:o(e)};e.addCommand("confTableRowToggleHeading",(function(){var t=function(e){var t=s()(e.getBody()).find("td[data-mce-selected],th[data-mce-selected]");t.length||(t=s()(e.selection.getNode()));for(var n=t.closest("tr"),o=n.parent(),r=o.is("tbody")?n.parent().parent():o;0!==n.length&&!r.is(".confluenceTable");)n=r.closest("tr"),r=(o=n.parent()).is("tbody")?n.parent().parent():o;return n}(this).children("td,th");return D.areCellsHeadings(t)?e.execCommand("mceTableRowType",!1,{type:"body"}):e.execCommand("mceTableRowType",!1,{type:"header"}),!1})),e.addCommand("confTableColumnToggleHeading",(function(){var t=function(e){var t=s()([]);return e.each((function(){var e=s()(this),n=e.index()+1,o=e.closest("table.confluenceTable").children("tbody").children("tr");t=t.add(o.children().nthCol(n))})),t}(r(this));return D.areCellsHeadings(t)?e.execCommand("mceTableColType",!1,{type:"td"}):e.execCommand("mceTableColType",!1,{type:"th"}),!1})),e.addCommand("confTableSelectionToggleHighlight",(function(e,o){var a=o&&o.alwaysHighlight,i=r(this);return D.areCellsHighlighted(i)&&!a||s()("#table-highlight-group").attr("data-remove-highlight")?n(i):t(i),!1})),e.on("KeyDown",(t=>{!function(t){if(t.altKey&&(38===t.keyCode||40===t.keyCode)){var n=e.selection.getRng(),o=s()(n.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent");if(0!==o.length){e.execCommand(38===t.keyCode?"mceTableInsertRowBefore":"mceTableInsertRowAfter");var r=o.parent()[38===t.keyCode?"prev":"next"]().find("td:first-child")[0],a=s()(r);a.hasClass("numberingColumn")&&(r=a.next()[0]),n&&(n.setStart(r,0),n.setEnd(r,0),e.selection.setRng(n)),t.preventDefault()}}}(t)})),e.on("Click",(function(){var t=o(this);t.hasClass("numberingColumn")&&!t.hasClass("confluenceTh")&&e.execCommand("mceTableMoveCaretToNextCell")})),e.on("KeyDown",(function(t){if((38===t.keyCode||40===t.keyCode)&&(n=e.selection.getNode(),s()(n).parents("table").is(".confluenceTable"))&&o(this).hasClass("numberingColumn"))return e.execCommand("mceTableMoveCaretToNextCell"),t.preventDefault(),!1;var n}),!0)})),e.on("init",(function(){s()(e.getBody()).find(".confluenceTd.numberingColumn").attr("contenteditable","false")}))},I=e=>{e.on("BeforeExecCommand",(t=>{if("mceInsertTable"===t.command&&!t.value){e.execCommand("mceInsertTable",!1,{columns:3,rows:4,options:{headerRows:1}}),t.preventDefault()}}))},O=e=>{var t,n,o=/([+-]?\d*)[nN]([+-]?\d*)/;e.fn.nthCol=function(r){var a,i,l,s,c,d,u,g,m;return l={multiplier:0,offset:0},"even"===(a=r)?a="2n":"odd"===a?a="2n+1":/^\d*$/.test(a)&&(a=`0n+${a}`),null!==(i=o.exec(a))&&(l.multiplier=i[1]-0,l.offset=i[2]-0),n=l,s=this,u=[],g=0,m=[],e.each(s,((e,t)=>{var n=0,o=0,r=t.rowSpan||1,a=t.colSpan||1;for(t.parentNode!==c&&((c=t.parentNode).parentNode!==d&&(d=c.parentNode,u=[]),g=0,void 0===u[c.rowIndex]&&(u[c.rowIndex]=[])),n=0;n<u[c.rowIndex].length+1;n+=1)if(void 0===u[c.rowIndex][n]){g=n;break}for(m[e]=g,n=c.rowIndex;n<c.rowIndex+r;n+=1)for(void 0===u[n]&&(u[n]=[]),o=g;o<g+a;o+=1)u[n][o]=!0})),t=m,e(this).filter((function(e){return o=t[e]-(n.offset-1),0===n.multiplier?0===o:o%n.multiplier==0&&o/n.multiplier>=0;var o}))}};var j=function(){var e,t=c.tinymce.activeEditor;if(this.parent().closest("table.confluenceTable").length)return s()("#table-mode-picker .dropdown-text").text(t.translate("table.responsive")),void s()("#table-mode-picker .aui-dd-parent").addClass("disabled");s()("#table-mode-picker .aui-dd-parent").removeClass("disabled"),(e=this).hasClass("fixed-table")||e.hasClass("fixed-width")?s()("#table-mode-picker .dropdown-text").text(t.translate("table.fixed_width")):s()("#table-mode-picker .dropdown-text").text(t.translate("table.responsive"))},N=e=>{e.on("ObjectResizeStart",(t=>{var n=t.target;"bar-col"===t.origin&&e.dom.is(n,"table")&&(n.style.width||(n.classList.contains("fixed-table")?(n.classList.remove("fixed-table"),n.classList.add("fixed-width")):n.classList.contains("fixed-width")||n.classList.add("relative-table")),function(e){var t=0;e.find(">tbody >tr").each((function(){var e=0;s()(this).find(">th,>td").each((function(){var t=s()(this);t.attr("colspan")?e+=parseInt(t.attr("colspan")):e++})),e>t&&(t=e)}));var n=e.find(">colgroup"),o=n.find("col"),r=o.length;if(r!==t){var a=n.length>0;if(a||(n=s()("<colgroup>")),t>r)for(var i=0;i<t-r;i++){var l=s()("<col>");n.append(l)}else for(var c=0;c<r-t;c++)o.last().remove();a||e.prepend(n)}}(s()(n)))}),!0)},L=e=>{var t=(t,n)=>{var o=e.dom.getParent(e.selection.getNode(),"table.confluenceTable");e.undoManager.transact((()=>{o&&o.classList.contains("fixed-table")&&""===e.dom.getStyle(o,"width")&&e.dom.setStyle(o,"width",`${o.offsetWidth}px`),e.execCommand("mceTableSizingMode",!1,t),o&&(o.classList[n]("fixed-width"),o.classList.remove("relative-table"),o.classList.remove("fixed-table"))})),s()("#table-mode-picker .dropdown-text").text(e.translate("table."+("responsive"===t?"responsive":"fixed_width")))};e.addCommand("mceAutoWidth",(()=>{t("responsive","remove")})),e.addCommand("mceFixedWidth",(()=>{t("fixed","add")}))};var B,R={setup:function(e){(e=>{e.addCommand("JustifyTop",(()=>e.execCommand("mceTableApplyCellStyle",!1,{"vertical-align":"top"}))),e.addCommand("JustifyMiddle",(()=>e.execCommand("mceTableApplyCellStyle",!1,{"vertical-align":"middle"}))),e.addCommand("JustifyBottom",(()=>e.execCommand("mceTableApplyCellStyle",!1,{"vertical-align":"bottom"})))})(e)}};function P(e){Array.from(e.getBody().querySelectorAll(".confluenceTable.fixed-table >tbody >tr >td, .confluenceTable.fixed-table >tbody >tr >th")).forEach((e=>{e.style.width=""}))}function H(){return O(s.a),{init(e){var t;e.on("copy",(()=>{!0===e.selection.isCollapsed()&&e.getBody().querySelectorAll("th[data-mce-selected],td[data-mce-selected]").length>1&&e.selection.select(e.selection.getNode())}),!0),e.on("newcell",(function(e){var t=e.node;"TD"===t.nodeName?(t.classList.add("confluenceTd"),t.classList.remove("confluenceTh")):"TH"===t.nodeName&&(t.classList.add("confluenceTh"),t.classList.remove("confluenceTd"))})),e.on("BeforeExecCommand",(function(t){if(t.command.startsWith("mceTable")){var n=e.selection.getNode().closest("table");if(n&&n.classList.contains("wysiwyg-macro")){var o=n.closest("th.confluenceTh, td.confluenceTd");o?e.selection.setCursorLocation(o):t.preventDefault()}}})),N(t=e),s.a.fn.updateTableModeInToolbar=j,L(t),I(e),S(e),M.a.get("is-dc-license")&&R.setup(e),y()?s()(window).one("rte-collab-ready",(()=>{P(e)})):s()(window).one("rte-ready",(()=>{P(e)}))}}}var F="numbers",z="numberingColumn",U="data-snooker-col-series",_="data-snooker-locked-cols";function Q(e){var t=[];return e?(!function(e){return"thead"===e.name||"tbody"===e.name||"tfoot"===e.name}(e)?"tr"===e.name&&t.push(e):t.push.apply(t,Q(e.firstChild)),t.concat(Q(e.next))):t}function W(e){return Q(e.firstChild)}function V(e){for(var t=[],n=e.firstChild;n;)"td"!==n.name&&"th"!==n.name||t.push(n),n=n.next;return t}function K(e,t,n){return n.indexOf(e)===t}function G(e,t,n){(e.attr("class")||"").split(" ").some((function(e){return e.toLowerCase()===z.toLowerCase()}))&&(t.isSeriesTable=!0,e.attr("contenteditable","false"),t.isResizable||e.attr("data-mce-resize","false"),t.lockedColumns.push(n))}function Y(e){for(var t=B.options.get("advtable_value_series"),n=t?t[F]:void 0,o=!n||!1!==n.resizable,r=0;r<e.length;r++){var a=e[r];if("wysiwyg-macro"===a.attr("class"))void 0===a.attr("data-mce-resize")&&a.attr("data-mce-resize","false");else if(!a.attr(U)){for(var i={isResizable:o,isSeriesTable:!1,lockedColumns:[]},l=W(a),s=0;s<l.length;s++)for(var c=0,d=V(l[s]),u=0;u<d.length;u++){var g=d[u];G(g,i,c),c+=parseInt(g.attr("colspan"),10)||1}if(i.isSeriesTable&&a.attr(U,F),i.lockedColumns.length>0){var m=(a.attr(_)||"").split(",").map((function(e){return parseInt(e,10)})).concat(i.lockedColumns).filter(K).sort();a.attr(_,m.join(","))}}}}function J(e){return()=>{var t=B.getDoc().querySelectorAll(e);t.length>0&&Array.prototype.forEach.call(t,(e=>{e.setAttribute("data-mce-resize","false")}))}}function q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Z{constructor(e){q(this,"userAgent",void 0),this.userAgent=e||window.navigator.userAgent}isFirefox(){return-1!==this.userAgent.indexOf("Firefox/")}notFirefox(){return!this.isFirefox()}isMSEdge(){return-1!==this.userAgent.indexOf("Edge/")}notMSEdge(){return!this.isMSEdge()}isIE(){return-1!==this.userAgent.indexOf("MSIE")||-1!==this.userAgent.indexOf("Trident/")||this.isMSEdge()}notIE(){return!this.isIE()}isChrome(){return-1!==this.userAgent.indexOf("Chrome/")}notChrome(){return!this.isChrome()}isSafari(){return-1!==this.userAgent.indexOf("Safari/")&&-1===this.userAgent.indexOf("Chrome/")}notSafari(){return!this.isSafari()}isPhantom(){return-1!==this.userAgent.indexOf("PhantomJS")}notPhantom(){return!this.isPhantom()}version(){if(this.isIE()){var e=this.userAgent.match(/MSIE\s([\d.]+)/)||this.userAgent.match(/rv:([\d.]+)/)||this.userAgent.match(/Edge\/([\d.]+)/);return parseInt(e[1])}return this.isChrome()?parseInt(this.userAgent.match(/Chrome\/([\d.]+)/)[1]):this.isSafari()?parseInt(this.userAgent.match(/Version\/([\d.]+)/)[1]):this.isFirefox()?parseInt(this.userAgent.match(/Firefox\/([\d.]+)/)[1]):0}friendlyName(){return this.isMSEdge()?"MSEdge":this.isIE()?"IE":this.isChrome()?"Chrome":this.isSafari()?"Safari":this.isFirefox()?"Firefox":void 0}}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=`${d.a.location.protocol}//${d.a.location.host}`,oe=["compat3x","atlassiantheme","auiwindowmanager","table","emotions","confluence","macroplaceholder","customtoolbar","insertwikimarkup","propertypanel","keyboardshortcuts","confmonospace","confcharmap","lists","conflist","tasklist","aePaste","aeTable","tablePasteFilter","pagelayoutplugin","iosediting","autoconvert","deletecommand","draggable","confluencesortabletablesplugin","textplaceholders","linkbrowser","insertfiles","tableAnalytics","aetextpattern","persist_scroll_position","confindentation","preserve-paragraph-formatting-on-delete","tableContentWrapper","statusmacro","macroNavigation","advtable"];function re(){var e=new Z;return e.isChrome()&&96==e.version()}var ae=()=>{var e,t={theme:"default"};return((e=new Z).isChrome()&&e.version()<80||e.isFirefox()&&e.version()<80)&&!d.a.QUnit&&0===m.a.get("remote-user").indexOf("testuser")&&(t=ee(ee({},t),{},{object_resizing:!1})),t=ee(ee(ee({},t),{table_default_attributes:{class:"confluenceTable"},table_default_styles:{},table_header_type:"cells",table_resize_bars:!0,table_use_colgroups:!0,table_column_resizing:"resizetable",advtable_value_series:{numbers:{update:!0,resizable:!1,generator:function(e){var t=e.prev?e.prev.count:0;if("tbody"===e.sectionType&&"td"===e.cellType){var n=t+1;return{value:n,count:n,classes:[z]}}return{count:t,classes:[z]}}}}}),{},{autoresize_min_height:"100%",width:"100%",height:"100%",document_base_url:`${ne}${A.a}/`,plugins:oe.join(","),theme_advanced_buttons1:"formatselect,confimage,conf_macro_browser,code,customtoolbar,monospace,searchreplace,linkbrowserbutton",toolbar:!1,menubar:!1,skin:!1,statusbar:!1,table_toolbar:"",contextmenu:!1,selector:"textarea.tinymce-editor",body_class:"aui-theme-default mceContentBody wiki-content",popup_css:!1,content_css:!1,editor_css:!1,custom_undo_redo:!0,custom_undo_redo_levels:20,context_path:A.a,plugin_action_base_path:`${A.a}/plugins/tinymce`,editor_plugin_action_base_path:`${A.a}/plugins/editor/tinymce`,page_id:m.a.get("page-id"),draft_type:null,form_name:m.a.get("form-name"),space_key:encodeURI(m.a.get("space-key")),confluence_popup_width:620,confluence_popup_height:550,editor_id:"wysiwygTextarea",indent:!1,table_tab_navigation:!0,inline_boundaries:!1,indent_use_margin:!0,atlassian:!0,keep_values:!0,convert_urls:!0,relative_urls:!1,remove_script_host:!1,button_tile_map:!0,apply_source_formatting:!1,list_outdent_on_enter:!0,visual:!1,confluence_table_style:"confluenceTable",confluence_table_cell_style:"confluenceTd",confluence_table_heading_style:"confluenceTh",confluence_table_default_rows:4,confluence_table_default_cols:3,confluence_table_default_heading:!0,cleanup:!0,cleanup_on_startup:!0,fix_list_elements:!1,fix_table_elements:!0,valid_elements:"@[id|class|style|title|wysiwyg|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[*],strong/b,em/i,s,u,#p[align|user],-ol[type|compact],-ul[type|compact],li,br,img[imagetext|longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite|markup],-table[*],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope|contenteditable],#th[colspan|rowspan|width|height|align|valign|scope|contenteditable],caption,#div[*],span[*],-code,#pre[*],address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",extended_valid_elements:"img[*],time[class|datetime|contenteditable|onselectstart|unselectable|oncontrolselect]",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img.confluence-embedded-image",classes:"image-left"},{selector:"img,table",collapsed:!1,styles:{float:"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img.confluence-embedded-image",classes:"image-center"},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img.confluence-embedded-image",classes:"image-right"},{selector:"img,table",collapsed:!1,styles:{float:"right"}}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class"]},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"em",remove:"all",preserve_attributes:["class"]},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],removeformat:[{selector:"h1,h2,h3,h4,h5,h6,pre",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0,block:"*"},{selector:"address,article,b,big,blockquote,center,cite,code,date,dd,del,dfn,dl,dt,em,embed,font,footer,header,hgroup,i,ins,kbd,link,menu,nav,object,param,q,s,samp,script,section,small,strike,strong,style,sub,sup,time,tt,u,var",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"table",attributes:["cellpadding","cellspacing","border"],split:!1,expand:!1,deep:!0},{selector:":not(li)",attributes:["style","color","bgcolor","title","lang"],split:!1,expand:!1,deep:!0}]},forced_root_block:"p",force_p_newlines:!0,force_br_newlines:!1,padd_empty_with_br:!0,allow_unsafe_link_target:!0,paste_remove_styles_if_webkit:!1,automatic_uploads:!1,allow_html_data_urls:!0,browser_spellcheck:!re(),paste_data_images:!1,pad_empty_with_br:!0})},ie=!1,le="",se={},ce={},de=()=>{if(ie){var e=(()=>{for(var e={},t={name:le,data:e},n=ue.getEntriesByType("measure"),o=0;o<n.length;o++){var r=n[o],a=r.name;se[a]&&(e[`${a}.startTime`]=r.startTime,e[`${a}.duration`]=r.duration)}return t})();Object(C.b)("analytics",e),ie=!1}};var ue=d.a.performance,ge=e=>`${e}.start`,me=e=>{if(ue&&ue.mark&&se[e]){ie||(ie=!0);var t=ge(e);ue.mark(t)}},pe=e=>{if(ue&&ue.mark&&se[e]){var t=ge(e);if(0!==ue.getEntriesByName(t,"mark").length){var n=(e=>`${e}.end`)(e);ue.mark(n),ue.measure(e,t,n),ce[e]&&de()}else p.a.error(`Calling debugTimeEnd for ${e} before debugTime`)}};function fe(e){me(e),p.a.time(e)}function he(e){pe(e),p.a.timeEnd(e)}var ve={createProfileForCommentEditor:function(){return{plugins:["searchreplace","confluenceimagedialog","autocompletemacro","confluencemacrobrowser","confluenceleavecomment","confluencewatch","autoresize"]}},createProfileForPageEditor:function(e){var t=["searchreplace","confluencedrafts","confluenceimagedialog","autocompletemacro","confluencemacrobrowser","flextofullsize","referrer"];return e&&e.versionComment&&t.push("confluenceversioncomment"),e&&e.notifyWatchers&&t.push("confluencenotifywatchers"),{plugins:t}},createProfileForTemplateEditor:function(){return{plugins:["searchreplace","confluenceimagedialog","autocompletemacro","confluencemacrobrowser","confluenceleavetemplate","flextofullsize","templateeditor"]}}},be=function(){return{renderUI:()=>({iframeContainer:c.tinymce.DOM.get("rte"),editorContainer:document.getElementById("wysiwyg")})}},ye=n(18),we=n.n(ye);function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Me=()=>{void 0===c.AJS.Rte&&(c.AJS.Rte=Ae({},v.Rte)),void 0===c.AJS.Rte.getEditor&&(c.AJS.Rte=Ae(Ae({},c.AJS.Rte),v.Rte))};function ke(e){return e.replace(/<ul\s+[^>]*\/(\s*)>/gi,"")}var Ee={Formatting:".rte-toolbar-group-formatting",Style:".rte-toolbar-group-style",Indentation:".rte-toolbar-group-indentation",Lists:".rte-toolbar-group-lists",Tasks:".rte-toolbar-group-task-lists",Justification:".rte-toolbar-group-justification",Links:".rte-toolbar-group-link",Table:".rte-toolbar-group-table",Insert:".rte-toolbar-group-insert",Undo:".rte-toolbar-group-undo",PageLayouts:"#page-layout-2-group",SearchReplace:".rte-toolbar-group-searchreplace",Help:".rte-toolbar-group-help"},Te=(e,t,n)=>{!1===t&&((e,t)=>{Array.prototype.forEach.call(c.document.getElementById(e).querySelectorAll(t),(e=>{e.style.display="none"}))})(e,n)};function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe,je=!1,Ne={_tinyMceHasInit:!1,_beforeInitCallbacks:[],_tinymcePluginInits:[],_settings:null,isInitComplete:()=>Ne._tinyMceHasInit,isEditorActive:()=>!!(Ne.isInitComplete()&&i.a&&i.a.activeEditor),onInit:()=>{Ne._tinyMceHasInit=!0;var e=r.a.Rte.getEditor();if(e.getBody().classList.add("notranslate"),Object(C.b)("init.rte",{editor:e}),!1!==m.a.get("editor-auto-focus")){var t=document.getElementById("content-title");t&&""===t.value?t.focus():r.a.Rte.editorFocus(e)}else p.a.debug("Bootstrap: editor-auto-focus=false. Do not focus the editor automatically.")},addOnInitCallback:e=>{if("function"!=typeof e)throw new Error(`Attempt made to register an oninit callback that is not a function. Received: ${e}`);Ne._tinyMceHasInit?e():Object(C.a)("init.rte",e)},addBeforeInitCallback:e=>{Ne._beforeInitCallbacks.push(e)},addTinyMcePluginInit:e=>{Ne._tinymcePluginInits.push(e)},preInitialise:e=>{Ne._settings=e,je&&(je=!1,Ne.initialise(Oe))},initialise:e=>{if(fe("confluence.editor.tinymce"),!Ne._settings)return p.a.error("Bootstrap:initialise: No settings found. Has preInitialise been called?"),je=!0,void(Oe=e);e=Se({},e);var t,n,o,a,l=Se({},Ne._settings);r.a.Rte.isQuickEdit=e.isQuickEdit||!1,p.a.info(`Bootstrap:initialise: Initialising TinyMce version ${i.a.majorVersion}.${i.a.minorVersion}`),Ne._beforeInitCallbacks.forEach((e=>{e(l)})),Object(C.b)("rte-pre-resolveplugins");for(var s=0,d=Ne._tinymcePluginInits.length;s<d;s++)"function"==typeof Ne._tinymcePluginInits[s]&&Ne._tinymcePluginInits[s](l);!function(e){void 0===typeof we.a&&p.a.error("ERROR: could not find the TinyMCE language pack");var t=new RegExp(`${we.a.ctrl_key}\\+`,"g"),n=new RegExp(`${we.a.shift_key}\\+`,"g"),o=e=>e.replace(t,"â").replace(n,"â§");for(var r in we.a){var a=we.a[r];if("object"==typeof a)for(var l in a)i.a.Env.os.isMacOS()&&(a[l]=o(a[l]));i.a.EditorManager.addI18n(`${e}.${r}`,we.a[r])}i.a.ScriptLoader.markDone(`${i.a.baseURL}/langs/${e}.js`),i.a.Env.os.isMacOS()&&Array.prototype.forEach.call(document.querySelectorAll("#rte-toolbar .toolbar-item, #rte-toolbar .dropdown-item, #rte-savebar .aui-button"),(e=>{var t=e.getAttribute("title"),n=e.dataset.tooltip;t&&e.setAttribute("title",o(t)),n&&(e.dataset.tooltip=o(n))}))}(l.locale),((e,t)=>{var n;if(!1!==t)for(n in t=t||{})t.hasOwnProperty(n)&&Ee[n]&&Te(e,t[n],Ee[n]);else c.document.getElementById(e).style.display="none"})("toolbar",e.toolbar),l.plugins=(t=l.plugins,n="string"==typeof e.plugins?e.plugins.split(","):e.plugins||[],o=e.excludePlugins||[],void 0===t?t:(a="string"==typeof t?t.split(","):t,n.forEach((e=>{a.indexOf(e)<0&&a.push(e)})),(a=a.filter((e=>o.indexOf(e)<0))).join(","))),l.setup=function(t){t.on("PreInit",(()=>{t.dom.loadCSS=function(){};var e=t.getElement();e.value=ke(e.value),function(e){B=e,e.parser.addNodeFilter("table",Y),B.serializer.removeAttributeFilter("data-mce-resize"),e.on("SetContent",J("table.confluenceTable table.confluenceTable:not([data-mce-resize])")),y()&&(Object(C.a)("rte-collab-ready editor-shared-drafts-published editor-shared-drafts-discarded",J("table.wysiwyg-macro:not([data-mce-resize])")),Object(C.a)("rte-collab-ready",J("table.confluenceTable table.confluenceTable:not([data-mce-resize])")),Object(C.a)("rte-collab-ready",(()=>{Array.prototype.forEach.call(B.getDoc().querySelectorAll("table.confluenceTable:not([data-snooker-col-series])"),(e=>{var t=e.querySelectorAll(".numberingColumn");t.length&&(e.setAttribute(_,"0"),e.setAttribute(U,F),Array.prototype.forEach.call(t,(e=>{e.setAttribute("contenteditable","false"),e.setAttribute("data-mce-resize","false")})))}))})))}(t)})),t.on("GetContent",(e=>{"html"===e.format&&"<p><br></p>"===e.content&&(e.content="")})),e&&"function"==typeof e.onInitialise&&e.onInitialise(t),Object.defineProperty(t,"settings",{get(){return console.warn("DEPRECATED - tinymce.activeEditor.settings is deprecated, use tinymce.activeEditor.options instead"),this.options}})},l.init_instance_callback=function(e){var t=y();Me(),i.a.FocusManager.isEditorUIElement=function(e){for(var t=e,n=!1;t;){if("rte-toolbar"===t.id){n=!0;break}t=t.parentElement}return n};try{var n=l.contentCssTags,o=e.getDoc().querySelectorAll("head");if(void 0===o[0])throw"No editor <head>";o[0].innerHTML=n+o[0].innerHTML}catch(e){}r.a.Rte.BootstrapManager.onInit(e),b.editorResetContentChanged(),r.a.Rte.getEditorFrame().setAttribute("tabindex",100),t&&e.on("AddUndo",(t=>{var n={level:null,lastLevel:null,originalEvent:t};return e.dispatch("change",n)})),he("confluence.editor.tinymce"),Object(C.b)("rte-ready"),t&&Object(C.b)("rte-begin-collab-editing"),w()&&e.getBody().classList.add("page-edit")},i.a.IconManager.add("default",{icons:{}}),i.a.init(l)}},Le=Ne;var Be=()=>{void 0!==c.AJS.Rte?void 0===c.AJS.Rte.Content&&(c.AJS.Rte.Content=b):p.a.error("AJS.Rte is supposed to be defined")};function Re(e){for(var t=e.split("."),n=window[t.shift()];void 0!==n&&t.length;)n=n[t.shift()];return n}function Pe(e,t,n,o){return"function"==typeof o?s()(e).bind(t,n,o):s()(e).bind(t,n)}function $e(e,t,n){return s()(e).unbind(t,n)}function He(e,t,n){return s()(e).trigger(t,n)}var Fe=function(e,t){return"<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?s()(e,t||c.document):s()(`<div>${e}</div>`,t||c.document).contents()},ze=function(e,t){e.is("ul.inline-task-list")?t.each((function(){var e=s()(this);e.attr("data-inline-task-id")||e.attr("data-inline-task-id","")})):t.removeAttr("data-inline-task-id").removeAttr("data-pasted-task")},Ue=function(e){var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;return"LI"===t.nodeName&&1===t.childNodes.length&&"BR"===t.firstChild.nodeName},_e=function(e,t){if(!t.collapsed||0!=t.startOffset)return!1;var n=s()(t.startContainer).closest("ol, ul",e.getBody());if(0===n.length)return!1;var o=new c.tinymce.dom.TreeWalker(t.startContainer,n[0]).prev(!0);return void 0===o||s()(o).is("li")},Qe=function(e){var t=e.filter("ol,ul").length;return e.length===t},We=function(e,t,n){var o=null;return Ve.forEach((r=>{if(r.shouldInsert(e,t,n))return o=r,!1})),o},Ve=[{shouldInsert(e,t,n){var o=Ue(t);return(o=o&&Qe(n))&&n.children("li").length>0},insert(e,t,n){var o=s()(3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer),r=n.children();e.undoManager.beforeChange(),e.undoManager.add(),ze(o.parent(),r),o.replaceWith(r),e.selection.select(r.last()[0],!0),e.selection.collapse(),e.undoManager.add()}},{shouldInsert(e,t,n){var o=_e(e,t);return(o=o&&Qe(n))&&n.children("li").length>0},insert(e,t,n){var o=s()(t.startContainer).closest("li",e.getBody()),r=n.children();e.undoManager.beforeChange(),e.undoManager.add(),ze(o.parent(),r),o.before(r),e.selection.select(o[0],!0),e.selection.collapse(!0),e.undoManager.add()}},{shouldInsert:(e,t,n)=>function(e,t){if(!t.collapsed)return!1;if(3===t.startContainer.nodeType&&t.startOffset!=t.startContainer.nodeValue.length)return!1;if(1===t.startContainer.nodeType&&t.startOffset!=t.startContainer.childNodes.length)return!1;var n=s()(t.startContainer).closest("ol, ul",e.getBody());if(0===n.length)return!1;var o=new c.tinymce.dom.TreeWalker(t.startContainer,n[0]).next(!0);return void 0===o||s()(o).is("li")}(e,t)&&n.length===n.filter("ol,ul").length&&n.children("li").length>0,insert(e,t,n){var o=s()(t.startContainer).closest("li",e.getBody()),r=n.children();e.undoManager.beforeChange(),e.undoManager.add(),ze(o.parent(),r),o.after(r),e.selection.select(r.last()[0],!0),e.selection.collapse(!1),e.undoManager.add()}},{shouldInsert(e,t,n){var o=n.length>1;return o=(o=(o=o&&!Ue(t))&&_e(e,t))&&function(e){var t=e.filter("ol,ul"),n=e[e.length-1];return 1===t.length&&t[0]===n}(n),o},insert(e,t,n){var o=s()(t.startContainer).closest("li",e.getBody());e.undoManager.beforeChange(),e.undoManager.add(),ze(o.parent(),n.children("li"));var r=s()("<li></li>").append(n);o.before(r),e.undoManager.add()}},{shouldInsert:(e,t,n)=>!t.collapsed&&(!!s()(t.commonAncestorContainer).is("table.confluenceTable > tbody, table.confluenceTable > tbody > tr")&&n.is("table:not(.wysiwyg-macro)")),insert(e,t,n){var o=n.children("tbody").length>0?n.children("tbody").children("tr"):n.children("tr"),r=o.children("td, th"),a=s()(".mceSelected",e.getDoc()),i=a.parent();function l(e,t){for(var n=e.shift(),o=t.shift();n&&o;n=e.shift(),o=t.shift())s()(o).html(s()(n).html())}if(e.undoManager.beforeChange(),e.undoManager.add(),1===i.length)l(s.a.makeArray(r),s.a.makeArray(a));else for(var c=s.a.makeArray(o),d=s.a.makeArray(i),u=c.shift(),g=d.shift();u&&g;u=c.shift(),g=d.shift())l(s.a.makeArray(s()(u).children()),s.a.makeArray(s()(g).children()));e.selection.setRng(t),e.undoManager.add()}},{shouldInsert:(e,t)=>s()(t.startContainer).closest("[data-macro-body-type='PLAIN_TEXT']").length>0,insert(e,t,n){n.raw&&e.selection.setContent(n.raw())}},{shouldInsert(e,t,n){var o=s()(t.startContainer).closest("table").length>0,r=1===n.length&&n.is("table.wysiwyg-macro");return o&&r},insert(e,t,n){e.execCommand("mceInsertContent",!1,n[0].outerHTML)}},{shouldInsert(e,t,n){var o=s()(t.startContainer).closest("table").is("table.wysiwyg-macro"),r=1===n.length&&n.is("table.confluenceTable");return o&&r},insert(e,t,n){e.execCommand("mceInsertContent",!1,n[0].outerHTML)}}],Ke={insert:function(e,t,n){var o=e.selection.getRng();if(o){var r,a,i,l=(r=e,a=t.content,i={content:a,format:"html",selection:!0,set:!0},r.dispatch("BeforeSetContent",i),i.content),s=Fe(l,e.getDoc());s.raw=!!n&&function(){return n};var c=We(e,o,s);c?(c.insert(e,o,s),e.dispatch("SetContent",{content:l,format:"html",selection:!0,set:!0}),e.addVisual()):(e.selection.isCollapsed()||e.undoManager.ignore((()=>{e.execCommand("mceDelete",!1,null)})),t.wasProcessed=!0,e.execCommand("mceInsertContent",!1,t))}},parse:Fe},Ge=function(e){e.parentNode.removeChild(e)},Ye=function(e){return function(t){var n=t.classList;n.remove.apply(n,e),""===t.className&&t.removeAttribute("class")}},Je=function(e,t,n){c.tinymce.util.Tools.each(e.querySelectorAll(t),n)};var qe={apply:function(e,t){!function(e){var t;Je(e,"img:not([data-emoticon-name]):not([data-emoji-id]):not([data-hipchat-emoticon]):not(.editor-inline-macro):not(.confluence-embedded-image):not(.template-constiable)",(t=["confluence-embedded-image","confluence-external-resource"],function(e){var n=e.classList;n.add.apply(n,t)}))}(e),function(e){Je(e,"span.Apple-style-span",Ye(["Apple-style-span"]))}(e),function(e){Je(e,"br.Apple-interchange-newline",Ge)}(e),function(e){Je(e,"meta",Ge)}(e),function(e,t){Je(e,"ul.inline-task-list > li[data-inline-task-id]",(n=>{var o,r,a=n.getAttribute("data-inline-task-id"),i=c.tinymce.util.Tools.grep(t.querySelectorAll(`li[data-inline-task-id="${a}"]`),(r=e,o=function(e){return function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}(e,r)},function(e){return!o(e)}));i.length>0&&n.setAttribute("data-inline-task-id","")}))}(e,t),function(e){var t;Je(e,".mceSelected",Ye(["mceSelected"])),Je(e,"[data-mce-selected]",(t="data-mce-selected",function(e){e.removeAttribute(t)}))}(e),function(e){var t=m.a.get("base-url");Je(e,`a:not([data-base-url='${t}'])[data-base-url]`,(e=>{for(var n=e.attributes.href?e.attributes.href.value:t;e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);e.setAttribute("href",n)}))}(e)}},Ze=function(e){return s()("<br>").add(e.contents())},Xe=function(e){return(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.TEXT_NODE)&&s.a.trim(e.textContent)},et=function(e){var t=!1;return e.parent().contents().each((function(){if(Xe(this))return this===e[0]&&(t=!0,!1)})),t},tt=function(e){var t=e.attr("style"),n=s()("<p></p>").append(e.contents());t&&n.attr("style",t),e.replaceWith(n)},nt=function(e){var t=e.prev("p");t.length?(t.append(Ze(e)),e.remove()):et(e)?tt(e):e.replaceWith(Ze(e))},ot=function(e,t){var n=s()(`<table class="wysiwyg-macro" data-macro-name="${e}" data-macro-body-type="RICH_TEXT"><tbody><tr><td class="wysiwyg-macro-body"></td></tr></tbody></table>`);return n.find(".wysiwyg-macro-body").append(t),n},rt=function(e){return!e.text()&&!e.find("img").length},at=tt,it=[function(e){e.find(".expand-container").replaceWith((function(){var e=s()(this).find(".expand-content").first().contents();return e.length?ot("expand",e):s()("")}))},function(e){e.find("span:empty").remove()},function(e){e.find("p + br").remove()},function(e){var t=!1;e.find("div:not(.content-wrapper)").each((function(){var e=s()(this);rt(e)?(e.remove(),t=!0):e.find("div, p, pre").length?e.replaceWith(e.contents()):(t?at(e):nt(e),t=!1)}))}];var lt={repair:function(e){var t=s()("<div></div>").html(e);return it.forEach((e=>{e(t)})),t.html()}},st=[{repair(e){var t=/(<td.*<\/td>)<br class="Apple-interchange-newline">/.exec(e);return t?`<table class="confluenceTable"><tbody><tr>${t[1]}</tr></tbody></table>`:e}},{repair(e){var t=/(<tr.*<\/tr>)<br class="Apple-interchange-newline">/.exec(e);return t?`<table class="confluenceTable"><tbody>${t[1]}</tbody></table>`:e}}],ct=function(e){return e?(st.forEach((t=>{e=t.repair(e)})),e):e},dt={apply:function(e){return e=function(e){return lt.repair(e)}(e=ct(e))},repair:ct},ut=(e,t)=>(i.a.util.Tools.each(t,(t=>{e=t.constructor===RegExp?e.replace(t,""):e.replace(t[0],t[1])})),e),gt="Â ",mt=e=>{var t=!1;return e=e.replace(/^[\u00a0 ]+/,""),i.a.util.Tools.each([/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[.)][ \u00a0]/,/^[A-Z]{1,2}[.)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],(n=>{if(n.test(e))return t=!0,!1})),t},pt=(e,t,n,o)=>{var r={},a=e.dom.parseStyle(o);i.a.util.Tools.each(a,((e,a)=>{switch(a){case"mso-list":var i=/\w+ \w+([0-9]+)/i.exec(o);i&&(n._listLevel=parseInt(i[1],10)),/Ignore/i.test(e)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":a="text-align";break;case"vert-align":a="vertical-align";break;case"font-color":case"mso-foreground":a="color";break;case"mso-background":case"mso-highlight":a="background";break;case"font-weight":case"font-style":return void("normal"!==e&&(r[a]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void n.remove()}0!==a.indexOf("mso-comment")?0!==a.indexOf("mso-")&&t&&t[a]&&(r[a]=e):n.remove()})),/(bold)/i.test(r["font-weight"])&&(delete r["font-weight"],n.wrap(new i.a.html.Node("b",1))),/(italic)/i.test(r["font-style"])&&(delete r["font-style"],n.wrap(new i.a.html.Node("i",1)));var l=e.dom.serializeStyle(r,n.name);return l||null},ft=(e,t)=>{var n,o="";o&&(n=i.a.util.Tools.makeMap(o.split(/[, ]/))),t=ut(t,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,gt],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,(e,t)=>t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(gt):""]]);var r=i.a.html.Schema({valid_elements:"-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody",valid_children:"-li[p]"});i.a.util.Tools.each(r.elements,(e=>{e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))}));var a=i.a.html.DomParser({},r);a.addAttributeFilter("style",(t=>{for(var o,r=t.length;r--;){var a;(o=t[r]).attr("style",pt(e,n,o,o.attr("style"))),"span"!==o.name||!o.parent||null!==(a=o.attributes)&&void 0!==a&&a.length||o.unwrap()}})),a.addAttributeFilter("class",(e=>{for(var t,n,o=e.length;o--;)n=(t=e[o]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)})),a.addNodeFilter("del",(e=>{for(var t=e.length;t--;)e[t].remove()})),a.addNodeFilter("a",(e=>{for(var t,n,o,r=e.length;r--;)if(n=(t=e[r]).attr("href"),o=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||o){if(o&&!/^_?(?:toc|edn|ftn)/i.test(o)){t.unwrap();continue}t.attr({href:n,name:o})}else t.unwrap()}));var l=a.parse(t);return(e=>{for(var t,n,o=1,r=e=>{var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=r(e)}while(e=e.next);return t},a=(e,t)=>{if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!a(e,t))return!1}while(e=e.next);return!0},l=e=>{if(e._listIgnore)e.remove();else if(e=e.firstChild)do{l(e)}while(e=e.next)},s=(e,r,s)=>{var c,d,u,g=e._listLevel||o;(g!==o&&(g<o?t&&(t=null===(c=t.parent)||void 0===c?void 0:c.parent):(n=t,t=null)),t&&t.name===r)?t.append(e):(n=n||t,t=new i.a.html.Node(r,1),s>1&&(null===(u=t)||void 0===u||u.attr("start",""+s)),e.wrap(t));e.name="li",g>o&&n&&(null===(d=n.lastChild)||void 0===d||d.append(t)),o=g,l(e),a(e,/^\u00a0+/),a(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),a(e,/^\u00a0+/)},c=[],d=e.firstChild;null!=d;)if(c.push(d),null!==(d=d.walk()))for(;void 0!==d&&(null===(u=d)||void 0===u?void 0:u.parent)!==e;){var u,g;d=null===(g=d)||void 0===g?void 0:g.walk()}for(var m=0;m<c.length;m++)if("p"===(e=c[m]).name&&e.firstChild){var p=r(e);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(p)){s(e,"ul");continue}if(mt(p)){var f=/([0-9]+)\./.exec(p),h=1;f&&(h=parseInt(f[1],10)),s(e,"ol",h);continue}if(e._listLevel){s(e,"ul",1);continue}t=null}else n=t,t=null})(l),t=i.a.html.Serializer({validate:false},r).serialize(l)},ht=(e,t)=>{var n=(e=>/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs-internal-guid-/.test(e))(t),o=n?((e,t)=>ft(e,t))(e,t):t;return o};function vt(e){var t={repair:dt.repair,parse:Ke.parse},n=null;e.on("PastePreProcess",(n=>{n.content=ht(e,n.content),n.content=dt.apply(n.content),He(c.document,"prePaste",[t,n])})),e.on("PastePostProcess",(n=>{qe.apply(n.node,e.getBody()),He(c.document,"postPaste",[t,n])})),e.on("BeforeExecCommand",(t=>{var o=t.command,r=t.value;"mceInsertContent"===o&&r&&!0===r.paste&&!r.wasProcessed&&(t.preventDefault(),Ke.insert(e,r,n))})),e.on("paste",(e=>{n=null;var t=function(e){return(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(?:\r\n|\r|\n)/g,"<br />")}(e.clipboardData.getData("text/plain"));n=t}),!0)}var bt,yt=()=>{var e,t=c.tinymce.activeEditor,n=Ct();t.focus(!1);var o=t.selection.getRng();e=o&&o.cloneRange&&"function"==typeof o.cloneRange?o.cloneRange():o.duplicate&&o.duplicate()||o,bt={scrollX:n.scrollX,scrollY:n.scrollY,range:e}},wt=()=>{var e=c.tinymce.activeEditor.selection,t=c.tinymce.activeEditor.getWin();bt&&(At(bt),t.focus(),e.setRng(bt.range)),bt=null},Ct=()=>{var e=c.tinymce.DOM.getViewPort(c.tinymce.activeEditor.getWin());return{scrollX:e.x,scrollY:e.y}},At=e=>{e&&c.tinymce.activeEditor.getWin().scrollTo(e.scrollX,e.scrollY)},xt={storeBookmark:yt,restoreBookmark:wt,getScroll:Ct,restoreScroll:At},Mt=n(21),kt=n.n(Mt);function Et(){return{component:function(e){var t=new r.a.Dialog(e);return e=e||{},e=s.a.extend({},{keypressListener:n=>{if(27===n.keyCode)p.a.debug("dialog.js: escape keydown caught"),s()(".aui-dropdown",t.popup.element).is(":visible")||("function"==typeof e.onCancel?e.onCancel():t.hide());else if(13===n.keyCode){if(p.a.debug("dialog.js: enter keydown caught"),!s()(".aui-dropdown",t.popup.element).is(":visible"))"textarea"!=(n.target.nodeName&&n.target.nodeName.toLowerCase())&&"function"==typeof e.onSubmit&&setTimeout(e.onSubmit)}},width:865,height:530},e),c.document.addEventListener("hideLayer",((n,o,r)=>{"popup"==o&&r==t&&"function"==typeof e.onCancel&&e.onCancel()})),t},initialiser:function(e){Object(C.a)("show.dialog",((e,t)=>{var n,o=m.a.get("page-id"),a=m.a.get("space-key"),i=m.a.get("editor-mode"),l=m.a.get("new-page");r.a.EventQueue=r.a.EventQueue||[],r.a.EventQueue.push({name:t.dialog.id,properties:(n={},o&&(n.pageid=o),a&&(n.spacekey=a),i&&(n.editormode=i),l&&(n.newpage=l),n)})})),c.document.addEventListener("showLayer",((t,n,o)=>{c.Confluence.runBinderComponents(),"popup"==n&&o&&(t=>{var n,o=e(t);if(!o.attr("data-lasttab-override")){o.attr("data-tab-default")&&(n=o.attr("data-tab-default"));var r=c.Confluence.storageManager(o.attr("id")),a=r.getItem("last-tab"),i=null!=a?a:n;i&&e(`.page-menu-item:visible:eq(${i}) button`,o).click(),o.attr("data-lasttab-bound")||(e(".page-menu-item",o).each(((t,n)=>{e(n).click((()=>{r.setItem("last-tab",t)}))})),o.attr("data-lasttab-bound","true"))}})(o.element)})),r.a.Dialog.prototype.overrideLastTab=()=>{e(this.popup.element).attr("data-lasttab-override","true")},r.a.Dialog.prototype.addHelpText=(t,n)=>{if(t){var o=t;n&&(o=kt()(t).fill(n).toString());var r=this.page[this.curpage];r.buttonpanel||r.addButtonPanel();var a=e("<div class='dialog-tip'></div>").html(o);r.buttonpanel.append(a),e("a",a).click((()=>{var e=window.open(this.href,"_blank");return e&&e.focus(),e&&e.opener&&(e.opener=null),!1}))}},r.a.Dialog.prototype.getTitle=()=>e(`#${this.id}.dialog-components:visible h2`).text(),r.a.Dialog.prototype.isVisible=()=>e(`#${this.id}`).is(":visible")}}}var Tt=56,Dt=51,St=20;function It(){return{init:e=>{e.on("init",(()=>{e.windowManager=Ot(e)}))},getInfo:()=>({longname:"AUIWindowManager",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Ot(e){var t=new c.tinymce.util.Dispatcher,n=[],o={},r=0,a=e.windowManager,i=(i,s)=>{if(i.title===e.translate("Accessibility Checker"))return a.open(i,s);l(i=i||{}),(s=v(s=s||{})).mce_width=i.width,s.mce_height=i.height,s.mce_auto_focus=i.auto_focus,t.dispatch("open",{t:{},settings:i,params:s});var d=i.height;i.name&&(d+=Tt),(s.cancelLink||s.buttons)&&(d+=Dt),d+=2*St,i.popup&&(d+=8);var p=i.id||c.tinymce.DOM.uniqueId(),h=(new Et).component({width:i.width,height:d,id:p,onCancel:()=>{h.hide().remove()}});i.name&&h.addHeader(e.translate(i.name)),u(h,s,p),i.file=i.file||i.url,i.file&&(i.file=i.file),g(h,i,s,p),s.helpLink&&f(h,s.helpLink,s.helpName||"",p),s.hintText&&m(h,s.hintText,p);var b={id:p,settings:i,params:s,dialog:h};return n.push(b),o[p]=b,r++,yt(),h.show(),null!=h.takeFocus&&h.takeFocus(),p},l=e=>{e.width=parseInt((e.width||400).toString(),10),e.height=parseInt((e.height||250).toString(),10),e.resizable=!1,null==e.popup&&(e.popup=!0),e.popup&&null!=e.content&&(e.popup=!1),e.scrollbars?e.scrollbars="yes":e.scrollbars="no"},u=(t,n,o)=>{if(n.buttons)for(var r=0;r<n.buttons.length;r++){var a=n.buttons[r];t.addButton(e.translate(`${a.label}`),a.action)}n.cancelLink&&t.addCancel(e.translate("auiwindowmanager.cancel"),(()=>c.tinymce.activeEditor.windowManager.close(o)))},g=(e,t,n,o)=>{var r=b(o),a=`panel_${r}`;t.popup?(e.addPanel(a,s()(`<iframe id="${r}" width="100%" height="${t.height}px" frameborder="0" name="auidialogiframe" src="${t.file}" scrolling="${t.scrollbars}"></iframe>`),n.cssClass),e.takeFocus=()=>{s()(`#${r}`).focus()}):(null==t.content?(e.addPanel(a,s()(`<div id="${r}"/>`),n.cssClass),s()(`#${r}`).load(t.file)):e.addPanel(a,s()(`<div id="${r}">${t.content}</div>`),n.cssClass),e.takeFocus=()=>{var e=s()(`#${r}:input`);if(e.length)s()(e[0]).focus();else{var t=s()(`#${r} .button-panel button`);t.length&&s()(t[0]).focus()}}),e.gotoPanel(0,0)},m=(e,t,n)=>{var o=s()("<div></div>").addClass("dialog-tip");o.text(c.tinymce.activeEditor.translate(`${t}`)),s()(`#${n} .dialog-button-panel`).append(o)},f=(e,t,n,o)=>{var r=s()("<div></div>").addClass("dialog-help-link");r.load(`${A.a}/plugins/tinymce/helplink.action`,{linkUrlKey:t,linkNameKey:n||""}),s()(`#${o} .dialog-components .dialog-title`).prepend(r)},h=(e,t)=>{for(var o=0;o<n.length;o++){var r=n[o];r.id!=e&&s()(`${r.id} .dialog-button-panel`).toggle(t)}},v=e=>(e.inline=void 0,e.cssClass||(e.cssClass="tinymce-auidialog"),0!=e.cancelLink&&(e.cancelLink=!0),e),b=e=>`content_${e}`,y=e=>`content_busy_${e}`;return{alert:(e,t,n)=>{if("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."!==e){var o=i({content:`<p>${e}</p>`,width:500,height:160,popup:!1,title:"",buttons:[],body:{type:"panel",items:[]}},{buttons:[{label:"auiwindowmanager.ok",action:function(){c.tinymce.activeEditor.windowManager.toggleOtherDialogs(o,!0),c.tinymce.activeEditor.windowManager.close(o),t&&t.call(n||d.a)}}],cancelLink:!1,cssClass:"tinymce-auidialog-alert"});h(o,!1)}},close:(e,t)=>{var a,i,l="";("string"==typeof e?l=e:t?l=t:(a=n.pop())&&(l=a.id),o[l])?(r--,null===(i=a=o[l])||void 0===i||i.dialog.remove(),o[l]=null,p.a.debug(`Dialog closed, now ${r} dialogs open`),c.tinymce.activeEditor.focus(),wt()):p.a.error(`Couldn't find id ${l} in dialogs array so dialog is not closed.`)},confirm:(t,n,o,r)=>{r=r||d.a,null==n||n.call(o||d.a,r.confirm(this._decode(e.translate(t))))},createBusyContentId:y,createContentId:b,createDialogButtons:u,createDialogContent:g,createHelpLink:f,createHintText:m,createInstance:(e,t,n,o,r,a)=>new(c.tinymce.resolve(e))(t,n,o,r,a),initialiseSettings:l,logMCESelection:e=>{var t=c.tinymce.activeEditor.selection;p.a.debug("******************************"),p.a.debug(`Logging TinyMCE selection title:    ${e}`),p.a.debug("Bookmark:"),p.a.debug(t.getBookmark());var n=s()(t.getRng().startContainer).text()||s()(t.getRng().startContainer.parentNode).text();p.a.debug(`Range: ${n}`),p.a.debug(t.getRng())},open:i,openUrl:()=>{var e=()=>{};return{block:e,unblock:e,close:e,sendMessage:e}},resizeBy:()=>{},setBusy:(e,t)=>{var n=o[e],r=`#${y(e)}`,a=`#${b(e)}`,i=s()(a),l=s()(r);if(n)if(t){var d=s()(a);d.hide();var u=d.parent(),g=s()(r,u);g.length||(u.append(s()(`<div id="${r}" class="spinner"></div>`)),g=s()(r,u),c.Raphael.spinner(g[0],50,"#666")),s()(".button-panel button",s()(`#${e}`)).each(((e,t)=>{s()(t).prop("disabled",!0)})),s()(g[0]).show()}else l.length&&l.hide(),s()(".button-panel button",s()(`#${e}`)).each(((e,t)=>{s()(t).prop("disabled",!1)})),i.show()},toggleOtherDialogs:h}}var jt=n(9),Nt="autocomplete-container",Lt="autocomplete-trigger",Bt="autocomplete-search-text",Rt={},Pt=e=>(t,n,o)=>{var r=null!=o&&"object"!=typeof o,a=null!=o?r?` = ${o}`:" >":"";p.a.debug(`${e} - ${t} : ${n||null}${a}`),o&&!r&&p.a.debug(o)},$t=function e(t,n){var o=Pt("Autocompleter.Control"),r={},a=t.selection,i=a.getRng();if(!i)return null;var l=i.startOffset,d=i.startContainer,u=d.nodeValue,g=n.leadingChar,m=t.getDoc(),p=n.backWords||0,f=n.insertedFromMenu||!1,h=Rt[g||"["],v=h&&void 0!==h.preventStartNodes?h.preventStartNodes:"div.code, a[href], img, pre";if(s()(`#${Nt}`,m).length)return o("init","Autocomplete already exists, returning null."),null;r.backWords=p,r.maxResults=n.maxResults||10,null==u&&i.collapsed&&l&&d.childNodes[l-1]&&(l=(u=(d=d.childNodes[l-1]).nodeValue)&&u.length||0);var b="";if(null!=u){b=`${u}`.substring(0,l);for(var y=d.previousSibling;y&&3===y.nodeType;)b=y.nodeValue+b,y=y.previousSibling}var w;if(!p&&b&&!function(e,t){for(var n=0,o=t.length;n<o;n++)if(t[n].test(e))return!0;return!1}(b+g,[/([("'<(\u201c\u2018]\[|[\ufeff\u200b\u2014\s\xa0].)$/,/(\([^!])$/,/(\/\/)$/]))return o("init","Cursor is in wrong word location to start autocomplete, returning null."),null;if(s()(d).closest(v).length)return o("init","Cursor is in wrong node to start autocomplete, returning null."),null;if(c.Confluence.PropertyPanel&&c.Confluence.PropertyPanel.current&&(c.Confluence.PropertyPanel.shouldCreate=!1,c.Confluence.PropertyPanel.destroy()),g||null!=u||(o("init","No text available for suggestion, range is",i),u=""),r.getContainer=function(){return s()(`#${Nt}`,m)},i.collapsed&&p&&u){var C=function(e,t,n){var o,r;function a(e,t,n){!t.global&&(t=new RegExp(t.source,`g${t.ignoreCase?"i":""}${t.multiline?"m":""}`)),null==n?n=e.length:n<0&&(n=0);for(var o,r=e.substring(0,n+1),a=-1,i=0;null!=(o=t.exec(r));)a=o.index,t.lastIndex=++i;return a}for(var i=0;i<n;i++)for(t=a(o=e.nodeValue.substring(0,t),/\s+/,t);-1==t;){if(!(r=e.previousSibling)||3!==r.nodeType){i=n;break}e=r,(o=r.nodeValue)&&(t=a(o,/\s+/,o.length))}return{node:e,offset:t+1}}(d,l,p),A=a.getRng();A&&(A.setStart(C.node,C.offset),A.setEnd(d,l),a.setRng(A))}w=a&&a.getNode()&&a.getNode().classList.contains("placeholder-inline-tasks")?"":a.getContent({format:"text"}).replace("\n",""),o("init","suggestionHtml",w);var x=(e,t,n)=>{var o=c.document.createElement(e);return t&&o.setAttribute("id",t),n&&o.appendChild(c.document.createTextNode(n)),o},M=x("span",Nt);n.classNames&&("string"==typeof n.classNames?M.classList.add(...n.classNames.split(" ")):Array.isArray(n.classNames)&&M.classList.add(...n.classNames)),g&&M.appendChild(x("span",Lt,g));var k=x("span",Bt,c.AJS.Rte.HIDDEN_CHAR);M.appendChild(k),a.setNode(s()(M)[0]);var E=r.getContainer();r.previousSearchText="",r.settings=h,!1===h.cache||h.cacheManager?!1!==h.cache||h.cacheManager||(h.cacheManager={get:s.a.noop,put:s.a.noop}):h.cacheManager=new c.AJS.Confluence.localStorageCacheManager(h.ch);var T=s()(`#${Bt}`,r.getContainer()),D=s()(m.createElement("span")).text(w||c.AJS.Rte.HIDDEN_CHAR);T.empty().append(D),a.select(D[0],!0),a.collapse();var S,I,O=function(e){if(r.onBeforeKey&&!r.onBeforeKey(e,r.text()))return c.tinymce.dom.Event.cancel(e),o("before",`blocked by onBeforeKey: ${e.keyCode}`),!1},j=function(e){var t=a.getRng();if(t){var n=r.getContainer(),i=t.startContainer,l=i.parentNode;3===i.nodeType&&l&&(l=l.parentNode);var s=l?l.parentNode:null,d=s?s.parentNode:null,u=l!==n[0]&&s!==n[0]&&d!==n[0];if(27===e.keyCode||u)o("after","dying because of: "+(u?"outside search span":"escape pressed")),r.die();else if(r.onAfterKey&&!r.onAfterKey(e,r.text()))return c.tinymce.dom.Event.cancel(e),o("after",`blocked by onAfterKey: ${e.keyCode}`),!1}},N=function(e){if(r.onKeyPress&&!r.onKeyPress(e,r.text()))return c.tinymce.dom.Event.cancel(e),o("press",`blocked by onKeyPress: ${e.keyCode}`),!1},L=function(e){r.getContainer()[0]!=e.target.parentNode&&(o("click","Clicked outside of autocomplete, closing."),r.die())};t.on("KeyDown",O,!0),t.on("KeyUp",j,!0),t.on("KeyPress",N,!0),t.on("Click",L,!0),r.word="",n.keepAlias?o("init","No suggestion based on previous or selected text"):r.word=w,c.AJS.Rte.showElement(E[0]),S=c.tinymce.DOM.getPos(E[0]),I=E.height(),r.left=S.x,r.top=S.y+I,r.text=function(e){var t=s()(`#${Bt}`,r.getContainer());return null!=e?(t.text(e),this):(e=c.AJS.escapeEntities(t.text())).replace(c.AJS.Rte.HIDDEN_CHAR,"")},r.plainText=function(e){var t=s()(`#${Bt}`,r.getContainer());return null!=e?(t.text(e),this):(e=t.text()).replace(c.AJS.Rte.HIDDEN_CHAR,"")};var B=function(t,n){var o=r.getContainer();return e.replaceWithTextAndGetRange(o,t,n)};return r.replaceWithSelectedSearchText=function(){var e=r.text();return o("replaceWithSelectedSearchText",e),B(e,!1),e},r.die=function(e){if(r.dying)o("die","Already dying, returning.");else{if(r.dying=!0,c.Confluence.PropertyPanel&&(c.Confluence.PropertyPanel.shouldCreate=!0),r.getContainer().length){o("die","Tearing down autocomplete, cleaning up autocompleter");var a=(e||n.backWords||f?"":r.settings.ch)+r.text();i=B(a,!0)}setTimeout((()=>{o("die","Removing autocomplete-control keyboard listeners."),t.off("KeyDown",O),t.off("KeyUp",j),t.off("Click",L),t.off("KeyPress",N)}),1),c.AJS.Rte.unbindScroll("autocomplete"),s()(c.document).unbind("click.autocomplete-outside"),this.onDeath&&this.onDeath()}},c.AJS.Rte.bindScroll("autocomplete",(()=>{o("scrolling:"),c.AJS.Rte.isAnyPartShown(E)?r.onScroll():r.die()})),s()(c.document).bind("click.autocomplete-outside",(e=>{var t=e.srcElement&&"rte-insert-date"===e.srcElement.id;s()(e.target).closest("#autocomplete-dropdown, .aui-datepicker-dialog, .ui-datepicker-header").length||t||r.die()})),c.AJS.Rte.getEditor().on("BeforeExecCommand",(e=>{"mceConfSavePage"==e.command&&r.die()})),r.update=function(e){yt(),B("",!0),this.settings.update(this,e)},r.removeSpan=function(){r.getContainer().remove()},r};$t.removeOrphanedControl=function(){var e=s()(c.AJS.Rte.getEditor().getDoc()),t=e.find(`#${Nt}`);if(!t.length)return null;var n=e.find(`#${Lt}`).text(),o=e.find(`#${Bt}`).text();return $t.replaceWithTextAndGetRange(t,o,!1),{leadingChar:n,content:o}},$t.replaceWithTextAndGetRange=function(e,t,n){if(e.length){t=t||"",n=n||!t;var o=c.AJS.Rte.getEditor();if(o){var r=e[0].parentNode,a=c.AJS.Rte.Content.getChildIndex(r,e[0]),i=n?1:0,l=o.selection.getRng();return l.setStart(r,a+i),l.setEnd(r,a+1),e.before(t||c.AJS.Rte.HIDDEN_CHAR).remove(),o.selection.setRng(l),l}}else p.a.error("replaceWithTextAndGetRange Error: attempting to replace a non-existent element")};var Ht=function(e){return e.replace(/[&"'<>`]/g,(e=>{var t={"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;","`":"&#96;"};return"string"==typeof t[e]?t[e]:"&quot;"}))},Ft=(e,t)=>{var n,o;if(e&&e.length&&e[0]){for(var r=[],a=0,i=e.length;a<i;a++){var l=e[a];l&&r.push(l.replace(/[.*+?|()[\]{}\\]/g,"\\$"))}n=new RegExp(`(${r.join("|")})`,"gi"),o=kt()(t||"<strong>{highlight}</strong>").fill({highlight:"$1"}).toString()}return{highlight:(e,t)=>e?(t||(e=kt.a.escape(e)),n?e.replace(n,o):e):e,safeHighlight(e){if(!e)return e;var t,r;if(n&&o){var a=o.split("$1");t=a[0],r=a[1],e=e.replace(n,"@@@hl@@@$1@@@endhl@@@")}return Ht(e).replace(/@@@hl@@@/gi,t).replace(/@@@endhl@@@/gi,r)}}},zt=function e(t){if(!(this instanceof e))return new e(t);this.cache={},this.cacheStack=[],this.cacheSize=t||30};zt.prototype.get=function(e){var t=this.cache[e];if(t){var n=this.cacheStack[this.cacheStack.length-1][0]+1;return t.weight=n,this.cacheStack.push([n,e]),t.value}},zt.prototype.put=function(e,t){var n,o,r,a=this.cacheStack.length?this.cacheStack[this.cacheStack.length-1][0]+1:0;for(this.cache[e]={weight:a,value:t},this.cacheStack.push([a,e]);this.cacheStack.length>this.cacheSize;)o=(n=this.cacheStack.shift())[0],r=n[1],o===this.cache[r].weight&&delete this.cache[r]},zt.prototype.clear=function(){this.cache={},this.cacheStack=[]};var Ut=zt,_t=function(e,t){var n=e.options;n.ajsDropDownOptions=n.ajsDropDownOptions||{};var o,r=(n.ajsDropDownOptions.Highlighter||Ft)(t.queryTokens||[t.query]);n.ajsDropDownOptions.alignment||(n.ajsDropDownOptions.alignment="left"),n.ajsDropDownOptions.selectionHandler=n.ajsDropDownOptions.selectionHandler||Qt,(o=e.dd)&&(o.hide(),o.$.remove());var a=e.dd=c.AJS.dropDown(t.matrix,n.ajsDropDownOptions)[0];if(n.ajsDropDownOptions.className&&a.$.addClass(n.ajsDropDownOptions.className),a.$.find("li a:not(.dropdown-prevent-highlight) span").each((function(){var e=s()(this);e.html(r.safeHighlight(e.text()))})),a.$.hasClass("fabric")){var i=a.$.find(".insert-mentions-dropdown-option");i.length===t.matrix[1].length&&t.matrix[1].forEach(((e,t)=>{var n=r.safeHighlight(e.username);if(n){e.lozenge&&(n+=` &middot; ${e.lozenge}`);var o=s()("<span>").addClass("dropdown-lozenge").html(n);i.eq(t).append(o)}}))}return n.dropdownPlacement?n.dropdownPlacement(a.$):(p.a.debug("No dropdownPlacement function specified. Appending dropdown to the body."),s()("body").append(a.$)),function(e){var t=e.$.closest(".aui-dd-parent").width();t||(e.$.width("25em"),t=e.$.width()),s()("a span:not(.icon)",e.$).each((function(){var e=s()(this),n=c.document.createElement("var");n.innerHTML="&#8230;";var o=s()(n),r=o.width(),a=!1;e.wrapInner(s()("<em>")),s()("em",e).each((function(){var e=s()(this);if(e.show(),this.offsetLeft+this.offsetWidth+r>t-20){for(var n=this.childNodes,o=!1,i=n.length-1;i>=0;i--){var l=n[i],c=1,d=3===l.nodeType?"nodeValue":"innerHTML",u=l[d];do{if(!(c<=u.length))break;l[d]=u.substr(0,u.length-c++)}while(this.offsetLeft+this.offsetWidth+r>t-20);if(c<=u.length){o=!0;break}}o?a=!0:e.hide()}})),a&&(e.append(o),this.elpss=o)}))}(a),function(e){s()("a span:not(.icon)",e.$).each((function(){var e,t=s()(this);try{var n=t.data("properties");e=n?n.spaceName:null}catch(e){p.a.error("Problem getting space name: ",e.message)}var o=t.text();e&&(o+=` (${s()("<i></i>").html(e).text()})`),t.attr("title",o)}))}(a),n.dropdownPostprocess&&n.dropdownPostprocess(a.$),a.show(e._effect),"function"==typeof n.onShow&&n.onShow.call(a,a.$),a},Qt=function(e,t){if("click"!=e.type){var n=s()("a",t).first(),o=n.attr("href");if("keydown"===e.type&&(e.metaKey||e.ctrlKey)&&13===e.which){var r=d.a.open(o,"_blank");r&&r.opener&&(r.opener=null)}else n.click(),c.document.location=o;e.preventDefault()}};function Wt(e,t){this._effect="appear",this._timer=null,this.id=e,this.options=t,this.inactive=!1,this.busy=!1,this.cacheManager=Ut()}Wt.prototype.clearCache=function(){this.cacheManager.clear()},Wt.prototype.change=function(e,t,n){var o=this;if(e!=o._value){o._value=e,o.busy=!1,d.a.clearTimeout(o._timer);var r=o.options.minLengthForGetData||2,a=new RegExp(`\\S{${r},}`);if(t||a.test(e)){var i=o.cacheManager.get(e);if(i)_t(o,i);else{o.busy=!0;var l=function(){o.options.getDataAndRunCallback.call(o,e,(function(){o.show.apply(this,arguments),n&&n(e)}))};0===o.options.dropDownDelay?l():o._timer=d.a.setTimeout((()=>{l()}),o.options.dropDownDelay||200)}}else o.dd&&o.dd.hide(),n&&n(e)}},Wt.prototype.hide=function(){this.dd&&this.dd.hide()},Wt.prototype.remove=function(){var e=this.dd;e&&(this.hide(),e.$.remove()),this.inactive=!0,this.options.onDeath&&this.options.onDeath()},Wt.prototype.show=function(e,t,n){if(this.inactive)p.a.error("Quick search abandoned before server response received, ignoring. ",this);else{var o={matrix:e,query:t,queryTokens:n};this.cacheManager.put(t,o),_t(this,o),this.busy=!1}};var Vt,Kt;Pt("Autocompleter.Manager");var Gt=function(e){var t="confluence.autocomplete-plugin",n=Rt[e.leadingChar];if(e=s.a.extend({minLengthForGetData:n.minLengthForGetData,displayHandler:n.displayHandler,Highlighter:n.Highlighter,classNames:n.autocompleteClassNames},e),!(Vt=$t(c.AJS.Rte.getEditor(),e)))return!1;function o(e){return s.a.data(e,"properties")}Object(C.b)("synchrony.stop",{id:t});var r,a=s()(c.window).width(),i=function(e){var t,n,o=s()("#autocomplete-dropdown"),i=Vt.getContainer();o.length||(o=s()("<div></div>").addClass("aui-dd-parent quick-nav-drop-down").attr("id","autocomplete-dropdown").appendTo("body"));var l=c.AJS.Position.spaceAboveBelow(c.AJS.Rte.getEditorFrame(),i);e.find("ol:has(a.menu-header)").addClass("top-menu-item"),e.find("ol:empty").hide(),o.append(e);var d=s()("#autocomplete-dropdown .autocomplete").find("ol:has(a.menu-header)"),u=d.find("a").text();d.before(`<h2 id='titleForSR' class='top-menu-title'>${u}</h2>`),d.attr("tabindex","-1"),s()("#autocomplete-dropdown .autocomplete ol:not(.top-menu-item)").attr("role","listbox").attr("aria-controls","forSR").attr("tabindex","0");var g=s()("#autocomplete-dropdown .autocomplete ol:not(.top-menu-item) li");g.attr("role","presentation"),g.find("img").attr("role","none"),g.find("a").attr("role","option");var m=g.length;s()("<div></div>").addClass("hidden-div").attr("aria-atomic","true").attr("role","region").attr("aria-live","polite").attr("id","forSR").text(c.AJS.format("{0,choice,0#{0} results|1#{0} result|1\u003c{0} results} available for {1}",m,u)).appendTo(".autocomplete");var p=c.AJS.Rte.Content.offset(i),f=Math.max(o.width()+p.left-a+10,0),h=p.left-f-0,v=e.outerHeight(!0),b=v+10;r&&(function(e,t){return 1==r?e.above>=t:e.below>=t}(l,b)||(r=null)),r||(r=function(e,t){return e.below>=t?2:e.above>=t?1:e.below>e.above?2:1}(l,b)),(n=o.find(".autocomplete-dropdown-arrow")).length||(n=s()("<div>").addClass("autocomplete-dropdown-arrow").addClass(Vt.settings.autocompleteClassNames)),1===r?(n.addClass("autocomplete-dropdown-bottom-arrow").css({top:v-1}),t=p.top-v-10):(n.removeClass("autocomplete-dropdown-bottom-arrow").css("top",""),t=p.top+i.height()+10),n.css({left:f}).appendTo(o),o.css({position:"absolute",top:t,left:h})};Kt=(e=>new Wt("inputdriven-dropdown",e))({onShow(e){Object(C.b)("rte-autocomplete-on-show",{triggerChar:Vt.settings.ch});var t=c.AJS.Rte.getEditorFrame();t&&t.shim&&t.shim.hide(),e.find("a.menu-header").unbind().click((e=>{e.preventDefault(),Vt.die()})),this.reset(),Vt.settings.selectFirstItem&&e.find("a:not('.menu-header')").length&&c.AJS.dropDown.current.moveDown(),Vt.settings.onShow&&Vt.settings.onShow()},dropdownPlacement:i,onDeath(){s()("#autocomplete-dropdown").remove(),Vt.settings.onDeath&&Vt.settings.onDeath()},ajsDropDownOptions:{selectionHandler:function(e,t){e.preventDefault();var n=o(t[0]);n&&"function"==typeof n.callback?n.callback(Vt):"menu-header"!==n.className&&Vt.update(n),Vt.die()},moveHandler:function(e,t){var n=c.AJS.dropDown.current;e&&e.find("a").is(".menu-header")&&("up"==t?n.moveUp():n.moveDown())},className:`autocomplete ${Vt.settings.dropDownClassName}`,displayHandler:e.displayHandler,Highlighter:e.Highlighter},getDataAndRunCallback(e){Vt&&Vt.settings.getDataAndRunCallback&&Vt.settings.getDataAndRunCallback(Vt,e,((t,n,o,r)=>{Vt.settings.getHeaderText&&t.unshift([{className:"menu-header dropdown-prevent-highlight",href:"#",name:Vt.settings.getHeaderText(Vt,e)}]),t.push(Vt.settings.getAdditionalLinks(Vt,e,o)),Kt&&Kt.show(t,n,r||[n])}))},dropDownDelay:Vt.settings.dropDownDelay,minLengthForGetData:Vt.settings.minLengthForGetData}),Vt.onBeforeKey=function(e,t){return 40===e.keyCode||38===e.keyCode||13===e.keyCode?(c.tinymce.dom.Event.cancel(e),!1):8===e.keyCode&&1===(null==t?void 0:t.length)?(e.preventDefault(),null===(n=Vt)||void 0===n||n.text(""),Jt(),!1):!(27===e.keyCode||9===e.keyCode||8===e.keyCode&&!t)||(this.die(8===e.keyCode),!1);var n},Vt.onKeyPress=function(e){var t,n=String.fromCharCode(e.which);if(13===e.keyCode)return c.tinymce.dom.Event.cancel(e),!1;this.settings.endChars.includes(n)&&(null===(t=Vt)||void 0===t||t.die());return!0};var l=e.minLengthForGetData||2,d=new RegExp(`\\S{${l},}`);Vt.onAfterKey=function(e,t){if(40===e.keyCode||38===e.keyCode||13===e.keyCode){var n=c.AJS.dropDown.current;if(!n)return!1;if(-1==n.getFocusIndex()&&13===e.keyCode)return Yt(),!0;e.which||(e.which=e.keyCode),n.moveFocus(e);var o=s()("#forSR");return o.length>0&&o.text(`${n.links.closest("li.active")[0].outerText}`),!1}var r=8===e.keyCode&&!t||u(t);return(r||d.test(t))&&Kt&&Kt.change(t,r),!0};var u=function(e){return/[\u4E00-\u9FFF]/gi.test(e)};return Vt.onDeath=function(){Kt&&(Kt.remove(),Kt.closing=!0),Object(C.b)("synchrony.start",{id:t})},Vt.onScroll=function(){Kt&&Kt.dd&&i(Kt.dd.$)},Vt.getCurrentItem=function(){if(!Kt||!Kt.dd)return null;var e=Kt.dd,t=e.getFocusIndex();return t<0?null:o(e.links[t])},Kt&&Kt.change(Vt.text(),!0),!0},Yt=function(){var e;null===(e=Vt)||void 0===e||e.die(),Vt=null},Jt=function(){var e=$t.removeOrphanedControl();e&&qt.shortcutFired(e.leadingChar)},qt={getInputDrivenDropdown:()=>Kt,triggerListener(e){if(!e.metaKey){Kt&&Kt.closing&&(Kt=null);var t=String.fromCharCode(e.which);!Kt&&t in Rt&&Gt({leadingChar:t})&&c.tinymce.dom.Event.cancel(e)}},shortcutFired(e,t){var n=t?0:1;return Kt&&Kt.closing&&(Kt=null),Kt&&(n=t?0:Vt.backWords+1,Yt()),Gt({leadingChar:e,backWords:n})},reattach:Jt,die:()=>{var e,t;null===(e=Vt)||void 0===e||e.text(""),null===(t=Vt)||void 0===t||t.removeSpan(),Yt()},getAutocompletePlaceholder:()=>{var e=c.tinymce.activeEditor;return e?e.dom.get(Nt):null},repositionDropdown:()=>{var e;null===(e=Vt)||void 0===e||e.onScroll()}},Zt=n(24),Xt=n.n(Zt),en=(e,t)=>{Rt[e]=t},tn=(e,t,n)=>`<a href="#" class="${t||""}"><span class="icon ${n||""}"></span><span>${e}</span></a>`,nn=function(e,t,n,o,r){var a;if(e.statusMessage)a=[[{html:e.statusMessage,className:"error"}]];else{var i=t?Xt.a.REST.makeRestMatrixFromSearchData(e):Xt.a.REST.makeRestMatrixFromData(e,o);a=Xt.a.REST.convertFromRest(i)}n(a,t,(function(e,t){r&&"function"==typeof r&&r(a,e,t)}))},on=(e,t,n,o,r,a,i)=>{var l,c=t(o),d=e.settings.cacheManager,u=d.get(o);c?((l=s.a.ajax({type:"GET",url:c,data:n(e,o),dataType:"json",global:!1,timeout:5e3})).done((e=>{d.put(o,e)})),u?nn(u,o,r,a,i):(l.done((e=>{nn(e,o,r,a,i)})),l.fail(((e,t)=>{"timeout"==t&&nn({statusMessage:"Timeout",query:o},o,r,a)})))):r([],o)};n(48);function rn(e){e.on("PostRender",(()=>{p.a.info("Autocomplete enabled, adding keyPress listener"),e.on("keypress",qt.triggerListener,!0),Object(C.b)("ready-editor-autocomplete")})),e.on("Undo",qt.reattach),e.on("Redo",qt.reattach)}"object"!=typeof d.a.Confluence&&(p.a.error("Confluence is supposed to be defined"),d.a.Confluence={}),void 0===d.a.Confluence.Editor&&(p.a.error("Confluence.Editor is supposed to be defined"),d.a.Confluence.Editor={}),d.a.Confluence.Editor.Autocompleter={Settings:Rt,log:Pt,Util:{dropdownLink:tn,getRestData:on},Control:$t,Manager:qt},Object(jt.a)("confluence-editor/tinymce3/plugins/autocomplete/autocomplete-manager",(()=>qt)),Object(jt.a)("confluence-editor/tinymce3/plugins/autocomplete/autocomplete-settings",(()=>({Settings:Rt,log:Pt})));var an=n(29),ln=n(5),sn=e=>e?`${A.a}/rest/prototype/1/search.json`:m.a.get("remote-user")?`${A.a}/rest/prototype/1/session/history.json`:null,cn=(e,t)=>{var n={"max-results":e.maxResults};return t&&(n.query=Object(an.unescapeEntities)(t),n.search="name",n.preferredSpaceKey=m.a.get("space-key")),n},dn=()=>en("[",{ch:"[",cache:!1,endChars:["]"],dropDownClassName:"autocomplete-links",selectFirstItem:!0,getHeaderText:()=>Object(ln.a)("editor.autocomplete.links.header.text"),getAdditionalLinks(e,t,n){var o;if(t){var r=Object(ln.a)("editor.autocomplete.links.dialog.search");o=c.AJS.format(r,t)}else o=Object(ln.a)("editor.autocomplete.links.dialog.search.no.text");var a=c.Confluence.Editor.LinkBrowser,i=[{className:"search-for",name:o,href:"#",callback(e){e.replaceWithSelectedSearchText();var t=a.open({panelKey:a.SEARCH_PANEL});t.doSearch(t.getLocationPresenter().getRawLinkText())}},{className:"dropdown-insert-link",html:tn(Object(ln.a)("editor.autocomplete.links.web.link"),"dropdown-prevent-highlight","editor-icon"),callback(e){e.replaceWithSelectedSearchText(),a.open({panelKey:a.WEBLINK_PANEL})}}];return n&&n(t,i),i},getDataAndRunCallback(e,t,n){on(e,sn,cn,t,n,"content",(function(e,t,n){var o;t&&(e.length<2||("page"!==(o=e[1][0].restObj).type||o.space.key!=m.a.get("space-key")||o.title.toLowerCase()!==t.toLowerCase()))&&n.push({className:"insert-create-page-link",html:tn(Object(ln.a)("editor.autocomplete.links.create.link"),"dropdown-prevent-highlight","editor-icon"),callback(e){var n=Object(an.unescapeEntities)(t),o=c.Confluence.Link.createLinkToNewPage(n,m.a.get("space-key"));e.update(o)}})}))},update(e,t){t.restObj&&(t=c.Confluence.Link.fromREST(t.restObj)),t&&t.insert()}});function un(e){e.addCommand("mceConfAutocompleteLink",(()=>(qt.shortcutFired("["),!1))),e.addShortcut("meta+shift+k",e.translate("AutoCompleteLink"),"mceConfAutocompleteLink"),dn()}var gn=n(17),mn=n.n(gn);function pn(){var e=m.a.get("content-id");return+e||(e=m.a.get("page-id")),+e||(e="0"),e}var fn=0,hn={updateNode(e,t){var n=c.tinymce.activeEditor,o=s()(e,n.getDoc()),r="confluence.update-node-"+fn++;Object(C.b)("synchrony.stop",{id:r});var a=hn.prepareNodeForUpdate(o);return hn.replaceNode(o,t).fail(a).always((()=>{Object(C.b)("synchrony.start",{id:r})})).promise()},storeNodeState(e,t){for(var n,o={},r=0,a=t.length;r<a;r++)n=t[r],o[n]=e.attr(n);return()=>{for(var t in o)e.attr(t,o[t])}},prepareNodeForUpdate(e){var t;return e.is("img")&&(t=hn.storeNodeState(e,["width","height","src","class"]),e.addClass("image-hotswap").attr({src:`${A.a}/images/border/spacer.gif`,width:e.attr("width"),height:e.attr("height")})),t},replaceNode(e,t){var n=hn.getDoc(),o=s()(t,n),r=s()(e,n),a="confluence.replace-node-"+fn++;return Object(C.b)("synchrony.stop",{id:a}),s.a.Deferred((function(){var e=this;o.is("img")?(o[0].onload=function(){p.a.debug("replaceNode: new node's src has been loaded by the browser."),this.onload=null,e.resolve(this)},c.tinymce.Env.browser.isOpera()&&(o[0].src=o.attr("src")),n.createDocumentFragment().appendChild(o[0])):(o.is("table.wysiwyg-macro")&&o.attr("data-mce-resize","false"),e.resolve(o[0]))})).always((()=>{Object(C.b)("synchrony.start",{id:a})})).done((e=>{r.replaceWith(e)})).promise()},replaceSelection(e){var t=c.tinymce.activeEditor,n=t.selection.getRng(),o=t.getDoc().createRange(),r=s()(e).clone(!0,!1)[0];n.deleteContents(),3===n.startContainer.nodeType&&""===n.startContainer.nodeValue&&(n.startContainer.nodeValue=g().HIDDEN_CHAR),n.insertNode(r);var a=t.getDoc().createTextNode(g().HIDDEN_CHAR);t.dom.insertAfter(a,r);var i=a;return o.setStartBefore(i),o.setEndAfter(i),o.collapse(!1),t.selection.setRng(o),r},normalize(e){var t,n,o=c.tinymce.activeEditor,r=o.selection.getRng(),a=null,i=[];if(e&&e.childNodes){if(u()?a=r:c.tinymce.Env.browser.isFirefox()&&r&&(a=r.cloneRange(),((t={startIndex:Array.from(e.childNodes).indexOf(r.startContainer),startOffset:a.startOffset,endIndex:Array.from(e.childNodes).indexOf(r.endContainer),endOffset:a.endOffset}).startIndex>-1||t.endIndex>-1)&&(i=function(e){var t=[],n=0;return Array.prototype.forEach.call(e.childNodes,((e,o)=>{var r={},a=t[o-1]||{};r.isTextNode=3===e.nodeType,r.textNodesBefore=(r.isTextNode&&a.isTextNode?1:0)+~~a.textNodesBefore,r.precedingTextLength=n,n=r.isTextNode&&e.nodeValue?n+e.nodeValue.length:0,t.push(r)})),t}(e))),e.normalize(),c.tinymce.Env.browser.isFirefox()&&a){if(n=i[t.startIndex]){var l=t.startIndex-n.textNodesBefore,s=t.startOffset+n.precedingTextLength;a.setStart(e.childNodes[l],s)}if(n=i[t.endIndex]){var d=t.endIndex-n.textNodesBefore,g=t.endOffset+n.precedingTextLength;a.setEnd(e.childNodes[d],g)}}a&&o.selection.setRng(a)}},getDoc:()=>c.tinymce.Env.browser.isFirefox()||c.tinymce.Env.browser.isOpera()?document:c.tinymce.activeEditor.getDoc(),isolateSelectedRange(){var e=c.tinymce.activeEditor,t=hn.getDoc(),n=e.selection,o=n.getRng();if(o){var r,a=o.startContainer,i=o.startOffset,l=o.endContainer,d=o.endOffset;if(o.collapsed)return o;a===l&&(r=d-i);var u=m(a,i);u&&o.setStartBefore(u),a!==o.startContainer&&(d=r||d);var g=m(l,d,!0);return g&&o.setEndAfter(g),n.setRng(o),o}function m(n,o,r){var a,i=e.dom.getParent(n,e.dom.isBlock);i||(i=e.getBody());var l=function(e,n,o,r){var a,i,l=null,c=null,d=r?"nextSibling":"previousSibling";if(!(a=0===n)&&r&&(a=3===e.nodeType?n===e.length:n===e.childNodes.length),a)for(l=e[d],c=e;null===l;){if(c===o)return;if(c.parentNode===o)break;l=(c=c.parentNode)[d]}else 3===e.nodeType?(i=e.data,e.data=i.slice(n),l=t.createTextNode(i.slice(0,n)),c=e,s()(l).insertBefore(c),r&&(i=c,c=l,l=i)):l=(c=e.childNodes[n-(r?1:0)])[d];return[c,l]}(n,o,i,r);return a=l?l[1]?function(e,t,n,o){for(var r,a,i,l;t!==n&&t.parentNode!==n;){if(r=(a=t.parentNode).cloneNode(!1),o)for(s()(r).insertAfter(a),i=e;i;)l=i.nextSibling,r.appendChild(i),i=l;else for(s()(r).insertBefore(a),i=a.firstChild;i!==t;)l=i.nextSibling,r.appendChild(i),i=l;e=r,t=a}return t}(l[1],l[0],i,r):l[0]:void 0,a}}},vn=hn;function bn(e){return s()(e).hasClass("wysiwyg-macro")}function yn(e,t){var n;if(e.macro&&e.contentId)n={type:"POST",url:`${A.a}/rest/tinymce/1/macro/placeholder`,contentType:"application/json; charset=utf-8",data:JSON.stringify(e),dataType:"text"};else{if(!e.url||!e.type)throw new Error(`illegal argument received: ${e}`);n=e}var o,a=s.a.Deferred(),i=c.tinymce.activeEditor;if(!t){var l=`macro-${(new Date).getTime()}`;o=i.dom.create("span",{id:l}),i.selection.setNode(o),t=o=i.dom.select(`#${l}`)[0],a.fail((()=>{s()(o).remove()}))}return s.a.extend(n,{timeout:this.DEFAULT_INSERT_MACRO_TIMEOUT}),p.a.debug(`Insert macro timeout = ${n.timeout}`),r.a.Editor.UI.setButtonsState(!1),s.a.ajax(n).done((function(e){var n,o=e;"<"!==o[0]&&(o=document.createTextNode(o)),(n=t)&&n.parentNode?vn.updateNode(t,o).done((e=>{a.resolve(e,o)})).fail(a.reject):(p.a.error("The node to be replaced has been already deleted from the document"),a.rejectWith(this,Array.from(arguments)))})).fail((function(e,t,n){p.a.error(`Macro placeholder request failed ${t} : '${n}'`),a.rejectWith(this,Array.from(arguments))})),a.done(((e,t)=>{r.a.Editor.UI.setButtonsState(!0),bn(e)&&/P|H\d/.test(e.parentNode.nodeName)&&i.dom.split(e.parentNode,e),function(e){var t=c.tinymce.activeEditor,n=t.getDoc(),o=t.selection.getRng();if(bn(e)){s()("p, pre",e).each(((e,t)=>{0===t.childNodes.length&&t.appendChild(n.createElement("br"))}));var r=t.dom.select(".wysiwyg-macro-body",e)[0].firstChild;r?(o.setStart(r,0),o.setEnd(r,0)):p.a.debug("focusMacroNode: couldn't find anything to focus, cap'n!")}else o.setStartAfter(e),o.setEndAfter(e);t.selection.setRng(o)}(e),i.nodeChanged(),g().showElement(e),i.dispatch("SetContent",{content:t,format:"html",selection:!0,set:!0}),c.tinymce.activeEditor.undoManager.add(),Object(C.b)("macro-browser.macro-inserted")})).fail((()=>{r.a.Editor.UI.setButtonsState(!0)})),a.promise()}var wn={DEFAULT_INSERT_MACRO_TIMEOUT:M.a.get("macro-placeholder-timeout"),insertMacro:yn,isInMacro:e=>s()(e).closest(".wysiwyg-macro").length>0,updateMacro:(e,t,n,o)=>yn({contentId:pn(),macro:{name:n,params:e,body:t||""}},o)},Cn=wn;var An={storedRange:null,bookmark:null,editedMacroDiv:null,editedMacro:null,getCurrentNode:()=>s()(c.tinymce.activeEditor.selection.getNode()),isMacroDiv:e=>s()(e).hasClass("wysiwyg-macro"),isMacroTag(e){var t=s()(e);return t.hasClass("wysiwyg-macro")||t.hasClass("editor-inline-macro")},isBodylessMacro:e=>s()(e).hasClass("editor-inline-macro"),isMacroWithBody:e=>s()(e).hasClass("wysiwyg-macro"),isMacroStartTag:e=>s()(e).hasClass("wysiwyg-macro-starttag"),isMacroEndTag:e=>s()(e).hasClass("wysiwyg-macro-endtag"),isMacroBody:e=>s()(e).hasClass("wysiwyg-macro-body"),hasMacroBody:e=>"true"==s()(e).attr("macrohasbody"),getNestingMacros(e){var t=s()(e||An.getCurrentNode()),n=[];return t.parents(".wysiwyg-macro").each(((e,t)=>{n.push(s()(t).attr("data-macro-name"))})),n},logMCESelection(e){var t=c.tinymce.activeEditor.selection;p.a.debug("******************************"),p.a.debug(`Logging TinyMCE selection title: ${e}`),p.a.debug("Bookmark:"),p.a.debug(t.getBookmark());var n=s()(t.getRng().startContainer).text()||s()(t.getRng().startContainer.parentNode).text();p.a.debug(`Range: ${n}`),p.a.debug(t.getRng())},getSelectedMacro(){var e=An.getCurrentNode();return p.a.debug(`getSelectedMacro: $selectionNode=${e[0]}`),An.isMacroDiv(e)?e:Cn.isInMacro(e)},openMacro(e){r.a.MacroBrowser.open({selectedMacro:e,onComplete:An.macroBrowserComplete,onCancel:An.macroBrowserCancel})},editMacro(e){var t=s()(e);An.editedMacroDiv=t[0];var n=c.tinymce.activeEditor.serializer.serialize(t.clone()[0],{forced_root_block:!1});c.tinymce.activeEditor.selection.select(t[0]),yt(),s.a.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:`${A.a}/rest/tinymce/1/macro/definition`,data:JSON.stringify({contentId:pn(),macroHtml:n}),dataType:"text",success(e){An.openMacro(JSON.parse(e))}})},macroBrowserToolbarButtonClicked(e){var t=c.tinymce.activeEditor,n=An.getCurrentNode();yt();var o=s.a.extend({presetMacroName:null,nestingMacros:An.getNestingMacros(n),onComplete:An.macroBrowserComplete,onCancel:An.macroBrowserCancel,mode:"insert",selectedHtml:"",selectedText:""},e);if((!e||e&&!e.ignoreEditorSelection)&&(o.selectedHtml=t.selection.getContent(),o.selectedText=t.selection.getContent({format:"text"})),"function"!=typeof r.a.MacroBrowser.Model.addMacro)return r.a.MacroBrowser.open(o);var a=o.presetMacroMetadata&&o.presetMacroMetadata.macroName||o.presetMacroName,i=r.a.MacroBrowser.getMacroMetadata(a);i?(o.presetMacroMetadata=o.presetMacroMetadata||i,r.a.MacroBrowser.open(o)):r.a.MacroBrowser.Rest.fetchMacroMetadataDetails({id:o.presetMacroName,successCallback:e=>{e&&e.details?(r.a.MacroBrowser.Model.addMacro(e.details),o.presetMacroMetadata=r.a.MacroBrowser.getMacroMetadata(o.presetMacroName),Object(C.a)("reset.complete",(function e(){r.a.MacroBrowser.open(o),Object(C.c)("reset.complete",e)})),Object(C.b)("reset.rte")):r.a.MacroBrowser.open(o)},errorCallback:e=>{p.a.error("AJS.MacroBrowser.Rest.fetchMacroMetadataDetails ERROR",e)}})},macroBrowserComplete(e){var t={contentId:m.a.get("content-id")||"0",macro:{name:e.name,params:e.params,defaultParameterValue:e.defaultParameterValue,body:e.bodyHtml}};wt(),An.editedMacroDiv?(Cn.insertMacro(t,An.editedMacroDiv),delete An.editedMacroDiv):Cn.insertMacro(t)},macroBrowserCancel(){wt(),An.editedMacroDiv=null,An.editedMacro=null}},xn=An;function Mn(){function e(e){s()("#autocomplete-dropdown .top-menu-item").spin(e)}function t(e,t){var n=t.presetMacroMetadata;e.replaceWithSelectedSearchText(),n?mn.a.hasRequiredParameters(n)||n.alwaysShowConfig?xn.macroBrowserToolbarButtonClicked(t):(yt(),Cn.insertMacro({contentId:m.a.get("content-id")||"0",macro:{name:n.macroName,body:""}})):xn.macroBrowserToolbarButtonClicked(t)}function n(e){if(e.hidden&&!mn.a.isHiddenMacroShown(e))return null;var n={className:`autocomplete-macro-${e.macroName}`,callback(n){t(n,{ignoreEditorSelection:!0,presetMacroMetadata:e})}};return e.icon?(n.name=e.title,n.href="#",n.icon=(e.icon.relative?m.a.get("static-resource-url-prefix"):"")+e.icon.location):n.html=tn(e.title),n}en("{",{ch:"{",cache:!1,endChars:["}",":","{"],dropDownClassName:"autocomplete-macros",dropDownDelay:0,selectFirstItem:!0,getHeaderText:()=>Object(ln.a)("editor.autocomplete.macros.header.text"),getAdditionalLinks:()=>[{className:"dropdown-insert-macro",html:tn(Object(ln.a)("editor.autocomplete.macros.dialog.browse"),"dropdown-prevent-highlight","editor-icon"),callback(e){var n=e.text();t(e,{searchText:n})}}],getDataAndRunCallback(t,o,a){var i=mn.a.getMetadataPromise(),l=this,c=arguments;function d(){var r;r=o?function(e){for(var o=[],r=mn.a.searchSummaries(e,{keywordsField:"keywordsNoDesc"}),a=0,i=r.length;a<i;a++){var l=n(r[a]);if(l&&o.push(l)==t.maxResults)break}return o}(o):function(e){var t=[];return s()("#macro-insert-list li").each(((o,r)=>{var a=s()(r),i=e.find((e=>e.macroName===a.attr("data-macro-name")));if(i){var l=n(i);l&&t.push(l)}})),t}(mn.a.metadataList),e(!1),a([r],o)}function u(e){e.preventDefault(),e.stopPropagation(),Object(C.b)("analytics",{name:"autocomplete-macrobrowser.load-retry"}),mn.a.reset(),mn.a.preLoadMacro(),l.getDataAndRunCallback.apply(l,c)}l.alreadyBinded||(l.alreadyBinded=!0,i.always((()=>{d(),l.alreadyBinded=!1})),i.fail((()=>{Object(C.b)("analytics",{name:"autocomplete-macrobrowser.fail-to-load"}),r.a.messages.warning("#autocomplete-dropdown ol:nth(1)",{title:Object(ln.a)("editor.autocomplete.macros.error.load.header"),body:`<p><a id="macro-retry-link" href="#">${Object(ln.a)("editor.autocomplete.macros.error.load.retrylink")}</a></p>`}),s()("#macro-retry-link").click(u),s()("#autocomplete-dropdown ol").eq(1).show()}))),"pending"===i.state()&&(a([],o),e(!0))},update(){throw new Error("All items in the Macro Autocomplete dropdown must have a callback function")}})}function kn(){return{init(){Mn()},getInfo:()=>({longname:"Auto Complete Macro",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}var En=()=>{Object(C.a)("init.rte",(()=>{Object(C.a)("rte-autocomplete-on-show",((e,t)=>{"!"===t.triggerChar&&Object(C.b)("analytics",{name:"confluence.editor.autocomplete.trigger",data:{type:"media"}})})),Object(C.a)("rte-autocomplete-on-insert",((e,t)=>{"!"===t.triggerChar&&(e=>{if(e&&e.name){var t={extension:e.name.split(".").pop(),type:"media"};Object(C.b)("analytics",{name:"confluence.editor.autocomplete.insert",data:t})}})(t.selectedFile)}))})),Object(C.a)("rte-destroyed",(()=>{Object(C.c)("rte-autocomplete-on-insert"),Object(C.c)("rte-autocomplete-on-show")}))},Tn=n(35),Dn=n.n(Tn),Sn=n(22),In=n.n(Sn);function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function jn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nn=e=>{var t=m.a.get("content-id");return e?`${A.a}/rest/prototype/1/search.json`:+t?`${A.a}/rest/prototype/1/content/${t}/attachments.json`:null},Ln=(e,t)=>{var n=c.AJS.MacroBrowser.getMacroMetadata("view-file")?[]:["image","word","excel","pdf","powerpoint","multimedia"];return t?{type:"attachment",attachmentType:n,search:"name","max-results":e.maxResults,query:t}:{attachmentType:n,"max-results":e.maxResults}},Bn=()=>en("!",{ch:"!",cache:!1,endChars:["!"],dropDownClassName:"autocomplete-media",selectFirstItem:!0,getHeaderText:()=>c.AJS.MacroBrowser.getMacroMetadata("view-file")?Object(ln.a)("editor.autocomplete.file.header.text"):Object(ln.a)("editor.autocomplete.media.header.text"),getAdditionalLinks(){var e=Object(ln.a)("editor.autocomplete.media.files.dialog.browse");return[{className:"dropdown-insert-image",html:tn(e,"dropdown-prevent-highlight","editor-icon"),callback(e){e.replaceWithSelectedSearchText(),c.Confluence.Editor.defaultInsertImageDialog()}},{className:"dropdown-insert-macro",html:tn(Object(ln.a)("editor.autocomplete.media.macros.dialog.browse"),"dropdown-prevent-highlight","editor-icon"),callback(e){e.replaceWithSelectedSearchText(),c.tinymce.confluence.macrobrowser.macroBrowserToolbarButtonClicked({selectedCategory:"media"})}}]},getDataAndRunCallback(e,t,n){on(e,Nn,Ln,t,n,"attachment")},update(e,t){Object(C.b)("rte-autocomplete-on-insert",{triggerChar:"!",selectedFile:t});var n=t.restObj,o=c.AJS.REST.wikiLink(n),r=n&&n.title||t.name;if("Image"==n.niceType){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){jn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({filename:r,contentId:t.ownerId||n.ownerId},o.params);c.tinymce.confluence.ImageUtils.insertFromProperties(a)}else{var i=!!c.AJS.MacroBrowser.getMacroMetadata("view-file"),l=n.contentType,s="VANILLA"!==m.a.get("confluence-flavour");if(i&&(s&&!(l&&"application/x-shockwave-flash"===l)||l&&("audio/mp3"===l||"video/mp4"===l)||"Multimedia"!==n.niceType)){var d={name:r,page:n.parentTitle,space:n.space?n.space.key:"",date:n.datePath,ownerId:n.ownerId};In.a.insertFilePlaceholder(d)}else this._insertFile(r,t,o)}},_insertFile(e,t,n){var o;switch(t.restObj.niceType){case"PDF Document":o="viewpdf";break;case"Word Document":o="viewdoc";break;case"Excel Spreadsheet":o="viewxls";break;case"PowerPoint Presentation":o="viewppt";break;case"Multimedia":o="multimedia"}var r={page:n.destination.substring(0,n.destination.indexOf("^")),name:e};Dn.a.get("viewdoc").beforeParamsRetrieved(r),r.page||delete r.page;var a={contentId:m.a.get("content-id")||"0",macro:{name:o,params:r,body:""}};c.tinymce.confluence.MacroUtils.insertMacro(a)}});function Rn(e){e.addCommand("mceConfAutocompleteImage",(()=>(qt.shortcutFired("!"),!1))),e.addShortcut("meta+shift+m",e.translate("AutoCompleteImage"),"mceConfAutocompleteImage"),Bn(),En()}function Pn(e,t,n){"cl.ly"==e.host?s.a.get(`${A.a}/rest/autoconvert/1.0/cloudappembed?resource=${e.path.substr(1)}`,(e=>{var o;if(e)switch(e.item_type){case"image":o=Ht(e.content_url),n(s()(`<img class="confluence-embedded-image confluence-external-resource" src="${o}" data-image-src="${o}"/>`)[0]);break;case"bookmark":t.text(e.name),t.attr("href",Ht(e.redirect_url)),n(t)}else n()})):n()}function $n(){var e=this,t=function(e,t){return t.anchor&&0!==t.anchor.indexOf("comment-")?`${e}#${t.anchor.substring(t.anchor.indexOf("-")+1)}`:e},n=function(n,r,a){if(o(n)){var i=function(e){return A.a?e.path.substring(A.a.length+1):e.path.substring(1)}(n),l=decodeURIComponent(i).split("/"),d="";n.queryKey=n.queryKey||{},n.queryKey.focusedCommentId?(d=`$${n.queryKey.focusedCommentId}`,d=t(d,n)):n.queryKey.pageId?(d=`$${n.queryKey.pageId}`,d=t(d,n)):"display"===l[0]?d=function(e,n,o){return 2===o.length&&0===o[1].indexOf("~")?n=o[1]:3===o.length?(n=`${o[1]}:${o[2].replace(/\+/g," ")}`,n=t(n,e)):4===o.length&&"status"===o[1]?n=`$${o[3]}`:6===o.length&&(n=`${o[1]}:/${o[2]}/${o[3]}/${o[4]}/${o[5].replace(/\+/g," ")}`,n=t(n,e)),n}(n,d,l):"spaces"===l[0]?d=(d=(d=e.spaViewPageLinkHandler(l))||e.spaBlogPostLinkHandler(l))?t(d,n):function(e,n,o){return 2!==o.length&&3!==o.length||-1!==o[1].indexOf(".action")||(n=`${o[1]}:`,n=t(n,e)),n}(n,d,l):"users"===l[0]?d=function(e,t,n){return 2===n.length&&"viewuserprofile.action"==n[1]?t=`~${e.queryKey.username}`:2===n.length&&"viewmyprofile.action"==n[1]&&(t=`~${m.a.get("remote-user")}`),t}(n,d,l):"pages"===l[0]&&"viewpage.action"===l[1]&&n.queryKey&&n.queryKey.spaceKey&&n.queryKey.title&&(d=`${n.queryKey.spaceKey}:${n.queryKey.title.replace(/\+/g," ")}`),d?(d=`[${d}]`,c.tinymce.plugins.Autoconvert.getHtmlFromWikiMarkup(d,(e=>{a(s()(e).children()[0])}),(()=>{a()}))):a()}else a()},o=function(e){var t=!0;return t=t&&e.authority===c.document.location.host,t=t&&(!A.a||0===e.path.indexOf(A.a)),t};this.init=function(){c.tinymce.plugins.Autoconvert.autoConvert.addHandler(n)}}$n.prototype.spaViewPageLinkHandler=function(e){var t="spaces"===e[0]&&"pages"===e[2],n="edit"===e[3]?e[4]:e[3];if(t&&n)return`$${n}`},$n.prototype.spaBlogPostLinkHandler=function(e){var t="spaces"===e[0]&&"blog"===e[2],n=e[1],o=e[3],r=e[4],a=e[5],i=e[6],l=e[7];if(t&&n&&o&&r&&a&&i&&l)return`${n}:/${o}/${r}/${a}/${l.replace(/\+/g," ")}`};function Hn(){c.tinymce.plugins.Autoconvert.autoConvert.addHandler((function(e,t,n){if(e.host.match(/google.*/)&&"/url"===e.path&&e.queryKey&&e.queryKey.url){var o=decodeURIComponent(e.queryKey.url);(t=s()(t)).attr("href",o),t.attr("data-mce-href",o),t.text(o),n(t)}else n()}))}var Fn={issueKeyOnlyRegEx:/\/(i#)?browse\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+$)/,singleTicketXMLEx:/\/jira\.issueviews:issue-xml\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+)\//,issueKeyWithinRegex:/\/(i#)?browse\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+)(?:\?|#)/,jqlRegEx:/jqlQuery=([^&]+)/,jqlRegExAlternateFormat:/jql=([^&]+)/,_getMatchedServerFromLink(e,t){var n=null;for(var o in t)if(t.hasOwnProperty(o)){var r=t[o],a=r.url;if("/"!==r.url[r.url.length-1]&&(a+="/"),0===e.indexOf(a)){n=r;break}}return n},pasteHandler(e,t,n){var o=r.a.Editor.JiraConnector.servers;if(!o)return n(),null;var a=r.a.Editor.JiraAnalytics,i={},l=Fn._getMatchedServerFromLink(e.source,o),s=null;if(l){var d="",u=Fn.jqlRegEx.exec(e.source)||Fn.jqlRegExAlternateFormat.exec(e.source),g=r.a.JQLHelper.isFilterUrl(e.source),m=Fn.issueKeyOnlyRegEx.exec(e.source)||Fn.issueKeyWithinRegex.exec(e.source);if(m?(d=m[2],a&&(i.type=a.linkTypes.jql)):(m=Fn.singleTicketXMLEx.exec(e.source))&&(d=m[1],a&&(i.type=a.linkTypes.xml)),u)i.is_single_issue=!1,i.type=r.a.JQLHelper.checkQueryType(e.source),s={name:"jira",params:{server:l.name,serverId:l.id,jqlQuery:decodeURIComponent(u[1].replace(/\+/g,"%20"))}};else if(g){var p=e.source;i.is_single_issue=!1,i.type=r.a.JQLHelper.checkQueryType(p),s={name:"jira",params:{server:l.name,serverId:l.id,jqlQuery:r.a.JQLHelper.getFilterFromFilterUrl(p)}}}else d&&(i.is_single_issue=!0,s={name:"jira",params:{server:l.name,serverId:l.id,key:d}})}s?(c.tinymce.plugins.Autoconvert.convertMacroToDom(s,n,n),a&&a.triggerPasteEvent(i)):n()}};var zn=function(){var e=[],t=function(e){return e.indexOf("%s")>=0?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&").replace("%s","(.*)"):`${e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(.*)`};c.tinymce.plugins.Autoconvert.autoConvert.addHandler((function(t,n,o){if(t.source===n.text()){for(var r=0;r<e.length;r++){var a=e[r],i=t.source.match(a.regex);if(i){var l=i[1];if(a.defaultAlias){var c=a.defaultAlias.replace(/%s/,l);return void o(s()(n).text(c))}return void o(s()(n).text(l))}}o()}else o()})),setTimeout((()=>{s.a.ajax({url:`${A.a}/rest/autoconvert/latest/shortcutlinkconfigurations`,type:"GET",dataType:"json",success(n){e=n.configurations;for(var o=0;o<e.length;o++){var r=e[o];try{r.regex=new RegExp(t(r.expandedValue))}catch(e){p.a.error(`Failed to generated regex for ${r}`)}}},error(e){p.a.error(`Failed to load shortcut link configurations ${e.statusText}`)}})}),0)},Un={pasteHandler(e,t,n){"www.skitch.com"===e.host||"skitch.com"===e.host?s.a.get(`${A.a}/rest/autoconvert/1.0/skitchembed?url=${e.source}`,(e=>{e&&e.url?n(s()(`<img class="confluence-embedded-image confluence-external-resource" src="${e.url}" data-image-src="${e.url}"/>`)[0]):n()})):n()}},_n=/^\/(.*?)\/status\/([^/]+\/?$)/,Qn=/^\/(.*?)\/statuses\/([^/]+\/?$)/,Wn=(e,t,n)=>{var o,r,a;e.host.match(/^twitter.com/)?((o=decodeURI(e.path).match(_n))?r=`${e.protocol}://twitter.com/${o[1]}/status/${o[2]}`:(o=decodeURI(e.path).match(Qn))&&(r=`${e.protocol}://twitter.com/${o[1]}/statuses/${o[2]}`),r?(a={name:"widget",params:{url:r}},c.tinymce.plugins.Autoconvert.convertMacroToDom(a,n,n)):n()):n()};function Vn(){var e=[/youtube-nocookie.com\/embed\/?/,/youtube.com\/watch\?/,/vimeo.com\/[0-9]+/,/[^.]\.wufoo\.com\/(?:forms|reports)/];c.tinymce.plugins.Autoconvert.autoConvert.addHandler((function(t,n,o){for(var r=decodeURI(t.source),a=0;a<e.length;a++)if(r.match(e[a])){var i={name:"widget",params:{url:r}};return void c.tinymce.plugins.Autoconvert.convertMacroToDom(i,o,o)}o()}))}function Kn(){c.tinymce.plugins.Autoconvert.autoConvert.addHandler(((e,t,n)=>{if(e.host.match(".*youtu.be.*")){var o=`http://youtube.com/watch?v=${e.path.substr(1)}`;n(s()(t).attr("href",o).text(o))}else n()}))}function Gn(){var e;Object(C.a)("init.rte",(()=>{c.tinymce.plugins.Autoconvert.autoConvert.addHandler(Pn)})),e=new $n,Object(C.a)("init.rte",e.init),Object(C.a)("init.rte",Hn),Object(C.a)("init.rte",zn),Object(C.a)("init.rte",(()=>{c.tinymce.plugins.Autoconvert.autoConvert.addHandler(Un.pasteHandler)})),Object(C.a)("init.rte",Vn),Object(C.a)("init.rte",Kn),Object(C.a)("init.rte",(()=>{c.tinymce.plugins.Autoconvert.autoConvert.addHandler(Fn.pasteHandler)})),Object(C.a)("init.rte",(()=>c.tinymce.plugins.Autoconvert.autoConvert.addHandler(Wn)))}var Yn,Jn,qn,Zn='img[src^="data:image"]:not(.editor-inline-macro)',Xn='img[src^="blob:"]:not(.editor-inline-macro)',eo=!1,to=()=>{c.AJS&&c.AJS.Rte&&c.AJS.Rte.BootstrapManager?c.AJS.Rte.BootstrapManager.addOnInitCallback((()=>{var e=c.tinymce.activeEditor;e?e.on("Paste",(e=>{no(e),c.tinymce.dom.Event.cancel(e)})):p.a.error("Could not getEditor from adapter")})):p.a.error("Could not initialize pasteHandler on Confluence.Editor")},no=e=>{if(e.clipboardData&&e.clipboardData.items.length){eo||(c.Confluence.Uploader.bind("FileUploaded",io),c.Confluence.Uploader.bind("UploadComplete",lo),eo=!0),Yn=[],Jn=0;var t=Array.from(e.clipboardData.types);p.a.debug("clipboardData types: ",t),p.a.debug("clipboardData files: ",e.clipboardData.files),p.a.debug("clipboardData text/plain: ",e.clipboardData.getData("text/plain")),p.a.debug("clipboardData text/html: ",e.clipboardData.getData("text/html")),p.a.debug("clipboardData text/rtf: ",e.clipboardData.getData("text/rtf")),p.a.debug("clipboardData image/svg+xml: ",e.clipboardData.getData("image/svg+xml"));var n="Files"===t.toString()||t.sort().toString()===["image/svg+xml","Files"].sort().toString(),o=t.sort().toString()===["text/plain","Files"].sort().toString()||t.sort().toString()===["text/html","text/plain","Files"].sort().toString();Array.from(e.clipboardData.items).forEach(((t,o)=>{if(p.a.debug("clipboardData.items item.kind",t.kind),p.a.debug("clipboardData.items item.type",t.type),p.a.debug("clipboardData.items item",t),n&&"file"===t.kind){var r=t.getAsFile();r&&oo(r,o)}else if(!n&&"string"===t.kind&&"text/html"===t.type){var a=e.clipboardData.getData("text/html");(new DOMParser).parseFromString(a,"text/html").querySelectorAll(Zn).forEach(((e,t)=>{ro(e,t)}))}})),o&&setTimeout((()=>{e.currentTarget&&e.currentTarget.querySelectorAll(Zn).forEach(((e,t)=>{ro(e,t)}))}))}},oo=(e,t)=>{var n=ao(e,e.size,t);c.Confluence.Uploader.upload([n])},ro=(e,t)=>{try{var n=e.getAttribute("src"),o=decodeURI(n).split(",")[1].split(" ").join("").replace(/\r?\n|\r/g,""),r=atob(o).length;c.Confluence.Uploader.upload([ao(o,r,t,"base64")])}catch(t){c.Confluence.EditorNotification.notify("warning",c.tinymce.activeEditor.translate("base64image.warning")),e.remove(),p.a.error("Fail to decode: ",e.getAttribute("src")),p.a.error(t)}},ao=(e,t,n,o)=>{var r=new Date,a=r.getMonth()+1,i=n?`-${n}`:"";return{fileName:`image-${r.getFullYear()}-${a}-${r.getDate()}_${r.getHours()}-${r.getMinutes()}-${r.getSeconds()}${i}.png`,fileSize:t,slice:(t,n)=>e.slice(t,t+n),getAsBinary:()=>e,getData:()=>e,encoding:o}},io=(e,t,n)=>{Yn.length||(Yn=c.tinymce.activeEditor.getDoc().querySelectorAll(Xn)),Yn.length&&(Yn[Jn].outerHTML=JSON.parse(n.response).htmlForEditor,Jn++)},lo=()=>{c.tinymce.activeEditor.getDoc().querySelectorAll(Xn).forEach((e=>e.remove()))};function so(e){return s()("<div>").append(e.cloneNode(!0)).html()}function co(e){var t,n;if(!e||!e.collapsed)throw new Error("range is null or not collapsed");if(t=e.startContainer,n=e.startOffset,1===t.nodeType&&n>0){if(3!==(t=t.childNodes[e.startOffset-1]).nodeType)return"";n=t.nodeValue.length}else if(3!==t.nodeType)return"";for(var o=t.nodeValue.substring(0,n),r=t.previousSibling;r&&3===r.nodeType;r=r.previousSibling)o=r.nodeValue+o;return o}function uo(e,t,n,o,r){return{handles(t){var n=t.selection.getRng();if(!n||!n.collapsed)return!1;var r=n.commonAncestorContainer||{};return!s()(r).closest("pre,.text-placeholder").length&&((!o||!s()(r).closest(o).length)&&e.test(co(n)))},execute(o,a,i){var l,d=1,u=go(a);if(32===u?o.execCommand("mceInsertContent",!1,"&nbsp;"):o.execCommand("mceInsertContent",!1,String.fromCharCode(u)),o.undoManager.transact((()=>{var n=o.selection.getRng();if(n){"|"==(l=co(n))[l.length-1]&&(l+=" ",d=0);var a=e.exec(l.substring(0,l.length-1));if(!r||r(a)){var i=function(e,t,n){var o,r;if(t){3!==t.nodeType&&(n=(t=t.childNodes[n-1]).length);for(var a=t,i=n;a&&3===a.nodeType;a=a.previousSibling){if(-1==i&&(i=a.nodeValue.length),i>e)return{container:a,offset:i-e};if(i==e){for(r=0,o=a.parentNode;a=a.previousSibling;)r++;return{container:o,offset:r}}e-=i,i=-1}return null}}(a[1].length+d,n.commonAncestorContainer,n.startOffset);n.setStart(i.container,i.offset);var c=s()(n.commonAncestorContainer);o.selection.setRng(n),c.closest(".wysiwyg-macro-body").length&&n.toString()==c.text()?(c[0].innerHTML="<br>",o.selection.select(c[0].childNodes[0]),o.selection.collapse(!0)):o.execCommand("delete",!1,{}),t(a,o.selection.getRng()),qn=o.selection.getRng()}}})),n)return i.preventDefault(),i.stopPropagation(),c.tinymce.dom.Event.cancel(a),qn&&g().showElement(qn.startContainer),!1}}}function go(e){return e.which}function mo(){this.handlers={}}mo.prototype={registerHandler(e,t){this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},executeHandlers(e,t,n,o){var r=!0;return s.a.each(this.handlers[e]||[],((e,a)=>{if(a.handles(t))return r=a.execute(t,n,o),!1})),r}};var po=new mo,fo=function e(t,n){if(!m.a.get("remote-user")||!m.a.get("confluence.prefs.editor.disable.autoformat")){var o=n.editor;s.a.each({"*":"bold",_:"italic","~":"subscript","^":"superscript","+":"underline","-":"strikethrough","`":"monospace"},((e,t)=>{var n=new RegExp(`(?:[\\s\\xA0\\u200b\\uFEFF]+|^)(\\${e}(?=[^\\s${e}])([^${e}]*?[^\\s]))$`);po.registerHandler(e.charCodeAt(0),uo(n,(e=>{b(t,e[2])}),!0))})),o.formatter.register("code",{inline:"code"}),po.registerHandler("}".charCodeAt(0),uo(/(?:[\s\xA0\u200b]+|^)({{(?=[^\s])([^}]*?[^\s])})$/,(e=>{b("code",e[2])}),!0));for(var r=1;r<=6;r++)(e=>{po.registerHandler(" ".charCodeAt(0),uo(new RegExp(`^\\u200b?(h${e}\\.)$`),(()=>{o.execCommand("formatBlock",!1,`h${e}`)}),!0))})(r);po.registerHandler(" ".charCodeAt(0),uo(/^\u200b?(bq\.)$/,(()=>{o.execCommand("formatBlock",!1,"blockquote")}),!0));var a=uo(/^\u200b?(----)$/,(()=>{o.execCommand("mceInsertContent",!1,"<hr />")}),!0);po.registerHandler(" ".charCodeAt(0),a),po.registerHandler(13,a),po.registerHandler(" ".charCodeAt(0),uo(/^\u200b?(#)$/,(()=>{o.execCommand("InsertOrderedList")}),!0)),po.registerHandler(" ".charCodeAt(0),uo(/^\u200b?(\*)$/,(()=>{o.execCommand("InsertUnorderedList")}),!0)),po.registerHandler(" ".charCodeAt(0),uo(/^\u200b?(1\.)$/,(()=>{o.execCommand("InsertOrderedList")}),!0)),po.registerHandler(" ".charCodeAt(0),uo(/^\u200b?(-)$/,(()=>{var e=o.dom;o.execCommand("InsertUnorderedList");var t=e.getParent(o.selection.getNode(),"OL,UL");t&&(e.setStyles(t,{listStyleType:"square"}),t.removeAttribute("data-mce-style"))}),!0)),Object(C.b)("confluence.editor.registerHandlers",{handlerManager:po,createHandler:uo,ed:o});var i=uo(/((<--?>)([^\s-]*))$/,(e=>{o.execCommand("mceInsertContent",!1,"â"+e[3])}),!1);po.registerHandler(" ".charCodeAt(0),i),po.registerHandler(13,i);var l=uo(/((--?>)([^\s-]*))$/,(e=>{o.execCommand("mceInsertContent",!1,"â"+e[3])}),!1);po.registerHandler(" ".charCodeAt(0),l),po.registerHandler(13,l);var d=uo(/((<--?)([^\s-]*))$/,(e=>{o.execCommand("mceInsertContent",!1,"â"+e[3])}),!1);po.registerHandler(" ".charCodeAt(0),d),po.registerHandler(13,d),po.registerHandler(" ".charCodeAt(0),uo(/[^-]*[\s](---?)$/,(e=>{var t=2===e[1].length?"â":"â";o.execCommand("mceInsertContent",!1,t)}),!1));var u=uo(/(([^\s-]+)(---?)([^\s-]+))$/,(e=>{var t=2===e[3].length?"â":"â";o.execCommand("mceInsertContent",!1,e[2]+t+e[4])}),!1);po.registerHandler(" ".charCodeAt(0),u),po.registerHandler(13,u),po.registerHandler(13,uo(/(^\u200b?\|\|\s*(?:[^|]*\s?\|\|\s?)+$)/,(e=>{var t='<table class="confluenceTable"><tr>',n="",r=!0,a=s()(e[1].slice(2,-2).split("||")).map((function(e){return e=s.a.trim(this),r=r&&""===e,e}));r&&(a[0]=Object(ln.a)("editor.autoformat.sampletext.firstcell"));for(var i=0,l=a.length;i<l;i++)t+=`<th class="confluenceTh">${a[i]}</th>`,n+=`<td class="confluenceTd">${g().ZERO_WIDTH_WHITESPACE}</td>`;t+=`</tr><tr>${n}</tr></table>`,o.execCommand("mceInsertContent",!1,t),o.selection.select(s()(o.selection.getRng().commonAncestorContainer).parents("table").find(r?"th":"td")[0].childNodes[0]),s()(o.selection.getRng().startContainer).parent().closest('[contenteditable="true"]').focus()}),!0)),po.registerHandler(13,uo(/(^\u200b?\|\s?(?:[^|]*\s?\|\s?)+$)/,(e=>{var t='<table class="confluenceTable"><tr>',n=!0,r=s()(e[1].slice(1,-1).split("|")).map((function(e){return e=s.a.trim(this),n=n&&""==e,e}));n&&(r[0]=Object(ln.a)("editor.autoformat.sampletext.firstcell"));for(var a=0,i=r.length;a<i;a++)t+=`<td class="confluenceTd">${r[a]}</td>`;t+="</tr></table>",o.execCommand("mceInsertContent",!1,t),n&&o.selection.select(s()(o.selection.getRng().commonAncestorContainer).parents("table").find("td")[0].childNodes[0]),s()(o.selection.getRng().startContainer).parent().closest('[contenteditable="true"]').focus()}),!0));var p=uo(/\b(((https?|ftp):\/\/|(www\.))[\w.$\-_+!*'(),/?:@=&%#~;[\]]+)$/,(e=>{var t=e[3]?e[1]:`http://${e[1]}`,n=o.dom.create("a",{href:t});n.appendChild(c.document.createTextNode(e[1])),o.execCommand("mceInsertContent",!1,so(n)),o.getDoc().execCommand("unlink",!1,{})}),!1,"a");po.registerHandler(" ".charCodeAt(0),p),po.registerHandler(13,p);var f=uo(/\b((([a-z]|\d|[!#$%&'*+\-/=?^_`{|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#$%&'*+\-/=?^_`{|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)$/i,(e=>{var t=o.dom.create("a",{href:`mailto:${e[1]}`});t.appendChild(c.document.createTextNode(e[1])),o.execCommand("mceInsertContent",!1,so(t)),o.getDoc().execCommand("unlink",!1,{})}),!1,"a");po.registerHandler(" ".charCodeAt(0),f),po.registerHandler(13,f);var h=function(e,t){var n=uo(e,(()=>{o.execCommand("mceInsertContent",!1,t)}),!1);po.registerHandler(" ".charCodeAt(0),n),po.registerHandler(13,n)};h(/(?:\b|^)(jira|JIRA)$/,"Jira"),h(/(?:\b|^)(bitbucket)$/,"Bitbucket"),h(/(?:\b|^)(atlassian)$/,"Atlassian"),h(/(?:\b|^)(hipchat)$/,"Hipchat"),h(/(?:\b|^)(statuspage)$/,"Statuspage"),h(/(?:\b|^)(sourcetree)$/,"Sourcetree"),h(/(?:\b|^)(trello)$/,"Trello");var v={"]":e.regularExpressions._REGEXES.WIKI_LINK,"}":e.regularExpressions._REGEXES.WIKI_MACRO,"!":e.regularExpressions._REGEXES.WIKI_EMBED};s.a.each(v,((e,t)=>{po.registerHandler(e.charCodeAt(0),uo(t,(t=>{var n=t[1]+e,r={type:"POST",contentType:"application/json; charset=utf-8",url:`${m.a.get("context-path")}/rest/tinymce/1/wikixhtmlconverter`,data:JSON.stringify({wiki:n,entityId:m.a.get("content-id"),spaceKey:m.a.get("space-key"),contextType:m.a.get("content-type"),suppressFirstParagraph:!0}),dataType:"text",timeout:5e3};"}"==e?c.tinymce.confluence.MacroUtils.insertMacro(r):"!"==e?s.a.ajax(r).done((e=>{!n===e?c.tinymce.confluence.ImageUtils.insertImagePlaceholder(e):o.execCommand("mceInsertContent",!1,e)})):s.a.ajax(r).done((e=>{o.execCommand("mceInsertContent",!1,e)}))}),!0))})),po.registerHandler("`".charCodeAt(0),uo(/(``)$/,(()=>{var e={contentId:m.a.get("content-id"),macro:{name:"code",body:""}};c.tinymce.confluence.MacroUtils.insertMacro(e)}),!0)),o.on("KeyPress",(e=>po.executeHandlers(go(e),o,e,t))),o.on("KeyDown",(e=>{if(13===go(e))return po.executeHandlers(13,o,e,t)}),!0),o.on("Remove",(()=>{po.handlers={}}));return{getHandlerCount:()=>Object.keys(po.handlers).length}}function b(e,t){var n=o.formatter.get(e)[0],r=o.dom.create(n.inline,{style:n.styles,class:n.classes});r.appendChild(c.document.createTextNode(t)),o.execCommand("mceInsertContent",!1,`${so(r)}&nbsp;`)}};fo.regularExpressions={_REGEXES:{WIKI_MACRO:/(?:\s|^)(\{[^{^}]+)$/,WIKI_LINK:/(?:\s|^)(\[[^[^\]]+)$/,WIKI_EMBED:/(?:\s|^)(![^!]{5,})$/}};function ho(){return{init(e){e.on("Init",(()=>{e.getBody().classList.add("resizable")}));var t=0;if(!e.options.get("fullscreen_is_enabled")){var n=parseInt(e.options.get("autoresize_min_height")||`${e.getElement().offsetHeight}`),o=parseInt(e.options.get("autoresize_max_height")||"0");e.on("Change SetContent Paste KeyUp Init",r),e.addCommand("mceAutoResize",r)}function r(a){var i=e.getDoc(),l=i.body,d=i.documentElement,g=c.tinymce.DOM,m=n,p=a===Object(a)&&a.forceExec||!1,f=s()(i).height();if(f>n&&(m=f),o&&f>o?(m=o,l.style.overflowY="auto",d.style.overflowY="auto"):(l.style.overflowY="hidden",d.style.overflowY="hidden",l.scrollTop=0),p||m!==t){var h=m-t;g.setStyle(document.querySelectorAll("div.tox-tinymce")[0],"height",`${m}px`),g.setStyle(g.get(`${e.id}_ifr`),"height",`${m}px`),t=m,u()&&h<0&&r()}return!0}},getInfo:()=>({longname:"Auto Resize",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autoresize",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function vo(){var e;function t(){var t=s()("#breadcrumbs");t.detach(),!t.find(".edited-page-title").length&&e.length&&t.append(e),s()("#editor-precursor .cell").prepend(t)}if("comment"!==m.a.get("content-type")){var n=s()("#quickedit-breadcrumbs");n.length>0&&(s()("#breadcrumbs").detach(),n.attr("id","breadcrumbs"),s()("#breadcrumb-section").append(n)),e=s()(".edited-page-title").parent().detach(),t(),Pe(c.document,"mode-changed",((n,o)=>{var r;"preview"===o?(r=s()("#breadcrumbs").detach(),e.detach(),s()("#breadcrumb-section").append(r)):"richtext"===o&&t()}))}}function bo(){c.tinymce.activeEditor.getBody().style.height="auto"}function yo(){window.location.href=`${A.a}/login.action?os_destination=${window.location.pathname.replace(A.a,"")}`}var wo=n(30),Co=n.n(wo);function Ao(e){return this.message=e.message,this.statusCode=e["status-code"],this.stack=(new Error).stack,this}Ao.prototype=new Error;var xo=Ao;function Mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(n),!0).forEach((function(t){Eo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Eo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var To=(e,t)=>e.replace(/:([a-zA-Z]+)\?*/g,((e,n)=>{var o=t[n];return"string"==typeof o&&-1===o.indexOf("=")?encodeURIComponent(decodeURIComponent(o)):o.toString()}));function Do(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o=>{if(o instanceof xo){if(401===o.statusCode)return e.onUnauthorized&&e.onUnauthorized(),t(o);var r=n[o.statusCode];return r?r(o,t):t(o)}if(o instanceof TypeError)return t(o);throw o}}function So(e,t,n){var o=t.body,r=t.callback,a=t.headers,i=t.method,l=t.extraConfig,s=t.responseTransformer,c=o,d=a["Content-Type"];return d||delete a["Content-Type"],d&&-1!==d.indexOf("application/x-www-form-urlencoded")?c=Co.a.stringify(o):"application/json"===d&&(c=JSON.stringify(o)),fetch(e,{headers:a,credentials:"include",method:i,body:c}).then((e=>{if(!e.ok){var t=e.status;return e.text().then((e=>{throw new xo({message:e,"status-code":t})}))}return l&&l.ignoreResponseJson?null:204!==e.status?e.json():e})).then((t=>{if(t&&t["status-code"])throw new xo(t);return r(null,s?s(t,e,n.contextPath,o):t)})).catch(Do(n,r))}var Io,Oo=(Io={endpoint:null,contextPath:null,onUnauthorized:null,extraHeaders:{}},{configure(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Io=ko(ko({},Io),e)},getConfig:()=>Io,getFullPath(e,t){var n=Io.contextPath+e;return t?To(n,t):n},getExternalServicePath(e,t){if("function"!=typeof e)throw"getExternalServicePath expects path to be a function so it can be lazy evaluated";var n=e();return To(n,t)},get(e,t){var n=t.callback,o=t.headers,r=t.responseTransformer;return So(e,{callback:n,headers:ko(ko({Accept:"application/json","Content-Type":"application/json"},Io.extraHeaders),o),method:"GET",responseTransformer:r},Io)},post(e,t){var n=t.body,o=t.callback,r=t.headers,a=t.extraConfig,i=t.responseTransformer;return So(e,{body:n,callback:o,headers:ko(ko({"Content-Type":"application/x-www-form-urlencoded"},Io.extraHeaders),r),method:"POST",extraConfig:a,responseTransformer:i},Io)},put(e,t){var n=t.body,o=t.callback,r=t.headers,a=t.responseTransformer;return So(e,{body:n,callback:o,headers:ko(ko({Accept:"application/json","Content-Type":"application/json"},Io.extraHeaders),r),method:"PUT",responseTransformer:a},Io)},delete(e,t){var n=t.callback,o=t.headers,r=t.extraConfig,a=t.responseTransformer;return So(e,{callback:n,headers:ko(ko({Accept:"application/json","Content-Type":"application/json"},Io.extraHeaders),o),method:"DELETE",extraConfig:r,responseTransformer:a},Io)},postLegacyResource(e,t){var n=t.body,o=t.callback,r=t.headers,a=t.responseTransformer;return fetch(e,{headers:ko(ko({"Content-Type":"application/x-www-form-urlencoded"},Io.extraHeaders),r),credentials:"include",method:"POST",body:"string"==typeof n?n:Co.a.stringify(n)}).then((e=>{if(!e.ok)return new Error(`Request failed with ${e.status}`);var t=e.headers.get("content-type");return t&&-1===t.indexOf("text/html")&&-1===t.indexOf("text/plain")?e.json():e.text()})).then((t=>t instanceof Error?o(t):o(null,a?a(t,e,Io.contextPath,n):t))).catch(Do(Io,o))},fetch:(e,t)=>fetch(e,t)}),jo={configure(e){Oo.configure(e)},getPluginCodeLanguages(e){var t=Oo.getFullPath("/plugins/newcode/getlanguages.action");Oo.get(t,{callback:e})},getWikiConfluenceToXhtml(e,t){var n=Oo.getFullPath("/rest/tinymce/1/wikixhtmlconverter");Oo.postLegacyResource(n,{body:e,callback:t,headers:{Accept:"text/plain, */*","Content-Type":"application/json; charset=utf-8"}})},getWikiMarkdownToXhtml(e,t){var n=Oo.getFullPath("/rest/tinymce/1/markdownxhtmlconverter");Oo.postLegacyResource(n,{body:e,callback:t,headers:{Accept:"text/plain, */*","Content-Type":"application/json; charset=utf-8"}})}};jo.configure({endpoint:`${window.location.protocol}//${window.location.host}`+A.a,contextPath:A.a,onUnauthorized:yo});var No=jo,Lo={fields:{string:{language:(e,t)=>{var n,o=s()(c.Confluence.Templates.MacroBrowser.macroParameterSelect()),r=s()("select",o);return null==t&&(t={}),t.setValue=e=>{if(0==r.find(`option[value='${e}']`).length){var t=s()("<option/>");t.val(e),t.text(e),r.append(t)}},n=r,No.getPluginCodeLanguages(((e,t)=>{if(e)p.a.error("Error when fetching code macro languages",e);else if(t.length){var o=n.val();n.empty(),n.append(s()("<option/>").attr("value","")),t.forEach((e=>{var t=s()("<option />");t.val(e.aliases[0]),t.text(e.friendlyName),n.append(t)})),n.val(o)}else p.a.error("Configured code macro languages result was not in the expected format.")})),new c.AJS.MacroBrowser.Field(o,r,t)}}}};function Bo(){return{init(e){e.on("beforeExecCommand",(t=>{if("Indent"===t.command||"Outdent"===t.command){var n=e.selection.getNode(),o=n.nodeName.toLowerCase();if("li"!==o&&"body"!==o){var r=parseInt(e.dom.getStyle(n,"margin-left",!1)||"0",10)+parseInt(e.dom.getStyle(n,"padding-left",!1)||"0",10);if(0!==r){var a=e.options.get("indentation"),i=/[a-z%]+/i.exec(a);e.dom.setStyle(n,"padding-left",""),e.dom.setStyle(n,"margin-left",r+i[0])}}}}))},getInfo:()=>({longname:"Confluence Indentation",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Po(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $o(e){return()=>({getMetadata:()=>function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ro(Object(n),!0).forEach((function(t){Po(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:"Confluence Editor Plugin",url:"http://www.atlassian.com"},e)})}var Ho=n(34);function Fo(e){return e.addCommand("confCharmap",(()=>(Promise.all([n.e("vendors~charmap-open-dialog"),n.e("charmap-open-dialog")]).then(n.bind(null,206)).then((t=>{(0,t.default)(e);var n;n=new CustomEvent(Ho.a.DIALOG_CONTROL,{detail:{isOpen:!0}}),window.dispatchEvent(n)})),!1))),$o({name:"Confluence Charmap Plugin"})}function zo(){return{init:e=>{e.editorCommands.addCommands({outdent:function(){var t=e.selection,n=e.dom;function o(t){var o=n.getParent(t,n.isBlock);return o&&parseInt(e.dom.getStyle(o,"margin-left",!1)||"0",10)+parseInt(e.dom.getStyle(o,"padding-left",!1)||"0",10)>0}return o(t.getStart())||o(t.getEnd())||e.queryCommandState("InsertOrderedList")||e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertInlineTaskList")}},"state")}}}function Uo(){return{init(e){e.addCommand("mceConfUnlink",((t,n)=>{var o=e.selection,r=n||o.getNode(),a=s()(r);if("A"!==r.nodeName){var i=a.closest("a");if(!i.length)return!1;r=i[0],a=i}var l=a.attr("href");l||(l="#",a.attr("href",l));var d,u;if(!a.attr("data-linked-resource-id")&&c.Confluence.Link.isExternalLink(l)&&a.text()==(null!=(u=/(.*)[/]$/.exec(d=l))?u[1]:d)){var g=e.dom.create("span",{class:"nolink"},l);e.dom.replace(g,r,!1)}else o.select(r),a.removeClass("createlink unresolved"),e.execCommand("UnLink");return!1})),e.ui.registry.addButton("confimage",{text:"confluence.confimage_desc",onAction:function(){e.execCommand("mceConfimage")}}),e.ui.registry.addButton("conf_macro_browser",{text:"confluence.conf_macro_browser_desc",onAction:function(){e.execCommand("mceConfMacroBrowser")}})},getInfo:()=>({longname:"Confluence TinyMCE Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function _o(){return{init:e=>{var t,n=c.Confluence.Editor.Drafts,o=c.Confluence.Editor;function r(){var e,t,n;e=m.a.get("draft-id"),t=m.a.get("draft-share-id"),0!==parseInt(e)&&d.a.history&&d.a.history.replaceState&&d.a.history.replaceState(null,"",`${A.a}/pages/resumedraft.action?draftId=${e}&draftShareId=${t}&${n=d.a.location.search,void 0===n?"":("?"===n.charAt(0)&&(n=n.substr(1)),n.split("&").filter((e=>0===e.indexOf("username=")||0===e.indexOf("userFullName=")||0===e.indexOf("accessType=")||0===e.indexOf("grantAccess=")||0===e.indexOf("qunit-test=")||0===e.indexOf("src."))).join("&"))}`),o.UI.cancelButton.attr("data-tooltip",Object(ln.a)("editor.shared.draft.done.desc")),o.UI.cancelButton.on("click",(()=>{Object(C.b)("analytics",{name:"confluence.editor.done.button.clicked"}),Object(C.b)("analytics",{name:"confluence.editor.close",data:{source:"closeButton",contentId:m.a.get("content-id"),currentVersion:m.a.get("page-version")||"null"}})}))}function a(){if(!m.a.get("has-collaborated")&&c.AJS.Rte.Content.editorHasContentChanged()){m.a.set("has-collaborated",!0);var e=m.a.get("remote-user-key"),t=m.a.get("content-id");s.a.ajax({type:"PUT",url:`${A.a}/rest/experimental/relation/user/${e}/collaborator/toContent/${t}?targetStatus=draft`,error(){m.a.set("has-collaborated",!1),p.a.error("Unable to store current user as a collaborator")}}),s.a.ajax({type:"DELETE",url:`${A.a}/rest/experimental/relation/touched/from/user/current/to/content/${t}?targetStatus=current`}),s.a.ajax({type:"PUT",url:`${A.a}/rest/experimental/relation/user/${e}/touched/toContent/${t}?targetStatus=draft`,error(){m.a.set("has-collaborated",!1),p.a.error("Unable to store touch relation for current user")}})}}e.on("Init",(()=>{Object(C.a)("editor.local.change",a)})),e.on("Remove",(()=>{Object(C.c)("editor.local.change",a)})),Object(C.a)("rte-ready",(()=>{p.a.debug("confluence drafts plugin initialisation"),s()("#draft-status").show(),n.bindUnloadMessage(),o.UI.cancelButton.click((()=>{m.a.getBoolean("shared-drafts")||n.save({skipErrorHandler:!0})})),m.a.getBoolean("shared-drafts")&&r(),t=d.a.setInterval(n.save,+m.a.get("draft-save-interval")||3e4)})),Object(C.a)("rte-destroyed",(()=>{p.a.info("confluence drafts plugin tear down"),clearInterval(t)}))},getInfo:()=>({longname:"Confluence Drafts",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Qo(){return{init:e=>{e.addCommand("confMonospace",(()=>(e.formatter.toggle("monospace",void 0),!1))),e.on("Init",(()=>{e.formatter.register({monospace:{inline:"code"}}),e.editorCommands.addCommands({confMonospace:function(){return e.formatter.match("monospace")}},"state")})),e.ui.registry.addButton("monospace",{cmd:"confMonospace",text:"monospace",onAction:function(){e.execCommand("confMonospace")}})},getInfo:()=>({longname:"Monospace Formatting",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}var Wo=!0;function Vo(e){return e&&3===e.nodeType&&0===e.nodeValue.length}var Ko={isCursorAtStartOf(e,t){return t.collapsed&&this.isRangeAtStartOf(e,t)},isRangeAtStartOf(e,t){if(!t||!t.startContainer)throw new Error(`range is invalid. received: ${t}`);if(!e||!e.nodeType)throw new Error(`context is invalid. received: ${e}`);var n,o=t.startContainer;if(3===o.nodeType){if(0!==t.startOffset)return!1;n=o}else if(void 0===(n=o.childNodes[t.startOffset])&&o.childNodes.length>0)return!1;var r,a=new c.tinymce.dom.TreeWalker(n,e);do{r=a.prev(Wo)}while(Vo(r));return void 0===r},isCursorAtEndOf(e,t){return t.collapsed&&this.isRangeAtEndOf(e,t)},isRangeAtEndOf(e,t){if(!t||!t.endContainer)throw new Error(`range is invalid. received: ${t}`);if(!e||!e.nodeType)throw new Error(`container is invalid. received: ${e}`);var n,o=t.endContainer;if(3===o.nodeType){if(t.endOffset!=o.nodeValue.length)return!1;n=o}else n=o.childNodes[0===t.endOffset?t.endOffset:t.endOffset-1];var r,a=new c.tinymce.dom.TreeWalker(n,e);do{r=a.next(Wo)}while(Vo(r));return void 0===r||"BR"===r.nodeName&&void 0===a.next(Wo)},setCursorAtStartOfContents(e){if(!e)throw new Error("element is required.");if(1!==e.nodeType&&3!==e.nodeType)throw new Error(`invalid argument: expected a DOM element or text node, got: ${e}`);var t=c.tinymce.activeEditor,n=t.dom.createRng();["br","img"].includes(e.nodeName.toLowerCase())?(n.setStartBefore(e),n.setEndBefore(e),t.selection.setRng(n)):(t.selection.select(e,!0),t.selection.collapse(!0))},isCursorAtEnd(e,t){var n=e.selection.getSel();if(!n||!n.isCollapsed)return!1;var o=t.endContainer;if(3==o.nodeType)return o.wholeText.length==t.endOffset;var r=o.childNodes[t.endOffset];return s()(r).is(":last-child")}},Go=Ko;function Yo(e,t){var n=e.selection.getSel();if(!n||!n.isCollapsed)return!1;var o,r=t.startContainer;return 3==r.nodeType?!r.previousSibling&&0===t.startOffset&&function(e){if(0==s()(e).closest("td").length)return!0;for(var t=e.parentNode;t&&"td"!=t.nodeName.toLowerCase();){if(s()(t).prevAll().contents().filter((function(){return 3==this.nodeType})).length)return!1;t=t.parentNode}return!0}(r):s()(r).is("p:first-child")?0===t.startOffset:s()(r).is(".wysiwyg-macro-body")?1==t.startOffset&&(3==(o=t.startContainer.childNodes[0]).nodeType&&"\n"==o.nodeValue):void 0}function Jo(e,t,n){var o=e.dom.create("p",{},'<br data-mce-bogus="1" />');n?t.after(o):t.before(o),e.selection.select(o,!0),e.selection.collapse()}function qo(){var e=c.tinymce.activeEditor;c.tinymce.Env.browser.isFirefox()&&e.on("KeyPress",(t=>{if(t.charCode==c.tinymce.util.VK.SPACE){var n=e.selection.getNode(),o=s()(n).closest("a"),r=e.selection.getRng();o.length&&Go.isCursorAtEnd(e,e.selection.getRng())&&(r.setStartAfter(o[0]),r.setEndAfter(o[0]),e.selection.setRng(r),e.selection.collapse())}})),e.on("KeyPress",(t=>{if(13==t.keyCode&&!t.shiftKey){var n=e.selection.getNode(),o=s()(n).closest("pre");if(o.length&&!c.tinymce.confluence.MacroUtils.isInMacro(o)&&Go.isCursorAtEnd(e,e.selection.getRng()))return Jo(e,o,!0),c.tinymce.dom.Event.cancel(t);var a=s()(n).closest("blockquote");if(a.length){var i=s()(n).closest("p");if(i.is(":first-child")&&Yo(e,e.selection.getRng()))return Jo(e,a,!1),c.tinymce.dom.Event.cancel(t);if(i.is(":last-child")&&function(e){var t=e.contents();if(!t.length)return!0;if(1==t.length){if(t.is("br"))return!0;if("&nbsp;"==t.html()||160==t.text().charCodeAt(0))return!0;if(3==t[0].nodeType&&t[0].nodeValue==r.a.Rte.HIDDEN_CHAR)return!0}return!1}(i))return e.dom.remove(i[0],!1),Jo(e,a,!0),c.tinymce.dom.Event.cancel(t)}}return!0}),!0)}var Zo,Xo,er,tr,nr,or,rr,ar,ir,lr,sr,cr;function dr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ur,gr,mr,pr,fr,hr=4,vr=4,br=15,yr=20,wr=25,Cr=17,Ar=20,xr=0,Mr=!1;function kr(){Zo=s()(c.document),er=s()("#insert-table-dropdown"),tr=s()("#rte-button-insert-table"),nr=er.find(".aui-dd-parent"),or=s()("#table-picker-container"),(rr=or.find(".table-picker-box").attr("tabindex",0).attr("role","application")).focusin(Rr),rr.focusout(Pr),ar=or.find(".picker-cell"),ir=or.find(".picker-heading"),lr=or.find(".picker-selected-cell"),sr=or.find(".picker-selected-heading"),cr=rr.find(".desc"),Xo=s()("<div></div>").attr("id","table-picker-backdrop").addClass("hidden").appendTo(er),tr.click((e=>{var t;e.preventDefault(),Mr||(yt(),Er(),fr=!0,Dr(1,1),t=s()(c.tinymce.activeEditor.getDoc()),Zo.bind("mousemove.atlassian-table-picker",Or),Zo.bind("keydown.atlassian-table-picker",Lr),Zo.bind("keyup.atlassian-table-picker",Lr),t.bind("keydown.atlassian-table-picker",Lr),t.bind("keyup.atlassian-table-picker",Lr),Xo.removeClass("hidden"),or.removeClass("hidden"),nr.addClass("active"),tr.focus())})),Xo.click($r),lr.click(jr),sr.click(jr)}var Er=function(){or.css({top:s()("#insert-table-dropdown").outerHeight(!0)}),Er=function(){}};function Tr(){var e;or.hasClass("hidden")||(e=s()(c.tinymce.activeEditor.getDoc()),Zo.unbind(".atlassian-table-picker"),e.unbind(".atlassian-table-picker"),or.addClass("hidden"),Xo.addClass("hidden"),nr.removeClass("active"))}function Dr(e,t){p.a.debug(`setSize(${[e,t]})`),e==mr&&t==pr||(e=Math.max(1,Math.min(br,e)),t=Math.max(1,Math.min(yr,t)),ur=Math.max(hr,e),gr=Math.max(vr,t),mr=e,pr=t,rr.width(ur*wr+1),rr.height(gr*Cr+Ar),Ir(ar,ur,gr),Ir(lr,mr,pr),Ir(ir,ur,1),Ir(sr,mr,1),Sr(),cr.text(`${mr} x ${pr}`))}function Sr(){ir.toggleClass("hidden",!fr),sr.toggleClass("hidden",!fr)}function Ir(e,t,n){e.width(wr*t+1),e.height(Cr*n+1)}function Or(e){var t,n=ar.offset(),o=n.top-Zo.scrollTop(),r=n.left-Zo.scrollLeft(),a=o+ar.outerHeight(!0)+xr,i=a-Cr-xr,l=r+ar.outerWidth(!0)+xr,s=l-wr-xr,c=e.clientY,d=e.clientX,u=ur,g=gr;p.a.debug(`[mouseX,spLeft,spRightShrink,spRightGrow][mouseY,spTop,spBottomShrink,spBottomGrow] = ${[d,r,s,l]}/${[c,o,i,a]}`),d>l?(u+=t=~~((d-l)/wr+1),p.a.debug(`grow: xdelta = ${t}`)):d<s&&(u+=t=~~((d-s)/wr-1),p.a.debug(`shrink: xdelta = ${t}`)),c>a?(g+=t=~~((c-a)/Cr+1),p.a.debug(`grow: ydelta = ${t}`)):c<i&&(g+=t=~~((c-i)/Cr-1),p.a.debug(`shrink: ydelta = ${t}`)),Dr(u,g)}function jr(e){var t=function(e){var t=~~(e.offsetX||e.originalEvent.layerX),n=~~(e.offsetY||e.originalEvent.layerY),o=1+~~(t/wr),r=1+~~(n/Cr);return o<1||o>br||r<1||r>yr?null:{width:o,height:r}}(e);e.preventDefault(),Nr(t)}function Nr(e){if(p.a.debug(`insertTable: size = ${e&&[e.width,e.height]}`),e){Tr();var t={columns:e.width,rows:e.height,options:{headerRows:fr?1:0}};c.tinymce.activeEditor.execCommand("mceInsertTable",!1,t)}}function Lr(e){var t;p.a.debug(`key: ${e.charCode}/${e.keyCode}/${e.shiftKey}`),0===e.charCode&&(t=!e.shiftKey,p.a.debug(`enableHeading(${t})`),t!=fr&&(fr=t,Sr())),27===e.keyCode&&Tr()}function Br(e){p.a.debug(`key: ${e.charCode}/${e.key}/${e.shiftKey}`),"ArrowLeft"===e.key&&(e.preventDefault(),e.stopPropagation(),Dr(mr-1,pr)),"ArrowUp"===e.key&&(e.preventDefault(),e.stopPropagation(),Dr(mr,pr-1)),"ArrowRight"===e.key&&(e.preventDefault(),e.stopPropagation(),Dr(mr+1,pr)),"ArrowDown"===e.key&&(e.preventDefault(),e.stopPropagation(),Dr(mr,pr+1)),"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),Nr({width:mr,height:pr}))}function Rr(){var e=s()(c.tinymce.activeEditor.getDoc());Zo.bind("keydown.atlassian-table-picker",Br),e.bind("keydown.atlassian-table-picker",Br)}function Pr(){var e=s()(c.tinymce.activeEditor.getDoc());Zo.unbind(".atlassian-table-picker",Br),e.unbind(".atlassian-table-picker",Br)}function $r(){Tr()}class Hr{constructor(){dr(this,"onPickerClick",jr),dr(this,"removePopup",Tr)}}Object(jt.a)("confluence-editor/table-picker",(()=>new Hr));var Fr,zr,Ur,_r,Qr,Wr,Vr,Kr,Gr,Yr,Jr=n(25),qr={},Zr=e=>{if(!qr.hasOwnProperty(e)){var t=d.a.document.querySelector("meta[name=ajs-enabled-dark-features]");if(t){var n=t.content.split(",");qr[e]=n.indexOf(e)>-1&&-1===n.indexOf(`${e}.disable`)}}return qr[e]},Xr=n(10),ea="editor-preview-iframe",ta=Zr("editor.ajax.save")&&!Zr("editor.ajax.save.disable")&&""!==m.a.get("remote-user"),na=[],oa=[],ra=[],aa=!1,ia=1,la=!1,sa=null,ca=e=>{c.Confluence.Editor.UI.setButtonState(e,c.Confluence.Editor.UI.saveButton),c.Confluence.Editor.UI.setButtonState(e,c.Confluence.Editor.UI.previewButton),c.Confluence.Editor.UI.setButtonState(e,c.Confluence.Editor.UI.cancelButton),s()("#rte-show-changes").length>0&&c.Confluence.Editor.UI.setButtonState(e,s()("#rte-show-changes")),s()("#rte-show-revert").length>0&&c.Confluence.Editor.UI.setButtonState(e,s()("#rte-show-revert"))},da=e=>{var t=(e=e||{}).messageKey||"editor-error-message",n=e.message||Object(ln.a)("editor.generic.refresh"),o={title:e.title,type:"error",message:n};e.close&&s.a.extend(o,{close:e.close}),Xr.a.handleMessage(t,o,(()=>{e.disablePublish&&ca(!1)}))},ua=()=>"limited"===m.a.get("edit-mode"),ga=e=>{var t=!0;Xr.a.closeMessages(["offline-before-save-error"]);for(var n=0;n<oa.length&&(!1===oa[n](e)&&(t=!1),!e.isImmediatePropagationStopped());n++);if(e.isPropagationStopped())return!1;t&&!e.isDefaultPrevented()?(e.preventDefault(),pa(e).done(ha).fail(ma)):e.preventDefault()},ma=e=>{var t=e||{};da({messageKey:t.messageKey||"offline-before-save-error",message:t.disablePublish?Object(ln.a)("editor.generic.refresh"):Object(ln.a)("editor.offline.before.save.error"),disablePublish:t.disablePublish}),e&&Object(C.b)("analytics",{name:"editor.save.error."+e.origin+"."+e.cause}),c.Confluence.Editor.UI.toggleSavebarBusy(!1),c.Confluence.Editor.Drafts.bindUnloadMessage()},pa=e=>{var t=s.a.Deferred();return t.resolve(e),t.promise()},fa=()=>{var e=()=>{la=!0,s()(c.Confluence.Editor.getCurrentForm()).submit(),Object(C.b)("analytics",{name:"confluence.editor.close",data:{source:"publishButton"}})},t=c.Confluence.Editor.Drafts.getDraftSavingPromise();t?t.always(e):e()},ha=fa,va=function(){for(var e=0;e<na.length;e++)c.Confluence.Editor.UI.cancelButton.click(na[e]);for(var t=s()(c.Confluence.Editor.getCurrentForm()),n=0;n<ra.length;n++)t.submit(ra[n]);Object(C.c)("init.rte",this)},ba=(e,t,n,o)=>{o.push(n),r.a.Rte&&r.a.Rte.BootstrapManager&&r.a.Rte.BootstrapManager.isInitComplete()?e.bind(t,n):aa||(aa=!0,s.a.bind("init.rte",va))},ya=(e,t,n)=>{var o,a,i=null,l=n.pop();for(null!==r.a&&void 0!==r.a&&null!==(o=r.a.Rte)&&void 0!==o&&null!==(a=o.BootstrapManager)&&void 0!==a&&a.isInitComplete()&&(i=(e,t,n)=>{e.unbind(t,n)});l;){var s;null===(s=i)||void 0===s||s(e,t,l),l=n.pop()}},wa=()=>{var e=m.a.getBoolean("shared-drafts"),t=["page","blogpost"].includes(m.a.get("content-type")),n="0"!==r.a.params.pageId;return t&&(n||e)},Ca=e=>{s()("#editpageform").find("input[name='atl_token']").val(e),m.a.set("atl-token",e),m.a.set("atlassian-token",e),s()("#atlassian-token").attr("content",e)},Aa=()=>{var e,t,n;return null==c.tinymce.activeEditor?(p.a.debug("Confluence.Editor: editorHasContentChanged - No active editor present. Returning false."),!1):null===r.a||void 0===r.a||null===(e=r.a.Rte)||void 0===e||null===(t=e.Content)||void 0===t||null===(n=t.editorHasContentChanged)||void 0===n?void 0:n.call(t)},xa=(Vr=e=>{zr!==e&&(zr&&zr.clear(),e.start(c.Confluence.Editor.heartbeat),zr=e)},Kr=m.a.getNumber("heartbeat-interval")||3e4,Gr={start:e=>{p.a.debug("Changing heartbeat to the normal scheduler"),Ur=setInterval(e,Kr)},clear:()=>{clearInterval(Ur)}},Wr=Math.max(Kr/5,5e3),Yr={start:e=>{p.a.debug("Changing heartbeat to the recovery scheduler"),Qr=0;var t=()=>{e();var n=Wr*Math.pow(2,Qr);_r=setTimeout(t,Math.min(n,3e5)),Qr++};_r=setTimeout(t,Wr)},clear:()=>{clearTimeout(_r)}},{normal:()=>Vr(Gr),recovery:()=>Vr(Yr),reset:()=>{var e;null===(e=zr)||void 0===e||e.clear(),(zr=Gr).start(c.Confluence.Editor.heartbeat)},cleanup:()=>{var e,t;zr&&(zr.clear(),zr=null),null===(e=Fr)||void 0===e||null===(t=e.abort)||void 0===t||t.call(e)}}),Ma=e=>{Object(Jr.setVisible)("#wysiwyg",e),s()(".toolbar-group-preview").toggleClass("assistive",!e),s()(".toolbar-group-edit").toggleClass("assistive",e),s()("#main").toggleClass("active-richtext",e)},ka=e=>{if("comment"!==m.a.get("content-type")){var t=s()("#content-title");t.hasClass("placeholded")?(s()("#preview-title-text").text(""),s()("#title-text").text("")):(s()("#preview-title-text").text(t.val()),s()("#title-text").text(t.val()))}Object(Jr.setVisible)("#preview",e),s()(".toolbar-group-preview").toggleClass("assistive",e),s()(".toolbar-group-edit").toggleClass("assistive",!e),s()("#main").toggleClass("active-preview",e),s()("#full-height-container").length&&s()("#full-height-container").toggleClass("active-preview",e)},Ea=e=>{p.a.debug("Set mode: "+e),e===c.Confluence.Editor.MODE_RICHTEXT?(Ma(!0),ka(!1)):e===c.Confluence.Editor.MODE_PREVIEW&&(ka(!0),Ma(!1),c.Confluence.Editor.UI.spinner.removeClass("aui-icon-wait")),setTimeout((()=>{var e=s()(".toolbar-group-preview");e.height(0),e.height(),e.height("auto")}),1),sa=e,s()(c.document).trigger("mode-changed",[e])},Ta=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(p.a.debug("Change mode: "+e),Sa()&&!r.a.Rte.BootstrapManager.isInitComplete())return!1;if(sa===e)return!1;var n=sa;if(Object(C.b)("rte-changeMode",e),e===c.Confluence.Editor.MODE_PREVIEW){var o=c.tinymce.activeEditor;c.tinymce.Env.browser.isFirefox()&&n===c.Confluence.Editor.MODE_RICHTEXT&&!c.Confluence.Editor.bookmark&&(c.Confluence.Editor.bookmark=c.tinymce.activeEditor.selection.getBookmark()),sa=e;var a={contentId:c.Confluence.getContentId(),contentType:m.a.get("content-type"),spaceKey:m.a.get("space-key"),xHtml:o.getContent(),outputType:c.Confluence.Editor.PREVIEW_OUTPUT_TYPE};r.a.safe.ajax({type:"POST",url:A.a+"/pages/rendercontent.action",data:a,success:Da,timeout:2e4,error:()=>{var e;Object(C.b)("rte-preview-action-selected"),Object(C.b)("rte.preview.error",{status:0}),Xr.a.closeMessages(["server-offline"]),da({messageKey:"server-offline",message:Object(ln.a)("editor.offline.preview.error"),disablePublish:!1}),c.Confluence.Editor.currentEditMode=n,null===(e=t.errorCallback)||void 0===e||e.call(t)}}).always((()=>{m.a.getBoolean("shared-drafts")&&["page","blogpost"].includes(m.a.get("content-type"))&&c.Confluence.Editor.Drafts.save({skipErrorHandler:!0})}))}else Ea(e);if(e===c.Confluence.Editor.MODE_RICHTEXT&&s()(c.document).trigger("resize.resizeplugin"),n===c.Confluence.Editor.MODE_PREVIEW){var i=c.document.getElementById(ea);if(i){var l=i.contentDocument||i.contentWindow.document;l.removeChild(l.documentElement),s()(i).remove()}}return!1},Da=e=>{var t;Object(C.b)("rte-preview-action-selected"),s()("#preview-error").remove(),c.tinymce.activeEditor.setProgressState(!0);var n=s()("#previewArea"),o=s()(`<iframe id="${ea}" src="about:blank" scrolling="yes" frameborder="0"></iframe>`);n.html(o);var r=o[0].contentDocument||(null===(t=o[0].contentWindow)||void 0===t?void 0:t.document);null==r||r.open(),null==r||r.write(e),null==r||r.close()},Sa=()=>sa===c.Confluence.Editor.MODE_RICHTEXT,Ia=()=>{var e=c.tinymce.activeEditor.getBody();switch(m.a.get("content-type")){case"template":e.setAttribute("aria-label",Object(ln.a)("template.content.ariaLabel"));break;case"page":e.setAttribute("aria-label",Object(ln.a)("page.content.ariaLabel"));break;case"blogpost":e.setAttribute("aria-label",Object(ln.a)("blogpost.content.ariaLabel"));break;case"comment":e.setAttribute("aria-label",Object(ln.a)("quick.comment.label.message"));break;default:e.setAttribute("aria-label",Object(ln.a)("content.ariaLabel"))}p.a.debug("Set aria-label to editor")},Oa={bookmark:"",MODE_RICHTEXT:"richtext",MODE_PREVIEW:"preview",PREVIEW_OUTPUT_TYPE:"PREVIEW",currentEditMode:sa,contentHasChangedSinceLastSave:false,sourceInitialValue:!1,isPublishing:e=>(void 0!==e&&(la=e),la),isLimitedModeEnabled:ua,overrideBeforeSave:e=>{pa=e},overrideSave:e=>{ha=e},restoreDefaultSave:()=>{ha=fa},getNumConcurrentEditors:()=>ia,addCancelHandler:e=>ba(c.Confluence.Editor.UI.cancelButton,"click",e,na),addSaveHandler:e=>oa.push(e),addSubmitHandler:e=>ba(s()(c.Confluence.Editor.getCurrentForm()),"submit",e,ra),removeAllCancelHandlers:()=>ya(c.Confluence.Editor.UI.cancelButton,"click",na),removeAllSaveHandlers:()=>ya(c.Confluence.Editor.UI.saveButton,"click",oa),removeAllSubmitHandlers:()=>ya(s()(c.Confluence.Editor.getCurrentForm()),"submit",ra),hasContentChanged:()=>!!Sa()&&Aa(),isEmpty:()=>!s()(c.tinymce.activeEditor.getContent()).text().trim(),getCurrentTitle:()=>{var e;return null===(e=s()("#content-title"))||void 0===e?void 0:e.val()},contentFormSubmit:()=>(!ua()&&c.Confluence.Editor.Drafts.isSharedDraftsEnabled()||c.Confluence.Editor.Drafts.unBindUnloadMessage(),s()(".editable-title #content-title").prop("disabled",!0),!0),metadataSyncRequired:wa,heartbeat:()=>{var e={dataType:"json",contentId:m.a.get("content-id"),draftType:m.a.get("content-type"),spaceKey:r.a.params.spaceKey,contributorsHash:m.a.get("contributors-hash")};Fr=r.a.safe.post(A.a+"/json/startheartbeatactivity.action",e,(e=>{if(!wa()&&e)return Ca(e.atlToken),m.a.set("shared-drafts","legacy"!==e.editMode),void Object(C.b)("rte.heartbeat",e);if(!(null!=e&&e.atlToken&&e.activityResponses instanceof Array))return Object(C.b)("rte.heartbeat-error","Invalid server response"),p.a.error("Unexpected server response for heartbeat:"),void p.a.error(e);m.a.set("contributors-hash",e.contributorsHash),m.a.set("shared-drafts","legacy"!==e.editMode);var t=e.activityResponses;if(Ca(e.atlToken),c.Confluence.Editor.heartbeatType.normal(),Object(C.b)("rte.heartbeat",t),(ia=(t.length||0)+1)>1){var n=ta?0===s()("#reliable-other-users-span").length?s()("<span id='reliable-other-users-span'></span>"):s()("#reliable-other-users-span"):s()("#other-users-span");n.empty();for(var o=0;o<ia-1;++o){o>0&&n.append(", ");var a=t[o];n.append(s()("<a></a>").attr("href",A.a+"/display/~"+encodeURIComponent(a.userName)).text(a.fullName)),null!=a.lastEditMessage&&n.append(" ").append(s()("<span></span>").addClass("smalltext").text(a.lastEditMessage))}ta&&(Xr.a.isDisplayed(["heartBeat"])||""===n.html().trim()||Xr.a.handleMessage("heartBeat",{type:"info",message:Object(ln.a)("heartbeat.page.edited.info","<span id='reliable-other-users-span'>"+n.html()+"</span>")})),s()("#heartbeat-div").hasClass("hidden")&&r.a.Confluence.Analytics.publish("rte.notification.concurrent-editing",{numEditors:ia,pageId:r.a.params.pageId,draftType:r.a.params.draftType})}ta&&ia<=1&&Xr.a.closeMessages(["heartBeat"]),Object(Jr.setVisible)("#heartbeat-div",ia>1),s()(c.document).trigger("resize.resizeplugin"),Object(C.b)("editor-heartbeat",e),(e=>{var t;if(e!==m.a.get("edit-mode")){if("collaborative"===e&&"limited"!==m.a.get("edit-mode"))return;m.a.set("edit-mode",e),t="collaborative"===e?Object(ln.a)("editor.collaborative.mode.enabled"):Object(ln.a)("editor.collaborative.mode.disabled"),da({messageKey:"edit-mode-transition",message:t,disablePublish:!0})}})(e.editMode)}),"json").fail(((e,t,n)=>{(e.status>=500||0===e.status)&&c.Confluence.Editor.heartbeatType.recovery(),403===e.status||401===e.status?p.a.error("Heartbeat error: Unauthorized"):405===e.status?p.a.error("Heartbeat error: Method not allowed"):(p.a.error("Server error on heartbeat request:"),p.a.error(n)),Object(C.b)("rte.heartbeat-error",e)}))},heartbeatType:xa,disableFrame:e=>{s()("form",e).each((function(){s()(this).unbind(),this.onsubmit=()=>!1})),s()("a",e).each((function(){var e=s()(this),t=e.attr("href");e.unbind(),t&&"#"!==t.charAt(0)&&(e.attr("target","_top"),e.bind("click",(t=>{t.preventDefault(),e.blur()})))})),s()("input, img",e).each((function(){s()(this).unbind()}))},previewFrameOnload:(e,t)=>{c.Confluence.Editor.setMode(c.Confluence.Editor.MODE_PREVIEW),c.tinymce.activeEditor.setProgressState(!1),c.Confluence.Editor.disableFrame(e),s()(".tipsy").remove();var n=s()("#main",e)[0];if("comment"!==m.a.get("content-type")&&0===s()(n).find("#main-header").length){var o=s()("#title-heading"),r=o.attr("class");s()(n).prepend(`<div id="preview-header"><div id="title-heading" class="${r||""}">${(null==o?void 0:o.html())||""}</div></div>`)}if(s()(c.tinymce.activeEditor.getBody()).hasClass("resizable")){var a,i=s()(t||"#previewArea iframe"),l=0,d=0,u=i.height();n&&function e(){if(s()("#editor-preview-iframe").length){var t=s()(n).outerHeight(!0);l!==t?(t!==i.height()&&i.height(0).height(Math.max(t,u)),l=t,d=0):d++,d<500&&(a=setTimeout(e,500))}}(),s()(c.document).one("mode-changed.resize-editor",(function(e,t){t!==c.Confluence.Editor.MODE_PREVIEW&&a&&clearTimeout(a)}))}},showPreview:ka,setMode:Ea,getContentId:()=>c.Confluence.getContentId(),addErrorMessage:(e,t,n)=>{var o=s()("#"+e),a=n?"#any-messages":"#editor-messages";o.length?o.empty():o=s()("<div></div>").attr("id",e).appendTo(a),r.a.messages.error(o,{closeable:!0,body:t})},inRichTextMode:Sa,isNewPage:()=>s()("#createpageform, #createpagetemplate").length>0,onInit:()=>{c.Confluence.Editor.setMode(c.Confluence.Editor.MODE_RICHTEXT),c.tinymce.activeEditor.on("click",(()=>{var e=c.Confluence.Editor.UI.postingDatePicker;null==e||e.hide()}))},getCurrentForm:()=>c.tinymce.activeEditor.formElement,setToolBarInactive:e=>s()("#rte-toolbar").toggleClass("disabled",e),isVisible:()=>s()("#wysiwyg:visible").length>0||s()("#preview:visible").length>0,setAriaLabelByContentType:Ia},ja=e=>{e.fn.tipsy.autoBounds2=function(t,n){return function(){var o={},r=e(document).scrollTop()+t,a=e(document).scrollLeft()+t,i=e(this);return n.length>1?(o.ns=n[0],o.ew=n[1]):"e"==n[0]||"w"==n[0]?o.ew=n[0]:o.ns=n[0],i.offset().top<r&&(o.ns="n"),i.offset().left<a&&(o.ew="w"),e(window).width()+e(document).scrollLeft()-(i.offset().left+i.width())<t&&(o.ew="e"),e(window).height()+e(document).scrollTop()-(i.offset().top+i.height())<t&&(o.ns="s"),o.ns?o.ns+(o.ew?o.ew:""):o.ew}}};function Na(){s()(".tipsy").remove()}function La(){var e=/\+/g;setTimeout((()=>{s()("#rte-savebar .aui-button[title]").each((function(){var t=s()(this),n=t.attr("title");if(t.removeAttr("title"),i.a.Env.os.isMacOS()){var o=n.indexOf("(");o>=0&&(n=n.substr(0,o)+n.substr(o).replace(e,""))}t.attr("data-tooltip",n)}))}),0)}function Ba(e,t,n){if("dropdown"===t&&(s()(".tipsy").remove(),n&&n.trigger&&n.trigger.jquery)){var o=n.trigger.data("tipsy");o&&(o.hoverState="out")}}function Ra(){var e=c.Confluence.Editor,t="disabled",n=!1;function o(e){var t=()=>{e&&e.hide()};Pe(c.document,"showLayer",((n,o,r)=>{if("dropdown"==o&&r==e){var a=c.tinymce.activeEditor;a.on("Click",t),a.on("KeyUp",t)}})),Pe(c.document,"hideLayer",((n,o,r)=>{if("dropdown"==o&&r==e){var a=c.tinymce.activeEditor;a.off("Click",t),a.off("KeyUp",t)}}))}function r(e){e.addCallback("show",(()=>{e.$.parents(".disabled").length&&e.hide()}))}function a(e,o){if(!n){var r=f(o);s()(`#${r}`).removeClass(t)}}function i(e,n){var o=f(n);s()(`#${o}`).addClass(t)}function l(e,o){o?e.closest(".aui-button").prop(t,!0).attr("aria-disabled","true").toggleClass(t,o):n||e.closest(".aui-button").prop(t,!1).removeAttr("aria-disabled").toggleClass(t,o)}function u(e,o,r,a){var i=!!n||e,l=!!n||o,c=!!n||r,d=s()("#toolbar"),u=d.find(".toolbar-item"),g=s()("#insert-menu, #more-menu"),m=s()("#insert-menu, #color-picker-control"),p=s()("#format-dropdown"),f=a||function(){return!0};u.toggleClass(t,i),g.toggleClass(t,i),m.toggleClass(t,i),p.toggleClass(t,!!l),i?(Mr=!0,er.addClass("disabled")):(Mr=!1,er.removeClass("disabled"),tr.attr("data-tooltip",Object(ln.a)("tinymce.tablepicker.insert_table_title"))),void 0!==c&&d.find("button, input").filter(f).toggleClass(t,c).prop(t,c)}var g,m=()=>e=>{var n,o,r=e.element,a=(n=r,o=s()(n).closest("PRE,BLOCKQUOTE,.text-placeholder"),e=>o.is(e)),i=a("BLOCKQUOTE"),l=a("PRE"),c=a(".text-placeholder");if(l)u(!0,s()(r).parents("table").is("[data-macro-body-type='PLAIN_TEXT']"));else if(c)u(!0);else if(i){u(!1),s()("#rte-button-justifyleft, #rte-button-justifycenter, #rte-button-justifyright").toggleClass(t,!0)}else u(!1)};function f(e){var t="default";return e&&e.id&&(t=e.id),`rte-toolbar-row-${t}`}function h(e){return s()(`#${e}`).length>0}function v(e,t){var n=t.animate;null==n&&(n=!0);var o=function(){s()(this).remove(),He(c.document,"resize.resizeplugin"),t.onHide&&t.onHide()};clearTimeout(g),g=d.a.setTimeout((()=>{var e=f(t),r=s()(`#${e}`);n?r.slideUp(400,o):(r.hide(),o.call(r))}),100)}function b(e,t){if(!n){var o=f(t),r=t.animate;if(null==r&&(r=!0),h(o))s()(`#${o}:hidden`).slideDown(400,(()=>{p.a.debug("Prevented toolbar deferred display race condition")}));else{var a=s()("<div></div>").addClass("toolbar-split toolbar-split-row toolbar-contextual");a.attr("id",o),t.editorAdjacent&&a.addClass("editor-adjacent");for(var i=t.topToolbar?s()("#rte-toolbar.aui-toolbar:visible"):s()("#savebar-container .aui-toolbar:visible"),l=0,u=t.buttons.length;l<u;l++){var m=t.buttons[l];a.append(m.render())}if(a.css({display:"none"}),t.editorAdjacent)i.append(a);else{var v=s()(".editor-adjacent",i).filter(":first");v.length?v.before(a):i.append(a)}a.find(".toolbar-dropdown").each((function(){y(this)}));var b=()=>{He(c.document,"resize.resizeplugin"),He(c.document,"shown.contextToolbar"),t.onVisible&&t.onVisible()};clearTimeout(g),g=d.a.setTimeout((()=>{r?a.slideDown(400,b):(a.show(),b())}),100)}}}function y(e){var t=s()(e),a=t.dropDown("Standard",{alignment:t.data("dropdown-alignment")||"left"})[0];t.find(".dropdown-item").click((function(e){!function(e){if(!n){var t=e.attr("data-macro-name"),o=e.attr("data-command"),r=e.attr("data-format"),a=e.attr("data-control-id"),i=c.tinymce.activeEditor;t&&xn.macroBrowserToolbarButtonClicked({presetMacroName:t}),o&&i.execCommand(o,!1),r&&i.plugins.atlassiantheme.controlHandlers.formatselect.click.dispatch(r),a&&i.plugins.atlassiantheme.controlHandlers.buttons.click.dispatch(a.toLowerCase())}}(s()(this)),a.hide(),e.preventDefault()})),r(a),o(a)}return{init(t){var n,l;y("#format-dropdown"),y("#more-menu .aui-dd-parent"),y("#insert-menu .aui-dd-parent"),s()("#pagelayout-menu").length&&y("#pagelayout-menu .aui-dd-parent"),s()("#template-menu").length&&y("#template-menu .aui-dd-parent"),function(){var e=s()("#color-picker-control");if(e.length){var t=e.find(".aui-dd-parent"),n=s()("#rte-button-color"),a=n.find(".selected-color"),i=t.dropDown("Standard",{alignment:"left"})[0],l=n.attr("data-color");a.css("background-color",`#${l}`),e.delegate("a[data-color]","click",(function(e){var t=s()(this),o=t.attr("data-color");e.preventDefault(),t.closest(".disabled").length||(c.tinymce.execCommand("ForeColor",!1,`#${o}`),n.attr("data-color",o),a.css("background-color",`#${o}`))})),r(i),o(i)}}(),kr(),(n=s()("#rte-button-source-mode")).click((()=>{n.hasClass("active")?Ta(e.MODE_RICHTEXT):Ta(e.MODE_SOURCE)})),l=t,He(c.document,"initContextToolbars.Toolbar",l),Pe(c.document,"createContextToolbarRow.Toolbar",b),Pe(c.document,"removeContextToolbarRow.Toolbar",v),Pe(c.document,"enableContextToolbarRow.Toolbar",a),Pe(c.document,"disableContextToolbarRow.Toolbar",i);var d=s()("#format-dropdown"),u=d.find("span.dropdown-text");t.on("BeforeExecCommand",(e=>{var n=e.command,o=e.value;if(s.a.each(["pre","blockquote"],(function(){"FormatBlock"==n&&o==this&&(t.formatter.remove("alignleft"),t.formatter.remove("aligncenter"),t.formatter.remove("alignright"))})),s()(t.selection.getNode()).closest("pre,.text-placeholder").length)for(var r=["Bold","Italic","Underline","Strikethrough","InsertUnorderedList","InsertOrderedList","InsertInlineTaskList","InsertInlineTaskListNoToggle","superscript","subscript","mceConfMacroBrowser","mceConfimage","mceConfAttachments","mceEmotion","InsertWikiMarkup","mceConflink","mceInsertTable","mceConfAutocompleteLink"],a=r.length,i=0;i<a;i++)n==r[i]&&e.preventDefault();if("FormatBlock"==n&&"pre"==o&&(t.undoManager.add(),t.execCommand("removeFormat")),"FormatBlock"==n&&"p"==o){var l=d.find(".dropdown-item[data-format='blockquote']").text();u.text()==l&&t.execCommand("FormatBlock",!1,"blockquote")}})),t.on("ExecCommand",(e=>{var t=e.command,n=e.value;if("FormatBlock"==t){var o=d.find(`.dropdown-item[data-format='${n}']`);o.length||(o=d.find(".dropdown-item[data-format='p']")),u.text(o.text())}})),t.on("NodeChange",m()),t.on("init",(()=>{p.a.debug("customtoolbar: ed.onInit function");var e={};s()(".aui-toolbar").find("[data-control-id]").each(((n,o)=>{var r=s()(o),a=r.attr("data-control-id");a&&("formatselect"==a?t.plugins.atlassiantheme.controlHandlers[a].state.add((e=>{if("p"==e){var n=t.selection.getNode();s()(n).closest("p").parent().is("blockquote")&&(e="blockquote")}var o=d.find(`.dropdown-item[data-format='${e}']`).text();o&&u.text(o)})):e[a.toLowerCase()]=r)}));var n=t.plugins.atlassiantheme.controlHandlers.buttons;n.state.add(((t,n,o)=>{var r=e[t];if(r){var a=r.find(".icon-check"),i=r.closest(".toolbar-item");a.length?a.toggleClass("hidden",!o):i.toggleClass(n,o)}})),s()(".aui-toolbar").delegate(".toolbar-item","click",(function(e){var t=s()(this);if(t.hasClass("disabled"))e.preventDefault();else{var o=t.children(".toolbar-trigger[data-control-id]").attr("data-control-id");o&&(n.click.dispatch(o.toLowerCase()),e.preventDefault())}})),s.a.support.shrinkWrapBlocks=!1,p.a.debug("customtoolbar: finished ed.onInit function"),function(){p.a.debug("Enabling Chunky Tooltip for the editor"),ja(s.a);var e={live:!0,gravity:"n",title:function(){return s()(this).attr("data-tooltip")||""},delayIn:250,delayOut:0},t=s.a.fn.tipsy.autoBounds2(50,"n"),n=s.a.fn.tipsy.autoBounds2(50,"w"),o=s.a.extend({},e,{gravity:t}),r=s.a.extend({},e,{gravity:n}),a=s.a.extend({},e,{gravity:"se"});s()("#rte-toolbar [data-tooltip]:not(.dropdown-item)").tooltip(o),s()("#rte-toolbar .dropdown-item[data-tooltip]").tooltip(r),s()("#rte-savebar [data-tooltip]").tooltip(a),s()("#editor-precursor [data-tooltip]").tooltip(o),s()("#property-panel [data-tooltip]").tooltip(o),Pe(c.document,"showLayer",Ba),Pe(c.document,"hideLayer",Ba),Object(C.a)("created.property-panel",Na),Object(C.a)("destroyed.property-panel",Na),Object(C.a)("register-contexts.keyboardshortcuts",La)}()})),t.on("Remove",(()=>{$e(c.document,"showLayer",Ba),$e(c.document,"hideLayer",Ba),Object(C.c)("created.property-panel",Na),Object(C.c)("destroyed.property-panel",Na),Object(C.c)("register-contexts.keyboardshortcuts",La)}))},toggleToolbarButton:l,disableToolbarButton:function(e){l(s()(`.${e.replace(".","")}`),!0)},enableToolbarButton:function(e){n||l(s()(`.${e.replace(".","")}`),!1)},focusToolbarButton:function(e){n||s()(`.${e.replace(".","")}`).closest(".aui-button").focus()},isToolbarRowEnabled:function(e){var n=f({id:e});return h(n)&&!s()(`#${n}`).hasClass(t)},getToolbarRow:function(e){var t=f({id:e}),n=s()(`#${t}`);return n.length?n[0]:null},isToolbarButtonEnabled:function(e){return!s()(`.${e.replace(".","")}`).closest(".aui-button").prop(t)},bindDropdownMenu:y,toggleToolbarButtons:u,disableToolbar:function(e){n=!!e},getInfo:()=>({longname:"customtoolbar",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com/",version:"1.0"})}}var Pa=function(){var e={Button:function(e){var t=e.text,n=e.tooltip,o=e.triggerText,r=e.iconClass,a=e.click,i=!!e.disabled,l=e.id;this.render=()=>{var e=s()('<button type="button"></button>').addClass("aui-button aui-button-subtle").attr("data-tooltip",n||t);if(l&&e.attr("id",l),i&&e.prop("disabled",!0).attr("aria-disabled","true"),e.click((t=>{e.prop("disabled")||a(t)})),r){var c=s()("<span />");c.addClass(`icon ${r}`),c.text(t),e.append(c)}if(o){var d=s()("<span />");d.addClass("trigger-text"),d.text(o),e.append(d)}return e[0]}},DropDownButton:function(e){var t,n=e.id,o=e.tooltip,r=e.text||"",a=e.iconClass,i=!!e.disabled,l=e.dropDownContent;this.render=function(){var e=s()("<div></div>").addClass("toolbar-item").addClass("toolbar-dropdown").attr("data-tooltip",o);e.attr("id",n);var c=s()("<div/>").addClass("aui-dd-parent"),d=s()("<a href='#'></a>");if(d.addClass("toolbar-trigger").addClass("aui-dd-trigger").addClass("aui-button"),r&&d.append(`<span class="dropdown-text">${r}</span>`),i&&(e.addClass("disabled"),d.addClass("disabled")),a){var u=s()("<span />");u.addClass(`icon ${a}`),u.text(r),d.append(u)}var g=s()("<span/>");return g.addClass("icon").addClass("icon-dropdown"),d.append(g),t=s()("<div/>").addClass("hidden").addClass("aui-dropdown"),l&&t.append(l),c.append(d),c.append(t),e.append(c),e[0]}},TextButton:function(e){var t=e.text,n=e.textClass,o=e.click,r=!!e.disabled,a=e.tooltip;this.render=()=>{var e=s()('<button type="button"></button>').addClass("aui-button aui-button-subtle").addClass(n).text(t);return a&&e.attr("data-tooltip",a),r&&e.prop("disabled",!0).attr("aria-disabled","true"),e.click((t=>{e.prop("disabled")||o(t)})),e[0]}},TextBox:function(e){var t=e.id,n=e.text,o=e.name,r=e.keydown,a=e.cssClass;this.render=function(){var e=s()("<div></div>").addClass("toolbar-item");e.append(s()(`<label for="${t}">${n}</label>`));var i=s()(`<input id="${t}" type="text" name="${o}" class="${a} text" autocomplete="off">`);return i.keydown((e=>{r(e)})),e.append(i),e[0]}},Group:function(e,t){var n=e;this.render=function(){var e=s()("<div></div>");e.addClass("aui-buttons"),t&&(t.id&&e.attr("id",t.id),t.groupClass&&e.addClass(t.groupClass));for(var o=0,r=n.length;o<r;o++)e.append(n[o].render());return e[0]}}};return e.SplitGroup=function(e,t){var n=e,o=t&&t.dropDownOptions||{};this.render=function(){var e=s()("<div></div>");e.addClass("aui-buttons"),t&&(t.id&&e.attr("id",t.id),t.groupClass&&e.addClass(t.groupClass));for(var r=0,a=n.length;r<a;r++)e.append(n[r].render());return e.append(function(){var e=o.id,t=o.disabled,n=o.dropDownContent,r=o.title,a=o.alignment,i=s()("<div></div>").addClass("toolbar-item").addClass("toolbar-dropdown").addClass("toolbar-splitbutton");e&&i.attr("id",e),r&&i.attr({"data-tooltip":r}),a&&i.data("dropdown-alignment",a);var l=s()("<div/>").addClass("aui-dd-parent"),c=s()("<a href='#'></a>");c.addClass("toolbar-trigger aui-dd-trigger aui-button"),t&&(i.addClass("disabled"),c.addClass("disabled"));var d=s()("<span/>");d.addClass("icon").addClass("icon-dropdown"),c.append(d);var u=s()("<div/>").addClass("hidden").addClass("aui-dropdown");return n&&u.append(n),l.append(c),l.append(u),i.append(l),i[0]}()),t&&t.postProcess&&t.postProcess(e),e[0]}},d.a.Confluence.Editor.Toolbar={},d.a.Confluence.Editor.Toolbar.Components=e,e},$a=[];var Ha={top:"table-align-top",middle:"table-align-middle",bottom:"table-align-bottom"},Fa="JustifyTop",za="top",Ua=Ha.top,_a=(e,t)=>{var n=Object.values(Ha).map((e=>document.querySelector(`#${e}`))),o=!1;return null==n||n.forEach((n=>{if(n)return n.id===(null==t?void 0:t.id)?n.classList.contains("active")?(n.classList.remove("active"),e.execCommand(Fa)):(o=!0,void(n.id!==Ua&&n.classList.add("active"))):n.classList.remove("active")})),o},Qa=(n(53),()=>({initContextToolbars(){var e,t,n=c.tinymce.activeEditor,o=Pa(),r="aui-icon aui-icon-small aui-iconfont-",a=c.AJS.storageManager("atlassian.editor","tables"),i=e=>{var t=n.translate(e),o=`${e}_shortcut`,r=n.translate(o);return r&&r!==o&&(t+=` (${r})`),t},l={Buttons:[new o.Group([new o.Button({text:i("table.row_before_desc"),iconClass:`${r}insert-row-before`,click(){c.tinymce.execCommand("mceTableInsertRowBefore",!1,"")}}),new o.Button({text:i("table.row_after_desc"),iconClass:`${r}insert-row-after`,click(){c.tinymce.execCommand("mceTableInsertRowAfter",!1,"")}}),new o.Button({text:i("table.delete_row_desc"),iconClass:`${r}remove-row`,click(){c.tinymce.execCommand("mceTableDeleteRow",!1,"")}})]),new o.Group([new o.Button({text:i("table.cut_row_desc"),iconClass:`${r}cut-table-row`,click(){c.tinymce.execCommand("mceTableCutRow",!1,""),n.plugins.customtoolbar.enableToolbarButton("aui-iconfont-paste-table-row")}}),new o.Button({text:i("table.copy_row_desc"),iconClass:`${r}copy-table-row`,click(){c.tinymce.execCommand("mceTableCopyRow",!1,""),n.plugins.customtoolbar.enableToolbarButton("aui-iconfont-paste-table-row")}}),new o.Button({text:i("table.paste_row_before_desc"),iconClass:`${r}paste-table-row`,click(){c.tinymce.execCommand("mceTablePasteRowBefore",!1,"")},disabled:!a.doesContain("copied")})]),new o.Group([new o.Button({text:i("table.col_before_desc"),iconClass:`${r}insert-column-before`,click(){c.tinymce.execCommand("mceTableInsertColBefore",!1,"")}}),new o.Button({text:i("table.col_after_desc"),iconClass:`${r}insert-column-after`,click(){c.tinymce.execCommand("mceTableInsertColAfter",!1,"")}}),new o.Button({text:i("table.delete_col_desc"),iconClass:`${r}remove-column`,click(){c.tinymce.execCommand("mceTableDeleteCol",!1,"")}})]),new o.Group([new o.Button({text:i("table.merge_cells_desc"),iconClass:`${r}merge-table-cells`,click(){c.tinymce.execCommand("mceTableMergeCells",!1,"")}}),new o.Button({text:i("table.split_cells_desc"),iconClass:`${r}split-merged-table-cells`,click(){c.tinymce.execCommand("mceTableSplitCells",!1,"")}})]),new o.Group([new o.Button({text:i("table.row_highlight"),iconClass:`${r}heading-row`,click(){c.tinymce.execCommand("confTableRowToggleHeading",!1),c.tinymce.execCommand("mceTableUpdateNumberingCol",!1)}}),new o.Button({text:i("table.col_highlight"),iconClass:`${r}heading-column`,click(){c.tinymce.execCommand("confTableColumnToggleHeading",!1)}}),new o.Button({text:i("table.numbering_column_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-insert-numbered-column",id:"insert-numbering-column",click(){n.execCommand("mceTableToggleSeries",!1,{name:"numbers"})}})]),new o.SplitGroup([new o.Button({text:i("table.selection_highlight"),iconClass:`${r}paint-bucket`,click(){c.tinymce.execCommand("confTableSelectionToggleHighlight",!1)}})],{id:"table-highlight-group",dropDownOptions:{id:"table-highlight-colour",dropDownContent:(e=s()("<ul/>").addClass("table-highlight-picker"),s.a.each(E.a.colorValues,((t,n)=>{var o=s()("<li/>"),r=s()("<a href='#'></a>"),a=E.a.colorNames[n];"clear"===n?r.addClass("remove-highlight").attr("data-remove-highlight","true"):r.addClass(`highlight-#${n}`).attr("data-highlight-colour",`#${n}`),r.attr("title",a),r.attr("aria-label",a),r.tooltip(),o.append(r),e.append(o)})),e),alignment:"left"},postProcess(e){e.attr("data-highlight-colour","grey"),e.addClass("highlight-grey");var t=s()("<span>&nbsp;</span>");t.addClass("highlight-indicator"),e.find(".icon.aui-iconfont-paint-bucket").after(t)}}),new o.Group([new o.Button({text:i("table.del"),iconClass:`${r}remove-table`,click(){c.tinymce.execCommand("mceTableDelete",!1,"")}})])],Events:$a};M.a.get("is-dc-license")&&((e,t,n)=>{var o=(t,n)=>{_a(e,t.currentTarget)&&(null==n||n())},r=new n.Group([new n.Button({id:Ha.top,text:Object(ln.a)("aetable.align.top"),iconClass:Ha.top,click(t){o(t,(()=>e.execCommand("JustifyTop")))}}),new n.Button({id:Ha.middle,text:Object(ln.a)("aetable.align.middle"),iconClass:Ha.middle,click(t){o(t,(()=>e.execCommand("JustifyMiddle")))}}),new n.Button({id:Ha.bottom,text:Object(ln.a)("aetable.align.bottom"),iconClass:Ha.bottom,click(t){o(t,(()=>e.execCommand("JustifyBottom")))}})]);t.Buttons.splice(4,0,r)})(n,l,o);var d,u,g=e=>{function t(e,t){return parseInt(e.attr(t),10)}return e.filter((function(){var e=s()(this);return t(e,"rowspan")>1||t(e,"colspan")>1})).length>=1};function m(e){var t=s()(this),o=s()("#table-highlight-group"),r=o.attr("data-highlight-colour"),a=o.attr("data-remove-highlight");r&&(o.removeClass(`highlight-${r}`),o.removeAttr("data-highlight-colour")),o.removeClass("remove-highlight"),a&&o.removeAttr("data-remove-highlight");var i=t.attr("data-highlight-colour");i&&(o.addClass(`highlight-${i}`),o.attr("data-highlight-colour",i)),t.attr("data-remove-highlight")&&(o.addClass("remove-highlight"),o.attr("data-remove-highlight","true")),n.focus(!1),n.execCommand("confTableSelectionToggleHighlight",!1,{alwaysHighlight:!0}),e.preventDefault()}return n.on("NodeChange",(e=>{var o,r=e.element,a=s()("body"),i=!a.hasClass("no-tools")||a.hasClass("no-tools-toolbars-visible");t||null==r.parentNode||"BODY"===r.nodeName||(t=!0,o=r,s()(o).closest("table:not(.wysiwyg-macro)").length?(He(c.document,"createContextToolbarRow.Toolbar",{buttons:l.Buttons,topToolbar:!0,animate:i}),He(c.document,"enableContextToolbarRow.Toolbar",{id:"default"}),(e=>{s.a.fn.updateTableModeInToolbar&&s()(e).closest("table").updateTableModeInToolbar()})(r),(e=>{var t=s()(e).closest("td,th"),o=s()(".mceSelected",t.closest("table"));g(t.add(o))?n.plugins.customtoolbar.enableToolbarButton("aui-iconfont-table-split"):n.plugins.customtoolbar.disableToolbarButton("aui-iconfont-table-split")})(r),(e=>{s()(e).closest("table").find(".numberingColumn").length>0?s()("#insert-numbering-column").addClass("active"):s()("#insert-numbering-column").removeClass("active")})(r),M.a.get("is-dc-license")&&((e,t)=>{_a(t,null);var n,o=e.closest("td,th"),r=null==o?void 0:o.style.verticalAlign;if(r!==za)null===(n=document.querySelector(`#${Ha[r]}`))||void 0===n||n.classList.add("active")})(r,n)):He(c.document,"disableContextToolbarRow.Toolbar",{animate:i}),t=!1)})),n.on("Undo",(()=>{n.nodeChanged()})),n.initialized?s()(c.document).on("click","#table-highlight-colour .aui-dropdown a",m):n.on("init",(()=>{s()(c.document).on("click","#table-highlight-colour .aui-dropdown a",m)})),n.on("Remove",(()=>{s()(c.document).off("click","#table-highlight-colour .aui-dropdown a",m)})),l.Buttons.splice(0,0,new o.Group([new o.DropDownButton({id:"table-mode-picker",text:i("table.responsive"),dropDownContent:(d=s()("<ul/>").addClass("table-mode-list"),u=[{name:i("table.responsive"),mceCmd:"mceAutoWidth",tooltip:i("table.responsive_tooltip")},{name:i("table.fixed_width"),mceCmd:"mceFixedWidth",tooltip:i("table.fixed_width_tooltip")}],s.a.each(u,((e,t)=>{var n=s()("<li/>").addClass("dropdown-item").attr("data-tooltip",t.tooltip),o=s()(`<a href="#">${t.name}</a>`).addClass("item-link");n.on("click",(()=>{c.tinymce.execCommand(t.mceCmd,!1,"")})),d.append(n.append(o))})),d)})])),l.Buttons.splice(3,0,new o.Group([new o.Button({text:i("table.col_cut_desc"),iconClass:`${r}cut-table-column`,click(){c.tinymce.execCommand("mceTableCutCol",!1,""),n.plugins.customtoolbar.enableToolbarButton("aui-iconfont-paste-table-column")}}),new o.Button({text:i("table.col_copy_desc"),iconClass:`${r}copy-table-column`,click(){c.tinymce.execCommand("mceTableCopyCol",!1,""),n.plugins.customtoolbar.enableToolbarButton("aui-iconfont-paste-table-column")}}),new o.Button({text:i("table.col_paste_desc"),iconClass:`${r}paste-table-column`,click(){c.tinymce.execCommand("mceTablePasteColBefore",!1,"")},disabled:!a.doesContain("copied")})])),l}}));function Wa(){return{init(e){e.addCommand("mceDelete",((t,n)=>(function(){if(u()){var t=e.selection.getRng();if(!t||t.collapsed)return!1;var n=s()(t.startContainer).closest(".wysiwyg-macro-body",e.getBody())[0];if(n&&Go.isRangeAtStartOf(n,t)&&Go.isRangeAtEndOf(n,t)){var o=s()(n.firstChild).is("pre")?"pre":"p",r=s()(`<${o}><br data-mce-bogus="1"></${o}>`)[0];return s()(n).html(r),e.selection.select(r,!0),!0}}return!1}()||e.getDoc().execCommand("Delete",t),!1)))},getInfo:()=>({longname:"Delete Command Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}n(61);var Va=function(){var e,t,n,o,r,a,i,l,d,m,f,h,v,b=c.Confluence.PropertyPanel,y="img",w=10,A=[800,800,400,400,400,300,300,300,300,300,300,300,300,300,300,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100],x="confluence.draggable-plugin";var M="div.innerCell,div.cell",k="body",E="p,h1,h2,h3,h4,h5,h6,blockquote,li,td,th,img",T="li,td,th",D="p,h1,h2,h3,h4,h5,h6,blockquote",S="li,td,th";function I(t){var r=!!o.children(".contentLayout,.contentLayout2").length;function a(){return n.find("#move-indicator")}function i(e){return"move-indicator"===e.attr("id")}function l(e){return r?e.is(M):e.is(k)}function c(e,t,o){if(e.is("img")){var r=function(e,t){var o=e.offset(),r=t+n.scrollLeft();return r-o.left}(e,t);return r<e.width()/2}return d(e,o)<e.height()/2}function d(e,t){var o=e.offset();return t+n.scrollTop()-o.top}return{positionNear:function(e,r){var u=function(e,r){var u=s()(n[0].elementFromPoint(e,r)),g=!0;if(function(e){if(e.is(E)&&!i(e))return(!e.is("td.wysiwyg-macro-body")||"PLAIN_TEXT"!==e.closest("table").attr("data-macro-body-type"))&&!(e.is("img")&&!t.is("img"));return!1}(u))return{target:u,before:c(u,e,r)};if(l(u)){if(function(e,t){return d(e.children().first(),t)<0}(u=function(e){if(e.is("div.cell"))return e.children("div.innerCell").first();return e}(u),r))u=u.children().first();else if(function(e,t){return function(e,t){var n=d(e,t),o=e.height();return n-o}(e.children().last(),t)>0}(u,r))u=u.children().last(),g=!1;else{if(m=u,a().length>0&&a().parent(m).length>0)return null;u=function(e){var n=t.parent(E);n.length||(n=e.find(E).last());n.length||(n=o.find(E).last());return n}(u),g=!1}return{target:u,before:g}}var m;return null}(e,r);u&&function(e,t){if(i(e))return;var n=a();if(e.is(T)&&e.find(n).length)return;n.length?n.detach():n=s()('<span id="move-indicator">|</span>');e=function(e){if(e.is(T)){var t=e.children().first();t.is(D)&&(e=t)}return e}(e),e.is("img")?e.is(S)?t?e.prepend(n):e.append(n):t?e.before(n):e.after(n):e.prepend(n)}(u.target,u.before)},replaceWith:function(t){var n=a();n.length?(t.is(y)&&l(n.parent())&&(t=s()("<p></p>").append(t)),n.replaceWith(t),e.dom.isBlock(t[0])&&t.parent().is("p")&&t.unwrap(),g().showElement(t),e.selection.select(t[0]),e.selection.collapse(!0)):(p.a.debug("No cursor - abort drop"),e.undoManager.undo())},destroy:function(){var e=a();e.length&&e.remove()}}}function O(t){if(1===t.which&&t.target===t.currentTarget)if(d)B(t);else{d=s()(t.target),e.selection.select(t.target),t.preventDefault(),n.bind({"mousemove.moveable-zone":L,"mouseup.moveable-zone":B,"keydown.moveable-zone":j,"mouseover.moveable-zone":N});var o,c=d.offset();i=t.pageX,l=t.pageY,r=c.top-l,a=c.left-i,f=!0,m=(o=d).attr("style")||"",d=o}}function j(t){27===t.keyCode&&(h.cancelScrolling(),n.unbind(".moveable-zone"),e.undoManager.undo(),e.selection.select(d[0]),e.selection.collapse(!1),d=null)}function N(){n.find(".mceSelected").removeClass("mceSelected")}function L(n){if(f){if(function(e){var t=Math.abs(i-e.pageX),n=Math.abs(l-e.pageY);return t<w&&n<w}(n))return;yt(),e.undoManager.beforeChange(),e.undoManager.typing=!0,e.undoManager.add(),Object(C.b)("synchrony.stop",{id:x}),(s=e.selection.getSel())&&s.removeAllRanges&&s.removeAllRanges(),d.css({position:"absolute",width:d.css("width"),"max-width":"50%"}),b.current&&b.destroy(),d.detach(),o.append(d),v=I(d),f=!1}var s;n.preventDefault(),d.hide(),function(e,n){var o=A.length;if((n=Math.max(n,0))<o)return void h.scrollUp(A[n]);var r=t.height(),a=Math.max(0,r-n);if(a<o)return void h.scrollDown(A[a]);h.cancelScrolling()}(n.clientX,n.clientY),v.positionNear(n.clientX,n.clientY);var c=Math.min(n.pageY+r,h.scrollHeight()-d.outerHeight()),u=n.pageX+a;d.css({top:c,left:u,opacity:.5}),d.show()}function B(t){n.unbind(".moveable-zone"),h.cancelScrolling(),f?d=null:(t.preventDefault(),d.detach(),d.attr("style",m),v.replaceWith(d),v.destroy(),d=null,v=null,N(),e.undoManager.add(),Object(C.b)("synchrony.start",{id:x}))}return{init(r){e=r,r.on("Init",(()=>{var e,a,i;t=s()(r.getWin()),n=s()(r.getDoc()),o=s()(r.getBody()),e=u()?o:n.find("html"),a=e,i=0,h={scrollUp(e){if(i!==-e){i=-e;var t=a.scrollTop()/e*1e3;a.stop(!1,!1),a.animate({scrollTop:0},{duration:t})}},scrollDown(e){if(i!==e){var t=a[0].scrollHeight,n=(t-a.scrollTop())/e*1e3;a.stop(!1,!1),a.animate({scrollTop:t},{duration:n})}},cancelScrolling(){a.stop(!0,!1)},scrollHeight:()=>a[0].scrollHeight},n.delegate("img.confluence-embedded-image,img.editor-inline-macro,table.wysiwyg-macro",{mousedown:O})}))},getInfo:()=>({longname:"Draggable objects (images, tables, placeholders) around the document via drag and drop",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"})}};function Ka(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ga{constructor(e){Ka(this,"value",void 0),Ka(this,"toJSON",void 0),this.value=e,this.valueOf=this.toString=this.toJSON=()=>this.value}}var Ya,Ja=e=>new Ga(e),qa={},Za=0,Xa=e=>{Za=e.isCollapsed()?0:e.getContent().length},ei=function(e,t){if(e&&(qa[e]?qa[e]++:qa[e]=1,t)){var n=`${e}Size`;qa[n]?qa[n]+=t:qa[n]=t}},ti=function e(){qa.pageID=m.a.get("page-id"),qa.editorVersion=Ja("18.5.19"),Object(C.b)("analytics",{name:"confluence.editor.action",data:qa}),qa={},Object(c.clearTimeout)(Ya),Ya=Object(c.setTimeout)(e,6e4)},ni={Bold:"bold",confCharmap:"insert.symbol",confMonospace:"monospace",confTableRowToggleHeading:"table.row.toggle.heading",confTableColumnToggleHeading:"table.column.toggle.heading",confTableSelectionToggleHighlight:"table.selection.toggle.highlight",ForeColor:"foreground.color",FormatBlock:"format.block",Indent:"indent",InsertHorizontalRule:"insert.horizontal.rule",InsertOrderedList:"insert.ordered.list",InsertUnorderedList:"insert.unordered.list",InsertWikiMarkup:"insert.wiki.markup",Italic:"italic",JustifyBottom:"justify.bottom",JustifyCenter:"justify.center",JustifyLeft:"justify.left",JustifyMiddle:"justify.middle",JustifyRight:"justify.right",JustifyTop:"justify.top",mceConfimage:"insert.files.images",mceConflink:"insert.link",mceConfMacroBrowser:"open.other.macros.browser",mceEmotion:"insert.emoticon",mceTableCopyRow:"table.copy.row",mceTableCutRow:"table.cut.row",mceTableDelete:"table.delete",mceTableDeleteCol:"table.delete.column",mceTableDeleteRow:"table.delete.row",mceTableInsertColAfter:"table.insert.column.after",mceTableInsertColBefore:"table.insert.column.before",mceTableInsertRowAfter:"table.insert.row.after",mceTableInsertRowBefore:"table.insert.row.before",mceTableMergeCells:"table.merge.cells",mceTablePasteRowBefore:"table.paste.row.before",mceTableSplitCells:"table.split.cells",mcePageLayoutsToolbar:"page.layouts.toolbar.toggle",mcePageLayoutAddSection:"page.layouts.toolbar.add.section",mcePageLayoutRemoveSection:"page.layouts.toolbar.remove.section",mcePageLayoutMoveSectionDown:"page.layouts.toolbar.movedown.section",mcePageLayoutMoveSectionUp:"page.layouts.toolbar.moveup.section",mcePageLayoutChangeSection:"page.layouts.toolbar.change.section",mceConfShortcutDialog:"open.help.dialog",mceSearchReplaceToolbar:"search.replace.toolbar.toggle",mceConfSearchClose:"search.replace.toolbar.close",mceConfSearch:"search",mceConfReplace:"replace",mceConfReplaceAll:"replace.all",Outdent:"outdent",Redo:"redo",Strikethrough:"strikethrough",subscript:"subscript",superscript:"superscript",Underline:"underline",Undo:"undo",InsertInlineTaskList:"insert.inline.tasklist",InsertInlineTaskListNoToggle:"insert.inline.tasklist.no.toggle"};function oi(){return{init(e,t){e.addCommand("mceEmotion",(()=>(e.windowManager.open({file:`${c.tinymce.settings.editor_plugin_action_base_path}/emotions.action`,width:190,height:125,inline:1,id:"insert-emoticon-dialog",name:"emotions_dlg.title"},{plugin_url:t}),!1))),e.ui.registry.addButton("emotions",{text:"emotions.emotions_desc",onAction:function(){e.execCommand("mceEmotion")}}),e.on("Click",(t=>{var n,o=t.target;if("IMG"===o.nodeName&&o.classList.contains("emoticon")){if(n=e.selection.getRng())(t.offsetX||t.layerX-o.x)<o.width/2?(n.setStartBefore(o),n.setEndBefore(o)):(n.setStartAfter(o),n.setEndAfter(o)),e.selection.setRng(n);return e.selection.collapse(),c.tinymce.dom.Event.cancel(t)}}))},getInfo:()=>({longname:"Emotions",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/emotions",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function ri(){return{init(e){e.on("Init",(()=>{s()(e.getBody()).addClass("fullsize")}))},getInfo:()=>({longname:"flex editor to full size plugin",description:"adjusts height of editor so it always occupies the right space in between the toolbars",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"})}}var ai=n(26),ii=n.n(ai),li=[],si=[],ci=(e,t)=>{var n=new c.Confluence.Editor.FileDialog.FileDialogView({submitCallback:e,cancelCallback:t,beforeShowListeners:li,panelComponents:si});return n.render(),n},di=e=>{var t=c.Confluence.Link.fromREST(e.attributes);t.attrs["data-linked-resource-container-id"]=e.get("ownerId"),t.attrs.href=e.get("downloadUrl"),t.insert()},ui=e=>{var t;In.a.insertFilePlaceholder({name:e.get("fileName"),page:e.get("parentTitle"),space:(null===(t=e.get("space"))||void 0===t?void 0:t.key)||"",date:e.get("datePath"),ownerId:e.get("ownerId")})},gi={beforeShowListeners:li,panelComponent:si,sizeToFit:function(){return null==this||this.each((function(){var e=this,t=s()(this).parent(),n=t.height();t.children().each((function(){this!==e&&s()(this).is(":visible")&&(n-=s()(this).outerHeight())}));var o=s()(this).outerHeight()-s()(this).height();s()(this).css("height",Math.max(0,n-o)+"px")})),this},defaultInsertImageDialog:()=>{yt(),ci((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.contentId,o=e.selectItems;if(wt(),t)c.tinymce.confluence.ImageUtils.insertFromProperties({url:t,filename:t,contentId:n});else{var a=!0,i=(null==o?void 0:o.length)>1;null==o||o.forEach((e=>{e.isImage()?c.tinymce.confluence.ImageUtils.insertFromProperties({filename:e.getFileName(),contentId:e.get("ownerId")},i):(a=!1,r.a.MacroBrowser.getMacroMetadata("view-file")?ui(e):di(e))})),null===ii.a||void 0===ii.a||ii.a.triggerEvent("confluence.insert-files-dialog.insert",o,a)}}),(()=>wt()))},findPanelComponentById:e=>{for(var t=c.Confluence.Editor.ImageDialog.panelComponent,n=0;n<t.length;n++)if(t[n].id===e)return t[n]},insertImageDialog:ci,_insertLinkToEditor:di,_insertFilePlaceholderToEditor:ui};function mi(e){return e.on("init",(function(){e.addCommand("mceConfimage",gi.defaultInsertImageDialog)})),{getMetadata:function(){return{name:"Confluence Image Dialog"}}}}function pi(e,t,n){n&&n.node&&s()(".inline-comment-marker",n.node).contents().unwrap()}n(63);function fi(){return{init(e){e.ui.registry.addButton("confluence-insert-files",{text:Object(ln.a)("tinymce.confluence.files"),tooltip:`${Object(ln.a)("tinymce.confluence.conf_file_desc")} (${e.translate("toolbar.insert_files_shortcut_tooltip")})`,className:"insert-files",icon:"aui-icon aui-icon-small aui-iconfont-image",locationGroup:"rte-toolbar-group-files",weight:0,onAction:function(){e.execCommand("mceConfimage")}})},getInfo:()=>({longname:"Insert Files",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com/",version:"1.0"})}}var hi="object"==typeof window?window.localStorage:{},vi=function(e,t){var n=`${e}.${m.a.get("remote-user")||""}.${t}`,o=!1,r=/\d+#/,a=function(e){if(!o)return null;var t,a=hi.getItem(`${n}.${e}`);return a&&(t=r.exec(a))&&(a=a.replace(t[0],""),+new Date>Number(t[0].replace("#","")))?(hi.removeItem(`${n}.${e}`),null):a};try{o=Object.keys(hi).length}catch(e){p.a.error("Browser does not support localStorage, Confluence.storageManager will not work.")}return{getItem:a,getAllItems:function(){if(!o)return null;var e={};for(var t in hi)if(hi.hasOwnProperty(t)&&t.indexOf(`${n}.`)>-1){var r=t.split(`${n}.`)[1];e[r]=a(r)}return e},doesContain:e=>!!a(e),getItemAsBoolean(e){var t=a(e);return"false"!==t&&("true"===t||!!t)},setItem(e,t,r){var a;o&&(t=((a=1e3*(r||0))?+new Date+a+"#":"")+t,hi.setItem(`${n}.${e}`,t))},setItemQuietly(e,t,n){try{this.setItem(e,t,n)}catch(n){p.a.error(`Unable to write to localStorage. key: ${e}, value: ${t}, cause: ${n}`)}},removeItem(e){o&&hi.removeItem(`${n}.${e}`)}}}("confluence","userSettings");function bi(e,t){return t?`${e}.${t.replace(/\./g,"-")}`:e}var yi={get:function(e,t,n){var o=bi(e,t),r=vi.getItem(o);return null!==r?JSON.parse(r):void 0!==n?n:null},set:function(e,t,n,o){var r=bi(e,t);if(o===n)vi.removeItem(r);else{vi.setItem(r,JSON.stringify(o),2592e3)}}},wi=(n(65),"insert-wiki-markup-dialog.parser"),Ci="global",Ai="CONFLUENCE",xi={HELP_REST_API:`${A.a}/plugins/tinymce/helplink.action`,WIKI:{CONFLUENCE:{api:No.getWikiConfluenceToXhtml,val:"CONFLUENCE",label:"confluence.conf_wikimarkup_confluence_label",helpLink:"help.insert.wiki.markup",restApi:"/rest/tinymce/1/wikixhtmlconverter"},MARKDOWN:{api:No.getWikiMarkdownToXhtml,val:"MARKDOWN",label:"confluence.conf_wikimarkup_markdown_label",helpLink:"help.insert.wiki.markup.markdown",restApi:"/rest/tinymce/1/markdownxhtmlconverter"}}},Mi={dialog:{id:"insert-wiki-markup-dialog",content:"",width:980,height:500,popup:!1,name:"confluence.conf_wikimarkup_desc"},markupEditId:"insert-wiki-textarea",previewAreaId:"insert-wiki-textarea-preview",selectionMenuId:"wiki-parser-selection-tool",serverRequestTimer:300,entityId:"",spaceKey:""},ki=null,Ei=()=>{var e=yi.get(wi,Ci,Ai);return xi.WIKI[e]},Ti=(e,t)=>{var n=s()(((e,t,n)=>`\n    <span class="wiki-parser-selector">\n        <form action="#" method="post" id="d" class="aui">\n            <select class="select medium-field" id="wiki-parser-selection-tool" name="wiki-parser-selection-tool" title="wiki parser selector">\n                <option value="${t.val}">${e(t.label)}</option>\n                ${Object.keys(n).filter((e=>n[e].val!==t.val)).map((t=>`<option value="${n[t].val}">${e(n[t].label)}</option>`))}\n            </select>\n        </form>\n    </span>\n`)(e,t,xi.WIKI));return s()("#insert-wiki-insert-title").append(n),s()(`#${Mi.selectionMenuId}`)},Di=()=>{var e=s()(`#${Mi.selectionMenuId}`);return e.length?e.val():Ei().val},Si=e=>{var t={wiki:(e=e||{}).textToConvert,entityId:Mi.entityId,spaceKey:Mi.spaceKey};e.api(JSON.stringify(t),((t,n)=>{if(t)return p.a.error("Error when fetching XHTML",t),void e.errorCallback(t);e.successCallback(n)}))},Ii=()=>{var e=s()(`#${Mi.markupEditId}`).val();s.a.trim(e)?Si({api:xi.WIKI[Di()].api,textToConvert:e,successCallback:e=>{ki.html(e)},errorCallback:()=>{ki.html(ji(e))}}):ki.html(e)},Oi=()=>{var e,t,n,o=Di();yi.set(wi,Ci,Ai,o),e=o,t=s()(`#${Mi.dialog.id}`).find(".dialog-help-link"),n=xi.WIKI[e].helpLink,t.load(xi.HELP_REST_API,{linkUrlKey:n}),Ii()};function ji(e){if("string"!=typeof e)return"";var t={"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;","`":"&#96;"};return e.replace(/[&"'<>`]/g,(e=>"string"==typeof t[e]?t[e]:"&quot;"))}function Ni(){return{init:(e,t)=>{var n;Object(C.a)("rte-ready",(()=>{Mi.entityId=m.a.get("content-id"),Mi.spaceKey=m.a.get("space-key")})),Mi.dialog.content=`\n    <p id="insert-wiki-info-title">${(n=e=>Object(ln.a)(e))("tinymce.confluence.conf_wikimarkup_info_title")}</p>\n    <form action="#" method="post" id="insert-wiki-markup-form" class="aui">\n        <h3 class="wiki-title">\n            <span id="insert-wiki-insert-title">${n("tinymce.confluence.conf_wikimarkup.insert.label")}</span>\n            <span id="insert-wiki-preview-title">${n("tinymce.confluence.conf_wikimarkup_preview_label")}</span>\n        </h3>\n        <textarea class="monospaceInput textarea" id="insert-wiki-textarea" name="wikitext"></textarea>\x3c!--\n            --\x3e<div class="example-container" id="insert-wiki-textarea-preview"></div>\n    </form>\n`;var o=t=>{var n,o,r,a=Mi.dialog.id,i=Di();e.windowManager.setBusy(a,!1),c.tinymce.EditorManager.activeEditor.windowManager.close(a),Object(C.b)("analytics",{name:`insert-wiki-markup-dialog.${i}`}),"MARKDOWN"===i&&(n=t,(o=s()(n)).find("img").addClass("confluence-embedded-image"),t=s()("<div>").append(o.clone()).html()),e.execCommand("mceInsertContent",!1,t),r=e,c.tinymce.each(r.dom.select("p > p"),(e=>{try{e.parentNode&&r.dom.split(e.parentNode,e)}catch(e){p.a.error("insertwikimarkup - splitParas()",e)}}))},r=(t,n,o)=>{e.windowManager.setBusy(Mi.dialog.id,!1);var r=((e,t)=>`\n        <p class="warning">\n            ${e}\n        </p>\n        <p class="exception-report">\n            <span class="exceptionMessage">\n                ${t}\n            </span>\n        </p>\n`)(e.translate("confluence.conf_wikimarkup_conversion_errors"),"timeout"===n?e.translate("confluence.conf_wikimarkup_timeout"):`${ji(n||t.message)} : ${ji(o)}`);c.tinymce.EditorManager.activeEditor.windowManager.alert(r)};e.addCommand("InsertWikiMarkup",(()=>{var n,a=Ei();return e.windowManager.open(Mi.dialog,{buttons:[{label:"confluence.conf_insert_button_title",action:()=>{e.windowManager.setBusy(Mi.dialog.id,!0),Si({api:xi.WIKI[Di()].api,successCallback:o,errorCallback:r,textToConvert:s()(`#${Mi.markupEditId}`).val(),setBusy:!0})}}],plugin_url:t,helpLink:a.helpLink,hintText:"confluence.conf_wikimarkup_hint",cssClass:"insert-wiki-markup-panel"}),(e=>{var t=s()("#wysiwygTextarea_ifr").contents().find("head").html(),n=s()("<iframe tabindex='-1' id='insert-wiki-markup-preview' />");s()(`#${e}`).append(n);var o=n.contents(),r=o[0];r.open(),r.write('\n    <!DOCTYPE html>\n    <html class="insert-wiki-markup-dialog">\n        <head>\n        </head>\n        <body class="wiki-content previewWiki">\n        </body>\n    </html>\n'),r.close(),o.find("head").html(t),ki=o.find("body")})(Mi.previewAreaId),Ti((t=>e.translate(t)),a).on("change",Oi),s()(`#${Mi.markupEditId}`).on("keydown",(function(){clearTimeout(n),n=d.a.setTimeout(Ii,Mi.serverRequestTimer)})),!1})),e.ui.registry.addButton("insertwikimarkup",{text:"confluence.conf_wikimarkup_desc",onAction:function(){e.execCommand("InsertWikiMarkup")}})},getInfo:()=>({longname:"InsertWikiMarkip",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com/",version:"1.1"})}}n(67);function Li(){return{init(e){c.tinymce.Env.os.isiOS()&&setTimeout((()=>{s()(e.getBody()).addClass("ios")}),0)},getInfo:()=>({longname:"iOS Comments Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Bi(){return{init(e){var t=c.Confluence.Editor;function n(){if(t.UI.isFormEnabled()&&e.isDirty()&&!t.isEmpty())return e.translate("unsaved.comment.lost")}e.on("Init",(()=>{Object(C.a)("beforeunload",n)})),e.on("Remove",(()=>{Object(C.c)("beforeunload",n)}))},getInfo:()=>({longname:"Confluence Leave Comment",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Ri(){return{init(e){var t=c.Confluence.Editor;function n(){if(t.UI.isFormEnabled()&&e.isDirty()&&!t.isEmpty())return e.translate("unsaved.template.lost")}e.on("Init",(()=>{Object(C.a)("beforeunload",n)})),e.on("Remove",(()=>{Object(C.c)("beforeunload",n)}))},getInfo:()=>({longname:"Confluence Leave Template",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Pi(){var e=c.Confluence.Editor.LinkBrowser;return{init:t=>{t.ui.registry.addButton("linkbrowserbutton",{text:"confluence.conflink_desc",className:"mce_conflink",onAction:function(){t.execCommand("mceConflink")}}),t.addCommand("mceConflink",(()=>(e.open({bookmarkManager:xt}),!1))),t.addCommand("mceConfAttachments",(()=>(e.open({panelKey:e.ATTACHMENTS_PANEL,bookmarkManager:xt}),!1)))},getInfo:()=>({longname:"Confluence Link Browser",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function $i(){return{init(e){var t=e.options.get("atl_macro_class")||"wysiwyg-macro",n="td.wysiwyg-macro-body",o=function(e){return 3===e.nodeType},r=function(t,n){return e.dom.getParent(t,n)},a=function(e){return o(e)?e.length:e.childNodes.length},i=function(e){return r(e,"table."+t)},l=function(e){return null!==i(e)},s=function(e,t){return e.bottom<=t.top&&e.top<t.bottom},d=function(e,t){return e.top>=t.bottom&&e.bottom>t.top},u=function(e,t){var n=e.childNodes;if(0===n.length)return{node:e,offset:t};if(t<n.length)return{node:n[t],offset:0};var o=n[n.length-1];return"img"===e.nodeName.toLowerCase()?{node:o,offset:1}:{node:o,offset:a(o)}},g=function(t){if(function(e){return 1===e.nodeType}(t))return c.tinymce.toArray(t.getClientRects());if(o(t)){var n=e.dom.createRng();return n.selectNode(t),c.tinymce.toArray(n.getClientRects())}return[]},m=function(t,n){return function(t,n){var r=e.selection.getRng();if(r){var a=u(1===t?r.startContainer:r.endContainer,1===t?r.startOffset:r.endOffset),i=a.node;if(o(i)&&a.offset>0){var l=i.splitText(a.offset),s=n(1===t?i:l);return 0===l.length&&e.dom.remove(l),s}return n(i)}}(n,(function(e){var o=function(e,t,n,o){var r,a=new c.tinymce.dom.TreeWalker(e,t),i=1===n?a.prev:a.next,l=1===n?s:d,u=e,m=0,p=[];do{var f=g(u).filter((function(e){return 0!==e.height&&0!==e.width}));if(0!==f.length&&(1===n&&f.reverse(),f.forEach((function(e){if(0!==e.height&&0!==e.width){r&&l(e,r)&&m++;var t=p[m];p[m]=t?t.concat([e]):[e],r=e}})),o(p)))return p}while(u=i());return p}(e,t,n,(function(e){return e.length>1}));return o.length<=1}))},p=function(t,n){var o=e.selection.getRng();if(o){var r=1===n?o.startContainer:o.endContainer,i=1===n?o.startOffset:o.endOffset;return(1===n&&i<=0||-1===n&&i>=a(r))&&function(e,t,n){for(var o,r=u(n?t.startContainer:t.endContainer,n?t.startOffset:t.endOffset),i={node:e,offset:n?0:a(e)};!o||i.node!==o.node;){if(r.node===i.node&&r.offset===i.offset)return!0;o=i,i=u(i.node,i.offset)}return!1}(t,o,1===n)}};e.on("init",(function(){e.on("keydown",(function(t){var o,r,s=e.selection.getRng(),d=function(e){return(e.keyCode===c.tinymce.util.VK.LEFT||e.keyCode===c.tinymce.util.VK.RIGHT)&&e.shiftKey}(t),g=function(e){return(e.keyCode===c.tinymce.util.VK.UP||e.keyCode===c.tinymce.util.VK.DOWN)&&e.shiftKey}(t);if((d||g)&&s&&function(e){return l(e.startContainer)&&l(e.endContainer)}(s)){var f=(o=s.startContainer,r=i(o),e.dom.select("th,td",r)[0]),h=t.keyCode===c.tinymce.util.VK.UP||t.keyCode===c.tinymce.util.VK.LEFT?1:-1,v=g&&m(f,h),b=d&&p(f,h);(v||b)&&(!function(t,n){var o=e.selection.getRng();if(o){var r=o.cloneRange(),i=u(t,n?0:a(t));n?r.setStart(i.node,i.offset):r.setEnd(i.node,i.offset),e.selection.setRng(r,!n)}}(f,1===h),t.preventDefault(),t.stopImmediatePropagation())}if(t.keyCode===c.tinymce.util.VK.ENTER||t.keyCode===c.tinymce.util.VK.BACKSPACE||t.keyCode===c.tinymce.util.VK.DELETE){if(!s||s.collapsed)return;e.getDoc().querySelectorAll(`${n}[data-mce-selected]`).forEach((e=>{e.removeAttribute("data-mce-selected")}))}}),!0),e.on("mouseup",(function(t){if(3===t.detail){var o=e.selection.getRng();if(o){var a=r(o.startContainer,n),i=r(o.endContainer,n);if(a===i)return;if(null!==a&&!a.contains(o.endContainer)&&a.lastChild){var l=e.dom.createRng();l.setStart(o.startContainer,o.startOffset),l.setEndAfter(a.lastChild),e.selection.setRng(l,!0)}if(null!==i&&!i.contains(o.startContainer)&&i.firstChild){var s=e.dom.createRng();s.setStartBefore(i.firstChild),s.setEnd(o.endContainer,o.endOffset),e.selection.setRng(s,!0)}}}}))}))},getInfo:()=>({longname:"Macro Navigation",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Hi(){return{init(e){e.on("Init",(()=>{e.addCommand("mceConfMacroBrowser",c.tinymce.confluence.macrobrowser.macroBrowserToolbarButtonClicked)}))},getInfo:()=>({longname:"Confluence Macro Browser",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Fi(){var e=c.tinymce.util.VK;return{init(t){var n=this;function o(e){t.on("KeyDown",e),c.tinymce.Env.browser.isFirefox()&&(t.on("KeyPress",e),t.on("KeyUp",e))}function r(e,t){return e&&1===e.childNodes.length&&s()(e).is(t)&&s()(e.firstChild).is("br")}function a(e){if(!e.collapsed)return!1;var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;if(!t||!t.parentNode)return!1;for(;t&&!s()(t).is(".wysiwyg-macro-body");){if(t.previousSibling||t.nextSibling)return!1;t=t.parentNode}return!0}t.on("Init",(()=>{t.on("SetContent",(e=>{e.selection&&c.tinymce.each(t.dom.select("p > .wysiwyg-macro"),(e=>{var n=t.dom.getParent(e.parentNode,"p");try{t.dom.split(n,e)}catch(e){}}))}))})),t.on("SetContent",(()=>{c.tinymce.each(t.dom.select('.wysiwyg-macro[data-macro-body-type="PLAIN_TEXT"] .wysiwyg-macro-body'),(e=>{t.dom.select("pre",e).length||t.dom.setHTML(e,"<pre><br /></pre>")}))})),t.on("KeyDown",(n=>{var o=t.selection,r=[e.BACKSPACE,e.DELETE,e.ENTER,e.ESCAPE];if(-1==s.a.inArray(n.keyCode,r)&&!function(t){var n=!1;return 0===t.charCode&&(n=-1!=s.a.inArray(t.keyCode,[e.SHIFT,e.CTRL,e.ALT,e.META])),n}(n)&&!o.isCollapsed()&&!(n.ctrlKey||n.metaKey||!c.tinymce.Env.os.isMacOS()&&n.altKey)){var a=o.getNode();if(xn.isMacroWithBody(a)){var i=s()(".wysiwyg-macro-body",a);i.length>0&&(p.a.debug("MacroPlaceholderPlugin: Adjusting text selection to only include macro's body."),o.select(i[0],!0))}}})),t.on("DblClick",(e=>{var t=s()(e.target),n=t.closest("[data-macro-name]");if(n.length){if(p.a.debug("Double-click triggered inside a macro."),n.attr("data-macro-body-type")&&t.closest(".wysiwyg-macro-body").length)return void p.a.debug("Double-click was inside bodied macro content. Skipping.");xn.editMacro(n),c.Confluence.PropertyPanel&&c.Confluence.PropertyPanel.current&&c.Confluence.PropertyPanel.destroy()}})),t.addCommand("mceConfRemoveMacro",(e=>{s()(e).remove()})),n._isCursorInMostNestedElement=a,function(){function e(e){if(!e.collapsed)return!1;var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;return t&&t.previousSibling&&!t.nextSibling&&r(t,"p, pre")}(u()||c.tinymce.Env.browser.isFirefox())&&o((n=>{var o=t.selection.getRng();if(46===n.keyCode&&o&&e(o))return c.tinymce.dom.Event.cancel(n)})),n._isCursorInLastParagraphOrPre=e}(),u()&&o((e=>{if(8!==e.keyCode&&46!==e.keyCode)return!0;var n=t.selection.getRng();if(!n)return!0;var o=3===n.startContainer.nodeType?n.startContainer.parentNode:n.startContainer;return!(function(e){if(!e.collapsed)return!1;var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;return a(e)&&t&&1===t.childNodes.length&&s()(t.firstChild).is("br")}(n)&&(8!==e.keyCode||!s()(o).is("li")))||c.tinymce.dom.Event.cancel(e)})),function(){function e(e){if(!e.collapsed)return!1;var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;return t&&0===e.startOffset&&s()(t).is(".wysiwyg-macro-body > ul > li")&&1===t.childNodes.length&&s()(t.firstChild).is("br")}u()&&o((n=>{var o=t.selection.getRng();return 8!==n.keyCode||!o||(!e(o)||(t.execCommand("Outdent"),c.tinymce.dom.Event.cancel(n)))})),n._isCursorInsideMacroPlacholderInsideListItemContainingSoloBr=e}(),function(){function e(e){var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer,n=s()(t);return 0===e.startOffset&&r(t,"p, pre")&&n.parent().is("td.wysiwyg-macro-body")&&t&&!t.previousSibling&&t.nextSibling&&r(t.nextSibling,"p, pre")}u()&&o((n=>{var o=t.selection.getRng();if(46!==n.keyCode||!o)return!0;var r=3===o.startContainer.nodeType?o.startContainer.parentNode:o.startContainer,a=s()(r);if(e(o)){var i=r.nextSibling;return a.remove(),t.selection.select(i,!0),c.tinymce.dom.Event.cancel(n)}})),n._isCursorInFirstParagraphWhenThereAreTwoEmptyParagraphs=e}(),function(){function e(e){var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer,n=s()(t);return 0===e.startOffset&&r(t,"p, pre")&&n.parent().is("td.wysiwyg-macro-body")&&t&&!t.nextSibling&&t.previousSibling&&!t.previousSibling.previousSibling&&r(t.previousSibling,"p, pre")}u()&&o((n=>{var o=t.selection.getRng();if(8!==n.keyCode||!o)return!0;var r=3===o.startContainer.nodeType?o.startContainer.parentNode:o.startContainer,a=s()(r);if(e(o)){var i=r.previousSibling;return a.remove(),t.selection.select(i,!0),c.tinymce.dom.Event.cancel(n)}})),n._isCursorInSecondParagraphWhenThereAreTwoEmptyParagraphs=e}(),function(){function e(e){if(!e||!e.collapsed)return!1;var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer,n=s()(t);return!(!t||e.startOffset>0)&&(vn.normalize(t),t&&0===e.startOffset&&r(t,"p, pre")&&n.parent().is("td.wysiwyg-macro-body")&&!t.previousSibling&&!t.nextSibling)}(u()||c.tinymce.Env.browser.isFirefox())&&o((n=>8!==n.keyCode&&46!==n.keyCode||(e(t.selection.getRng())?c.tinymce.dom.Event.cancel(n):void 0))),n._isCursorInSoloParagraphOrPreInsidePlaceholder=e}(),function(){function e(e){return e&&e.parentNode&&"BR"===e.nodeName&&e===e.parentNode.lastChild}function r(t){if(!t.collapsed)return!1;var n=t.startContainer;return n&&0===t.startOffset&&3===n.nodeType&&a(t)&&1===n.nodeValue.length&&!n.previousSibling&&(!n.nextSibling||e(n.nextSibling))}function i(t){if(!t.collapsed)return!1;var n=t.startContainer;return n&&1===t.startOffset&&3===n.nodeType&&a(t)&&1===n.nodeValue.length&&!n.previousSibling&&(!n.nextSibling||e(n.nextSibling))}function l(e){if(!e.collapsed)return!1;var t=e.startContainer;return t&&0===e.startOffset&&1===t.nodeType&&1===t.childNodes.length&&a(e)&&!t.previousSibling&&!t.nextSibling}function d(e){if(!e.collapsed)return!1;var t=e.startContainer;return t&&1===e.startOffset&&1===t.nodeType&&1===t.childNodes.length&&a(e)&&!t.previousSibling&&!t.nextSibling}(u()||c.tinymce.Env.browser.isFirefox())&&o((e=>{if(8!==e.keyCode&&46!==e.keyCode)return!0;var n=t.selection.getRng();if(!n)return!0;var o=3===n.startContainer.nodeType?n.startContainer.parentNode:n.startContainer;return!s()(o).closest(".wysiwyg-macro-body").size()||(vn.normalize(o),!(46===e.keyCode&&(r(n)||l(n))||8===e.keyCode&&(i(n)||d(n)))||(o.lastChild&&!s()(o.lastChild).is("br")&&s()(o).append("<br/>"),s()(o.firstChild).remove(),t.selection.select(o,!0),c.tinymce.dom.Event.cancel(e)))})),n._isCursorBehindOnlyCharacterInNestedElement=r,n._isCursorAfterOnlyCharacterInNestedElement=i,n._isCursorBehindOnlyChildInNestedElement=l,n._isCursorAfterOnlyChildInNestedElement=d}(),function(){function e(e){if(e.collapsed)return!1;return 0===e.startOffset&&r(e.startContainer,(function(e){return!e.previousSibling}))&&function(e,t){if(!e)return!1;return 3===e.nodeType?t===e.nodeValue.length:1===e.nodeType&&(1===e.childNodes.length&&s()(e.firstChild).is("br")?0===t:t===e.childNodes.length)}(e.endContainer,e.endOffset)&&r(e.endContainer,(function(e){return!e.nextSibling}))}function r(e,t){if(!e)return!1;if(s()(e).is(".wysiwyg-macro-body"))return!0;do{if(!t(e))return!1;e=e.parentNode}while(e&&!s()(e).is(".wysiwyg-macro-body"));return!0}u()&&o((n=>{if(8!==n.keyCode&&46!==n.keyCode)return!0;var o=t.selection.getRng();if(o&&e(o)){var r=s()(o.startContainer).closest(".wysiwyg-macro-body");if(r.length>0){var a,i=s()(r[0].firstChild).is("pre");return t.undoManager.add(),r.empty(),a=i?s()("<pre><br/></pre>").appendTo(r):s()("<p><br/></p>").appendTo(r),t.selection.select(a[0],!0),c.tinymce.dom.Event.cancel(n)}}return!0})),n._isMacroBodySelected=e}(),function(){function e(e){if(!e||!e.collapsed)return!1;var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer,n=s()(t);return 0===e.startOffset&&r(t,"p")&&n.next().is("table")}u()&&o((n=>{if(46===n.keyCode&&e(t.selection.getRng()))return c.tinymce.dom.Event.cancel(n)})),n._isCursorInEmptyParagraphPrecedingPlaceholder=e}(),function(){function r(e){return!e||s()(e.parentNode).is(".wysiwyg-macro td")?null:s()(e.parentNode).is("p")?e.parentNode:r(e.parentNode)}function a(e){return e?3===e.nodeType?e:a(e.firstChild)||a(e.nextSibling):null}function i(e){return e&&"PRE"!==e.nodeName&&"TD"!==e.nodeName?"BR"===e.nodeName?e:i(e.previousSibling)||i(e.parentNode):null}function l(e){var t,n;return s()(e.commonAncestorContainer).closest(".wysiwyg-macro td").length>0&&(i(e.startContainer)||(t=a(r(e.startContainer)))),(n=s()(e.commonAncestorContainer).closest(".wysiwyg-macro td > pre")).length>0&&(i(e.startContainer)||(t=a(n[0]))),t&&(e=e.cloneRange()).setStart(t,0),e}u()&&c.tinymce.Env.os.isMacOS()&&o((n=>{var o=t.selection.getRng();if(o&&(n.metaKey||n.ctrlKey)&&n.shiftKey&&n.keyCode===e.LEFT){var r=l(o);if(r!==o)return t.selection.setRng(r),c.tinymce.dom.Event.cancel(n)}})),n._selectTillStart=l}(),t.on("KeyDown",(e=>{if(e.keyCode===c.tinymce.util.VK.TAB){var n=t.selection.getRng();if(n){var o=3===n.startContainer.nodeType?n.startContainer.parentNode:n.startContainer;if(s()(o).is(".wysiwyg-macro-body > pre")){t.undoManager.beforeChange(),t.undoManager.add();var r=t.getDoc().createTextNode("\t");return n.insertNode(r),t.selection.setCursorLocation(r,1),t.undoManager.add(),c.tinymce.dom.Event.cancel(e)}}}}),!0)},getInfo:()=>({longname:"Macro Place Holder plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"})}}function zi(){return{init:e=>{e.on("init",(()=>{var e={contentId:m.a.get("content-id")},t=s()("#rte-savebar-tinymce-plugin-point");t.append(`\n    <span class="minor-edit toolbar-item">\n        <input id="notifyWatchers" name="notifyWatchers" value="true" type="checkbox" checked>\n        <label for="notifyWatchers">\n          <span>${(e=>Object(ln.a)(e))("editor.minor.edit")}</span>\n        </label>\n    </span>\n`);var n=t[0].querySelector('input[id="notifyWatchers"]'),o=yi.get("notifyWatchers",e.contentId,!0);null!==o&&(n.checked=o),Pe(n,"change",(()=>{yi.set("notifyWatchers",e.contentId,!0,n.checked)}))}))},getInfo:()=>({longname:"Confluence Notify Watchers",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Ui(){var e=function(e){this.fileTypes=e};e.prototype.beforeParamsSet=function(e){if(!e.page&&!e.date&&!e.space){var t=m.a.get("content-type");"page"==t||"blogpost"==t?e.page=c.document.getElementById("content-title").value:"comment"==t&&(e.page=m.a.get("page-title"))}if(e.date){var n=e.date.split("/");e.page=["",n[2],n[0],n[1],e.page].join("/")}return e.space&&(e.page=`${e.space}:${e.page}`),e},e.prototype.beforeParamsRetrieved=function(e){if(e.page){var t=e.page.split(":");t.length>1&&(e.space=t[0],e.page=t[1]);var n=e.page.split("/");n.length>1&&(e.date=[n[2],n[3],n[1]].join("/"),e.page=n[4]);var o=m.a.get("content-type");(("page"==o||"blogpost"==o)&&e.page==c.document.getElementById("content-title").value||"comment"==o&&e.page==m.a.get("page-title"))&&delete e.page}return e},e.prototype.fields={attachment:function(e){var t={fileTypes:this.fileTypes},n=c.AJS.MacroBrowser.ParameterFields.attachment(e,t);return n.dependencyUpdated=function(e,t){p.a.debug(`attachment:dependencyUpdated called: ${e}, ${t}`);var n,o,r=(n={},o=t.split(":",2),n.spaceKey=2==o.length&&o[0]||m.a.get("space-key"),n.title=o[o.length-1],0==n.title.indexOf("/")&&(n.postingDay=n.title.substr(1,10),n.title=n.title.substr(12)),n.title==c.document.getElementById("content-title").value&&(n.title=""),n.title||(m.a.get("new-page")?n.draftId=m.a.get("content-id"):n.pageId=m.a.get("page-id")),n);this.getData(r)},n},spacekey:function(e){return c.AJS.MacroBrowser.ParameterFields._hidden(e,{})},date:function(e){return c.AJS.MacroBrowser.ParameterFields._hidden(e,{})},"confluence-content":function(e){return c.AJS.MacroBrowser.ParameterFields["confluence-content"](e,{dependencies:["name"]})}},c.AJS.MacroBrowser.Macros.viewdoc=new e(["doc","docx"]),c.AJS.MacroBrowser.Macros.viewpdf=new e(["pdf"]),c.AJS.MacroBrowser.Macros.viewxls=new e(["xls","xlsx"]),c.AJS.MacroBrowser.Macros.viewppt=new e(["ppt","pptx"]),c.AJS.MacroBrowser.Macros.viewfile={updateSelectedMacro(e){var t=e.params[""]||e.params.name;if(t){var n=t.lastIndexOf(".");if(n>0){var o=t.substring(n+1);o&&("doc"==o&&"docx"==o&&(e.name="viewdoc"),"pdf"==o&&(e.name="viewpdf"),"ppt"==o&&"pptx"==o&&(e.name="viewppt"),"xls"==o&&"xlsx"==o&&(e.name="viewxls"))}}}}}n(69),n(70),n(71);var _i,Qi=n(16),Wi=n.n(Qi),Vi=(e,t,n,o)=>{var r=s()("#rte-button-restrictions"),a=r.find(".icon"),i="aui-iconfont-locked aui-iconfont-unlocked icon-red",l="",c="";if(e||t){var d=e?"aui-iconfont-locked icon-red":"aui-iconfont-unlocked icon-red";a.removeClass(i).addClass(d),l=Object(ln.a)("page.restrictions.apply"),c=Object(ln.a)("editor.restrictions.icon.editor-restricted")}else a.removeClass(i).addClass("aui-iconfont-unlocked"),n?(l=Object(ln.a)("page.restrictions.apply"),c=Object(ln.a)("editor.restrictions.icon.editor-restricted")):(l=Object(ln.a)("page.restrictions.none"),c=Object(ln.a)("editor.restrictions.icon.editor-unrestricted"));r.attr("data-tooltip",l),r.attr("aria-label",c),r.data("explicit-restrictions",e),r.data("inherited-restrictions",t),r.data("restrictionsHash",o)},Ki=(e,t)=>{if(void 0!==t.restrictionsHash){var n=s()("#rte-button-restrictions");if(n.data("restrictionsHash")!==t.restrictionsHash)if(s()("#update-page-restrictions-dialog").is(":visible")&&r.a.PagePermissions.updateRestrictionsDialog)r.a.PagePermissions.updateRestrictionsDialog(),n.data("restrictionsHash",t.restrictionsHash);else{var o=""!==t.restrictionsHash,a=t.hasViewRestrictions,i=!!n.data("inherited-restrictions");Vi(a,i,o,t.restrictionsHash)}}},Gi=()=>{Object(C.a)("editor-heartbeat",Ki);Object(C.a)("edit-page-restrictions-updated",((e,t)=>{Vi(t.hasExplicitRestrictions,t.hasInheritedRestrictions,t.hasAnyExplicitRestrictions,t.restrictionsHash)}))},Yi=n(27),Ji=n.n(Yi),qi=n(15),Zi=n(19),Xi=n(13),el=()=>{var e,t,n=()=>m.a.get("new-page"),o={spinner:s()("#rte-spinner"),saveButton:(e="#rte-button-publish",t=Object(Xi.saveButton)({contentType:m.a.get("content-type"),sharedDraftsEnabled:m.a.getBoolean("shared-drafts"),isNewPage:n()}),s()(e).replaceWith(t),s()(e)),overwriteButton:s()("#rte-button-overwrite"),editButton:s()("#rte-button-edit"),previewButton:s()("#rte-button-preview"),cancelButton:s()("#rte-button-cancel"),versionCommentInput:s()("#versionComment"),watchPageCheckbox:s()("#watchPage"),watchPageToolbarGroup:s()(".toolbar-group-watch-page")};o.buttons=[o.saveButton,o.overwriteButton,o.editButton,o.previewButton,o.cancelButton];var a=!1,i=(e,t)=>{if(t=t||o.buttons)for(var n=0;n<t.length;n++)l(e,t[n])},l=(e,t)=>{t&&(e?(t.removeAttr("aria-disabled"),t.removeClass("disabled"),t.is("button")&&t.removeAttr("disabled")):(t.attr("aria-disabled","true"),t.addClass("disabled"),t.is("button")&&t.attr("disabled","disabled")))},d=e=>e.length&&"true"!==e.attr("aria-disabled"),u=()=>n()?"":Object(ln.a)("edit.name")+" - ";return Object(C.a)("editor-shared-drafts-published",(()=>{var e,t=null===(e=/\(.+\)/g.exec(o.saveButton.data("tooltip")))||void 0===e?void 0:e[0];o.saveButton.text(Object(Xi.saveButtonText)({contentType:m.a.get("content-type"),sharedDraftsEnabled:m.a.getBoolean("shared-drafts"),isNewPage:n()})).attr("title",Object(Xi.saveButtonTitle)({contentType:m.a.get("content-type"),sharedDraftsEnabled:m.a.getBoolean("shared-drafts"),isNewPage:n()})+t).tooltip({gravity:"s"})})),Object(C.a)("synchrony.history.evicted",(()=>{a=!0,l(!1,o.versionCommentInput),(()=>{try{r.a.Rte.getEditor().plugins.customtoolbar.disableToolbar(!0),r.a.Rte.getEditor().plugins.customtoolbar.toggleToolbarButtons(!0,!0,!0)}catch(e){}try{r.a.Rte.getEditor().mode.set("readonly")}catch(e){}try{r.a.Rte.getEditor().plugins.pagelayoutplugin.disableContent()}catch(e){}try{s()("input#content-title").attr("disabled","true")}catch(e){}})()})),o.setButtonsState=i,o.setButtonState=l,o.isButtonEnabled=d,o.registerFormButton=(e,t)=>{var n;o[e]=t,null===(n=o.buttons)||void 0===n||n.push(t)},o.postingDatePicker=null,o.isFormEnabled=()=>{if(o.buttons)for(var e=0;e<o.buttons.length;e++){var t;if(d(null===(t=o.buttons)||void 0===t?void 0:t[e]))return!0}return!1},o.toggleSavebarBusy=e=>{if(!0!==a)if(e){var t;if(null==o||null===(t=o.isFormEnabled)||void 0===t||!t.call(o))return!1;o.spinner.addClass("aui-icon-wait"),i(!1)}else o.spinner.removeClass("aui-icon-wait"),i(!0);return!0},o.init=function(){Zi.a.init(),c.Confluence.Editor.addSaveHandler((e=>{var t,n;null!=o&&null!==(t=o.isButtonEnabled)&&void 0!==t&&t.call(o,o.saveButton)?(null==o||null===(n=o.toggleSavebarBusy)||void 0===n||n.call(o,!0),Object(C.b)("confluence.editor.on.save")):(e.stopImmediatePropagation(),e.preventDefault())})),Object(C.b)("rte.init.ui"),c.Confluence.Editor.isNewPage()&&s()("#content-title").focus().select(),c.Confluence.Editor.addCancelHandler((e=>{var t,n;(c.Confluence.Editor.getNumConcurrentEditors()>1&&r.a.Confluence.Analytics.publish("rte.notification.concurrent-editing.cancel",{numEditors:c.Confluence.Editor.getNumConcurrentEditors(),pageId:r.a.params.pageId,draftType:r.a.params.draftType}),m.a.getBoolean("shared-drafts")&&["page","blogpost"].includes(m.a.get("content-type")))&&(null!=o&&null!==(t=o.isButtonEnabled)&&void 0!==t&&t.call(o,o.cancelButton)?null==o||null===(n=o.toggleSavebarBusy)||void 0===n||n.call(o,!0):(e.stopImmediatePropagation(),e.preventDefault()));Zi.a.process(e)})),"comment"===m.a.get("content-type")&&c.Confluence.Editor.addSaveHandler((()=>{var e;if(r.a.Rte.Content.isEmpty())return Object(qi.notify)("warning",Object(ln.a)("content.empty")),null==o||null===(e=o.toggleSavebarBusy)||void 0===e||e.call(o,!1),!1})),["comment","template"].includes(m.a.get("content-type"))&&c.Confluence.Editor.addCancelHandler((e=>{var t;if(null!=o&&null!==(t=o.isFormEnabled)&&void 0!==t&&t.call(o)&&c.Confluence.Editor.hasContentChanged()&&!c.Confluence.Editor.isEmpty()){var n="comment"===m.a.get("content-type")?Object(ln.a)("unsaved.comment.lost"):Object(ln.a)("unsaved.template.lost");if(!window.confirm(n))return e.stopImmediatePropagation(),!1}})),o.versionCommentInput.on("keypress",(e=>{"Enter"===e.key&&Zi.a.process(e)})),c.Confluence.Editor.addSaveHandler((()=>{c.Confluence.Editor.getNumConcurrentEditors()>1&&r.a.Confluence.Analytics.publish("rte.notification.concurrent-editing.save",{numEditors:c.Confluence.Editor.getNumConcurrentEditors(),pageId:r.a.params.pageId,draftType:r.a.params.draftType})})),c.Confluence.Editor.addSubmitHandler((e=>c.Confluence.Editor.contentFormSubmit(e))),c.Confluence.Editor.currentEditMode=c.Confluence.Editor.MODE_RICHTEXT,o.editButton.click((e=>{var t;null!=o&&null!==(t=o.isFormEnabled)&&void 0!==t&&t.call(o)&&(Ta(c.Confluence.Editor.MODE_RICHTEXT),setTimeout((()=>{r.a.Rte.getEditor().focus(),c.tinymce.Env.browser.isFirefox()&&c.Confluence.Editor.bookmark&&r.a.Rte.getEditor().selection.moveToBookmark(c.Confluence.Editor.bookmark)}),0),a||Ji.a.enableElement(o.cancelButton)),e.preventDefault()}));var e=()=>{s()("#rte-ellipsis-menu").is(":visible")&&s()("#rte-button-ellipsis").trigger("aui-button-invoke")};o.previewButton.click((t=>{var n;t.preventDefault(),a||null!=o&&null!==(n=o.isFormEnabled)&&void 0!==n&&n.call(o)&&c.Confluence.Editor.currentEditMode!==c.Confluence.Editor.MODE_PREVIEW&&(e(),i(!1),o.spinner.addClass("aui-icon-wait"),c.tinymce.Env.browser.isFirefox()&&!c.Confluence.Editor.bookmark&&(c.Confluence.Editor.bookmark=c.tinymce.activeEditor.selection.getBookmark()),Ta(c.Confluence.Editor.MODE_PREVIEW,{errorCallback:()=>{i(!0),o.spinner.removeClass("aui-icon-wait")}}),["comment","template"].includes(m.a.get("content-type"))?Ji.a.disableElement(o.cancelButton):Ji.a.enableElement(o.cancelButton))})),s()("#rte-button-labels").bind("updateLabel",(()=>{var e=+m.a.get("num-labels")||0,t=Object(ln.a)("editor.labels.zero");1===e?t=Object(ln.a)("editor.labels.singular",e):e>1&&(t=Object(ln.a)("editor.labels.plural",e)),s()("#rte-button-labels").attr("data-tooltip",t)})),s()("#draft-status-lozenge").length&&s()("#draft-status-lozenge").tooltip();var t=s()("#PostingDate");if(t.length){var n,d,g=new Date;t.attr("max",`${g.getFullYear()}-${(g.getMonth()+1).toString().padStart(2,"0")}-${g.getDate().toString().padStart(2,"0")}`),o.postingDatePicker=t.datePicker({overrideBrowserDefault:!0}),null==o||null===(n=o.postingDatePicker)||void 0===n||null===(d=n.hide)||void 0===d||d.call(n)}s()("#wysiwygTextarea_parent .mceProgress, #wysiwygTextarea_parent .mceBlocker").on("click",(()=>{r.a.Rte.getEditor().focus()})),s()(window).bind("render-content-loaded",((e,t)=>{var n,r=s()("#previewArea iframe");r.contents().find("body")[0]==t&&(c.Confluence.Editor.previewFrameOnload(t,r),n=!0,[o.saveButton,o.overwriteButton,o.editButton,o.previewButton].forEach((e=>{l(n,e)})),r.focus(),window.focus(),s()(document).trigger("iframeAppended",r))})),m.a.get("heartbeat")&&(c.Confluence.Editor.heartbeat(),c.Confluence.Editor.heartbeatType.normal(),Object(C.a)("rte-destroyed",c.Confluence.Editor.heartbeatType.cleanup)),Object(C.a)("watchpage.pageoperation",(()=>{var e;null==o||null===(e=o.toggleWatchPage)||void 0===e||e.call(o,!1)})),Object(C.a)("unwatchpage.pageoperation",(()=>{var e;null==o||null===(e=o.toggleWatchPage)||void 0===e||e.call(o,!0)})),m.a.get("new-page")&&"inlinecommentform"===m.a.get("form-name")&&(document.title=Object(ln.a)("edit.name")+document.title);var p=document.title;m.a.get("new-page")&&s.a.trim(s()("input#content-title").val())&&(document.title=u()+s()("input#content-title").val()+" - "+m.a.get("space-name")+" - "+m.a.get("site-title")),s()("input#content-title").on("change input",(function(){if("template"!==m.a.get("content-type")){var e=u();this.value.trim()?document.title=e+this.value+" - "+m.a.get("space-name")+" - "+m.a.get("site-title"):document.title=p}})),s()("body",s()("#wysiwygTextarea_ifr").contents()).click(e),Object(C.b)("init.rte-control")},o.toggleWatchPage=e=>{e&&"comment"===m.a.get("content-type")?(o.watchPageToolbarGroup.show(),o.watchPageCheckbox.length&&(o.watchPageCheckbox[0].checked=!1)):o.watchPageToolbarGroup.hide()},o},tl=n(36),nl=()=>{var e,t;if(null!==c.Confluence&&void 0!==c.Confluence&&null!==(e=c.Confluence.Editor)&&void 0!==e&&null!==(t=e.ImageDialog)&&void 0!==t&&t.panelComponent){var n=c.Confluence.Editor.FileDialog||{},o=n.eventListener,r=n.ExternalPanelView,a=n.SearchPanelView,i=n.AttachmentsPanelView,l=(c.Confluence.Editor.ImageDialog||{}).panelComponent;if("template"!==m.a.get("content-type")){var s=new i({eventListener:o});l.push(s)}l.push(new r),l.push(new a)}},ol=(n(75),n(78),()=>{Object(C.a)("rte-ready",(()=>{var e,t;null===Wi.a||void 0===Wi.a||null===(e=Wi.a.unuse)||void 0===e||e.call(Wi.a),null===Wi.a||void 0===Wi.a||null===(t=Wi.a.use)||void 0===t||t.call(Wi.a)})),Object(C.a)("rte-ready",(()=>{m.a.getBoolean("collaborative-content")||s()('meta[name="ajs-collaborative-editor-status"]').attr("content","off"),c.Confluence.Editor.UI.saveButton.bind("click",ga),Ia()})),Object(C.a)("editor.error.message",((e,t)=>{da(t)})),Object(C.a)("dismiss.editor.error.message",((e,t)=>{Xr.a.closeMessages([t.messageKey]),t.enablePublish&&ca(!0)})),c.Confluence.Editor=s.a.extend(c.Confluence.Editor||{},Oa,r.a.Editor),r.a.toInit((e=>{e(c.document).ajaxError(((e,t)=>{if(405===t.status)try{var n=JSON.parse(t.responseText).reason;void 0!==n&&"READ_ONLY"===n&&(p.a.info("*** READ_ONLY mode detected ***"),Object(C.b)("rte.heartbeat-error",t))}catch(e){p.a.error("Cannot parse xhr.responseText: "+e)}})),Object(C.a)("init.rte",c.Confluence.Editor.onInit)})),r.a.Editor=c.Confluence.Editor,Object(C.a)("init.rte",(()=>{var e,t=el();c.Confluence.Editor.UI=t,null==t||null===(e=t.init)||void 0===e||e.call(t)})),s.a.fn.sizeToFit=gi.sizeToFit,c.Confluence.Editor.ImageDialog=gi,c.Confluence.Editor.defaultInsertImageDialog=gi.defaultInsertImageDialog,c.Confluence.Editor.insertImageDialog=gi.insertImageDialog,Object(tl.a)().then(nl),r.a.PagePermissions=r.a.PagePermissions||{},s.a.extend(r.a.PagePermissions,{updateEditPageRestrictions:Vi}),r.a.toInit(Gi)}),rl=n(31),al=n.n(rl),il=e=>{var t=e.type;return`<div class="cell ${t}" data-type="${t}"><div class="innerCell"></div></div>`},ll=()=>`<div class="contentLayout2"><div class="columnLayout single" data-layout="single">${il({type:"normal"})}</div></div>`,sl={name:"pagelayout-none",columns:0},cl=e=>{var t=s()(e.getBody()),n=(e,t)=>{t.attr("contenteditable","false");s()(".innerCell",e).each((function(){var e=s()(this);e.attr("contenteditable","true"),e.children().length||e.append("<p><br /></p>")}))},o=e=>{for(var t=s()(".cell, .header, .footer",e),n=0;n<t.length;n++){var o=s()(t[n]),r=o.html();s()(".innerCell",o).length||(o.removeAttr("contenteditable"),o.html('<div class="innerCell">'+r+"</div>"))}},r=()=>{var r=s()(".contentLayout",t);r.length?(o(r),n(r,t),e.undoManager.add()):t.attr("contenteditable","true")};r();var a=e=>{var t=(e.jquery?e:s()(e)).attr("data-atlassian-layout");return t?JSON.parse(t):sl},i=e=>!(e.header||e.footer||e.columns),l=e=>{var t=e.jquery?e:s()(e);if(t.length)for(var n=t[0].childNodes,o=0;o<n.length;o++){var r=n[o];if("P"!==r.nodeName||1!==r.childNodes.length||"BR"!==r.firstChild.nodeName)return t.html()}return""},c=e=>{s()(".header",e).length||e.prepend('<div class="header"><div class="innerCell"></div></div>')},d=e=>{var t=s()(".header",e),n=m(e),o=l(s()(".innerCell",t));n.length?(n.prepend(o),t.remove()):t.replaceWith(o)},u=e=>{s()(".footer",e).length||e.append('<div class="footer"><div class="innerCell"></div></div>')},g=e=>{var t=s()(".footer",e),n=p(e),o=l(s()(".innerCell",t));n.length?(n.append(o),t.remove()):t.replaceWith(o)},m=e=>s()(".columnLayout > .cell:first-child .innerCell",e),p=e=>s()(".columnLayout > .cell:last-child .innerCell",e),f=e=>s()(".columnLayout",e).append('<div class="cell"><div class="innerCell"></div></div>'),h=e=>{var t="";s()(".columnLayout > .cell",e).each((function(){t+=l(s()(".innerCell",this))})),s()(".columnLayout",e).replaceWith(t)},v=(e,t)=>{var n=l(e);t.append(n),e.parent().remove()},b=(e,t)=>{var n,o=(e=>s()(".columnLayout > .cell",e).length)(t),r=e.name,a=e.columns;if(0===o)for(n=t.html(),t.html('<div class="columnLayout"></div>');o!==a.length;)f(t),o++;var i=r.substring(r.indexOf("-")+1);if(i=i.substring(0,Math.max(0,i.indexOf("-"))||void 0),s()(".columnLayout",t).attr("class","columnLayout "+i+"Columns"),a)for(s()(".columnLayout > .cell",t).each((function(e,t){void 0!==a[e]&&s()(t).attr("class","cell "+a[e])}));o!==a.length;)o<a.length?(f(t),o++):(v(s()(".columnLayout .cell:nth-child("+o+") .innerCell",t),s()(".columnLayout > .cell:nth-child("+(o-1)+") .innerCell",t)),o--);else h(t);n&&m(t).html(n)},y=(e,t)=>{e.empty().append(t)},w=(e,t)=>x('<div class="contentLayout"></div>',e).html(t.html()),A=e=>{var t=e.selection,n=t.getRng(),o=s()('[contenteditable="true"]',e.getBody());if(o.length){e.focus(),o[0].focus();var r=o.children()[0];n.setStart(r,0),n.setEnd(r,0),t.setRng(n)}else e.focus()},x=(e,t)=>{var n=t.dom.create("div");return n.innerHTML=e,s()(n).children()};return{setup:r,getLayout:()=>{var e=s()(".contentLayout",t);return e.length&&e.attr("data-atlassian-layout")?JSON.parse(e.attr("data-atlassian-layout")):sl},body:t,needsContentEditableBody:i,getLayoutOptions:a,setLayout:r=>{var l,m=s()(".contentLayout",t);a(m).name!==r.name&&(Object(C.b)("analyticsEvent",{name:"PageLayoutEvent.pageLayoutChanged",data:{name:r.name}}),l=1===m.length?m.clone():w(e,t),o(l),b(r,l),r.header?c(l):d(l),r.footer?u(l):g(l),i(r)?(l=l.contents().unwrap(),t.attr("contenteditable","true"),m=""):(n(l,t),l.attr("data-atlassian-layout",JSON.stringify(r)),m=l),y(t,l),A(e))},DEFAULT_LAYOUT:sl}};!function(e){e.normal="normal",e.aside="aside",e.sidebars="sidebars"}(_i||(_i={}));var dl=[{id:"single",icon:"1col",name:Object(ln.a)("page-layout-2.layout.single"),cells:[{type:_i.normal}]},{id:"two-equal",icon:"2col",name:Object(ln.a)("page-layout-2.layout.two-equal"),cells:[{type:_i.normal},{type:_i.normal}]},{id:"two-left-sidebar",icon:"2col-right",name:Object(ln.a)("page-layout-2.layout.two-left-sidebar"),cells:[{type:_i.aside},{type:_i.normal}]},{id:"two-right-sidebar",icon:"2col-left",name:Object(ln.a)("page-layout-2.layout.two-right-sidebar"),cells:[{type:_i.normal},{type:_i.aside}]},{id:"three-equal",icon:"3col",name:Object(ln.a)("page-layout-2.layout.three-equal"),cells:[{type:_i.normal},{type:_i.normal},{type:_i.normal}]},{id:"three-with-sidebars",icon:"3col-center",name:Object(ln.a)("page-layout-2.layout.three-with-sidebars"),cells:[{type:_i.sidebars},{type:_i.normal},{type:_i.sidebars}]}],ul=e=>dl.find((t=>t.id===e)),gl="editor.page-layout.",ml=e=>{var t=s()(e.getBody()),n=(e,t)=>{t.attr("contenteditable","false");s()(".innerCell",e).each((function(){var e=s()(this);e.attr("contenteditable","true"),e.children().length||e.append("<p><br /></p>")}))},o=e=>{e.find("> p").each((function(){""===this.id.trim()&&0===this.classList.length&&s()(this).remove()}))},a=e=>{e.find(".contentLayout2 .cell").filter((function(){return s()(this).find(".innerCell").length>1})).each((function(e,t){for(var n=s()(t).find(".innerCell"),o=n[0],r=1;r<n.length;r++){var a=s()(n[r]);s()(o).append(a.children()),a.remove()}}))},i=()=>{var r=t.find(".contentLayout2");r.length?(n(r,t),o(t),a(t),e.undoManager.add()):t.attr("contenteditable","true")};i();var l=(e,t,o)=>{var r=e.find(".cell"),a=r.length,i=s()(),l=t.cells.length,c=[],d=[];e.attr("class","columnLayout"),e.addClass(t.id),e.attr("data-layout",t.id);for(var g=0;g<a;g++){var m=r.eq(g).detach();c.push(u(m.children(".innerCell")))}for(var p=0;p<l;p++)i=i.add(il({type:t.cells[p].type||""}));if(a<=l)d=c;else{d=c.slice(0,l);for(var f=l;f<a;f++)d[l-1]+=c[f]}e.prepend(i);for(var h=0;h<l;h++)i.eq(h).find(".innerCell").html(d[h]);n(e,o)},c=()=>{if(!d()){var o=s()(ll()),r=o.find(".innerCell"),a=t.children().detach();r.append(a),t.append(o),n(o,t),m(e)}},d=()=>!!s()(r.a.Rte.getEditor().getBody()).find("div.contentLayout2").length,u=e=>{var t=s()(e);if(t.length)for(var n=t[0].childNodes,o=0;o<n.length;o++){var r=n[o];if("P"!==r.nodeName||1!==r.childNodes.length||!r.firstChild||"BR"!==r.firstChild.nodeName)return t.html()}return""},g=(e,t,n)=>{var o=s()(t.selection.getRng().startContainer).closest(".columnLayout");return!o.length&&n&&(o=e.find(".columnLayout").last()),o},m=e=>{var t=e.selection,n=t.getRng(),o=s()('[contenteditable="true"]',e.getBody());if(o.length){e.focus(),o[0].focus();var r=o.children()[0];n.setStart(r,0),n.setEnd(r,0),t.setRng(n)}else e.focus()},p=(e,t)=>{var n=e.selection,o=n.getRng(),a=t.find('[contenteditable="true"]').first(),i=a.children();if(i.length){e.focus(),a[0].focus();var l=i[0];o.setStart(l,0),o.setEnd(l,0),n.setRng(o),r.a.Rte.showElement(l)}else e.focus()};return{setup:i,body:t,editor:e,Layouts:dl,getLayout:ul,needsContentEditableBody:()=>!d(),findNearestLayoutSection:e=>{var t=r.a.Rte.getEditor(),n=s()(t.getBody());return g(n,t,e)},createInitialLayoutIfNone:c,addSection:n=>{var o=s()(`<div class="columnLayout single" data-layout="single">${il({type:"normal"})}</div>`),r=n||g(t,e,!0);if(r.length){var a=ul(r.attr("data-layout"));e.undoManager.ignore((()=>{l(o,a,t),r.after(o)})),p(e,o),Object(C.b)(gl+"add-section",{section:o})}else c()},removeSection:n=>{if(d()){var o,r,a=n||g(t,e,!0),i=a.next(),l=a.prev();if(i.length)o=i,a.remove();else if(l.length)o=l,a.remove();else{a.closest(".contentLayout2").remove();var c=t.find(".contentLayout2").find(".columnLayout").first();c.length?o=c:(e.getBody().setAttribute("contenteditable","true"),e.setContent("<p></p>"),m(e),(r=s()("#rte-button-pagelayout-2")).hasClass("active")&&r.click())}o&&o.length&&p(e,o),Object(C.b)(gl+"remove-section",{})}},changeSection:(n,o)=>{d()||c();var r=o||g(t,e,!1);if(r.length){var a=ul(r.attr("data-layout"));e.undoManager.ignore((()=>{l(r,n,t)})),p(e,r),Object(C.b)(gl+"change-layout",{section:r,originalLayout:a,currentLayout:n})}},moveSectionDown:n=>{if(d()){var o=n||g(t,e,!0),r=o.next();r.length&&(o.detach(),r.after(o),p(e,o)),Object(C.b)(gl+"move-section-down",{section:o})}},moveSectionUp:n=>{if(d()){var o=n||g(t,e,!0),r=o.prev();r.length&&(o.detach(),r.before(o),p(e,o)),Object(C.b)(gl+"move-section-up",{section:o})}}}};function pl(e){var t,n=cl(e),o=ml(e);if("comment"!==m.a.get("content-type")){var a=e=>{var t=s()("#pagelayout-menu"),n=s()(".icon-check",t),o=n.not(".hidden"),r=n.siblings("."+e.name).siblings();o.addClass("hidden"),r.removeClass("hidden")},i=e=>{var t=s()(e.getBody());return!t.children(".contentLayout").length&&(t.children(".contentLayout2").length,!0)},l=()=>{c.tinymce.Env.browser.isFirefox()&&setTimeout((()=>{e.focus(),e.dom.getRoot().focus()}),1)},d=r=>{var c=s()("#pagelayout-menu").parent(),d=s()("#page-layout-2-group");r&&r.selection||(i(e)?(c.addClass("hidden"),d.removeClass("hidden"),t=ml(e),o&&o.needsContentEditableBody()&&s()(e.getBody()).attr("contenteditable","true")):(c.removeClass("hidden"),d.addClass("hidden"),t=cl(e),n.needsContentEditableBody(t.getLayout())?t.body.attr("contenteditable","true"):l(),a(t.getLayout())))};return e.on("init",(()=>{e.undoManager.clear(),e.undoManager.add(),d(),Object(C.a)("editor.remote.change editor.local.change",(()=>{e.undoManager.ignore((()=>{t.setup()}))})),Object(C.a)("rte-ready",(()=>{var t=s()('[contenteditable="true"]',e.getBody()),n=!1!==m.a.get("editor-auto-focus");t.attr("contenteditable","false"),t.attr("contenteditable","true"),n&&r.a.Rte.editorFocus(e)})),i(e)&&e.on("Undo",(()=>{o.needsContentEditableBody()&&t.body.attr("contenteditable","true"),l()})),al.a.use()})),s()("#pagelayout-menu").delegate("li.dropdown-item a","click",(function(){e.execCommand("mcePageLayout",!1,n.getLayoutOptions(this))})),e.on("Remove",(()=>{al.a.unuse()})),e.on("SetContent",d),e.on("click",(t=>{var n=s()(t.target);if((n.is("div.cell")&&n.children(".innerCell").focus(),u()&&(t.target===e.getBody()||t.target===e.getBody().parentNode))&&n.find(".innerCell").length){e.execCommand("selectAll");var o=t.target!==e.getBody();e.selection.collapse(o)}})),e.on("keyup",(t=>{var n=t.keyCode;if(8!==n&&46!==n)return!0;var o=e.selection.getRng().startContainer;if(s()(o).closest(".contentLayout,.contentLayout2",e.getBody()).length){var r=s()(o).closest(".innerCell");if(r&&r.length&&e.dom.isEmpty(r.clone()[0])){r.html('<p><br data-mce-bogus="1"></p>'),t.preventDefault();var a=r[0].firstElementChild&&r[0].firstElementChild.firstChild;a&&e.selection.select(a,!0),e.selection.collapse(!0)}}})),e.addCommand("mcePageLayoutInitialize",(()=>{e.undoManager.add(),t.createInitialLayoutIfNone()})),e.addCommand("mcePageLayout",((n,o)=>{e.undoManager.add(),t.setLayout(o),a(t.getLayout())})),e.addCommand("mcePageLayoutAddSection",((n,o)=>{e.undoManager.add(),t.addSection&&t.addSection(o&&o.section)})),e.addCommand("mcePageLayoutChangeSection",((n,o)=>{e.undoManager.add(),t.changeSection&&t.changeSection(o&&o.layout,o&&o.section)})),e.addCommand("mcePageLayoutRemoveSection",((n,o)=>{e.undoManager.add(),t.removeSection&&t.removeSection(o&&o.section)})),e.addCommand("mcePageLayoutMoveSectionUp",((n,o)=>{e.undoManager.add(),t.moveSectionUp&&t.moveSectionUp(o&&o.section)})),e.addCommand("mcePageLayoutMoveSectionDown",((n,o)=>{e.undoManager.add(),t.moveSectionDown&&t.moveSectionDown(o&&o.section)})),{Layouts:o&&o.Layouts,getLayout:o&&o.getLayout,execCommand:t=>{if("selectAll"===t){var n=e.getBody();if("true"==e.dom.getAttrib(n,"contenteditable"))return!1;var o=e.dom.select(".innerCell",n),r=o[0],a=o[o.length-1],i=e.dom.createRng();return i.setStart(r,0),i.setEnd(a,a.childNodes.length),e.selection.setRng(i),!0}return!1},disableContent:()=>{e.dom.setAttribs(e.dom.select("div.innerCell"),{contenteditable:!1}),e.dom.setStyle(e.dom.select(".wiki-content .contentLayout2"),"user-select","auto")},getInfo:()=>({longname:"Page Layout Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"})}}}var fl=()=>{"comment"!==m.a.get("content-type")&&Pe(document,"initContextToolbars.Toolbar",(()=>{return c.Confluence.Editor.PageLayoutToolbar=(e=c.tinymce.activeEditor,t=ml(e),n=e=>{var n=(e=e||t.findNearestLayoutSection()).attr("data-layout"),o=s()("#rte-toolbar-row-pl2-toolbar").find(".layouts button"),r=o.find(".pl2-layout-"+n).closest(".aui-button");r.hasClass("active")||(o.filter(".active").removeClass("active"),r.addClass("active"))},{initContextToolbars:()=>{var o=s()(document),r=s()("#page-layout-2"),a=s()("#rte-button-pagelayout-2"),i="pl2-toolbar";e.addCommand("mcePageLayoutsToolbar",(()=>{a.hasClass("active")?o.trigger("removeContextToolbarRow.Toolbar",{id:i,animate:!0}):(o.trigger("createContextToolbarRow.Toolbar",{id:i,buttons:c.Confluence.Editor.PageLayoutToolbar.Buttons,topToolbar:!0,animate:!0}),n(),e.execCommand("mcePageLayoutInitialize")),a.toggleClass("active")})),a.click((t=>{t.preventDefault(),r.hasClass("disabled")||e.execCommand("mcePageLayoutsToolbar",!1,null)})),e.on("NodeChange",(e=>{var t=s()(e.element).closest(".columnLayout");n(t)}));for(var l=t.Layouts,d=[],u=t=>{d.push(new c.Confluence.Editor.Toolbar.Components.Button({text:t.name,iconClass:"aui-icon aui-icon-small aui-iconfont-layout-"+t.icon+"-large",click:()=>{e.execCommand("mcePageLayoutChangeSection",!1,{layout:t})}}))},g=0;g<l.length;g++)u(l[g]);return{Buttons:[new c.Confluence.Editor.Toolbar.Components.Group([new c.Confluence.Editor.Toolbar.Components.Button({triggerText:Object(ln.a)("page-layout-2.add-section"),id:"add-layout-section",tooltip:Object(ln.a)("page-layout-2.add-section.tooltip"),iconClass:"aui-icon aui-icon-small aui-iconfont-add",click:()=>e.execCommand("mcePageLayoutAddSection")}),new c.Confluence.Editor.Toolbar.Components.Button({triggerText:Object(ln.a)("page-layout-2.remove-section"),id:"remove-layout-section",tooltip:Object(ln.a)("page-layout-2.remove-section.tooltip"),iconClass:"aui-icon aui-icon-small aui-iconfont-delete",click:()=>e.execCommand("mcePageLayoutRemoveSection")})]),new c.Confluence.Editor.Toolbar.Components.Group([new c.Confluence.Editor.Toolbar.Components.Button({triggerText:Object(ln.a)("page-layout-2.move-section-up"),id:"move-up-layout-section",tooltip:Object(ln.a)("page-layout-2.move-section-up.tooltip"),iconClass:"aui-icon aui-icon-small aui-iconfont-up",click:()=>e.execCommand("mcePageLayoutMoveSectionUp")}),new c.Confluence.Editor.Toolbar.Components.Button({triggerText:Object(ln.a)("page-layout-2.move-section-down"),id:"move-down-layout-section",tooltip:Object(ln.a)("page-layout-2.move-section-down.tooltip"),iconClass:"aui-icon aui-icon-small aui-iconfont-down",click:()=>e.execCommand("mcePageLayoutMoveSectionDown")})]),new c.Confluence.Editor.Toolbar.Components.Group(d,{id:"pagelayout2-toolbar",text:Object(ln.a)("page-layout-2.layout.group"),groupClass:"layouts"}),new c.Confluence.Editor.Toolbar.Components.Group([new c.Confluence.Editor.Toolbar.Components.Button({text:Object(ln.a)("page-layout-2.close"),iconClass:"aui-icon aui-icon-small aui-iconfont-close-dialog",click:()=>e.execCommand("mcePageLayoutsToolbar",!1,null)})],{groupClass:"close"})],Events:[]}}}).initContextToolbars();var e,t,n}))};n(81);function hl(e){for(var t=e.offsetTop;e.offsetParent;)t+=(e=e.offsetParent).offsetTop;return t}function vl(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bl=new class{constructor(e,t){vl(this,"_namespace",void 0),vl(this,"_sessionStorageSupported",void 0);var n=m.a.get("remote-user")||"";this._namespace=`${e}.${n}.${t}`,this._sessionStorageSupported=!!c.sessionStorage}getItem(e){return this._sessionStorageSupported?c.sessionStorage.getItem(`${this._namespace}.${e}`):(p.a.warn("Browser does not support sessionStorage, Confluence.storageManager will not work."),null)}doesContain(e){return!!this.getItem(e)}setItem(e,t){if(this._sessionStorageSupported)try{c.sessionStorage.setItem(`${this._namespace}.${e}`,t)}catch(n){p.a.error(`Unable to write to sessionStorage. key: ${e}, value: ${t}, cause: ${n}`)}else p.a.warn("Browser does not support sessionStorage, Confluence.storageManager will not work.")}removeItem(e){this._sessionStorageSupported?c.sessionStorage.removeItem(`${this._namespace}.${e}`):p.a.warn("Browser does not support sessionStorage, Confluence.storageManager will not work.")}}("atlassian","frontend"),yl="editor-persit-scroll-position",wl="main-content",Cl=e=>{var t=[];return Array.from(e).forEach(((e,n)=>{(function(e,t){var n=t?t.documentElement:c.document.documentElement;if(e&&n){var o=e.getBoundingClientRect(),r=o.top,a=o.bottom,i=n.offsetHeight;return 0<=r&&r<i||0<=a&&a<=i||r<=0&&0<=a&&a>=i}})(e)&&t.push({targetElementIndex:n,visibleBlockEl:e})})),t},Al=e=>{var t=Cl(e),n=null;return t.some((e=>!!function(e,t){var n=t?t.documentElement:c.document.documentElement;if(e&&n){var o=e.getBoundingClientRect().top,r=n.offsetHeight;return 0<=o&&o<r}}(e.visibleBlockEl)&&(n=e,!0))),!n&&t.length>0?t[0]:n||{targetElementIndex:-1,visibleBlockEl:null}};function xl(e,t){if(!e||0===t)return null;var n={targetElementIndex:-1,offsetBetweenTargetAndCurrentScroll:0,columnLayoutPosition:{columnIndex:-1,rowIndex:-1}};if((e=>{if(!e)return!1;var t=e.children[0];return t&&t.classList.contains("contentLayout2")})(e)){var o=e.children[0].children,r=Al(o),a=r.targetElementIndex,i=r.visibleBlockEl;if(i){var l=(e=>{var t={targetElementIndexInColumn:-1,columnIndex:-1,visibleBlockEl:null};return Array.from(e).some(((e,n)=>{var o=Al(e.children),r=o.visibleBlockEl,a=o.targetElementIndex;return!!r&&(t.columnIndex=n,t.targetElementIndexInColumn=a,t.visibleBlockEl=r,!0)})),t})(i.getElementsByClassName("innerCell")),s=l.columnIndex,c=l.targetElementIndexInColumn,d=l.visibleBlockEl;d&&(n.targetElementIndex=c,n.offsetBetweenTargetAndCurrentScroll=t-hl(d),n.columnLayoutPosition={rowIndex:a,columnIndex:s})}}else{var u=Al(e.children),g=u.targetElementIndex,m=u.visibleBlockEl;m&&(n.targetElementIndex=g,n.offsetBetweenTargetAndCurrentScroll=t-hl(m),delete n.columnLayoutPosition)}return-1!==n.targetElementIndex?n:null}var Ml=e=>{var t=e.contentId,n=e.isInViewPage,o=e.docObject,r=void 0===o?c.document:o,a=e.winObject,i=void 0===a?d.a:a,l=xl(n?r.getElementById(wl):r.body,i.pageYOffset);l&&(l.contentId=t,l.isInViewPage=n,bl.setItem(yl,JSON.stringify(l)))},kl=e=>{var t=e.contentId,n=e.isInViewPage,o=e.docObject,r=void 0===o?c.document:o,a=e.winObject,i=void 0===a?d.a:a,l=bl.getItem(yl);try{l=JSON.parse(l)}catch(e){p.a.error("Can not parse JSON string of `savedViewPoistionData`: ",l)}finally{bl.removeItem(yl)}if(l&&l.contentId===t&&l.isInViewPage!==n){var s;s=n?r.getElementById(wl):r.body;var u,g=l.columnLayoutPosition;if(g){var m=s.children[0].children[g.rowIndex].getElementsByClassName("innerCell")[g.columnIndex];u=m&&m.children[l.targetElementIndex]}else u=s.children[l.targetElementIndex];if(u){var f=hl(u)+l.offsetBetweenTargetAndCurrentScroll;setTimeout((()=>i.scrollTo(0,f)),1)}}};function El(e){e.getDoc()&&e.getWin()&&Ml({contentId:pn(),isInViewPage:!1,docObject:e.getDoc(),winObject:e.getWin()})}function Tl(){return{init:e=>{var t=m.a.get("content-type");"page"!==t&&"blogpost"!==t||(Object(C.a)("rte-collab-ready",(()=>{!function(e){e.getDoc()&&e.getWin()&&kl({contentId:pn(),isInViewPage:!1,docObject:e.getDoc(),winObject:e.getWin()})}(e)})),Object(C.a)("rte-ready",(()=>{c.Confluence.Editor.UI.cancelButton.click((()=>El(e))),c.Confluence.Editor.UI.saveButton.click((()=>El(e)))})))},getInfo:()=>({longname:"Persist scroll position for transition between view page and edit page",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}var Dl,Sl=[],Il={};function Ol(e){var t=`<span class="text-placeholder">${Dl}</span>`,n=s()("<div></div>").append(t);e&&n.find(".text-placeholder").html(e),c.tinymce.activeEditor.execCommand("mceInsertContent",!1,n.html())}function jl(e){var t=c.tinymce.activeEditor,n=s()(t.getBody()),o=e&&e.parentElement,r=t.dom.create("span",{id:"placeholder-cursor"},"&nbsp;");o&&e&&o.replaceChild(r,e);var a=n.find("#placeholder-cursor")[0];t.selection.select(a.firstChild),t.dom.replace(document.createElement("br"),a)}function Nl(){return Sl}function Ll(e){return Il[e]}Dl=u()?"\ufeff{$caret}<br>":"\ufeff{$caret}";var Bl={insertTextPlaceHolder:Ol,removePlaceholder:jl,addPlaceholderType:function(e){e&&e.type?(Sl.push(e),Il[e.type]=e):p.a.error("PlaceHolderRegister : unable to register new place holder type !")},getPlaceholderTypes:Nl,getPlaceholderType:Ll};function Rl(){return{name:"textplaceholder",canHandleElement:e=>e.hasClass("text-placeholder"),handle(e){if("click"===e.e.type||"mouseup"===e.e.type){var t,n=Nl(),o=e.containerEl,r=o.getAttribute("data-placeholder-type"),a=[],i=u("default",Object(ln.a)("property.panel.textplaceholder.display.default"),Object(ln.a)("property.panel.textplaceholder.display.default.tooltip"));i.selected=!r,a.push(i);for(var l=0,d=n.length;l<d;l++)t=n[l],a.push(u(t.type,t.label,t.tooltip));a.push(null),a.push({className:"text-placeholder-property-panel-remove-button",text:Object(ln.a)("property.panel.textplaceholder.remove"),click(){c.Confluence.PropertyPanel.destroy(),jl(o)}}),c.Confluence.PropertyPanel.createFromButtonModel("textplaceholder",o,a,{anchorIframe:g().getEditorFrame()})}function u(e,t,n){return{className:`text-placeholder-property-panel-type-item text-placeholder-property-panel-type-${e}`,text:t,tooltip:n,selected:r===e,click(){!function(e){"default"===e?o.removeAttribute("data-placeholder-type"):o.setAttribute("data-placeholder-type",e);var t=s()(`.text-placeholder-property-panel-type-${e}`);t.parent().find(".text-placeholder-property-panel-type-item").removeClass("selected"),t.addClass("selected")}(e)}}}}}}function Pl(){var e={click:!1,keypress:!0},t=c.tinymce.VK,n=c.tinymce.dom.Event,o="template"===m.a.get("content-type");function r(e){s()("#rte-button-insert-placeholder").click((e=>{e.preventDefault(),Ol()})),e.on("KeyDown",(t=>{if(13===t.keyCode&&!t.shiftKey){var n=e.selection.getNode(),o=s()(n).closest(".text-placeholder"),r=e.selection.getRng();if(o.length&&r&&Go.isCursorAtEnd(e,r))return Jo(e,o,!0),c.tinymce.dom.Event.cancel(t)}}),!0)}var a={UL:!0,OL:!0,LI:!0,TABLE:!0,TBODY:!0};function i(e){return!a[e.nodeName]}function l(o){function r(){var e=u();e&&o.selection.select(e)}function a(e){e.off("KeyDown",l),e.off("KeyPress",d),e.off("Click",d)}function l(e){var r=u();return e.keyCode===t.LEFT||e.keyCode===t.UP?(function(e,t){for(var n,o=t&&t.previousSibling;t&&!o;)o=(t=t.parentNode).previousSibling;if(o){for(n=o;!i(n)&&n.lastChild;)n=n.lastChild;e.selection.select(n.lastChild||n),e.selection.collapse(!1),e.selection.normalize()}}(o,r),n.cancel(e)):e.keyCode===t.RIGHT||e.keyCode===t.DOWN?(function(e,t){for(var n,o=t&&t.nextSibling;t&&!o;)o=(t=t.parentNode).nextSibling;if(o){for(n=o;!i(n)&&n.firstChild;)n=n.firstChild;e.selection.select(n.firstChild||n),e.selection.collapse(!0),e.selection.normalize()}}(o,r),n.cancel(e)):e.keyCode===t.BACKSPACE||e.keyCode===t.DELETE?(jl(r),n.cancel(e)):void 0}function d(t){if(!c.tinymce.Env.browser.isFirefox()||t.isChar||"keypress"!==t.type){var n,o,r,a=u();if(a){var i=a.getAttribute("data-placeholder-type");n=i,o=t.type,r=n&&Ll(n),s.a.extend({},e,r&&r.activation)[o]&&(jl(a),Object(C.b)("editor.text-placeholder.activated",{placeholderType:i||"",triggerEvent:t}))}}}function u(){var e=s()(o.getBody()).find(".text-placeholder.selected");return e.length?e[0]:(a(o),null)}o.on("NodeChange",(function(e){var t=e.element,n=s()(t).closest(".text-placeholder");s()(o.getBody()).find(".text-placeholder.selected").not(n).removeClass("selected"),n.length?(n.hasClass("selected")||(n.addClass("selected"),function(e){e.on("KeyDown",l,!0),e.on("KeyPress",d,!0),e.on("Click",d,!0)}(o)),setTimeout(r,0)):a(o)}),!0)}return{init(e){e.on("init",(()=>{(o?r:l)(e),function(e){s()(e.getDoc()).find("head").append('<style type="text/css">.wiki-content .text-placeholder { display: inline-block; }</style>')}(e)}))},getInfo:()=>({longname:"Text Placeholder Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"})}}function $l(e){return e.parentNode&&e.parentNode.childNodes||[]}function Hl(e){var t=$l(e);return function(e){var t=!0,n=/TABLE|TH|TD/;return(t=(t=!n.test(e.nodeName))&&e.previousSibling?!n.test(e.previousSibling.nodeName):t)&&e.nextSibling?!n.test(e.nextSibling.nodeName):t}(e)&&(function(e){var t=function(e){return e&&e.innerHTML&&(e.innerHTML.replace(/\uFEFF|\u200B/g,"")||"&nbsp;")}(e);return/^&nbsp;$/.test(t)}(e)||t.length>1&&"BR"==t[0].nodeName)}function Fl(e,t){e.dom.remove(t)}function zl(e){return e.on("KeyDown",(t=>{!function(e,t){var n,o,r=c.tinymce.VK,a=r.BACKSPACE,i=r.DELETE,l=e.selection.getNode(),s=l.nextSibling;if(e.selection.isCollapsed()&&l!=e.dom.getRoot())if(t.keyCode===a){if(n=e.selection,(o=n.getRng())&&0===o.startOffset){var d=l.previousSibling;d&&Hl(d)&&(Fl(e,d),c.tinymce.dom.Event.cancel(t))}}else if(t.keyCode==i){if($l(l).length<=1||l.childNodes.length>1)return;s&&Hl(l)&&(Fl(e,l),c.tinymce.dom.Event.cancel(t),function(e,t){var n=e.selection,o=n.getRng();e.focus(!1),t.focus(),o&&(o.setStart(t,0),o.setEnd(t,0),n.setRng(o))}(e,s))}}(e,t)})),{getMetadata:()=>({name:"Preserve paragraph formatting when deleting empty line",author:"Atlassian",url:"http://www.atlassian.com"})}}n(83);function Ul(){var e=c.Confluence.PropertyPanel,t=[];return Object(C.a)("add-handler.property-panel",((e,n)=>{n&&t.push(n)})),{init:n=>{var o=()=>!!e.current,r=(r,a)=>{var i={focusedEl:a,focusedNodeName:a.nodeName&&a.nodeName.toLowerCase(),ed:n,e:s.a.extend({},r)},l=(e=>{if(e.is("img"))return e[0];var t=e.closest("a,table,.wysiwyg-macro,.editor-inline-macro,.text-placeholder");return t.length?t[0]:""})(s()(a)),d=!!s()(a).closest("table:not(.wysiwyg-macro,.editor-inline-macro)").length,u=!!s()(".toolbar-contextual").length;if(i.containerEl=l,Object(C.b)("user-blurred-rte-element",i),l&&!(e=>"click"==e.type&&(e.which?3===e.which:e.button?2==e.button:void 0))(r)&&!o()&&e.shouldCreate)for(var g=0,m=t.length;g<m;g++)if(t[g].canHandleElement(s()(l))){if(u||!d)return t[g].handle(i);(e=>{Pe(c.document,"shown.contextToolbar",(()=>{e.handle(i)}))})(t[g])}};function a(e,t){r(e,t.elem)}function i(t,n){o()&&(!n.containerEl||e.current.hasAnchorChanged(n.containerEl)?e.destroy():Object(C.b)("same-anchor.property-panel"))}function l(){setTimeout((()=>{g().bindScroll("property-panel",(()=>{e.destroy()}))}),0),s()(n.getDoc()).bind("keydown.property-panel.escape",(t=>{27===t.keyCode&&o()&&e.destroy()}))}function d(){g().unbindScroll("property-panel"),s()(n.getDoc()).unbind("keydown.property-panel.escape")}n.on("Click",(e=>{r(e,e.target)})),n.on("KeyDown",(t=>{if(27!==t.keyCode){if(t.target.classList.contains("editor-inline-macro")){if(13===t.keyCode)return t.target.click(),void t.preventDefault();if(37===t.keyCode||38===t.keyCode||39===t.keyCode||40===t.keyCode)return t.target.blur(),void t.preventDefault()}if(o()&&"Tab"===t.key&&function(e){if(!e)return!1;if(e.classList.contains("editor-inline-macro"))return!0;return e.children.length&&!!n.selection.getNode().querySelector(".editor-inline-macro")}(n.selection.getNode()))return e.current.panel.find(".aui-button:first-child").focus(),void t.preventDefault();r(t,n.selection.getNode())}}),!0),n.on("ContextMenu",(()=>{e.destroy()})),Object(C.a)("trigger.property-panel",a),Object(C.a)("user-blurred-rte-element",i),Object(C.a)("created.property-panel",l),Object(C.a)("destroyed.property-panel",d),n.on("Remove",(()=>{Object(C.c)("trigger.property-panel",a),Object(C.c)("user-blurred-rte-element",i),Object(C.c)("created.property-panel",l),Object(C.c)("destroyed.property-panel",d)}))},getInfo:()=>({longname:"Image, Link and Macro Property Panels",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function _l(){return{init(e){e.on("Init",(()=>{var e=s()("#createpageform"),t=e.find("#originalReferrer");e.length&&!t.val()&&document.referrer&&t.val(document.referrer)}))},getInfo:()=>({longname:"Confluence Cancel Return Url",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}var Ql,Wl,Vl,Kl="searchreplace",Gl=(Ql=function(){function e(t){var n=[];if(t.nodeType===Node.TEXT_NODE)n.push(t);else for(var o=t.childNodes,r=0,a=o.length;r<a;++r)n.push.apply(n,e(o[r]));return n}function t(e){return e.nodeValue.toLowerCase()}return{search(n,o,r,a,i){var l=n.getSel(),s=e(a);o=o.replace(/\s/g,"").toLowerCase();var c=s.map(t).join("");r=function(e,t,n){var o=e.getRng();if(o&&o.endContainer.nodeValue){var r=n.indexOf(o.endContainer.nodeValue.toLowerCase(),t)+o.endOffset;t=t!==r&&-1!==t?r:t}return t}(n,r,c);var d,u,g,m,p,f=(d=c,u=o,g=r,(p=(m=i)?d.lastIndexOf(u,g-1):d.indexOf(u,g))<0&&!m?p=d.indexOf(u):0===p&&0===g&&m&&(p=d.lastIndexOf(u)),p);if(f<0)return[!1,f];var h=function(e,t,n){for(var o,r,a,i,l=0,s=0;s<t.length;s++){if(t[s].nodeType===Node.TEXT_NODE){var c=e+n.length;!r&&t[s].length+l>=c&&(r=t[s],i=c-l),!o&&t[s].length+l>e&&(o=t[s],a=e-l),l+=t[s].length}if(o&&r)return{startNode:o,startIndex:a,endNode:r,endIndex:i}}}(f,s,o),v=document.createRange();return v.setStart(h.startNode,h.startIndex),v.setEnd(h.endNode,h.endIndex),l&&l.removeAllRanges(),l&&l.addRange(v),v.startContainer.parentNode&&v.startContainer.parentNode.scrollIntoView(),[!0,f]}}}(),Wl=i.a.Env.browser.isEdge,(Vl=function e(t){var n=t,o=null,r=null,a=null,i=null,l=null,s={initialised:!1,find:function(e,t,n){var r=o.getFindInput().val(),i=a.findText(r,!0,e);i&&t?t():!i&&n&&n()},replace:function(e,t){var n=o.getFindInput(),r=o.getReplaceInput(),i="";r&&(i=r.val());var l=a.replaceText(n.val(),i,!0);l&&e?e():!l&&t&&t()},replaceAll:function(e,t){var n=o.getFindInput(),r=o.getReplaceInput(),i="";r&&(i=r.val());var l=a.replaceAll(n.val(),i);l&&e?e():!l&&t&&t()},focus:function(){o.focusFindTextBox()},isVisible:function(){return null!=o},init:function(){o=e.UI(n,i,l),(r=new e.MarkManager).addListener(o),a=null,a=new e.impl(o,r),o.getFindInput().focus()},onVisible:function(e){if(null!=e&&e.length>0){var t=o.getFindInput(),n=t.val();t.val(n+e)}o.onVisible()},onHide:function(){i=o.getFindInput().val(),l=o.getReplaceInput().val(),a.destroy(),a=null,o.destroy(),o=null,r.destroy(),r=null},_clearSavedValues:function(){i=null,l=null}};return s}).utils={moveCursorToEnd(e){if(i.a.Env.browser.isFirefox()){var t=s()(e).val().length;e.setSelectionRange(t,t)}},createTextRange:(e,t)=>e.selection?e.selection.createRange():t.getBody().createTextRange()},Vl.impl=function(e,t){var n=i.a.html.Writer(),o=t,r=-1,a=function e(t,n,a){if(!t)return!1;var l=i.a.activeEditor,s=l.selection,c=l.getWin();function d(){return l.undoManager.ignore((()=>{o.markCurrentlySelectedRange()})),!0}function u(){return l.undoManager.ignore((()=>{o.removeCurrentMark(!0),l.selection.isCollapsed()||l.selection.collapse()})),!1}if(o.isCursorAtCurrentMark()&&l.undoManager.ignore((()=>{s=o.selectCurrentMark()})),s.isCollapsed()||s.collapse(a),i.a.Env.browser.isFirefox())return c.find(t,!1,a)?d():n?(s.select(l.getBody(),!1),s.collapse(!a),e(t,!1,a)):u();if(!Wl())return c.find(t,!1,a,!0,!1,!1,!1)?d():u();var g=Ql.search(s,t,r,l.getBody(),a);return r=g[1],g[0]?d():void 0},l=function(e){var t=i.a.activeEditor;n.text(e,!1),t.selection.setContent(n.getContent(),{format:"raw"}),n.reset(),t.selection.collapse(!0)},s={};return s.findText=a,s.replaceText=function(e,t,n){var r=i.a.activeEditor;return o.hasCurrentMark()?(r.undoManager.transact((()=>{var e=o.replaceCurrentMark(t);e&&r.selection.select(e)})),a(e,n)):a(e,n)},s.replaceAll=function(e,t){var n=i.a.activeEditor,r=0;return n.undoManager.transact((()=>{var a=n.selection,i=n.getWin();if(o.removeCurrentMark(!1),n.execCommand("selectAll"),n.selection.collapse(!0),Wl())for(var s=-1;;){var c=Ql.search(a,e,s,n.getBody(),!1);if(!c[0])break;s=c[1],l(t),r++}else for(;i.find(e,!1,!1,!1,!1,!1,!1);)l(t),r++;if(0===r)qi.notify("info",n.translate("searchreplace_dlg.notfound"));else if(1===r)qi.notify("success",n.translate("searchreplace_dlg.allreplacedsingular"));else if(r>1){var d=n.translate("searchreplace_dlg.allreplacedplural");qi.notify("success",d.replace("{0}",`${r}`))}})),r},s.destroy=function(){o=null,n=null},s},Vl.UI=function(e,t,n){var o=null,r=Vl.utils.moveCursorToEnd;i.a.activeEditor&&i.a.activeEditor.plugins&&i.a.activeEditor.plugins.customtoolbar&&(o=i.a.activeEditor.plugins.customtoolbar.getToolbarRow(e));var a,l,c,d,u=function(){return s()(".toolbar-find-input",o)},g=function(){return s()(".toolbar-replace-input",o)},m=function(e){if("input"===e.type||"propertychange"===e.type){var t=u(),n="string"==typeof t.val()&&t.val().length>0;f(n),h(n)}},p=function(){var e=u();y(e&&e.val())},f=function(e){var t=i.a.activeEditor;e?(t.plugins.customtoolbar.enableToolbarButton("search-toolbar-find-next-button"),t.plugins.customtoolbar.enableToolbarButton("search-toolbar-find-previous-button")):(t.plugins.customtoolbar.disableToolbarButton("search-toolbar-find-next-button"),t.plugins.customtoolbar.disableToolbarButton("search-toolbar-find-previous-button"))},h=function(e){var t=u();v().toggleClass("default-action",e&&t.val().length>0)},v=function(){return s()(".search-toolbar-find-next-button",o).closest(".aui-button")},b=function(e){var t=i.a.activeEditor.plugins.customtoolbar,n="search-toolbar-replace-button";e?t.enableToolbarButton(n):t.disableToolbarButton(n)},y=function(e){var t=i.a.activeEditor.plugins.customtoolbar,n="search-toolbar-replaceall-button";e?t.enableToolbarButton(n):t.disableToolbarButton(n)},w={};return w.getFindInput=u,w.getReplaceInput=g,w.focusFindTextBox=function(){top.focus(),u().focus()},w.onVisible=function(){var e=u();e.focus(),e.val().length>0&&(r(e[0]),f(!0),y(!0))},w.destroy=function(){},w.marked=function(){b(!0)},w.markRemoved=function(){b(!1)},a=t,l=n,c=u(),d=!1,a&&a.length&&(c.val(a),d=!0),l&&l.length&&g().val(l),function(){function e(e,t){e&&e.bind("input",t)}var t=u();e(t,m),e(t,p),s()(o).focusin((()=>{h(!0)})).focusout((()=>{h(!1)})),t.focus((()=>{h(!0)}))}(),f(d),y(d),b(!1),w},Vl.MarkManager=function(){var e=null,t=i.a.html.Writer(),n=null,o=[],r=function(){c()},a=function(){if(!e)return null;var t=i.a.activeEditor;return t.selection.select(e[0]),t.selection},l=function(t){f(),(d(e,t)||n&&i.a.activeEditor.selection.getRng().toString()==n)&&(e=null,n=null,s.a.each(o,((e,t)=>{t.markRemoved()})))},c=function(){f(),s()("mark",i.a.activeEditor.getDoc()).each(((e,t)=>{d(s()(t),!1)})),e=null,n=null,s.a.each(o,((e,t)=>{t.markRemoved()}))},d=function(e,t){var n=i.a.activeEditor,o=n.selection.getRng();if(!e)return!1;var r=function(e,t){if(e.intersectsNode)return e.intersectsNode(t);var o=n.getDoc().createRange();return o.selectNodeContents(t),!(e.compareBoundaryPoints(Range.START_TO_END,o)<=0||e.compareBoundaryPoints(Range.END_TO_START,o)>=0)}(o,e[0]),a=null,l=null;if(e.contents().each(((t,n)=>{e.before(n),a||(a=n),l=n})),r||t){var s=n.selection.getRng();s.setStartBefore(a),s.setEndAfter(l),t||s.collapse(!1),n.selection.setRng(s)}return e.remove(),!0},u=function(){return!!e||(n?i.a.activeEditor.selection.getRng().toString()==n:void 0)},g=function(){c()},m=function(){f(),s.a.each(o,((e,t)=>{t.markRemoved()}))},p=function(e){var t=i.a.activeEditor;t.on("Change",r),t.on("BeforeSetContent",r),e&&(t.on("Click",m),t.on("DblClick",m))},f=function(){var e=i.a.activeEditor;e.off("Change",r),e.off("BeforeSetContent",r),e.off("Click",m),e.off("DblClick",m)},h={markCurrentlySelectedRange:function(){var t=i.a.activeEditor;if(e){var r=t.selection.getBookmark();l(!1),t.selection.moveToBookmark(r)}n=null;var c=t.selection.getRng();if(e=s()('<mark data-searching class="find-current"></mark>',t.getDoc()),c)try{c.surroundContents(e[0]),p(!1)}catch(t){1==t.code&&(n=c.toString(),e=null,p(!0))}if(s.a.each(o,((e,t)=>{t.marked()})),!n){var d=a();d&&d.collapse()}}};return h.removeCurrentMark=l,h.removeAllMarks=c,h.selectCurrentMark=a,h.isCursorAtCurrentMark=function(){if(!e)return!1;var t=i.a.activeEditor.selection;t.isCollapsed()||t.collapse();var n=t.getRng();if(n){if(3===n.startContainer.nodeType)return n.startContainer.parentNode&&n.startContainer.parentNode.normalize(),n.startContainer.nextSibling===e[0]||n.startContainer.previousSibling===e[0];if(1===n.startContainer.nodeType){var o=n.startContainer.childNodes,r=n.startOffset;return r>0&&o[r-1]===e[0]||r+1<o.length&&o[r+1]===e[0]}}},h.hasCurrentMark=u,h.replaceCurrentMark=function(n){if(function(n){if(e||!u())return!1;var o=i.a.activeEditor;return o.undoManager.transact((()=>{t.text(n,!1),o.selection.setContent(t.getContent(),{format:"raw"}),t.reset()})),o.undoManager.ignore((()=>{l(!1)})),!0}(n))return null;if(!e)return null;var o=i.a.activeEditor,r=[];o.undoManager.ignore((()=>{e.contents().each(((e,t)=>{r.push(t)})),l(!1)}));var a=void 0;return o.undoManager.transact((()=>{a=s()(r[0]).before(o.getDoc().createTextNode(n))[0].previousSibling;for(var e=r.length-1;e>=0;e--)s()(r[e]).remove()})),a},h.addListener=function(e){o.push(e)},h.destroy=function(){l(!0),i.a.activeEditor.off("BeforeGetContent",g)},i.a.activeEditor.on("BeforeGetContent",g),h},Vl(Kl));function Yl(e){var t=c.Confluence.Editor,n=null,o=!1,r=function(e){e.preventDefault(),e.stopPropagation()},a=function(e){r(e);var t=e.which;t||(t=e.charCode?e.charCode:e.keyCode),t<48||n.push(t)},l=function(e){var t=s()("#rte-button-searchreplace a");t.length&&(e?t.unbind("click",!1):t.bind("click",!1))},d=function(){if(!o){o=!0;var d=s()("#rte-button-searchreplace"),u=!d.hasClass("active"),g=s()("body"),m=!g.hasClass("no-tools")||g.hasClass("no-tools-toolbars-visible");u?(d.addClass("active"),s()(c.document).trigger("createContextToolbarRow.Toolbar",{id:Kl,buttons:t.searchToolbar.Buttons,topToolbar:!0,editorAdjacent:!0,animate:m,onVisible(){var t=function(){e.off("KeyDown",a),e.off("KeyPress",r),e.off("KeyUp",r);for(var t,o="",i=0;i<n.length;i++)o+=(t=n[i])>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t);return o.toLowerCase()}();Gl.onVisible(t),l(!0),o=!1,Gl.initialised=!0}}).trigger("enableContextToolbarRow.Toolbar"),n=[],e.on("KeyDown",a),e.on("KeyPress",r),e.on("KeyUp",r),Gl.init(),l(!1)):(d.removeClass("active"),Gl.onHide(),s()(c.document).trigger("removeContextToolbarRow.Toolbar",{id:Kl,animate:m,onHide(){s()(c.document).trigger("contextToolbarRowRemoved.Toolbar"),l(!0),o=!1,Gl.initialised=!1}}),l(!1),i.a.Env.browser.isFirefox()||frames.wysiwygTextarea_ifr.focus(),e.focus())}};return{init(e){e.addCommand("mceSearchReplaceToolbar",(()=>(e.undoManager.ignore((()=>{d()})),!1))),e.addCommand("mceConfSearch",((t,n)=>!!Gl&&((n=n||{}).backwards&&!e.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-find-previous-button")?(Gl.focus(),!1):n.backwards||e.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-find-next-button")?(Gl.find(n.backwards,n.onFound,n.onNotFound),!1):(Gl.focus(),!1)))),e.addCommand("mceConfReplaceAll",((t,n)=>!!Gl&&(n=n||{},!!e.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-replaceall-button")&&(Gl.replaceAll(n.onReplaced,n.onNotReplaced),!1)))),e.addCommand("mceConfSearchClose",(()=>!!Gl&&(e.undoManager.ignore((()=>{e.execCommand("mceSearchReplaceToolbar",!1,null)})),!1))),e.ui.registry.addButton("searchreplace",{text:"searchreplace.search_desc",onAction:function(){e.execCommand("mceSearchReplaceToolbar")}}),e.shortcuts.add("meta+f","searchreplace.search_desc",(()=>{Gl&&Gl.isVisible()?Gl.focus():e.undoManager.ignore((()=>{e.execCommand("mceSearchReplaceToolbar",!1,!1)}))}))},getInfo:()=>({longname:"Search/Replace",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:`${i.a.majorVersion}.${i.a.minorVersion}`})}}Object(jt.a)("confluence-editor/search-manager",(()=>Gl));var Jl=function(){Pe(c.document,"initContextToolbars.Toolbar",((e,t)=>{var n;c.Confluence.Editor.searchToolbar=(n=c.Confluence.Editor,{initContextToolbars(e,t){var o=function(e){if(c.tinymce.Env.browser.isFirefox()){var t=s()(e).val().length;e.setSelectionRange(t,t)}},r=function(e){var t;null===(t=top)||void 0===t||t.focus(),c.tinymce.activeEditor.plugins.customtoolbar.focusToolbarButton(e)},a=function(){var e;null===(e=top)||void 0===e||e.focus();var t=s()("#search-toolbar-find-text");t.focus(),o(t[0])},i=function(){var e;null===(e=top)||void 0===e||e.focus();var t=s()("#search-toolbar-replace-text");t.focus(),o(t[0])},l=function(){if(c.tinymce.Env.browser.isFirefox()){var e=c.tinymce.activeEditor;e.focus(),e.selection.select(e.getBody()),e.selection.collapse(!1),e.focus()}},d=new n.Toolbar.Components.TextBox({id:"search-toolbar-find-text",text:t.translate("searchreplace_dlg.findlabel"),name:"find",keydown:function(e){if((e.ctrlKey||c.tinymce.Env.os.isMacOS()&&e.metaKey)&&70===e.which)e.preventDefault();else if(13===e.which){e.preventDefault();var t={backwards:!1,onFound:a,onNotFound:a};c.tinymce.activeEditor.undoManager.ignore((()=>{c.tinymce.activeEditor.execCommand("mceConfSearch",!1,t)}))}else 27===e.which&&(e.preventDefault(),c.tinymce.activeEditor.undoManager.ignore((()=>{c.tinymce.activeEditor.execCommand("mceSearchReplaceToolbar",!1,!1)})))},cssClass:"toolbar-find-input"}),u=new n.Toolbar.Components.TextBox({id:"search-toolbar-replace-text",text:t.translate("searchreplace_dlg.replacelabel"),name:"replace",keydown:function(e){if((e.ctrlKey||c.tinymce.Env.os.isMacOS()&&e.metaKey)&&70===e.which)e.preventDefault();else if(13===e.which){e.preventDefault();var t=c.tinymce.activeEditor.undoManager.ignore((()=>{c.tinymce.activeEditor.execCommand("mceConfSearch",!1,{backwards:!1,onFound:i,onNotFound:a})}));f(i,a,t)}else 27===e.which&&(e.preventDefault(),c.tinymce.activeEditor.undoManager.ignore((()=>{c.tinymce.activeEditor.execCommand("mceSearchReplaceToolbar",!1,!1)})))},cssClass:"toolbar-replace-input"}),g=new n.Toolbar.Components.TextButton({text:t.translate("searchreplace_dlg.findprevious"),click(){var e={backwards:!0,onFound(){var e;null===(e=top)||void 0===e||e.focus(),r("search-toolbar-find-previous-button")},onNotFound:a};t.undoManager.ignore((()=>{t.execCommand("mceConfSearch",!1,e)}))},textClass:"search-toolbar-find-previous-button"}),m=new n.Toolbar.Components.TextButton({text:t.translate("searchreplace_dlg.findnext"),click(){var e={backwards:!1,onFound(){var e;null===(e=top)||void 0===e||e.focus(),r("search-toolbar-find-next-button")},onNotFound:a};t.undoManager.ignore((()=>{t.execCommand("mceConfSearch",!1,e)}))},textClass:"search-toolbar-find-next-button"}),p=new n.Toolbar.Components.TextButton({text:t.translate("searchreplace_dlg.replace"),click(){f((()=>{var e;null===(e=top)||void 0===e||e.focus(),r("search-toolbar-replace-button")}),a)},textClass:"search-toolbar-replace-button"}),f=(e,t,n)=>{Gl&&(c.tinymce.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-replace-button")?Gl.replace(e,t):n&&n())},h=new n.Toolbar.Components.TextButton({text:t.translate("searchreplace_dlg.replaceall"),click(){var e={onReplaced:l,onNotReplaced:a};t.undoManager.transact((()=>{t.execCommand("mceConfReplaceAll",!1,e)}))},textClass:"search-toolbar-replaceall-button"}),v=new n.Toolbar.Components.Button({text:t.translate("searchreplace_dlg.close"),iconClass:"icon aui-icon aui-icon-small aui-iconfont-close-dialog",click(){t.undoManager.ignore((()=>{t.execCommand("mceConfSearchClose",!1,null)}))}});return{Buttons:[new n.Toolbar.Components.Group([v],{groupClass:"close"}),new n.Toolbar.Components.Group([d,u],{groupClass:"no-separator"}),new n.Toolbar.Components.Group([g,m]),new n.Toolbar.Components.Group([p,h])]}}}).initContextToolbars(e,t)}))};function ql(){return{init:e=>{var t=e=>{s()(".tablesorter",e.node).each(((e,t)=>{var n,o,r=s()(t).find("thead");1===r.length&&"THEAD"===(r=r[0]).nodeName&&1===r.childNodes.length&&(o=r.removeChild(r.childNodes[0]),n=s()(t).find("tbody")[0],t.removeChild(r),n.insertBefore(o,n.childNodes[0]))}))};e.on("PastePostProcess",t),e.on("remove",(()=>{e.off("PastePostProcess",t)}))},getInfo:()=>({longname:"ConfluenceSortableTablesPlugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"})}}var Zl,Xl,es,ts,ns=n(32),os=n.n(ns),rs=(n(86),"macro-placeholder-property-panel-edit-button"),as="status-macro-title first last editable",is=13,ls=27,ss="status",cs=["Grey","Red","Yellow","Green","Blue"],ds=cs[0];function us(){gs();var e=c.Confluence.MacroParameterSerializer.deserialize(s()(Xl).attr("data-macro-parameters")),t=!1,n=!1;return e&&es&&(t=e.title!==es.title,n=e.colour!==es.colour),t||n}function gs(){if(ts){var e=ps(es)==ts.val(),t=""===ts.val();e||t?delete es.title:es.title=ts.val()}}function ms(){if(Zl&&Zl.state&&"pending"===Zl.state())p.a.debug("Macro update already in progress.");else{gs();var e={contentId:c.Confluence.Editor.getContentId(),macro:{name:ss,params:es,defaultParameterValue:"",body:""}};(Zl=c.tinymce.confluence.MacroUtils.insertMacro(e,Xl)).done((e=>{var t;t=Xl=e,c.tinymce.activeEditor.selection.select(t),yt(),c.tinymce.activeEditor.selection.collapse()})).fail((e=>{p.a.error(`Failed to load status macro - ${e}`)}))}}function ps(e){return e.colour||e.color||ds}function fs(){var e=s()("<input/>");return e.attr("class",as),e.keyup((e=>e.keyCode!==is||(c.Confluence.PropertyPanel.destroy(),!1))),e.keydown((e=>e.keyCode!==ls||(ts=null,!0))),e}function hs(e){(ts=fs()).val(e.find("span.panel-button-text").text()),e.replaceWith(ts),ts.select().focus()}function vs(e){var t=function(e){for(var t=0;t<e.length;t++)if(e[t].className.indexOf(rs)>-1)return e[t];return null}(e),n=function(e){xn.editMacro(e)};t&&(t.click=function(){c.Confluence.PropertyPanel.destroy(),us()?Zl.always(n):n(Xl)})}function bs(e){e.on("init",(()=>{os.a.use()})),e.on("Remove",(()=>{os.a.unuse()}))}var ys="stickyTableHeaders",ws=0,Cs={fixedOffset:0,leftOffset:0,marginTop:0,objDocument:d.a.document,objHead:"head",objWindow:d.a,scrollableArea:d.a,cacheHeaderHeight:!1};function As(e,t){var n=this;n.$el=s()(e),n.el=e,n.id=ws++,n.$el.bind("destroyed",s.a.proxy(n.teardown,n)),n.$clonedHeader=null,n.$originalHeader=null,n.cachedHeaderHeight=null,n.isSticky=!1,n.hasBeenSticky=!1,n.leftOffset=null,n.topOffset=null,n.init=function(){n.setOptions(t),n.$el.each((function(){var e=s()(this);e.css("padding",0),n.$originalHeader=s()("thead:first",this),n.$clonedHeader=n.$originalHeader.clone(),e.trigger(`clonedHeader.${ys}`,[n.$clonedHeader]),n.$clonedHeader.addClass("tableFloatingHeader"),n.$clonedHeader.css("display","none"),n.$originalHeader.addClass("tableFloatingHeaderOriginal"),n.$originalHeader.after(n.$clonedHeader),n.$printStyle=s()('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),n.$head.append(n.$printStyle)})),n.updateWidth(),n.toggleHeaders(),n.bind()},n.destroy=function(){n.$el.unbind("destroyed",n.teardown),n.teardown()},n.teardown=function(){n.isSticky&&n.$originalHeader.css("position","static"),s.a.removeData(n.el,`plugin_${ys}`),n.unbind(),n.$clonedHeader.remove(),n.$originalHeader.removeClass("tableFloatingHeaderOriginal"),n.$originalHeader.css("visibility","visible"),n.$printStyle.remove(),n.el=null,n.$el=null},n.bind=function(){n.$scrollableArea.on(`scroll.${ys}`,n.toggleHeaders),n.isWindowScrolling||(n.$window.on(`scroll.${ys}${n.id}`,n.setPositionValues),n.$window.on(`resize.${ys}${n.id}`,n.toggleHeaders)),n.$scrollableArea.on(`resize.${ys}`,n.toggleHeaders),n.$scrollableArea.on(`resize.${ys}`,n.updateWidth)},n.unbind=function(){n.$scrollableArea.off(`.${ys}`,n.toggleHeaders),n.isWindowScrolling||(n.$window.off(`.${ys}${n.id}`,n.setPositionValues),n.$window.off(`.${ys}${n.id}`,n.toggleHeaders)),n.$scrollableArea.off(`.${ys}`,n.updateWidth)},n.debounce=function(e,t){var n=null;return function(){var o=this,r=arguments;clearTimeout(n),n=setTimeout((()=>{e.apply(o,r)}),t)}},n.toggleHeaders=n.debounce((()=>{n.$el&&n.$el.each((function(){var e,t=s()(this),o=n.isWindowScrolling?isNaN(n.options.fixedOffset)?n.options.fixedOffset.outerHeight():n.options.fixedOffset:n.$scrollableArea.offset().top+(isNaN(n.options.fixedOffset)?0:n.options.fixedOffset),r=t.offset(),a=n.$scrollableArea.scrollTop()+o,i=n.$scrollableArea.scrollLeft(),l=n.options.cacheHeaderHeight?n.cachedHeaderHeight:n.$clonedHeader.height(),c=n.isWindowScrolling?a>r.top:o>r.top,d=(n.isWindowScrolling?a:0)<r.top+t.height()-l-(n.isWindowScrolling?0:o);c&&d?(e=r.left-i+n.options.leftOffset,n.$originalHeader.css({position:"fixed","margin-top":n.options.marginTop,left:e,"z-index":3}),n.leftOffset=e,n.topOffset=o,n.$clonedHeader.css("display",""),n.isSticky||(n.isSticky=!0,n.updateWidth(),t.trigger(`enabledStickiness.${ys}`)),n.setPositionValues()):n.isSticky&&(n.$originalHeader.css("position","static"),n.$clonedHeader.css("display","none"),n.isSticky=!1,n.resetWidth(s()("td,th",n.$clonedHeader),s()("td,th",n.$originalHeader)),t.trigger(`disabledStickiness.${ys}`))}))}),0),n.setPositionValues=n.debounce((()=>{var e=n.$window.scrollTop(),t=n.$window.scrollLeft();!n.isSticky||e<0||e+n.$window.height()>n.$document.height()||t<0||t+n.$window.width()>n.$document.width()||n.$originalHeader.css({top:n.topOffset-(n.isWindowScrolling?0:e),left:n.leftOffset-(n.isWindowScrolling?0:t)})}),0),n.updateWidth=n.debounce((()=>{if(n.isSticky){n.$originalHeaderCells||(n.$originalHeaderCells=s()("th,td",n.$originalHeader)),n.$clonedHeaderCells||(n.$clonedHeaderCells=s()("th,td",n.$clonedHeader));var e=n.getWidth(n.$clonedHeaderCells);n.setWidth(e,n.$clonedHeaderCells,n.$originalHeaderCells),n.$originalHeader.css("width",n.$clonedHeader.width()),n.options.cacheHeaderHeight&&(n.cachedHeaderHeight=n.$clonedHeader.height())}}),0),n.getWidth=function(e){var t=[];return e.each((function(e){var o,r=s()(this);if("border-box"===r.css("box-sizing")){var a=r[0].getBoundingClientRect();o=a.width?a.width:a.right-a.left}else{if("collapse"===s()("th",n.$originalHeader).css("border-collapse"))if(d.a.getComputedStyle)o=parseFloat(d.a.getComputedStyle(this,null).width);else{var i=parseFloat(r.css("padding-left")),l=parseFloat(r.css("padding-right")),c=parseFloat(r.css("border-width"));o=r.outerWidth()-i-l-c}else o=r.width()}t[e]=o})),t},n.setWidth=function(e,t,n){t.each((t=>{var o=e[t];n.eq(t).css({"min-width":o,"max-width":o})}))},n.resetWidth=function(e,t){e.each((function(e){var n=s()(this);t.eq(e).css({"min-width":n.css("min-width"),"max-width":n.css("max-width")})}))},n.setOptions=function(e){n.options=s.a.extend({},Cs,e),n.$window=s()(n.options.objWindow),n.$head=s()(n.options.objHead),n.$document=s()(n.options.objDocument),n.$scrollableArea=s()(n.options.scrollableArea),n.isWindowScrolling=n.$scrollableArea[0]===n.$window[0]},n.updateOptions=function(e){n.setOptions(e),n.unbind(),n.bind(),n.updateWidth(),n.toggleHeaders()},n.init()}s.a.fn[ys]=function(e){return this.each((function(){var t=s.a.data(this,`plugin_${ys}`);t?"string"==typeof e?t[e].apply(t):t.updateOptions(e):"destroy"!==e&&s.a.data(this,`plugin_${ys}`,new As(this,e))}))};var xs=function(e){return!(e.parents("table").length>0)},Ms=function(e){return!(e.closest(".columnLayout").length>0)},ks=function(){return!s()("body").hasClass("theme-documentation")},Es=function(e){var t=s()(e);return ks()&&function(e){return!e.hasClass("stickyTableHeaders")}(t)&&Ms(t)&&xs(t)&&function(e){return e.find("> thead:first").is(":visible")}(t)&&function(e){return 1===e.find("thead").children().length}(t)&&function(e){return 1===e.find(".confluenceTh").parent().length}(t)&&function(e){return e.find(".confluenceTh").siblings().hasClass("confluenceTh")}(t)},Ts=function(e,t){var n=t||s()(window);e.closest(".table-wrap").scroll((()=>{n.trigger("scroll.stickyTableHeaders")}))},Ds=function(e){s()(e).each((function(){var e=s()(this),t=e.find(".confluenceTh[rowspan]").length>0,n=e.find("> :first-child > :first-child .confluenceTh"),o=n.length&&n.closest("thead").length>0,r=n.length&&0===n.parent().index();if(xs(e)&&Ms(e)&&!o&&r&&!t){var a=s()("<thead />").append(n.parent());e.prepend(a)}}))},Ss=ks,Is=function(e,t){var n=e.filter((function(){return Es(this)}));n.stickyTableHeaders(t).addClass("stickyTableHeaders"),Object(C.a)("sticky-table-headers.change.options",((e,t)=>{n.stickyTableHeaders(t)})),Ts(n)},Os=function(){var e=s()(".confluenceTable"),t=s()(window);if(Ss()){if(Ds(e),window.MutationObserver){var n=document.querySelector("#page");if(!n)return;var o=/sticky|tableFloating|confluenceTh/;new MutationObserver(s.a.debounce((e=>{for(var n,r=!1,a=0,i=e.length;a<i;a++)if(n=e[a].target.className,!o.test(n)){r=!0;break}r&&t.trigger("resize.stickyTableHeaders")}),0)).observe(n,{subtree:!0,attributes:!0,childList:!0})}Is(e,{cacheHeaderHeight:!0})}};function js(e){function t(e){var t,r,a,i={id:!0,class:!0,style:!0,rowspan:!0,colspan:!0,"data-mce-style":!0,"data-mce-bogus":!0,"data-macro-name":!0,"data-macro-parameters":!0,"data-macro-body-type":!0,"data-highlight-colour":!0,"data-highlight-class":!0,"data-mce-resize":!0,"data-snooker-col-series":!0,"data-snooker-locked-cols":!0,contenteditable:!0},l=["highlight","nohighlight","relative-table","fixed-table","fixed-width","numberingColumn"],s=0,c=[],d=$(e);if(!e||o(e))return e;if(function(e){var t;e&&e.getAttribute&&(t=e.getAttribute("class"));return t&&t.indexOf("table-wrap")>=0}(e)){var u=$("table",e);if(!u.length)return null;$(u).unwrap(),e=u[0]}if(function(e){return!!e.tagName&&("TABLE"===e.tagName||("TR"===e.tagName||("TH"===e.tagName||("TD"===e.tagName||("TBODY"===e.tagName||("THEAD"===e.tagName||("TFOOT"===e.tagName||("COL"===e.tagName||("COLGROUP"===e.tagName||"CAPTION"===e.tagName)))))))))}(e)&&e.attributes){for(;s<=e.attributes.length;)(t=e.attributes[s])&&!0===t.specified&&!i[t.name]?e.removeAttribute(t.name):s++;n(e)&&c.push(n(e));for(var g=0,m=l.length;g<m;g++)d.hasClass(l[g])&&c.push(l[g]);(r=d.attr("data-highlight-class"))&&c.push(r),(a=d.attr("data-highlight-colour"))&&c.push("highlight-"+a),d.attr("class",c.join(" "))}return e}function n(e){return e.tagName?"TABLE"===e.tagName?"confluenceTable":"TH"===e.tagName?"confluenceTh":"TD"===e.tagName?"confluenceTd":"":""}function o(e){var t;return e&&e.getAttribute&&(t=e.getAttribute("class")),!!e.tagName&&("TABLE"===e.tagName&&(!!t&&-1!==t.indexOf("wysiwyg-macro")))}function r(e,n,r){r.node=function(e,t){for(var n,r,a,i=e;i&&("function"==typeof t&&(i=t(i)),i);)!i.firstChild||(r=i,(a=n)&&a.parentNode===r)||o(i)?i.nextSibling?(n=i,i=i.nextSibling):(n=i,i=i.parentNode):(n=i,i=i.firstChild);return e}(r.node,t)}e.on("Init",(function(){Pe(document,"postPaste",r)})),e.on("Remove",(function(){$e(document,"postPaste",r)}))}var Ns;function Ls(e,t){var n=s.a.parseHTML(e),o=[Node.ELEMENT_NODE,Node.DOCUMENT_NODE,Node.DOCUMENT_FRAGMENT_NODE],r=!1;return n.forEach((function(e){(Ns.dom.is(e,t)||o.includes(e.nodeType)&&e.querySelector(t))&&(r=!0)})),r}function Bs(){Object(C.b)("analytics",{name:"confluence.table.image.insert",data:{pageId:m.a.get("page-id"),tableMode:Ps()}})}function Rs(){return!!s()(Ns.selection.getNode()).closest("table.confluenceTable").length}function Ps(){var e=s()(Ns.selection.getNode()).closest("table.confluenceTable");return e.hasClass("fixed-table")||e.hasClass("fixed-width")?"fixed":e.hasClass("relative-table")?"relative":"fluid"}function $s(){var e=s()(Ns.getBody()).find("table.confluenceTable");Object(C.b)("analytics",{name:"confluence.table.quality.in.page",data:{pageId:m.a.get("page-id"),total:e.length,fixed:e.filter(".fixed-table,.fixed-width").length,fluid:e.filter(":not(.fixed-table,.relative-table,.fixed-width)").length,relative:e.filter(".relative-table").length,nested:e.find("table.confluenceTable").length}})}function Hs(){return{init(e){function t(e,t){Rs()&&function(e){var t,n;e&&e.name&&e.name.indexOf("confluence.editor.image.resize")>=0&&Object(C.b)("analytics",{name:"confluence.table.img.resize",data:{pageId:m.a.get("page-id"),tableMode:Ps(),isImgBiggerCell:(t=s()(Ns.selection.getNode()),n=t.closest("th, td"),t.width()>n.width())}})}(t)}Ns=e,e.on("ExecCommand",(e=>{switch(e.command){case"mceAutoWidth":case"mceRelativeWidth":case"mceFixedWidth":Object(C.b)("analytics",{name:`confluence.table.mode.to.${Ps()}`,data:{pageId:m.a.get("page-id")}});break;case"mceTableCopyRow":Object(C.b)("analytics",{name:"confluence.table.row.copy",data:{pageId:m.a.get("page-id")}});break;case"mceTablePasteRowBefore":case"mceTablePasteRowAfter":Object(C.b)("analytics",{name:"confluence.table.row.paste",data:{pageId:m.a.get("page-id")}});break;case"mceTableCopyCol":Object(C.b)("analytics",{name:"confluence.table.col.copy",data:{pageId:m.a.get("page-id")}});break;case"mceTablePasteColBefore":case"mceTablePasteColAfter":Object(C.b)("analytics",{name:"confluence.table.col.paste",data:{pageId:m.a.get("page-id")}});break;case"mceInsertContent":Ls(t=e.value,"img")&&Rs()&&Bs(),Ls(t,"table.confluenceTable")&&Object(C.b)("analytics",{name:"confluence.table.paste",data:{pageId:m.a.get("page-id")}});break;case"confTableSelectionToggleHighlight":Object(C.b)("analytics",{name:"confluence.editor.table.selection.toggle.highlight",data:{color:s()("#table-highlight-group").attr("data-highlight-colour")}})}var t})),e.on("Init",(()=>{e.on("SetContent",(e=>{Rs()&&e&&function(e){Ls(e.content,".confluence-embedded-image")&&Bs()}(e)}))})),Object(C.a)("analyticsEvent",t),Object(C.a)("rte.safe-save.success",$s),e.on("Remove",(()=>{Object(C.c)("analyticsEvent",t),Object(C.c)("rte.safe-save.success",$s)}))},getInfo:()=>({longname:"Table Analytics Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Fs(){var e=["img:not(.editor-inline-macro, .emoticon)"].concat(["time.non-editable",".editor-inline-macro","a.confluence-link[data-linked-resource-type='userinfo']"]).concat([".wysiwyg-macro"]).join(","),t="<div class='content-wrapper'>";return{init(n){function o(){var o="wrapped";s()(n.dom.select(`table.confluenceTable:not(.${o})`)).each(((n,r)=>{s()(r).addClass(o).find("> tbody > tr > th, > tbody > tr > td, > thead > tr > th").each(((n,o)=>{var r=s()(o);!r.find("> .content-wrapper").length&&r.find(e).length&&r.wrapInner(t)}))}))}Object(C.a)("rte-ready",o),n.on("Remove",(()=>{Object(C.c)("rte-ready",o)})),n.on("Change",(()=>{var o=n.selection;function r(){return o.getBookmark()}function a(e){o.moveToBookmark(e),yt()}var i=o.getNode(),l=s()(i);if(i&&l.closest("table.confluenceTable").not("table.confluenceTable table.confluenceTable").length){!function(e){var t=o.getRng();if(e.is("tr")&&t&&s()(t.startContainer).is("tr")&&t.collapsed){var n=e.find(">td, >th").first(),r=n.find(":first-child:not(.content-wrapper)")[0]||n[0].firstChild;t.setStart(r,0),t.setEnd(r,0),o.setRng(t)}}(l);var c,d=l.closest("table.confluenceTable > tbody > tr > th, table.confluenceTable > tbody > tr > td, table.confluenceTable > thead > tr > th");if(d.find(e).length){var u=d.find("> .content-wrapper");u.length?(c=r(),function(e){for(var t=0;t<e.length;t++)e.eq(t).find("> p, > table, > ul, > ol").length||e.eq(t).wrapInner("<p/>"),t>0&&(e.eq(0).append(e.eq(t).children()),e.eq(t).remove())}(u),a(c)):d.find("> p").length?(c=r(),d.wrapInner(t),a(c)):(c=r(),d.wrapInner("<p/>").wrapInner(t),a(c))}}s()(n.getWin().document).find(".content-wrapper:empty").remove()}))},getInfo:()=>({longname:"Table Content Wrapper Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"})}}var zs=/^\u200b?(\[)$/;function Us(e){return e.dom.getParent(e.selection.getStart(),"UL,OL")}function _s(e){return!(!e||"ul"!==e.nodeName.toLowerCase()||!e.classList.contains("inline-task-list"))}function Qs(e){return e&&"ul"===e.nodeName.toLowerCase()&&!_s(e)}function Ws(e){e&&e.classList.contains("inline-task-list")&&(e.classList.remove("inline-task-list"),0===e.classList.length&&e.removeAttribute("class"),e.removeAttribute("data-inline-tasks-content-id"),Array.prototype.slice.call(e.children).forEach((e=>{e.removeAttribute("data-inline-task-id"),e.classList.remove("checked"),e.style.backgroundImage=""})))}function Vs(e){var t=Us(e);t&&_s(t)||function(e,t){var n=`a11y-notification-${e.dom.uniqueId()}`;e.getBody().insertAdjacentHTML("afterend",`<div class="assistive" aria-live="assertive" role="Alert" id="${n}"></div>`);var o=e.getDoc().getElementById(n);if(o){o.insertAdjacentHTML("afterbegin",`<span>${t}</span>`);var r=setTimeout((()=>{o.remove(),clearTimeout(r)}),3e3)}}(e,c.AJS.format("Task list item created"));var n=e.dom.uniqueId();e.execCommand("InsertUnorderedList",!1,{"list-attributes":{"data-task-list-id":n,class:"inline-task-list"},"list-item-attributes":{"data-inline-task-id":""}}),e.dom.select(`[data-task-list-id="${n}"]`).forEach((t=>{var n=t.querySelectorAll("li")[0];n&&e.dom.isEmpty(t)&&(n.innerHTML=`<span class="placeholder-inline-tasks">${Object(ln.a)("tinymce.confluence.placeholder.inline.tasks")}</span>`,e.selection.select(n.firstChild,!0)),t.removeAttribute("data-task-list-id")}))}function Ks(){return!(e=m.a.get("use-inline-tasks"),"true"===e||!0===e||"page"===m.a.get("content-type")||"blogpost"===m.a.get("content-type")||"template"===m.a.get("content-type"));var e}function Gs(){return{init(e){e.on("init",(()=>{e.getBody().classList.add("template-editor")}))}}}var Ys=function(e){if(!e)return null;var t=e.endOffset;return 3===e.endContainer.nodeType?e.endContainer:e.endContainer.childNodes[t-1]},Js=function(e,t){if(t&&t.previousSibling&&t.previousSibling.hasChildNodes()){var n=t.previousSibling,o=n.childNodes.length,r=n.childNodes[o-1],a=r.length,i=e.dom.createRng();i.setStart(r,a),i.setEnd(r,a),e.selection.setRng(i)}};function qs(){return{init(e){e.on("KeyDown",(t=>{c.tinymce.VK.modifierPressed(t)||32!==t.keyCode||function(e){var t=e.selection.getNode(),n=s()(t).closest("a"),o=e.selection.getRng();n.length&&o&&Go.isCursorAtEnd(e,o)&&(o.setStartAfter(n[0]),o.setEndAfter(n[0]),e.selection.setRng(o),e.selection.collapse())}(e),c.tinymce.VK.modifierPressed(t)||8!==t.keyCode&&37!==t.keyCode||function(e){if(e.selection.isCollapsed()&&!function(e){return!!e.dom.getParents(e.selection.getNode(),"#autocomplete-search-text").length}(e)){var t=Ys(e.selection.getRng());t&&t.nodeValue&&65279===t.nodeValue.charCodeAt(0)&&function(e,t){return 1==t.nodeValue.length&&1==e.selection.getNode().childNodes.length}(e,t)&&e.undoManager.ignore((()=>{Js(e,t),t.parentNode&&t.parentNode.removeChild(t)}))}}(e)}))}}}var Zs=n(33),Xs=n.n(Zs);function ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function tc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(n),!0).forEach((function(t){nc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oc=(e,t)=>{if("number"==typeof e)return e;if("string"==typeof e&&/^\d+/.test(e))try{return parseInt(e)}catch(e){return t}return t};class rc{constructor(e){nc(this,"scope",void 0),nc(this,"listeners",void 0),nc(this,"inDispatch",void 0),this.inDispatch=!1,this.scope=e||this,this.listeners=[]}add(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e}addToTop(e,t){var n=this,o={cb:e,scope:t||n.scope};return n.inDispatch?n.listeners=[o].concat(n.listeners):n.listeners.unshift(o),e}remove(e){var t=this.listeners,n=null;return c.tinymce.each(t,((o,r)=>{if(e==o.cb)return n=o,t.splice(r,1),!1})),n}dispatch(){var e,t,n,o=this,r=arguments,a=o.listeners;for(o.inDispatch=!0,t=0;t<a.length&&!1!==(n=(e=a[t]).cb.apply(e.scope,r.length>0?r:[e.scope]));t++);return o.inDispatch=!1,n}}function ac(e){return"object"==typeof e&&e.name}function ic(e,t){return"string"==typeof t?e.queryCommandState(t):!!ac(t)&&e.queryCommandState(t.name)}function lc(e){this.init=this.init(e)}function sc(e){var t={},n={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",justifyleft:"JustifyLeft",justifycenter:"JustifyCenter",justifyright:"JustifyRight",bullist:"InsertUnorderedList",numlist:"InsertOrderedList",tasklist:"InsertInlineTaskList",outdent:"Outdent",indent:"Indent",cut:"Cut",copy:"Copy",paste:"Paste",undo:"Undo",redo:"Redo",removeformat:"RemoveFormat",sub:"subscript",sup:"superscript",forecolor:"ForeColor",forecolorpicker:"mceForeColor",backcolor:"HiliteColor",backcolorpicker:"mceBackColor",charmap:"mceCharMap",visualaid:"mceToggleVisualAid",anchor:"mceInsertAnchor",newdocument:"mceNewDocument",blockquote:"mceBlockQuote",help:"mceConfShortcutDialog"},o=["bold","italic","underline","bullist","numlist","tasklist","justifyleft","justifycenter","justifyright","strikethrough,sub,sup,monospace"];function r(e){var n=e.undoManager;t.buttons.state.dispatch("undo","disabled",!n.hasUndo()&&!n.typing),t.buttons.state.dispatch("redo","disabled",!n.hasRedo())}function a(t){var o=e.ui.registry.getAll().buttons[t];if(!o)return!1;o.cmd?n[t]=o.cmd:n[t]={func:o.onAction,name:t}}function i(){c.tinymce.each(c.tinymce.explode("formatselect,confimage,conf_macro_browser,code,customtoolbar,monospace,searchreplace,linkbrowserbutton"),(n=>{if(!a(n)&&"formatselect"===n)t.formatselect={},t.formatselect.state=new rc,t.formatselect.click=new rc,t.formatselect.click.add((t=>{e.execCommand("FormatBlock",!1,t)}))})),t.buttons={},t.buttons.state=new rc,t.buttons.click=new rc,t.buttons.click.add((t=>{var o=n[t];"string"==typeof o?e.execCommand(n[t]):ac(o)&&o.func()})),function(){var t={toolbar:"toolbar-primary",title:"",tooltip:"",cmd:"",className:"",locationGroup:null,weight:1/0,onclick:null},n=e.ui.registry.getAll().buttons,o=[];for(var r in n)o.push(tc(tc(tc({},t),n[r]),{},{id:r,weight:oc(n[r].weight,1/0)}));o=o.filter((e=>!!e.locationGroup)),["toolbar-primary"].forEach((e=>{var t=s()(`.${e}`);o.filter((t=>t.toolbar===e)).sort(((e,t)=>e.weight-t.weight)).forEach((e=>{a(e.id);var n,o=t.find(`.${e.locationGroup}`),r=s()(`<li id="${(n=e).id}" class="toolbar-item ${n.className}" data-tooltip="${n.tooltip}" data-weight="${n.weight}">\n                            <a class="toolbar-trigger aui-button aui-button-subtle" role="button" aria-label="${n.tooltip}" href="#" data-control-id="${n.id}">\n                                <span class="icon ${n.icon}"></span>\n                                <span class="trigger-text">${n.title}</span>\n                            </a>\n                        </li>`);o.append(r).removeClass("hidden")}))}))}()}var l=lc.shouldInit();return l&&lc.suppressIncompatiblePlugins(),e.on("Init",(()=>{i(),e.mode.isReadOnly()||(e.on("NodeChange",(a=>{!function(e,a){c.tinymce.each(o,(o=>{var r,a=!1;if(o.indexOf(",")>0){var i=o.split(",");r=i[0],a=i.some((t=>!!ic(e,n[t])))}else a=!!ic(e,n[r=o]);t.buttons.state.dispatch(r,"active",a)})),r(e),t.buttons.state.dispatch("outdent","disabled",!ic(e,"Outdent"));var i=function(e){for(var t=a.parents,n=0;n<t.length;n++)if(e(t[n]))return t[n]}(e.dom.isBlock);i&&t.formatselect.state.dispatch(i.nodeName.toLowerCase())}(e,{parents:a.parents})})),e.on("keyup",(()=>{r(e)})),e.on("MouseUp",(()=>{r(e)})),e.dom.bind(e.dom.getRoot(),"dragend",(()=>{r(e)})),l&&new lc(e)),Xs.a.use()})),e.on("Remove",(()=>{Xs.a.unuse()})),{controlHandlers:t}}lc.INCOMPATIBLE_PLUGINS=["dfe"],lc.shouldInit=()=>{var e=s()("body");return e.hasClass("edit")||e.hasClass("create")||e.hasClass("copy-page")},lc.suppressIncompatiblePlugins=()=>{for(var e=()=>{},t=0,n=lc.INCOMPATIBLE_PLUGINS.length;t<n;t++)c.tinymce.PluginManager.lookup[lc.INCOMPATIBLE_PLUGINS[t]]=e},lc.prototype.init=e=>{var t=c.tinymce.util.VK,n=s()("#content-title"),o=s()("form.editor"),r=s()(e.getBody()),a=s()(e.getDoc()),i=s()("#editor-precursor"),l=s()(e.getWin()),u=s()("#toolbar"),g=a.scrollTop(),m=parseInt(r.css("padding-top"),10)+parseInt(r.css("margin-top"),10),p=parseInt(i.css("padding-top"),10),f=d.a.requestAnimationFrame||d.a.webkitRequestAnimationFrame;function h(t){e.plugins.customtoolbar.toggleToolbarButtons(t,t,t,(()=>!s()(this).parent().hasClass("close")))}function v(e){return e.getBoundingClientRect().top+document.body.scrollTop}function b(){var e=g-a.scrollTop(),t=v(u[0])-v(o[0]),n=i.outerHeight(),l=u.outerHeight();i.css("top",`${t+l+e+p}px`),r.css("padding-top",`${n+m}px`)}return n.on("keydown",(n=>{var o=n.keyCode||n.which;o!==t.ENTER&&o!==t.DOWN||(n.preventDefault(),n.stopPropagation(),e.focus(!1))})).on("focus click",(()=>{h(!0)})),l.on("focus",(()=>{h(!1)})),function(e){!function t(){e(t),b()}(),r.on("scroll mousewheel",(()=>{setTimeout(b,0)}))}(f),!0};var cc="confluence.spa.editor",dc=(e,t)=>{Object.keys(t).forEach((e=>{t[e]=Ja(t[e])})),Object(C.b)("analytics",{name:`${cc}.plugins.${e}`,data:t})};function uc(){return{init(e){e.on("Init",(()=>{var e=m.a.get("version-comment");s()("#rte-savebar-tinymce-plugin-point").append(((e,t)=>`\n<span class="rte-toolbar-comment toolbar-item">\n    <input id="versionComment" name="versionComment" ${t?`value="${t}"`:""}\n           placeholder="${e("editor.change.comment")}"\n           class="text" type="text" size="35">\n    <label for="versionComment" class="assistive">${e("editor.change.comment")}</label>\n</span>\n`)((e=>Object(ln.a)(e)),e))}))},getInfo:()=>({longname:"Confluence Version Comment",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function gc(){return{init:e=>{e.on("init",(()=>{if(m.a.get("use-watch")){var e={userWatchingOwnContent:m.a.get("user-watching-own-content")};s()("#rte-savebar-tinymce-plugin-point").append(`\n    <ul class="toolbar-group toolbar-group-watch-page" id="toolbar-group-watch-page-after-comment">\n        <li class="toolbar-item">\n            <input id="watchPage" name="watchPageAfterComment" value="true" type="checkbox" ${e.userWatchingOwnContent?'checked="checked"':""}/>\n            <label for="watchPage">${(e=>Object(ln.a)(e))("comment.notification.enable")}</label>\n        </li>\n    </ul>\n`)}}))},getInfo:()=>({longname:"Confluence Watch",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}var mc=[function(){var e;function t(){}function n(t){e||(e=!0,p.a.warn(`Deprecated TinyMCE API call: ${t}`))}function o(e,o,r,a){e=e||this;var i=[];o?(this.add=function(t,l,s){function c(n){var i=[];if("string"==typeof r&&(r=r.split(" ")),r&&"function"!=typeof r)for(var s=0;s<r.length;s++)i.push(n[r[s]]);("function"!=typeof r||(i=r(o,n,e)))&&(r||(i=[n]),i.unshift(a||e),!1===t.apply(l||a||e,i)&&n.stopImmediatePropagation())}n(`<target>.on${o}.add(..)`),e.on(o,c,s);var d={original:t,patched:c};return i.push(d),c},this.addToTop=function(e,t){this.add(e,t,!0)},this.remove=function(t){return i.forEach(((n,r)=>{if(n.original===t)return i.splice(r,1),e.off(o,n.patched)})),e.off(o,t)},this.dispatch=function(){return e.dispatch(o),!0}):this.add=this.addToTop=this.remove=this.dispatch=t}function r(e){function r(t,n){c.tinymce.each(t.split(" "),(t=>{e[`on${t}`]=new o(e,t,n)}))}function a(e,t,n){return[t.level,n]}function i(e){return function(t,n){if(!n.selection&&!e||n.selection==e)return[n]}}if(!e.controlManager){e.controlManager={buttons:{},setDisabled(e,t){n("controlManager.setDisabled(..)"),this.buttons[e]&&this.buttons[e].disabled(t)},setActive(e,t){n("controlManager.setActive(..)"),this.buttons[e]&&this.buttons[e].active(t)},onAdd:new o,onPostRender:new o,add:e=>e,createButton:l,createColorSplitButton:l,createControl:l,createDropMenu:l,createListBox:l,createMenuButton:l,createSeparator:l,createSplitButton:l,createToolbar:l,createToolbarGroup:l,destroy:t,get:t,setControlType:l},r("PreInit BeforeRenderUI PostRender Load Init Remove Activate Deactivate","editor"),r("Click MouseUp MouseDown DblClick KeyDown KeyUp KeyPress ContextMenu Paste Submit Reset"),r("BeforeExecCommand ExecCommand","command ui value args"),r("PreProcess PostProcess LoadContent SaveContent Change"),r("BeforeSetContent BeforeGetContent SetContent GetContent",i(!1)),r("SetProgressState","state time"),r("VisualAid","element hasVisual"),r("Undo Redo",a),r("NodeChange",((t,n)=>[e.controlManager,n.element,e.selection.isCollapsed(),n]));e.addButton;e.addButton=function(t,n){var o,r,a;n.title&&(n.text=(o=n.title,r=[e.options.isRegistered("language")?e.options.get("language"):"en",o].join("."),a=c.tinymce.i18n.translate(r),r!==a?a:c.tinymce.i18n.translate(o))),n.cmd&&(n.onAction=function(){ed.execCommand(n.cmd)}),e.ui.registry.addButton(t,n)},e.on("init",(()=>{var t=e.undoManager,n=e.selection;t.onUndo=new o(e,"Undo",a,null,t),t.onRedo=new o(e,"Redo",a,null,t),t.onBeforeAdd=new o(e,"BeforeAddUndo",null,t),t.onAdd=new o(e,"AddUndo",null,t),n.onBeforeGetContent=new o(e,"BeforeGetContent",i(!0),n),n.onGetContent=new o(e,"GetContent",i(!0),n),n.onBeforeSetContent=new o(e,"BeforeSetContent",i(!0),n),n.onSetContent=new o(e,"SetContent",i(!0),n)})),e.on("BeforeRenderUI",(()=>{var t=e.windowManager;t.onOpen=new o,t.onClose=new o,t.createInstance=function(e,t,o,r,a,i){return n("windowManager.createInstance(..)"),new(c.tinymce.resolve(e))(t,o,r,a,i)}})),e.getLang=(t,n)=>{var o=e.options.isRegistered("language")?e.options.get("language"):"en";return e.editorManager.i18n.data[o+"."+t]||(void 0!==n?n:"{#"+t+"}")}}function l(){var e={};function t(){return l()}return n("editor.controlManager.*"),c.tinymce.each("add addMenu addSeparator collapse createMenu destroy displayColor expand focus getLength hasMenus hideMenu isActive isCollapsed isDisabled isRendered isSelected mark postRender remove removeAll renderHTML renderMenu renderNode renderTo select selectByIndex setActive setAriaProperty setColor setDisabled setSelected setState showMenu update".split(" "),(n=>{e[n]=t})),e}}c.tinymce.util.Dispatcher=o,c.tinymce.onBeforeUnload=new o(c.tinymce,"BeforeUnload"),c.tinymce.onAddEditor=new o(c.tinymce,"AddEditor","editor"),c.tinymce.onRemoveEditor=new o(c.tinymce,"RemoveEditor","editor"),c.tinymce.util.Cookie={get:t,getHash:t,remove:t,set:t,setHash:t},c.tinymce.on("SetupEditor",(e=>{r(e.editor)})),c.tinymce.PluginManager.add("compat3x",r),c.tinymce.addI18n=function(e,t){var n=c.tinymce.util.I18n,o=c.tinymce.each;if("string"!=typeof e||-1!==e.indexOf("."))if(n.data=n.data||{},c.tinymce.is(e,"string"))if(c.tinymce.is(t,"string")){var r=e.split("."),a=r.shift(),i={};i[r.join()]=t,n.add(a,i)}else o(t,((t,o)=>{n.data[`${e}.${o}`]=t;var r=e.split("."),a=r.shift();r.push(o);var i={};i[r.join(".")]=t,n.add(a,i)}));else o(e,((e,t)=>{o(e,((e,r)=>{o(e,((e,o)=>{var a={};"common"===r?(n.data[`${t}.${o}`]=e,a[o]=e):(n.data[`${t}.${r}.${o}`]=e,a[`${r}.${o}`]=e),n.add(t,a)}))}))}));else n.add(e,t)}},function(){c.tinymce.PluginManager.add("atlassiantheme",sc)},function(){Object(C.a)("init.rte",qo)},function(){c.tinymce.PluginManager.add("aePaste",vt)},()=>{c.tinymce.PluginManager.add("tablePasteFilter",js)},()=>{c.tinymce.PluginManager.add("conflist",zo)},function(){c.tinymce.PluginManager.add("tasklist",(function(e){var t=()=>{var t=Us(e);t&&(t=>{var n=e.dom.getParent(t.parentElement,"UL");return t&&"UL"===t.tagName&&n&&n.classList.contains("inline-task-list")&&t!=n})(t)&&(e=>Array.from(e.childNodes).every((e=>e.hasAttribute("data-inline-task-id"))))(t)&&e.undoManager.ignore((()=>{t.classList.add("inline-task-list")}))},n=()=>("page"!==m.a.get("content-type")&&"blogpost"!==m.a.get("content-type")&&"template"!==m.a.get("content-type")||e.undoManager.transact((()=>{Qs(Us(e))&&(e.execCommand("InsertOrderedList"),Ws(Us(e))),Vs(e)})),!1);function o(t,n){if(!Ks()){var o=n.handlerManager,r=n.createHandler;o.registerHandler("]".charCodeAt(0),r(zs,(()=>{e.execCommand("InsertInlineTaskList")}),!0))}}function r(){e.addQueryStateHandler("InsertInlineTaskList",(()=>_s(Us(e)))),e.addQueryStateHandler("InsertUnorderedList",(()=>Qs(Us(e))))}function a(t,n,o){if(Ks()){var r=e.dom.createFragment("");r.appendChild(o.node),Array.prototype.slice.call(r.querySelectorAll("ul.inline-task-list, ol.inline-task-list")).forEach((e=>Ws(e)))}}e.addCommand("InsertInlineTaskListNoToggle",(()=>(_s(Us(e))||n(),!1))),e.addCommand("InsertInlineTaskList",n),e.on("BeforeExecCommand",(t=>{"InsertUnorderedList"===t.command&&_s(Us(e))&&!t.value?e.undoManager.ignore((()=>{e.execCommand("InsertOrderedList"),Ws(Us(e))})):"InsertOrderedList"!==t.command||t.value||e.undoManager.ignore((()=>{Ws(Us(e))}))})),e.on("execCommand",(e=>{"Indent"===e.command&&t()})),e.on("Click",(function(t){var n=t.target;if("LI"===n.tagName){var o=e.dom.getParent(n,"ul,ol");"UL"===o.tagName&&e.dom.hasClass(o,"inline-task-list")&&function(t,n){var o,r;if(c.tinymce.Env.browser.isFirefox()){var a=n.getBoundingClientRect();o=t.pageX-(a.left+c.tinymce.DOM.getViewPort(e.getWin()).x),r=t.pageY-(a.top+c.tinymce.DOM.getViewPort(e.getWin()).y)}else o=t.offsetX,r=t.offsetY;return o>=3&&o<=14&&r>=3&&r<=14}(t,n)&&(e.dom.hasClass(n,"checked")?e.dom.removeClass(n,"checked"):e.dom.addClass(n,"checked"))}})),e.on("KeyUp",(function(t){if(t.keyCode===c.tinymce.util.VK.ENTER&&!t.shiftKey){var n=(o=e.selection.getStart())&&o.tagName&&"LI"===o.tagName.toUpperCase()?o:e.dom.getParent(o,"li");if(n){if(e.dom.removeClass(n,"checked"),!n.parentNode)return;e.dom.hasClass(n.parentNode,"inline-task-list")?n.setAttribute("data-inline-task-id",""):n.removeAttribute("data-inline-task-id")}}var o})),e.on("KeyDown",(e=>{e.shiftKey||e.keyCode!==c.tinymce.util.VK.TAB||c.tinymce.util.VK.metaKeyPressed(e)||t()})),Object(C.a)("confluence.editor.registerHandlers",o),Object(C.a)("rte-ready",r),Pe(c.document,"postPaste",a),e.on("Remove",(()=>{Object(C.c)("confluence.editor.registerHandlers",o),Object(C.c)("rte-ready",r),$e(c.document,"postPaste",a)}))}))},()=>{Object(jt.a)("confluence-editor/autoformat",(()=>({handlerManager:po,createHandler:uo}))),Object(C.a)("init.rte",fo)},()=>{c.tinymce.PluginManager.add("deletecommand",Wa)},function(){},()=>{c.tinymce.AUIWindowManager=Ot,c.tinymce.PluginManager.add("auiwindowmanager",It)},()=>{var e;e=Rl(),c.Confluence.PropertyPanel.TextPlaceholder=e,Object(C.a)("init.rte",(()=>{"template"===m.a.get("content-type")&&Object(C.b)("add-handler.property-panel",e)})),c.tinymce.PluginManager.add("textplaceholders",Pl)},()=>{c.tinymce.PluginManager.add("emotions",oi)},()=>{c.tinymce.PluginManager.add("confluence",Uo)},()=>{c.tinymce.PluginManager.add("macroplaceholder",Fi)},()=>{Pe(c.document,"initContextToolbars.Toolbar",(()=>{var e;Qa().initContextToolbars(),e=function(e){var t={},n={},o=function(e,n){var o,r;for(r in t)if(t.hasOwnProperty(r)&&t[r].isEnabled)for(var a=0,i=t[r].events.length;a<i;a++)(o=t[r].events[a]).type.toLowerCase().indexOf(n.type)>-1&&(o.shouldTrigger(e,n)?o.callback.apply(this,[n.target]):o.missed&&o.missed())};return{addEventsForComponent(r,a){r in t||(t[r]={},t[r].events=[],t[r].isEnabled=!0);for(var i=function(i){var l;!(a[i].type in n)&&(n[a[i].type]=!0,e[a[i].type].add(o)),"function"!=typeof a[i].shouldTrigger&&(l=a[i].shouldTrigger,a[i].shouldTrigger=function(e,t){return t.target.tagName.toLowerCase()==l}),t[r].events.push(a[i])},l=0,s=a.length;l<s;l++)i(l)},disableEventsForComponent(e){for(var n=0,o=t.length;n<o;n++)if(e in t)return t[e].isEnabled=!1,!0;return!1},enableEventsForComponent(e){for(var n=0,o=t.length;n<o;n++)if(e in t)return t[e].isEnabled=!0,!0;return!1}}}(c.tinymce),e.addEventsForComponent("TableToolbar",$a)}))},()=>{Pa(),c.tinymce.PluginManager.add("customtoolbar",Ra)},()=>{c.tinymce.PluginManager.add("insertwikimarkup",Ni)},()=>{c.tinymce.PluginManager.add("propertypanel",Ul)},function(){},()=>{c.tinymce.PluginManager.add("confmonospace",Qo)},function(){i.a.PluginManager.add("confcharmap",Fo)},()=>{c.tinymce.PluginManager.add("iosediting",Li)},()=>{c.tinymce.PluginManager.add("aeTable",H)},()=>{var e=function(){var e=function(e){var t=this;e.on("Undo",(()=>{t.cleanLinks(e)})),this.editor=e,this.weightedHandlers=[],this.handlers=[]};function t(e){for(var n=t.options,o=n.parser[n.strictMode?"strict":"loose"].exec(e),r={},a=14;a--;)r[n.key[a]]=o[a]||"";return r[n.q.name]={},r[n.key[12]].replace(n.q.parser,((e,t,o)=>(t&&(r[n.q.name][t]=o),""))),r}e.prototype={addHandler(e,t){this.weightedHandlers.push({handler:e,weight:t||0}),this.weightedHandlers.sort(((e,t)=>e.weight-t.weight)),this.handlers=[];for(var n=this.weightedHandlers.length,o=0;o<n;o++)this.handlers.push(this.weightedHandlers[o].handler)},cleanLinks:e=>(s()("a.atlassian-autoconvert",e.getDoc()).removeClass("atlassian-autoconvert"),!0),callHandlers(e){var o=0,r=this,a=s()(e),i=s()(e).clone(),l=i.attr("href"),u=t(n(l));function g(e){if(e&&(1!==e.length||!e.attr("href")))return f(e);if(e)o=0,u=t((i=e).attr("href")),m(r.handlers[o],u,i);else{if(!(++o<r.handlers.length))return f(i);m(r.handlers[o],u,i)}}function m(e,t,n){var a=g,i=d.a.setTimeout((()=>{p.a.error(`Autoconvert: Callback #${o} failed to call continuation in time. If there is no subsequent log, the handler is improperly implemented and should be uninstalled.`),a=function(){p.a.error(`Autoconvert: Callback #${o} did eventualy return. Probably a slow async call.`)},g()}),c.tinymce.plugins.Autoconvert.callbackTimeout);e(t,n,(function(){var e=o;clearTimeout(i),a.apply(r,arguments),a=function(){p.a.error(`Autoconvert: Callback #${e} called the continuation multiple times.`)}}))}function f(e){r.editor.undoManager.beforeChange();var t=r.editor.selection,n=r.editor.selection.getBookmark();a.replaceWith(e),t.moveToBookmark(n),r.editor.undoManager.add()}0!==this.handlers.length&&m(this.handlers[0],u,i)}},e.callbackTimeout=5e3,e.convertMacroToDom=function(e,t,n){var o={macro:e,contentId:m.a.get("content-id")};s.a.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:`${A.a}/rest/tinymce/1/macro/placeholder`,data:JSON.stringify(o),dataType:"text",success:t,error:n,timeout:45e3})},e.convertMacroToDomViaWikiText=function(t,n,o){var r=["{",t.name],a=!0;for(var i in t.defaultParameterValue&&(r.push(":",t.defaultParameterValue),a=!1),t.params)a?(r.push(":"),a=!1):r.push("|"),r.push(i,"=",t.params[i]);r.push("}"),e.getHtmlFromWikiMarkup(r.join(""),(e=>{n(s()(e)[0])}),(()=>{o()}))},e.getHtmlFromWikiMarkup=function(e,t,n){var o={wiki:e,entityId:m.a.get("content-id"),contextType:m.a.get("content-type"),spaceKey:m.a.get("space-key")};s.a.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:`${A.a}/rest/tinymce/1/wikixhtmlconverter`,data:JSON.stringify(o),dataType:"text",success:t,error:n,timeout:45e3})},t.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var n=function(e){return e.replace(/^(.*?\/\/[^/]*?\/.*?)(@)/,"$1%40")};return{autoConverter:e,plugin:function(){return{init(t){var n=new e(t);function o(e,o,r){var a=s()(r.node).children("a");1===a.length&&"A"===a[0].tagName&&a.text()===a.attr("href")&&(a.attr("class","atlassian-autoconvert"),setTimeout((()=>{var e=s()("a.atlassian-autoconvert",s()(t.selection.getNode().ownerDocument)).removeClass("atlassian-autoconvert");n.callHandlers(e)}),0))}c.tinymce.plugins.Autoconvert.autoConvert=n,t.on("init",(()=>{s()(document).on("postPaste",o),t.addCommand("addAutoconverter",((e,t)=>(n.addHandler(t),!1)))})),t.on("remove",(()=>{s()(document).off("postPaste",o)}))},getInfo:()=>({longname:"Atlassian Autoconvert",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"})}}}}();!function(e){"object"==typeof c.tinymce?(void 0===c.tinymce.plugins&&(c.tinymce.plugins={}),c.tinymce.plugins.Autoconvert=e.autoConverter):p.a.error("Autoconvert global export failed because window.tinymce is not an object")}(e),c.tinymce.PluginManager.add("autoconvert",e.plugin),Gn()},function(){Object(C.a)("rte-ready",to)},()=>{c.tinymce.PluginManager.add("draggable",Va)},()=>{c.tinymce.PluginManager.add("insertfiles",fi)},()=>{c.tinymce.PluginManager.add("flextofullsize",ri)},()=>{c.tinymce.PluginManager.add("referrer",_l)},()=>{c.tinymce.PluginManager.add("tableContentWrapper",Fs)},()=>{c.tinymce.PluginManager.add("linkbrowser",Pi)},()=>{c.tinymce.PluginManager.add("confluenceversioncomment",uc)},()=>{c.tinymce.PluginManager.add("autocomplete",rn)},()=>{},()=>{c.tinymce.PluginManager.add("autocompletelink",un)},()=>{c.tinymce.PluginManager.add("autocompletemacro",kn)},()=>{c.tinymce.PluginManager.add("autocompletemedia",Rn)},function(){s()(document).ready(Os)},()=>{c.tinymce.PluginManager.add("confluenceleavecomment",Bi)},()=>{c.tinymce.PluginManager.add("confluenceleavetemplate",Ri)},()=>{Jl(),c.tinymce.PluginManager.add("searchreplace",Yl)},()=>{c.tinymce.PluginManager.add("confluencedrafts",_o)},ol,()=>{var e,t,n,o;c.tinymce.PluginManager.add("pagelayoutplugin",pl),fl(),e=e=>!!e.querySelector(".contentLayout, .contentLayout2"),t=e=>Array.from(e.querySelectorAll(".contentLayout2 .columnLayout.single")),n=(e,t)=>{e.undoManager.ignore((()=>{t.forEach((t=>t.appendChild((e=>e.dom.create("div",{class:"pagelayout-delete-stub synchrony-exclude",style:"display:none;",contenteditable:"true"},"."))(e))))}))},o=(e,t)=>{var n=Array.from(t.querySelectorAll(".pagelayout-delete-stub"));e.undoManager.ignore((()=>{n.forEach((e=>e.parentNode&&e.parentNode.removeChild(e)))}))},Object(C.a)("rte-ready",(()=>{var r=c.tinymce.activeEditor,a=r.getDoc(),i=r.getBody();i.addEventListener("keydown",(o=>{if((8===o.keyCode||46===o.keyCode)&&e(a))if(r.dom.isEmpty(r.getBody()))o.stopImmediatePropagation();else{var i=t(a);i.length>0&&(n(r,i),o.stopImmediatePropagation())}}),!0),i.addEventListener("keyup",(t=>{8!==t.keyCode&&46!==t.keyCode||!e(a)||o(r,a)}),!0),r.on("beforeExecCommand",(o=>{if("delete"===o.command&&e(a)){var i=t(a);i.length>0&&n(r,i)}})),r.on("ExecCommand",(t=>{"delete"===t.command&&e(a)&&o(r,a)})),r.on("BeforeGetContent",(()=>{o(r,a)}))}))},function(){},()=>{c.tinymce.PluginManager.add("confluencemacrobrowser",Hi)},()=>{c.tinymce.PluginManager.add("statusmacro",bs),c.Confluence.PropertyPanel.Macro.registerInitHandler(((e,t)=>{var n,o;Xl=e,vs(t),es=c.Confluence.MacroParameterSerializer.deserialize(s()(Xl).attr("data-macro-parameters")),ts=null,t.splice(1,0,(n=(o=es).title||ps(o),{className:as,text:Ht(n),click:hs}))}),"status"),s.a.each(cs,((e,t)=>{c.Confluence.PropertyPanel.Macro.registerButtonHandler(t,(function(){es.colour=t,c.Confluence.PropertyPanel.destroy()}),ss)})),Object(C.a)("destroyed.property-panel",(()=>{us()&&ms()}))},function(){},function(){},function(){},function(){c.AJS.MacroBrowser.Macros.code=Lo},function(){},()=>{c.tinymce.PluginManager.add("confluencewatch",gc)},()=>{c.tinymce.PluginManager.add("confluencesortabletablesplugin",ql)},()=>{c.tinymce.PluginManager.add("autoresize",ho)},function(){},function(){},()=>{c.tinymce.PluginManager.add("confluencenotifywatchers",zi)},function(){},()=>{c.Confluence.PropertyPanel.Macro.registerButtonHandler("office-connector-download-file-button",((e,t)=>{for(var n=(t=t.nodeType?t:t[0]).getAttribute("data-macro-parameters").split("|"),o={},r=0;r<n.length;r++){var a=n[r].split("=");a.length>1&&(o[a[0]]=a[1])}var i=m.a.get("page-id"),l=m.a.get("content-type");function s(e,t,n){return e&&t&&("?"!=n.charAt(n.length-1)&&(n+="&"),n=`${n}${e}=${encodeURI(t)}`),n}o.space||(o.space=m.a.get("space-key"));var c=m.a.get("context-path")+"/plugins/servlet/oc/getattachment?";c=s("title",o.page,c),c=s("date",o.date,c),c=s("space",o.space,c),c=s("filename",o.name,c),c=s("contextid",i,c),c=s("contexttype",l,c);var d=window.open(c,"download-office-attachment");d&&d.opener&&(d.opener=null)})),Ui()},function(){Object(C.a)("rte-ready",(()=>{var e;e=c.tinymce.activeEditor,Object(c.clearTimeout)(Ya),Ya=Object(c.setTimeout)(ti,6e4),e.on("ExecCommand",(e=>{var t,n="mceToggleFormat"===e.command?(t=e.value).charAt(0).toUpperCase()+t.slice(1):e.command;ei(ni[n])})),e.on("KeyPress",(()=>{ei("keys")})),e.on("KeyUp",(t=>{46===t.keyCode?ei("delete",Za):8===t.keyCode&&ei("backspace",Za),Xa(e.selection)})),e.on("MouseUp",(()=>{Xa(e.selection)})),e.on("PastePostProcess",(e=>{var t=e&&e.node?e.node.innerText||e.node.textContent:"";ei("paste",t.length)})),e.on("Remove",(()=>{ti(),Object(c.clearTimeout)(Ya)})),d.a.addEventListener("beforeunload",(()=>{ti()}))}))},function(){c.tinymce.PluginManager.add("tableAnalytics",Hs)},()=>{Object(C.a)("init.rte",vo)},function(){Object(C.a)("init.rte",(()=>{$e(c.document,"postPaste",pi),Pe(c.document,"postPaste",pi),c.tinymce.activeEditor&&c.tinymce.activeEditor.on("Remove",(()=>{$e(c.document,"postPaste",pi)}))}))},()=>{c.tinymce.PluginManager.add("confindentation",Bo)},function(){},()=>{c.tinymce.PluginManager.add("aetextpattern",qs)},function(){c.tinymce.Env.browser.isFirefox()&&Object(C.a)("rte-ready",bo)},()=>{c.tinymce.PluginManager.add("persist_scroll_position",Tl)},()=>{c.tinymce.PluginManager.add("templateeditor",Gs)},()=>{c.tinymce.PluginManager.add("preserve-paragraph-formatting-on-delete",zl)},()=>{c.tinymce.PluginManager.add("macroNavigation",$i)},()=>{c.tinymce.PluginManager.add("confluenceimagedialog",mi)}],pc=()=>(mc.forEach(((e,t)=>{try{e()}catch(n){dc("initError",{fnName:e.name||t,message:n.message||"",exceptionName:n.name||""}),p.a.error(`Editor plugin '${e.name||t}' failed to load`,n)}})),!0),fc=()=>new Promise((e=>{!function(e,t){var n=e.listener,o=e.globalProperty,r=e.interval,a=void 0===r?250:r;if(Re(o))return p.a.debug(`window.${o} is already available for use by ${n}.`),t(),null;var i=setInterval((()=>{p.a.debug(`${n} is waiting for window.${o} to be available`),Re(o)&&(p.a.debug(`window.${o} now available!`),clearInterval(i),t())}),a)}({listener:"editor-plugins/index",globalProperty:"AJS.Confluence.PropertyPanel.Macro",interval:20},(()=>{e()}))})),hc=!1,vc=()=>{if(hc)return dc("initError",{message:"Editor was loaded already, stop re-running init phase"}),Promise.reject();var e=d.a.tinymce;return e.VK=e.util.VK,e.confluence=e.confluence||{},c.tinymce.confluence=c.tinymce.confluence||{},c.tinymce.confluence.macrobrowser=An,Be(),c.tinymce.confluence=c.tinymce.confluence||{},c.tinymce.confluence.NodeUtils=hn,c.tinymce.confluence=c.tinymce.confluence||{},c.tinymce.confluence.MacroUtils=wn,r.a.EditorUtils=Ko,r.a.Rte=r.a.Rte||{},r.a.Rte.Cursor=r.a.Rte.Cursor||{},s.a.extend(r.a.Rte.Cursor,{insertParagraph:Jo,isCursorAtStart:Yo,isCursorAtEnd:Go.isCursorAtEnd}),hc=!0,fc().then(pc)},bc=n(37),yc=n.n(bc),wc=""!==m.a.get("remote-user"),Cc=Zr("editor.ajax.save")&&!Zr("editor.ajax.save.disable"),Ac=()=>m.a.getBoolean("shared-drafts"),xc=null,Mc=!1,kc=!1,Ec=!1,Tc=!1,Dc=!1;Object(C.a)("editor-shared-drafts-published editor-shared-drafts-discarded",(()=>{Mc=!1,kc=!1})),Object(C.a)("synchrony.history.evicted",(()=>{Tc=!0})),Object(C.a)("synchrony.connected",(()=>{Dc=!0}));var Sc=(e,t,n)=>s()("<input>").attr({type:"hidden",name:e,value:t}).appendTo(n),Ic=()=>Mc,Oc={isDraftManuallySaved:()=>kc,isDraftBlank:()=>r.a.Rte.Content.isEmpty()&&!c.Confluence.Editor.getCurrentTitle().trim(),isNewContent:()=>r.a.Rte.getEditor()&&m.a.getBoolean("new-page"),isDraftDirty:()=>c.Confluence.Editor.hasContentChanged()||Ic()&&!c.Confluence.Editor.Drafts.isDraftManuallySaved(),unloadMessage:()=>{var e=()=>c.Confluence.Editor.Drafts.isDraftBlank()&&!Ac()?c.Confluence.Editor.Drafts.discardDraft(m.a.get("draft-id")):c.Confluence.Editor.Drafts.save({skipErrorHandler:!0});if(c.Confluence.Editor.isLimitedModeEnabled()||!Ac()){if(c.Confluence.Editor.hasContentChanged()||Ic()&&!c.Confluence.Editor.Drafts.isDraftManuallySaved())return e(),Object(ln.a)("saved.draft")}else if(e(),Dc&&(Ec||c.Confluence.Editor.hasContentChanged()||Tc))return Object(ln.a)("saved.shared.draft.leave.page")},hasPendingChanges:()=>Ec,setPendingChanges:e=>Ec=e,isSharedDraftsEnabled:Ac,bindUnloadMessage:()=>{!c.Confluence.Editor.isLimitedModeEnabled()&&Ac()&&(Object(C.a)("synchrony.entity.ack",((e,t)=>{t.pendingChanges||(Ec=!1)})),Object(C.a)("editor.local.change",(()=>{Ec=!0}))),Object(C.a)("beforeunload",c.Confluence.Editor.Drafts.unloadMessage)},unBindUnloadMessage:()=>Object(C.c)("beforeunload"),useDraft:()=>((e,t)=>{c.Confluence.Editor.Drafts.unBindUnloadMessage();var n=c.Confluence.Editor.getCurrentForm();Sc(e,"true",n),Sc("contentChanged",""+c.Confluence.Editor.hasContentChanged(),n),Sc("pageId",r.a.params.pageId,n),s()("#draftId",c.Confluence.Editor.getCurrentForm()).val(t),n.spaceKey||Sc("spaceKey",m.a.get("space-key"),n),n.action=A.a+"/pages/"+(r.a.params.newPage?"create":"edit")+r.a.params.draftType+".action",n.submit()})("useDraft",m.a.get("existing-draft-id")),discardDraft:e=>r.a.safe.ajax({url:`${A.a}/rest/api/content/${e}?status=draft`,type:"DELETE",dataType:"json",data:{},contentType:"application/json",success:()=>{s()("#draft-messages").remove(),r.a.messages.success("#editor-messages",{body:"Your draft has been discarded."})},error:e=>{r.a.messages.error({title:"Error",body:e.errors||"An unknown error has occurred. Please check your logs."})}}),save:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Tc){if(c.Confluence.Editor.isPublishing()||!Aa()&&!e.forceSave)return p.a.debug("skipping draft save because:"),void(c.Confluence.Editor.isPublishing()?p.a.debug("The user is publishing the page already."):Aa()||e.forceSave||p.a.debug("The content hasn't changed and a forceSave wasn't requested in the options."));p.a.info("preparing to save editor draft");var t=s()("#content-title"),n=s()("#newSpaceKey"),o=s()("#originalVersion"),a=c.Confluence.Editor.inRichTextMode(),i={draftId:m.a.get("draft-id"),pageId:m.a.get("page-id"),parentPageId:m.a.get("parent-page-id"),type:r.a.params.draftType,title:t.hasClass("placeholded")?"":t.val(),spaceKey:n.length?n.val():encodeURIComponent(m.a.get("space-key"))};yc.a.getEditorContent().pipe((t=>{s.a.extend(i,t),o.length&&(i.pageVersion=parseInt(o.val(),10)),xc=s.a.ajax({type:"POST",url:`${A.a}/rest/tinymce/1/drafts${e.ignoreRelations?"?ignoreRelations=true":""}`,data:JSON.stringify(i),contentType:"application/json",dataType:"text json",success:t=>{if(!(null==t||wc&&0===t.draftId&&Cc)){c.Confluence.Editor.contentHasChangedSinceLastSave=!1,a&&r.a.Rte.Content.editorResetContentChanged(),Mc=!0,kc=!!e.manualSave,m.a.set("draft-id",t.draftId+""),s()("#draftId",c.Confluence.Editor.getCurrentForm()).val(t.draftId),s()("#draft-error").remove();var n,o,i,l,d=t.time||(l=(o=(n=new Date).getHours())>11?"PM":"AM",(0==(o%=12)?"12":o)+":"+((i=n.getMinutes())<10?"0":"")+i+" "+l);if(!m.a.get("collaborative-content")){var u,g=s()("#draft-status");u=kc?Object(ln.a)("draft.saved.at.new",d):Object(ln.a)("draft.autosaved.at.new",d);var p=r.a.params.newPage?u:"<a id='view-diff-link-heartbeat' class='view-diff-link' href='#'>"+u+"</a>";g.attr("data-tooltip",u),g.html(p)}"function"==typeof e.onSuccessHandler&&e.onSuccessHandler(t),c.Confluence.Editor.Drafts.lastSaveTime=d,Object(C.b)("rte-draft-saved",{draftId:t.draftId})}},error:(t,n)=>{var o=()=>{c.Confluence.Editor.addErrorMessage("draft-error",c.Confluence.Editor.Drafts.lastSaveTime?Object(ln.a)("draft.saving.error.previous.draft",c.Confluence.Editor.Drafts.lastSaveTime):Object(ln.a)("draft.saving.error"),!0)};if(!e.skipErrorHandler&&!Ac()){if(400===t.status)if(t.responseText.indexOf("Legacy drafts deprecated")>=0)Xr.a.handleMessage("legacy-draft-deprecated",{type:"error",message:Object(ln.a)("editor.page.legacy.draft.deprecated")});else if(t.responseText.indexOf("Unsupported character found in content: ")>=0){var r=t.responseJSON.message.split("Unsupported character found in content: ")[1];Xr.a.handleMessage("utf8-validation-failed",{title:Object(ln.a)("mysql.utf8.content.validation.failed.title"),type:"error",message:Object(ln.a)("mysql.utf8.content.validation.failed.message",r)})}else o();else o();"function"==typeof e.onErrorHandler&&e.onErrorHandler(n)}},timeout:3e4}).always((()=>{xc=null}))}))}},getDraftSavingPromise:()=>xc};function jc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Nc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jc(Object(n),!0).forEach((function(t){Lc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bc,Rc;n(89),n(90),n(91),n(92),n(93);i.a.confluenceEditorVersion="18.5.19",Me(),Be(),void 0!==c.AJS.Rte?void 0===c.AJS.Rte.BootstrapManager&&(c.AJS.Rte.BootstrapManager=Le):p.a.error("AJS.Rte is supposed to be defined"),void 0!==c.AJS.Rte?void 0===c.AJS.Rte.Placeholder&&(c.AJS.Rte.Placeholder=Bl):p.a.error("AJS.Rte is supposed to be defined"),void 0!==c.AJS.Rte?void 0===c.AJS.Rte.BookmarkManager&&(c.AJS.Rte.BookmarkManager=xt):p.a.error("AJS.Rte is supposed to be defined"),void 0!==(null===c.AJS||void 0===c.AJS?void 0:c.AJS.Confluence)?void 0===(null===c.AJS||void 0===c.AJS||null===(Bc=c.AJS.Confluence)||void 0===Bc||null===(Rc=Bc.Editor)||void 0===Rc?void 0:Rc.Drafts)&&(c.AJS.Confluence.Editor.Drafts=Oc):p.a.error("AJS.Confluence is supposed to be defined"),(()=>{var e,t,n;void 0!==(null===c.AJS||void 0===c.AJS?void 0:c.AJS.Confluence)?void 0===(null===c.AJS||void 0===c.AJS||null===(e=c.AJS.Confluence)||void 0===e||null===(t=e.Templates)||void 0===t||null===(n=t.Editor)||void 0===n?void 0:n.Page)&&(c.AJS.Confluence.Templates.Editor=Nc(Nc({},c.AJS.Confluence.Templates.Editor),{},{Page:Nc({},Xi)})):p.a.error("AJS.Confluence is supposed to be defined")})(),Object(jt.a)("confluence-editor/loader/tinymce-bootstrap",(()=>Le)),Object(jt.a)("confluence-editor/editor/atlassian-editor",(()=>v)),Object(jt.a)("confluence-editor/editor/atlassian-editor-content",(()=>b)),Object(jt.a)("confluence-editor/utils/tinymce-node-utils",(()=>vn)),Object(jt.a)("confluence-editor/init",(()=>{vc().then((()=>{var e={locale:m.a.get("user-locale").replace("_","-")};r.a.toInit((()=>{!function(e){c.tinymce.ThemeManager.requireLangPack("advanced"),c.tinymce.ThemeManager.add("default",be),d.a.requestAnimFrame=d.a.requestAnimationFrame||d.a.webkitRequestAnimationFrame;var t=ae();0===Number(t.page_id)&&(t.page_id=null,t.draft_type=m.a.get("draft-type")),Le.addBeforeInitCallback((e=>{e.contentCssTags=c.document.querySelector('script[title="editor-css"]').innerHTML,e.language=m.a.get("action-locale").replace("_","-");var t=m.a.get("min-editor-height");t&&(e.autoresize_min_height=t)}));var n=!(m.a.get("remote-user")&&m.a.get("confluence.prefs.editor.disable.autocomplete"));if(n&&(t.plugins+=",autocomplete,autocompletelink,autocompletemedia"),t.locale="object"==typeof e&&void 0!==e.locale?e.locale:"",m.a.get("auto-start")){if(Object(C.b)("rte-loaded",{editPermission:!0}),y()){var o=c.document.getElementById(t.editor_id);Object(C.b)("rte-collaborative-content-ready",{title:m.a.get("page-title")||m.a.get("original-content-title")||"",editorContent:o.value,confRev:m.a.get("conf-revision"),syncRev:c.document.getElementById("syncRev").value,syncRevSource:m.a.get("sync-revision-source")})}fe("confluence.editor"),n&&(t.plugins+=",autocompletemacro");var r="0"==`${m.a.get("page-id")}`,a=function(e,t){if("template"===e)return ve.createProfileForTemplateEditor();if("comment"===e)return ve.createProfileForCommentEditor();var n={versionComment:!t,notifyWatchers:!t};return ve.createProfileForPageEditor(n)}(m.a.get("content-type"),r).plugins.join(",");a&&(t.plugins+=`,${a}`),Le.preInitialise(t),Le.initialise(),he("confluence.editor")}else Le.preInitialise(t)}(e)}))}))}))}],[[38,"runtime","vendors~core~page-layout","vendors~core~page-editor-quit-dialog","vendors~core","core~editor-notifications~page-editor-message~page-editor-quit-dialog","core~page-editor-message~page-editor-quit-dialog","core~page-editor-quit-dialog","core~editor-notifications"]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:app', location = 'app.chunk.js' */
(window.atlassianWebpackJsonp77bd9c8b87e6dc89db026400e110f339=window.atlassianWebpackJsonp77bd9c8b87e6dc89db026400e110f339||[]).push([["app"],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js?!./src/main/frontend/loader/viewInlineButton.scss":function(e,n,t){"use strict";var i=t("./node_modules/css-loader/dist/runtime/api.js"),o=t.n(i)()((function(e){return e[1]}));o.push([e.i,"#inline-dialog-view-inline-comment{box-shadow:none}.aui-inline-dialog-contents .no-comment-description .aui-icon.aui-icon-small.aui-iconfont-comment{padding-left:0}",""]),n.a=o},"./src/main/frontend/loader/app.ts":function(e,n,t){"use strict";t.r(n),t.d(n,"commentCollection",(function(){return O})),t.d(n,"initAsync",(function(){return _})),t.d(n,"reinitializeComments",(function(){return N}));var i=t("./node_modules/@atlassian/wrm-react-i18n/wrm-react-i18n.js"),o=t("confluence.web.resources:jquery/require('backbone')"),r=t.n(o),c=t("confluence.web.resources:event/require('confluence/api/event')"),s=t.n(c),l=t("confluence.web.components:confluence/require('confluence/root')"),a=t.n(l),u=t("confluence.web.resources:jquery/require('jquery')"),d=t.n(u),m=t("./src/main/frontend/model/comment.ts"),f=t("./src/main/frontend/model/comment-collection.ts"),h=t("confluence.web.resources:meta/require('confluence/meta')"),g=t.n(h),v=t("confluence.web.resources:underscore/require('underscore')"),p=t.n(v),b=t("./src/main/frontend/utils/utils.ts");const w={};p.a.extend(w,r.a.Events),w.start=function(){!0!==this.running&&(this.running=!0,this.send=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;s.a.trigger("analytics",{name:e,data:n})},this.listenTo(r.a,"ic:highlight-panel-click",()=>{this.send("confluence.highlight.actions.comment.inline")}),this.listenTo(r.a,"ic:view",(e,n)=>{Object(b.A)()?this.send("confluence.comment.inline.editmode.view"):this.send("confluence.comment.inline.view"),"nav"===n&&(Object(b.A)()?this.send("confluence.comment.inline.editmode.view.nav"):this.send("confluence.comment.inline.view.nav")),"permalink"===n&&(Object(b.A)()?this.send("confluence.comment.inline.editmode.view.permalink"):this.send("confluence.comment.inline.view.permalink"))}),this.listenTo(r.a,"ic:overlap",()=>{this.send("confluence.comment.inline.overlap")}),this.listenTo(r.a,"ic:edit",()=>{this.send("confluence.comment.inline.edit")}),this.listenTo(r.a,"ic:persist",()=>{this.send("confluence.comment.inline.create")}),this.listenTo(r.a,"ic:sidebar:close",()=>{Object(b.A)()?this.send("confluence.comment.inline.editmode.sidebar.close"):this.send("confluence.comment.inline.sidebar.close")}),this.listenTo(r.a,"ic:reply:persist",()=>{this.send("confluence.comment.inline.reply")}),this.listenTo(r.a,"ic:delete ic:reply:delete",()=>{this.send("confluence.comment.inline.delete")}),this.listenTo(r.a,"ic:resolved",()=>{Object(b.A)()?this.send("confluence.comment.inline.editmode.resolved"):this.send("confluence.comment.inline.resolved")}),this.listenTo(r.a,"ic:unresolved",()=>{this.send("confluence.comment.inline.unresolved")}),this.listenTo(r.a,"ic:resolved:view",e=>{const n={total:e};this.send("confluence.comment.inline.resolved.view",n)}),this.listenTo(r.a,"ic:resolved:dismiss:recovery",()=>{this.send("confluence.comment.inline.resolved.dismiss")}),this.listenTo(r.a,"ic:resolved:show:recovery",()=>{this.send("confluence.comment.inline.resolved.discovery")}),this.listenTo(r.a,"ic:open:dangled",e=>{const n={commentId:e.get("id"),pageId:g.a.get("page-id")};this.send("confluence.comment.inline.open.dangled",n)}),this.listenTo(r.a,"ic:editor:load:fail",()=>{const e={pageId:g.a.get("page-id")};this.send("confluence.comment.inline.editor.load.fail",e)}),this.listenTo(r.a,"ic:resolve:dangled:failed",e=>{const n={commentId:e.get("id"),pageId:g.a.get("page-id")};this.send("confluence.comment.inline.resolved.dangled.failed",n)}))},w.stop=function(){this.running=!1,this.stopListening()};var C=w,y=(t(0),t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js")),T=t.n(y),q=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js?!./src/main/frontend/loader/viewInlineButton.scss"),k={insert:"head",singleton:!1};T()(q.a,k),q.a.locals;var j=()=>{const e=d()("#view-inline-comment-button");if(!e.length)return;e.attr("aria-controls","inline-dialog-view-inline-comment");const n=`<span class='aui-icon aui-icon-small aui-iconfont-comment'\n                        title='${"Comment"}'>\n                        </span>`,t=`<aui-inline-dialog id='inline-dialog-view-inline-comment' \n            responds-to='focus' alignment='bottom center' style='width: 328px' aria-label='${"No inline comment dialog"}'>\n            <div>\n                <h2 class='no-comment-title'>${"There are no inline comments"}</h2>\n                <p class='no-comment-description'>${i.format("Be the first to share your feedback or ask a question by highlighting text and selecting {0}.",n)}</p>\n            </div>\n        </aui-inline-dialog>`;e.parent().append(t);const o=document.getElementById("inline-dialog-view-inline-comment");null==o||o.addEventListener("aui-show",(function(){e.addClass("active")})),null==o||o.addEventListener("aui-hide",(function(){e.removeClass("active")})),e.click(e=>{e.preventDefault();const n=O.getCommentsOnPage().at(0);null!=n?(o.open=!1,r.a.trigger("ic:view",n,"nav")):o.open=!0}),d()("#page-favourite, #watch-content-button, #shareContentLink").on("click",(function(){o.open=!1}))};const O=new f.a;let x,E,I=!0;function R(){Promise.all([t.e("EditorContextInit"),t.e("loader")]).then(t.bind(null,"./src/main/frontend/loader/loader.ts")).then((function(e){let{default:n}=e;n.init(O),void 0!==x&&x.resolve(n)})).catch(()=>{console.error("Failed to load inline-comments")})}function A(){if(I){if(I=!1,void 0!==x)return x.promise();x=d.a.Deferred(),R()}return E=!1,x.promise()}function _(){A().done((function(e){e.afterSyncCommentCollection(),e.displayPermalinkedComment(O)}))}function N(){R()}n.default=function(){if(C.start(),j(),d()("body").on("click","#view-resolved-comments",(function(e){e.preventDefault(),A().done((function(e){e.createResolvedCommentListView()}))})),null==O||O.fetch({cache:!1,error:()=>console.error("Failed to fetch inline comments")}).done((function(){O.getCommentsOnPageCount()>0&&_(),O.getResolvedCount()>0&&A().done((function(e){e.updateResolvedCommentCountInToolsMenu()}))})),-1!==window.location.search.indexOf("focusedCommentId")&&_(),r.a.listenTo(r.a,"ic:resolved",(function(){_()})),d()("#view-resolved-comments>span").text("Resolved comments"+Object(i.format)(" ({0})",null==O?void 0:O.getResolvedCount())),s.a.bind("qr:show-new-thread",(function(e,n){A().done((function(){!function(e,n){let t=null==O?void 0:O.get(n),i=!1;void 0===t&&(t=new m.a({id:n}),i=!0),t.fetch({success:function(e){e._setHighlights(e.get("markerRef")),i?null==O||O.add(e):t.replies.isFetched=!1,r.a.trigger("ic:view",t,"quickreload")}})}(0,n)}))})),s.a.bind("qr:add-new-highlight",(function(e,n,t){A().done((function(){s.a.trigger("qr:add-new-highlight-text",[n,t])}))})),a.a&&a.a.HighlightAction){const e="com.atlassian.confluence.plugins.confluence-inline-comments:create-inline-comment";a.a.HighlightAction.registerButtonHandler(e,{onClick:function(e){A().done((function(n){E||(E=!0,n.loadSidebarOnClick(e))}))},shouldDisplay:a.a.HighlightAction.WORKING_AREA.MAINCONTENT_ONLY})}}},"./src/main/frontend/model/comment-collection.ts":function(e,n,t){"use strict";var i=t("confluence.web.resources:jquery/require('backbone')"),o=t.n(i),r=t("confluence.web.resources:constants/require('confluence/api/constants')"),c=t("confluence.web.resources:meta/require('confluence/meta')"),s=t.n(c),l=t("confluence.web.resources:underscore/require('underscore')"),a=t.n(l),u=t("./src/main/frontend/utils/utils.ts"),d=t("./src/main/frontend/model/comment.ts");const m=o.a.Collection.extend({model:d.a,initialize:function(){this.listenTo(this,"sort",this._removeCachedMarkers)},url:function(){return`${r.CONTEXT_PATH}/rest/inlinecomments/1.0/comments?containerId=${s.a.get("page-id")}`},getResolvedCount:function(){return this.getResolvedComments().length},getUnresolveCount:function(){return this.reject((function(e){return!0===e.isResolved()&&!1===e.isDeleted()})).length},getResolvedComments:function(){return this.filter((function(e){return!0===e.isResolved()&&!1===e.isDeleted()}))},getResolvedCommentsDesc:function(){return a.a.sortBy(this.getResolvedComments(),(function(e){return 0-e.get("resolveProperties").resolvedTime}))},getNextCommentOnPage:function(){return this._getCommentAtRelativeOffset(1)},getPrevCommentOnPage:function(){return this._getCommentAtRelativeOffset(-1)},_getCommentAtRelativeOffset:function(e){const n=this.getCommentsOnPage(),t=this._getCommentOnPageWithEditorActive(),i=this.findWhere({active:!0}),o=this.findWhere({editorActive:!0});if(void 0===i&&void 0===o||void 0!==i&&n.length<=1||void 0!==o&&0==n.length)return null;const r=a.a.pluck(void 0!==i?n:t,"id");let c=a.a.indexOf(r,void 0!==i?i.get("id"):o.get("id"));return void 0===i&&(o.set("editorActive",!1),e>0&&--c),n[(c+e+n.length)%n.length]},getCommentsOnPage:function(){return this.filter((function(e){return!1===e.isResolved()&&!e.isDangling()&&!1===e.isDeleted()||!0===e.get("active")}))},_getCommentOnPageWithEditorActive(){return this.filter((function(e){return!1===e.isResolved()&&!e.isDangling()&&!1===e.isDeleted()||!0===e.get("active")||!0===e.get("editorActive")}))},getCommentsOnPageCount:function(){return this.getCommentsOnPage().length},getActiveIndexWithinPageComments:function(){const e=a.a.pluck(this.getCommentsOnPage(),"id"),n=this.findWhere({active:!0});if(void 0===n)return null;const t=n.get("id");return a.a.indexOf(e,t)},reInitHighlights:function(){this.filter((function(e){e._setHighlights(e.get("markerRef"))}))},comparator:function(e,n){return void 0===this.markers&&(this.markers=Object(u.A)()?Object(u.o)().find(".inline-comment-marker"):Object(u.t)().find(".inline-comment-marker")),void 0===e.highlight?1:void 0===n.highlight?-1:this.markers.index(e.highlight)-this.markers.index(n.highlight)},_removeCachedMarkers:function(){this.markers=void 0}});n.a=m},"./src/main/frontend/model/comment.ts":function(e,n,t){"use strict";var i=t("confluence.web.resources:jquery/require('backbone')"),o=t.n(i),r=t("confluence.web.resources:constants/require('confluence/api/constants')"),c=t("confluence.web.resources:meta/require('confluence/meta')"),s=t.n(c),l=t("confluence.web.resources:jquery/require('jquery')"),a=t.n(l),u=t("confluence.web.resources:underscore/require('underscore')"),d=t.n(u),m=t("./src/main/frontend/model/reply.ts");var f=o.a.Collection.extend({model:m.a}),h=t("./src/main/frontend/utils/utils.ts");const g=o.a.Model.extend({defaults:{authorDisplayName:Object(h.j)(),authorUserName:s.a.get("remote-user"),authorAvatarUrl:`${r.CONTEXT_PATH}${s.a.get("current-user-avatar-url")}`,body:"",originalSelection:"",containerId:s.a.get("latest-page-id"),containerVersion:s.a.get("page-version"),parentCommentId:"0",lastFetchTime:a()("meta[name=confluence-request-time]").attr("content"),hasDeletePermission:!0,hasEditPermission:!0,hasResolvePermission:!0,resolveProperties:{resolved:!1,resolvedTime:0},serializedHighlights:"",deleted:!1},urlRoot:r.CONTEXT_PATH+"/rest/inlinecomments/1.0/comments",initialize:function(e){e=e||{},this._setHighlights(e.markerRef),this.set({containerVersion:s.a.get("page-version")}),this.replies=new f,this.replies.url=()=>this.url()+"/replies",Object(h.m)().DANGLING_COMMENT&&s.a.get("page-id")===s.a.get("latest-page-id")&&!Object(h.A)()&&this.isDangling()&&!this.isResolved()&&this.resolve(!0,{wait:!0,dangling:!0,success:d.a.bind(()=>{o.a.trigger("ic:open:dangled",this)},this),error:d.a.bind(()=>{o.a.trigger("ic:resolve:dangled:failed",this)},this)})},validate:function(){if(!this.get("body"))return!0},resolve:function(e,n){var t;n=n||{},this.save({},d.a.extend(n,{url:`${this.urlRoot}/${this.get("id")}/resolve/${e}/dangling/${!(null===(t=n)||void 0===t||!t.dangling)}`}))},isResolved:function(){return this.get("resolveProperties").resolved},isDangling:function(){return void 0===this.highlight},isDeleted:function(){return this.get("deleted")},_setHighlights:function(e){let n;n=void 0!==e?Object(h.k)().find('.inline-comment-marker[data-ref="'+e+'"]'):Object(h.k)().find(".ic-current-selection"),0!==n.length?(this.highlights=n,this.highlight=n.first()):(this.highlights=void 0,this.highlight=void 0)},destroy:function(e){const n=(e=e?d.a.clone(e):{}).success;return e.success=t=>{n&&n(this,t,e)},function(e,n){const t=n.error;n.error=function(i){t&&t(e,i,n),e.trigger("error",e,i,n)}}(this,e),this.sync("delete",this,e)}});n.a=g},"./src/main/frontend/model/reply.ts":function(e,n,t){"use strict";var i=t("confluence.web.resources:jquery/require('backbone')"),o=t.n(i),r=t("confluence.web.resources:constants/require('confluence/api/constants')"),c=t("confluence.web.resources:meta/require('confluence/meta')"),s=t.n(c),l=t("./src/main/frontend/utils/utils.ts");const a=o.a.Model.extend({defaults:{authorDisplayName:Object(l.j)(),authorUserName:s.a.get("remote-user"),authorAvatarUrl:s.a.get("current-user-avatar-uri-reference"),body:"",commentId:"0",hasDeletePermission:!0,hasEditPermission:!!s.a.get("remote-user")},urlRoot:function(){return`${r.CONTEXT_PATH}/rest/inlinecomments/1.0/comments/${this.get("commentId")}/replies`},sync:function(e,n,t){return t=t||{},"create"===e&&(t.url=`${this.urlRoot()}?containerId=${s.a.get("latest-page-id")}`),o.a.sync.call(this,e,n,t)},validate:function(){if(!this.get("body"))return!0}});n.a=a},"./src/main/frontend/utils/utils.ts":function(e,n,t){"use strict";t.d(n,"m",(function(){return k})),t.d(n,"w",(function(){return j})),t.d(n,"v",(function(){return O})),t.d(n,"F",(function(){return x})),t.d(n,"M",(function(){return E})),t.d(n,"i",(function(){return R})),t.d(n,"j",(function(){return A})),t.d(n,"E",(function(){return N})),t.d(n,"b",(function(){return D})),t.d(n,"s",(function(){return P})),t.d(n,"H",(function(){return $})),t.d(n,"y",(function(){return M})),t.d(n,"N",(function(){return H})),t.d(n,"c",(function(){return W})),t.d(n,"a",(function(){return S})),t.d(n,"G",(function(){return L})),t.d(n,"I",(function(){return F})),t.d(n,"z",(function(){return X})),t.d(n,"t",(function(){return B})),t.d(n,"u",(function(){return G})),t.d(n,"J",(function(){return U})),t.d(n,"K",(function(){return z})),t.d(n,"q",(function(){return V})),t.d(n,"g",(function(){return J})),t.d(n,"h",(function(){return K})),t.d(n,"f",(function(){return Y})),t.d(n,"d",(function(){return Q})),t.d(n,"l",(function(){return Z})),t.d(n,"A",(function(){return ee})),t.d(n,"L",(function(){return ne})),t.d(n,"D",(function(){return te})),t.d(n,"n",(function(){return ie})),t.d(n,"o",(function(){return oe})),t.d(n,"k",(function(){return re})),t.d(n,"x",(function(){return ce})),t.d(n,"B",(function(){return se})),t.d(n,"e",(function(){return le})),t.d(n,"p",(function(){return ae})),t.d(n,"O",(function(){return de})),t.d(n,"r",(function(){return fe})),t.d(n,"C",(function(){return he}));var i=t("./node_modules/@atlassian/wrm-react-i18n/wrm-react-i18n.js"),o=t("confluence.web.resources:ajs/require('ajs')"),r=t.n(o),c=t("confluence.web.resources:jquery/require('backbone')"),s=t.n(c),l=t("confluence.web.resources:constants/require('confluence/api/constants')"),a=t("confluence.web.resources:meta/require('confluence/meta')"),u=t.n(a),d=t("confluence.web.resources:jquery/require('jquery')"),m=t.n(d),f=t("com.atlassian.confluence.plugins.confluence-editor-plugin:core/require('tinymce')"),h=t.n(f),g=t("confluence.web.resources:underscore/require('underscore')"),v=t.n(g);const p={INLINE_COMMENTS:r.a.DarkFeatures.isEnabled("confluence-inline-comments"),RESOLVED_INLINE_COMMENTS:r.a.DarkFeatures.isEnabled("confluence-inline-comments-resolved"),RICH_TEXT_EDITOR:r.a.DarkFeatures.isEnabled("confluence-inline-comments-rich-editor"),DANGLING_COMMENT:r.a.DarkFeatures.isEnabled("confluence-inline-comments-dangling-comment")},b=["dateautocomplete","confluencemacrobrowser","propertypanel","jiraconnector","dfe"],w=["autoresize","confluenceleavecomment"],C=["code","include"];let y,T,q=!1;function k(){return v.a.clone(p)}function j(){return v.a.clone(b)}function O(){return v.a.clone(w)}function x(e,n){let t;if(!e||!n)return;let i=m()(e.containingElement);if(i.is(".inline-comment-marker.valid")||(i=m()("<div/>").append(null==e?void 0:e.html).find(".inline-comment-marker.valid")),i.length>0&&function(e){return e.filter((function(){return m()(this).text().length>0})).length>0}(i)){const e=i.first().data("ref");return t=n.findWhere({markerRef:e}),t}}function E(e,n,t){const i=n.match(/(focusedCommentId|replyToComment)=(\d+)/);if(null==i)return;const o="replyToComment"===i[1],r=parseInt(i[2],10);let c=e.findWhere({id:r});null!=c?I(e,c,t,o):m.a.ajax({url:`${l.CONTEXT_PATH}/rest/inlinecomments/1.0/comments/replies/${r}/commentId`}).done((function(n){c=e.findWhere({id:n}),I(e,c,t,o)}))}function I(e,n,t,i){null!=n&&(n.isResolved()?new t({collection:e,focusCommentId:n.get("id")}).render():n.isDangling()||s.a.trigger("ic:view",n,"permalink",{isReplyComment:i}))}function R(){return u.a.get("current-user-avatar-uri-reference")?u.a.get("current-user-avatar-uri-reference"):u.a.get("static-resource-url-prefix")+"/images/icons/profilepics/anonymous.png"}function A(){return u.a.get("user-display-name")||u.a.get("current-user-fullname")}function _(e){if("number"==typeof e.selectionStart){const n=e.value.length;e.selectionStart=n,e.selectionEnd=n}else if(null!=typeof e.createTextRange){e.focus();const n=e.createTextRange();n.collapse(!1),n.select()}}function N(e){_(e),window.setTimeout((function(){_(e)}),1)}function D(e,n){const t="webkitAnimationEnd oanimationend msAnimationEnd animationend",i=e.$wikiContent,o=m.a.Deferred();if(n){const n=m()(".inline-comment-marker.active");i.addClass("ic-fade-in-animation"),i.one(t,(function(){m()(this).removeClass("ic-fade-in-animation")})),e.$el.addClass("ic-slide-in"),e.$el.one(t,(function(){m()(this).removeClass("ic-slide-in"),n.addClass("ic-highlight-pulse"),n.one(t,(function(){n.removeClass("ic-highlight-pulse")}))})),o.resolve()}else{i.bind(t,(function(n){"ic-fade-out-animation"==n.originalEvent.animationName?(e.$wikiContent.removeClass("ic-fade-out-animation"),e.$wikiContent.css("opacity","0.5")):"ic-fade-in-animation"==n.originalEvent.animationName&&(e.$wikiContent.css("opacity","1"),e.$wikiContent.removeClass("ic-fade-in-animation"),e.$wikiContent.unbind(t))})),i.addClass("ic-fade-out-animation"),e.$el.addClass("ic-slide-out");const n=function(){e.$el.removeClass("ic-slide-out"),e._emptySidebar(),B(ee()).css("padding-right","0"),i.addClass("ic-fade-in-animation"),i.css("position","static"),o.resolve(),e.$el.off(t,n)};e.$el.on(t,n)}return o.promise()}function P(e){let n=m()(e).closest("a");return n.length||(n=m()(e).find("a")),n}function $(e){e.each((function(){const e=P(this);e.length&&e.off("mousemove")}))}function M(){return void 0!==document.body.style.animation||void 0!==document.body.style.webkitAnimation}function H(e){e.parents(".expand-content.expand-hidden").each((function(){m()(this).siblings(".expand-control").click()}))}function W(e){const n=ie();if(!0===e){if(m()(".ic-sidebar #wysiwygTextarea_ifr").length&&n&&n.isDirty())return confirm("Your comment will be lost.")}else if(n&&n.isDirty()&&r.a.Confluence.Editor&&!r.a.Confluence.Editor.getContentType)return confirm("Your comment will be lost.");return!0}function S(e){e.$("button.ic-action-hide").tooltip({gravity:"se"}),e.$("button.ic-action-hide").tooltip({gravity:"s"}),e.$("button.ic-action-hide").tooltip({gravity:"s"})}function L(e){var n,t,i;if(X())return void e.css("padding-bottom","20px");const o=ee()?Math.max(e.height(),182):e.height(),r=(null===(n=e.offset())||void 0===n?void 0:n.top)+o,c=null===(t=B())||void 0===t||null===(i=t.offset())||void 0===i?void 0:i.top,s=ee()&&me(B(ee()).css("height")),l=r-(c||0);return B(ee()).css({"min-height":l+"px"}),ee()?new Promise((function(e){e(l>s)})):void 0}function F(e){e=e.closest(".ic-display-comment-view");const n=this,t=m()(".confluence-embedded-image, .confluence-embedded-file img",e),i=t.length;let o=0;i>0&&t.off("load").one("load",()=>{++o===i&&n.recalculateContentHeight(e)}).each((e,n)=>{n.complete&&m()(n).load()})}function X(){var e;void 0===T&&(T=!(null===(e=G())||void 0===e||!e.length));return T}function B(e){return e?oe():ee()?m()("#rte"):m()("#content")}function G(){return void 0===y&&(y=m()("#splitter-content")),y}function U(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;const t=null===(e=ae())||void 0===e?void 0:e.querySelector(".inline-comment-marker.active");if(t){var i;let e=m()(t),o=e.position().top;for(;e.offsetParent().hasClass("conf-macro output-block");)e=e.offsetParent(),o+=e.position().top;null===(i=ue())||void 0===i||i.scrollTo({top:Math.abs(o-n),behavior:"smooth"})}}function z(e,n){n&&!n.is(":visible")||e&&(X()?G().scrollTop(n.offset().top-e):window.scrollTo(0,n.offset().top-e))}function V(e){const n=m.a.Deferred();return m.a.ajax({url:l.CONTEXT_PATH+"/rest/api/content/"+e+"?expand=body.editor",type:"GET",dataType:"json",contentType:"application/json; charset=utf-8"}).then((function(e){const t=e.body.editor.value;n.resolve(t)})).fail((function(e,t,i){n.reject(e,t,i)})),n.promise()}function J(e){let n=null;if(e.parents(".conf-macro").each((function(e,t){const i=m()(t);if(!1===i.data("hasbody")||-1!==C.indexOf(i.data("macro-name")))return n=i.data("macro-name"),!1})),null===n){const n=e.find('.conf-macro[data-hasbody="false"]');if(n.length>0)return n.eq(0).data("macro-name")}return n}function K(e){return e.closest(".user-mention").length>0||e.find(".user-mention").length>0}function Y(e){return e.closest("a[href^='/']:not('.user-mention')").length>0||e.find("a[href^='/']:not('.user-mention')").length>0}function Q(e){return e.closest("time[class^=date-]").length>0||e.find("time[class^=date-]").length>0}function Z(){const e={isDefault:!0,path:u.a.get("current-user-avatar-uri-reference")},n=u.a.get("remote-user");return{userName:""==n?null:n,displayName:u.a.get("current-user-fullname"),profilePicture:e}}function ee(){return q}function ne(){var e;q=null===(e=m()("#content"))||void 0===e?void 0:e.hasClass("edit")}function te(){var e;return!(null===(e=r.a.Rte)||void 0===e||!e.isQuickEdit)}function ie(){return h.a.activeEditor}function oe(){var e;return m()(null===h.a||void 0===h.a||null===(e=h.a.activeEditor)||void 0===e?void 0:e.getBody())}function re(){return ee()?oe():m()("#content .wiki-content:first")}const ce="span.inline-comment-marker",se=e=>{var n;return(null==e||null===(n=e.classList)||void 0===n?void 0:n.contains("inline-comment-marker"))&&"SPAN"===(null==e?void 0:e.tagName)&&null!==(null==e?void 0:e.getAttribute("data-ref"))},le=e=>m()(e).find(ce).length,ae=()=>{var e;return null===h.a||void 0===h.a||null===(e=h.a.activeEditor)||void 0===e?void 0:e.getDoc()},ue=()=>{var e;return null===h.a||void 0===h.a||null===(e=h.a.activeEditor)||void 0===e?void 0:e.getWin()},de=e=>{const n=document.querySelector(".ic-display-comment-view");var t;(e.length||(e=null==n?void 0:n.style.top),n)&&(n.style.top=me(e)-parseInt(null===(t=ue())||void 0===t?void 0:t.scrollY)+"px")},me=e=>parseInt(e.substring(0,e.length-2)),fe=()=>{return me(oe().css("padding-top"))+(null===(n=m()("#rte-toolbar"))||void 0===n?void 0:n.height())+(null===(e=m()("#license-banner"))||void 0===e?void 0:e.outerHeight());var e,n};function he(){var e,n,t,i;return!!(null!==h.a&&void 0!==h.a&&null!==(e=h.a.Env)&&void 0!==e&&null!==(n=e.os)&&void 0!==n&&n.isMacOS?h.a.Env.os.isMacOS():null===h.a||void 0===h.a||null===(t=h.a.Env)||void 0===t||null===(i=t.os)||void 0===i?void 0:i.isOSX())}},0:function(e,n,t){e.exports=void 0},"com.atlassian.confluence.plugins.confluence-editor-plugin:core/require('tinymce')":function(e,n){e.exports=require("tinymce")},"com.atlassian.confluence.plugins.confluence-frontend:react/require('react')":function(e,n){e.exports=require("react")},"com.atlassian.plugins.atlassian-plugins-webresource-plugin:format/WRM.format":function(e,n){e.exports=WRM.format},"com.atlassian.plugins.atlassian-plugins-webresource-plugin:i18n/WRM.I18n":function(e,n){if(void 0===WRM.I18n){var t=new Error("Cannot find module 'WRM.I18n'");throw t.code="MODULE_NOT_FOUND",t}e.exports=WRM.I18n},"confluence.web.components:confluence/require('confluence/root')":function(e,n){e.exports=require("confluence/root")},"confluence.web.resources:ajs/require('ajs')":function(e,n){e.exports=require("ajs")},"confluence.web.resources:constants/require('confluence/api/constants')":function(e,n){e.exports=require("confluence/api/constants")},"confluence.web.resources:event/require('confluence/api/event')":function(e,n){e.exports=require("confluence/api/event")},"confluence.web.resources:jquery/require('backbone')":function(e,n){e.exports=require("backbone")},"confluence.web.resources:jquery/require('jquery')":function(e,n){e.exports=require("jquery")},"confluence.web.resources:underscore/require('underscore')":function(e,n){e.exports=require("underscore")}}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:library', location = 'lib/jquery.textHighlighter.js' */
/**
 * @license jQuery Text Highlighter
 * Copyright (C) 2011 - 2013 by mirz
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

(function($, window, document, undefined) {
    var nodeTypes = {
        ELEMENT_NODE: 1,
        TEXT_NODE: 3
    };

    var plugin = {
        name: 'textHighlighter'
    };

    function TextHighlighter(element, options) {
        this.context = element;
        this.$context = $(element);
        this.options = $.extend({}, $[plugin.name].defaults, options);

        this.init();
    }

    TextHighlighter.prototype = {
        init: function() {
            this.$context.addClass(this.options.contextClass);
            this.bindEvents();
        },

        destroy: function() {
            this.unbindEvents();
            this.$context.removeClass(this.options.contextClass);
            this.$context.removeData(plugin.name);
        },

        bindEvents: function() {
            // MODIFIED by ATLASSIAN
//            this.$context.bind('mouseup', {self: this}, this.highlightHandler);
        },

        unbindEvents: function() {
            // MODIFIED by ATLASSIAN
//            this.$context.unbind('mouseup', this.highlightHandler);
        },

        highlightHandler: function(event) {
            var self = event.data.self;
            self.doHighlight();
        },

        /**
         * Highlights currently selected text.
         */
        // MODIFIED by ATLASSIAN
        // Method takes a range argument that overrides the current range on page
        // Method now returns the normalized highlight nodes
        doHighlight: function(rangeObj) {
            var range = rangeObj || this.getCurrentRange();
            if (!range || range.collapsed) return;
            var rangeText = range.toString();
            var normalizedHighlights = "";
            if (this.options.onBeforeHighlight(range) == true) {
                var $wrapper = $.textHighlighter.createWrapper(this.options);

                var createdHighlights = this.highlightRange(range, $wrapper);

                normalizedHighlights = this.normalizeHighlights(createdHighlights);
                this.options.onAfterHighlight(normalizedHighlights, rangeText);
            }

            this.removeAllRanges();
            // MODIFIED BY ATLASSIAN
            // Added this return statement
            return normalizedHighlights;
        },

        /**
         * Returns first range of current selection object.
         */
        getCurrentRange: function() {
            var selection = this.getCurrentSelection();

            var range;
            if (selection.rangeCount > 0) {
                range = selection.getRangeAt(0);
            }
            return range;
        },

        removeAllRanges: function() {
            var selection = this.getCurrentSelection();
            selection.removeAllRanges();
        },

        /**
         * Returns current selection object.
         */
        getCurrentSelection: function() {
            var currentWindow = this.getCurrentWindow();
            var selection;

            if (currentWindow.getSelection) {
                selection = currentWindow.getSelection();
            } else if ($('iframe').length) {
                $('iframe', top.document).each(function() {
                    if (this.contentWindow === currentWindow) {
                        selection = rangy.getIframeSelection(this);
                        return false;
                    }
                });
            } else {
                selection = rangy.getSelection();
            }

            return selection;
        },

        /**
         * Returns owner window of this.context.
         */
        getCurrentWindow: function() {
            var currentDoc = this.getCurrentDocument();
            if (currentDoc.defaultView) {
                return currentDoc.defaultView; // Non-IE
            } else {
                return currentDoc.parentWindow; // IE
            }
        },

        /**
         * Returns owner document of this.context.
         */
        getCurrentDocument: function() {
            // if ownerDocument is null then context is document
            return this.context.ownerDocument ? this.context.ownerDocument : this.context;
        },

        /**
         * Wraps given range (highlights it) object in the given wrapper.
         */
        highlightRange: function(range, $wrapper) {
            if (range.collapsed) return;

            // Don't highlight content of these tags
            var ignoreTags = ['SCRIPT', 'STYLE', 'SELECT', 'BUTTON', 'OBJECT', 'APPLET'];
            var startContainer = range.startContainer;
            var endContainer = range.endContainer;
            var ancestor = range.commonAncestorContainer;
            var goDeeper = true;

            if (range.endOffset == 0) {
                while (!endContainer.previousSibling && endContainer.parentNode != ancestor) {
                    endContainer = endContainer.parentNode;
                }
                endContainer = endContainer.previousSibling;
            } else if (endContainer.nodeType == nodeTypes.TEXT_NODE) {
                if (range.endOffset < endContainer.nodeValue.length) {
                    endContainer.splitText(range.endOffset);
                }
            } else if (range.endOffset > 0) {
                endContainer = endContainer.childNodes.item(range.endOffset - 1);
            }

            if (startContainer.nodeType == nodeTypes.TEXT_NODE) {
                if (range.startOffset == startContainer.nodeValue.length) {
                    goDeeper = false;
                } else if (range.startOffset > 0) {
                    startContainer = startContainer.splitText(range.startOffset);
                    if (endContainer == startContainer.previousSibling) endContainer = startContainer;
                }
            } else if (range.startOffset < startContainer.childNodes.length) {
                startContainer = startContainer.childNodes.item(range.startOffset);
            } else {
                startContainer = startContainer.nextSibling;
            }

            var done = false;
            var node = startContainer;
            var highlights = [];

            do {
                if (goDeeper && node.nodeType == nodeTypes.TEXT_NODE) {
                    if (/\S/.test(node.nodeValue)) {
                        var wrapper = $wrapper.clone(true).get(0);
                        var nodeParent = node.parentNode;

                        // highlight if node is inside the context
                        if ($.contains(this.context, nodeParent) || nodeParent === this.context) {
                            var highlight = $(node).wrap(wrapper).parent().get(0);
                            highlights.push(highlight);
                        }
                    }

                    goDeeper = false;
                }
                if (node == endContainer && (!endContainer.hasChildNodes() || !goDeeper)) {
                    done = true;
                }

                if ($.inArray(node.tagName, ignoreTags) != -1) {
                    goDeeper = false;
                }
                if (goDeeper && node.hasChildNodes()) {
                    node = node.firstChild;
                } else if (node.nextSibling != null) {
                    node = node.nextSibling;
                    goDeeper = true;
                } else {
                    node = node.parentNode;
                    goDeeper = false;
                }
            } while (!done);

            return highlights;
        },

        /**
         * Normalizes highlights - nested highlights are flattened and sibling higlights are merged.
         */
        normalizeHighlights: function(highlights) {
            this.flattenNestedHighlights(highlights);
            this.mergeSiblingHighlights(highlights);

            // omit removed nodes
            var normalizedHighlights = $.map(highlights, function(hl) {
                if (typeof hl.parentElement != 'undefined') { // IE
                    return hl.parentElement != null ? hl : null;
                } else {
                    return hl.parentNode != null ? hl : null;
                }
            });

            return normalizedHighlights;
        },

        flattenNestedHighlights: function(highlights) {
            var self = this;

            $.each(highlights, function(i) {
                var $highlight = $(this);
                var $parent = $highlight.parent();
                var $parentPrev = $parent.prev();
                var $parentNext = $parent.next();

                if (self.isHighlight($parent)) {
                    if ($parent.css('background-color') != $highlight.css('background-color')) {
                        if (self.isHighlight($parentPrev) && !$highlight.get(0).previousSibling
                            && $parentPrev.css('background-color') != $parent.css('background-color')
                            && $parentPrev.css('background-color') == $highlight.css('background-color')) {

                            $highlight.insertAfter($parentPrev);
                        }

                        if (self.isHighlight($parentNext) && !$highlight.get(0).nextSibling
                            && $parentNext.css('background-color') != $parent.css('background-color')
                            && $parentNext.css('background-color') == $highlight.css('background-color')) {

                            $highlight.insertBefore($parentNext);
                        }

                        if ($parent.is(':empty')) {
                            $parent.remove();
                        }
                    } else {
                        var newNode = document.createTextNode($parent.text());

                        $parent.empty();
                        $parent.append(newNode);
                        $(highlights[i]).remove();
                    }
                }
            });
        },

        mergeSiblingHighlights: function(highlights) {
            var self = this;

            function shouldMerge(current, node) {
                return node && node.nodeType == nodeTypes.ELEMENT_NODE
                    && $(current).css('background-color') == $(node).css('background-color')
                    && $(node).hasClass(self.options.highlightedClass)
                    ? true : false;
            }

            $.each(highlights, function() {
                var highlight = this;

                var prev = highlight.previousSibling;
                var next = highlight.nextSibling;

                if (shouldMerge(highlight, prev)) {
                    var mergedTxt = $(prev).text() + $(highlight).text();
                    $(highlight).text(mergedTxt);
                    $(prev).remove();
                }
                if (shouldMerge(highlight, next)) {
                    var mergedTxt = $(highlight).text() + $(next).text();
                    $(highlight).text(mergedTxt);
                    $(next).remove();
                }
            });
        },

        /**
         * Sets color of future highlights.
         */
        setColor: function(color) {
            this.options.color = color;
        },

        /**
         * Returns current highlights color.
         */
        getColor: function() {
            return this.options.color;
        },

        /**
         * Removes all highlights in given element or in context if no element given.
         */
        removeHighlights: function(element) {
            var container = (element !== undefined ? element : this.context);

            var unwrapHighlight = function(highlight) {
                return $(highlight).contents().unwrap().get(0);
            };

            var mergeSiblingTextNodes = function(textNode) {
                var prev = textNode.previousSibling;
                var next = textNode.nextSibling;

                if (prev && prev.nodeType == nodeTypes.TEXT_NODE) {
                    textNode.nodeValue = prev.nodeValue + textNode.nodeValue;
                    prev.parentNode.removeChild(prev);
                }
                if (next && next.nodeType == nodeTypes.TEXT_NODE) {
                    textNode.nodeValue = textNode.nodeValue + next.nodeValue;
                    next.parentNode.removeChild(next);
                }
            };

            var self = this;
            var $highlights = this.getAllHighlights(container, true);
            $highlights.each(function() {
                if (self.options.onRemoveHighlight(this) == true) {
                    var textNode = unwrapHighlight(this);
                    //TODO: temporary solution handle case1.
                    //We will investigating more and solve all case in this ticket https://jira.atlassian.com/browse/CONFDEV-25772
                    //mergeSiblingTextNodes(textNode);
                }
            });
        },

        /**
         * Returns all highlights in given container. If container is a highlight itself and
         * andSelf is true, container will be also returned
         */
        getAllHighlights: function(container, andSelf) {
            var classSelectorStr = '.' + this.options.highlightedClass;
            var $highlights = $(container).find(classSelectorStr);
            if (andSelf == true && $(container).hasClass(this.options.highlightedClass)) {
                $highlights = $highlights.add(container);
            }
            return $highlights;
        },

        /**
         * Returns true if element is highlight, ie. has proper class.
         */
        isHighlight: function($el) {
            return $el.hasClass(this.options.highlightedClass);
        },

        /**
         * Serializes all highlights to stringified JSON object.
         */
        // Modifed by ATLASSIAN
        // Add highlights argument to function. This allows a caller specified set of highlight nodes
        // to be serialized. If no argument is passed, this.getAllHighlights() will be used instead
        serializeHighlights: function(highlights) {
            var $highlights = highlights || this.getAllHighlights(this.context);
            var refEl = this.context;
            var hlDescriptors = [];
            var self = this;

            var getElementPath = function (el, refElement) {
                var path = [];

                do {
                    var elIndex = $.inArray(el, el.parentNode.childNodes);
                    path.unshift(elIndex);
                    el = el.parentNode;
                } while (el !== refElement);

                return path;
            };

            $highlights.each(function(i, highlight) {
                var offset = 0; // Hl offset from previous sibling within parent node.
                var length = highlight.firstChild.length;
                var hlPath = getElementPath(highlight, refEl);
                var wrapper = $(highlight).clone().empty().get(0).outerHTML;

                if (highlight.previousSibling && highlight.previousSibling.nodeType === nodeTypes.TEXT_NODE) {
                    offset = highlight.previousSibling.length;
                }

                // Modified by ATLASSIAN
                // Remove unneeded data from hlDescriptors to save storage on server side
                hlDescriptors.push([
                    //wrapper,
                    $(highlight).text(),
                    hlPath.join(':'),
                    offset,
                    length
                ]);
            });

            return JSON.stringify(hlDescriptors);
        },

        /**
         * Deserializes highlights from stringified JSON given as parameter.
         */
            // Modified by ATLASSIAN
            // Override deserializeHighlights to take wrapper parameter
        deserializeHighlights: function(json, wrapper) {
            try {
                var hlDescriptors = JSON.parse(json);
            } catch (e) {
                throw "Can't parse serialized highlights: " + e;
            }
            var highlights = [];
            var self = this;

            var deserializationFn = function (hlDescriptor) {
                // Modified by ATLASSIAN
                // Provide static wrapper HTML string, instead of storing it for each descriptor
                //var wrapper = hlDescriptor[0];
                var hlText = hlDescriptor[0];
                var hlPath = hlDescriptor[1].split(':');
                var elOffset = hlDescriptor[2];
                var hlLength = hlDescriptor[3];
                var elIndex = hlPath.pop();
                var idx = null;
                var node = self.context;
                // end Modified by ATLASSIAN

                while ((idx = hlPath.shift()) !== undefined) {
                    node = node.childNodes[idx];
                }

                if (node.childNodes[elIndex-1] && node.childNodes[elIndex-1].nodeType === nodeTypes.TEXT_NODE) {
                    elIndex -= 1;
                }

                var textNode = node.childNodes[elIndex];
                var hlNode = textNode.splitText(elOffset);
                hlNode.splitText(hlLength);

                if (hlNode.nextSibling && hlNode.nextSibling.nodeValue == '') {
                    hlNode.parentNode.removeChild(hlNode.nextSibling);
                }

                if (hlNode.previousSibling && hlNode.previousSibling.nodeValue == '') {
                    hlNode.parentNode.removeChild(hlNode.previousSibling);
                }

                // ADDED by Atlassian
                if (hlText !== hlNode.nodeValue) {
                    throw "Different text";
                }

                var highlight = $(hlNode).wrap(wrapper).parent().get(0);
                highlights.push(highlight);
            };
            // MODIFIED by Atlassian
            var isDeserializable = true;

            $.each(hlDescriptors, function(i, hlDescriptor) {
                try {
                    deserializationFn(hlDescriptor);
                } catch (e) {
                    console && console.warn
                    && console.warn("Can't deserialize " + i + "-th descriptor. Cause: " + e);
                    // MODIFIED by Atlassian
                    isDeserializable = false;
                    return true;
                }
            });
            // MODIFIED by Atlassian
            return isDeserializable && highlights;
        }

    };

    /**
     * Returns TextHighlighter instance.
     */
    $.fn.getHighlighter = function() {
        return this.data(plugin.name);
    };

    $.fn[plugin.name] = function(options) {
        return this.each(function() {
            if (!$.data(this, plugin.name)) {
                $.data(this, plugin.name, new TextHighlighter(this, options));
            }
        });
    };

    $.textHighlighter = {
        /**
         * Returns HTML element to wrap selected text in.
         */
        createWrapper: function(options) {
            return $('<span></span>')
                .css('backgroundColor', options.color)
                .addClass(options.highlightedClass);
        },
        defaults: {
            color: '#ffff7b',
            highlightedClass: 'highlighted',
            contextClass: 'highlighter-context',
            onRemoveHighlight: function() { return true; },
            onBeforeHighlight: function() { return true; },
            onAfterHighlight: function() { }
        }
    };

})(jQuery, window, document);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:util-resource', location = 'util/text-highlighter.js' */
define('confluence/ic/util/text-highlighter', [
    'jquery'
], function($) {
    "use strict";

    /*
     * A wrapped version of jquery highlighter plugin with customizations
     * It can be instantiated anywhere
     */
    var CURRENT_HIGHLIGHT_SELECTOR = 'ic-current-selection';

    function TextHighlighter() {
        $.textHighlighter.createWrapper = function(options) {
            return $('<span></span>').addClass(options.highlightedClass);
        };
        this.$el = $('#content .wiki-content').first();

        if (this.$el.length > 0) {
            this.$el.textHighlighter({
                highlightedClass: CURRENT_HIGHLIGHT_SELECTOR
            });
        }
    }

    TextHighlighter.prototype.highlight = function(range) {
        if (this.$el.length === 0) {
            return;
        }
        var $highlightNodes = $(this.$el.getHighlighter().doHighlight(range));
        return this.$el.getHighlighter().serializeHighlights($highlightNodes);
    };

    TextHighlighter.prototype.removeHighlight = function() {
        if (this.$el.length === 0) {
            return;
        }
        this.$el.getHighlighter().removeHighlights();
        return this;
    };

    /**
     * Deserializes highlights from stringified JSON given as parameter.
     */
    TextHighlighter.prototype.deserializeHighlights = function(json, markerRef) {
        if (this.$el.length === 0) {
            return;
        }
        var wrapper = '<span class="inline-comment-marker" data-ref="' + markerRef + '"></span>';
        return this.$el.getHighlighter().deserializeHighlights(json, wrapper);
    };

    return TextHighlighter;
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-frontend:split_vendors~react-dom-server', location = 'vendors~react-dom-server.js' */
(window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73=window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73||[]).push([[40],{169:function(e,t,n){"use strict";var r,o;r=n(560),o=n(561),t.version=r.version,t.renderToString=r.renderToString,t.renderToStaticMarkup=r.renderToStaticMarkup,t.renderToNodeStream=r.renderToNodeStream,t.renderToStaticNodeStream=r.renderToStaticNodeStream,t.renderToReadableStream=o.renderToReadableStream},560:function(e,t,n){"use strict";
/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(68);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=!1;function l(e,t){return a&&(a=!1,"<"!==t[0]&&e.push("\x3c!-- --\x3e")),"\x3c!-- --\x3e"===t?a=!0:e.push(t)}var i=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s={},c={};function f(e){return!!i.call(c,e)||!i.call(s,e)&&(u.test(e)?c[e]=!0:(s[e]=!0,!1))}function d(e,t,n,r,o,a,l){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){p[e]=new d(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];p[t]=new d(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){p[e]=new d(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){p[e]=new d(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){p[e]=new d(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){p[e]=new d(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){p[e]=new d(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){p[e]=new d(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){p[e]=new d(e,5,!1,e.toLowerCase(),null,!1,!1)}));var h=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(h,g);p[t]=new d(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(h,g);p[t]=new d(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(h,g);p[t]=new d(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){p[e]=new d(e,1,!1,e.toLowerCase(),null,!1,!1)})),p.xlinkHref=new d("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){p[e]=new d(e,1,!1,e.toLowerCase(),null,!0,!0)}));var m={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},y=["Webkit","ms","Moz","O"];Object.keys(m).forEach((function(e){y.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),m[t]=m[e]}))}));var b=/["'&<>]/;function v(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=b.exec(e);if(t){var n,r="",o=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==n&&(r+=e.substring(o,n)),o=n+1,r+=t}e=o!==n?r+e.substring(o,n):r}return e}var S=/([A-Z])/g,k=/^ms-/,x=Array.isArray;function w(e,t){return{insertionMode:e,selectedValue:t}}function C(e,t){""!==t&&e.push(v(t),"\x3c!-- --\x3e")}var E=new Map;function F(e,t,n){if("object"!=typeof n)throw Error(o(62));for(var r in t=!0,n)if(i.call(n,r)){var a=n[r];if(null!=a&&"boolean"!=typeof a&&""!==a){if(0===r.indexOf("--")){var l=v(r);a=v((""+a).trim())}else{l=r;var u=E.get(l);void 0!==u||(u=v(l.replace(S,"-$1").toLowerCase().replace(k,"-ms-")),E.set(l,u)),l=u,a="number"==typeof a?0===a||i.call(m,r)?""+a:a+"px":v((""+a).trim())}t?(t=!1,e.push(' style="',l,":",a)):e.push(";",l,":",a)}}t||e.push('"')}function R(e,t,n,r){switch(n){case"style":return void F(e,t,r);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=p.hasOwnProperty(n)?p[n]:null)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=t.attributeName,t.type){case 3:r&&e.push(" ",n,'=""');break;case 4:!0===r?e.push(" ",n,'=""'):!1!==r&&e.push(" ",n,'="',v(r),'"');break;case 5:isNaN(r)||e.push(" ",n,'="',v(r),'"');break;case 6:!isNaN(r)&&1<=r&&e.push(" ",n,'="',v(r),'"');break;default:t.sanitizeURL&&(r=""+r),e.push(" ",n,'="',v(r),'"')}}else if(f(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(" ",n,'="',v(r),'"')}}function T(e,t,n){if(null!=t){if(null!=n)throw Error(o(60));if("object"!=typeof t||!("__html"in t))throw Error(o(61));null!=(t=t.__html)&&e.push(""+t)}}function _(e,t,n,r){e.push(P(n));var o,a=n=null;for(o in t)if(i.call(t,o)){var l=t[o];if(null!=l)switch(o){case"children":n=l;break;case"dangerouslySetInnerHTML":a=l;break;default:R(e,r,o,l)}}return e.push(">"),T(e,a,n),"string"==typeof n?(e.push(v(n)),null):n}var I=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,M=new Map;function P(e){var t=M.get(e);if(void 0===t){if(!I.test(e))throw Error(o(65,e));t="<"+e,M.set(e,t)}return t}function B(e,t,n,a,l){switch(t){case"select":e.push(P("select"));var u=null,s=null;for(h in n)if(i.call(n,h)){var c=n[h];if(null!=c)switch(h){case"children":u=c;break;case"dangerouslySetInnerHTML":s=c;break;case"defaultValue":case"value":break;default:R(e,a,h,c)}}return e.push(">"),T(e,s,u),u;case"option":s=l.selectedValue,e.push(P("option"));var d=c=null,p=null,h=null;for(u in n)if(i.call(n,u)&&null!=(t=n[u]))switch(u){case"children":c=t;break;case"selected":p=t;break;case"dangerouslySetInnerHTML":h=t;break;case"value":d=t;default:R(e,a,u,t)}if(null!=s)if(n=null!==d?""+d:function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(c),x(s)){for(a=0;a<s.length;a++)if(""+s[a]===n){e.push(' selected=""');break}}else""+s===n&&e.push(' selected=""');else p&&e.push(' selected=""');return e.push(">"),T(e,h,c),c;case"textarea":for(c in e.push(P("textarea")),h=s=u=null,n)if(i.call(n,c)&&null!=(d=n[c]))switch(c){case"children":h=d;break;case"value":u=d;break;case"defaultValue":s=d;break;case"dangerouslySetInnerHTML":throw Error(o(91));default:R(e,a,c,d)}if(null===u&&null!==s&&(u=s),e.push(">"),null!=h){if(null!=u)throw Error(o(92));if(x(h)&&1<h.length)throw Error(o(93));u=""+h}return"string"==typeof u&&"\n"===u[0]&&e.push("\n"),null!==u&&e.push(v(""+u)),null;case"input":for(s in e.push(P("input")),d=h=c=u=null,n)if(i.call(n,s)&&null!=(p=n[s]))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(o(399,"input"));case"defaultChecked":d=p;break;case"defaultValue":c=p;break;case"checked":h=p;break;case"value":u=p;break;default:R(e,a,s,p)}return null!==h?R(e,a,"checked",h):null!==d&&R(e,a,"checked",d),null!==u?R(e,a,"value",u):null!==c&&R(e,a,"value",c),e.push("/>"),null;case"menuitem":for(var g in e.push(P("menuitem")),n)if(i.call(n,g)&&null!=(u=n[g]))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(o(400));default:R(e,a,g,u)}return e.push(">"),null;case"listing":case"pre":for(d in e.push(P(t)),s=u=null,n)if(i.call(n,d)&&null!=(c=n[d]))switch(d){case"children":u=c;break;case"dangerouslySetInnerHTML":s=c;break;default:R(e,a,d,c)}if(e.push(">"),null!=s){if(null!=u)throw Error(o(60));if("object"!=typeof s||!("__html"in s))throw Error(o(61));null!=(n=s.__html)&&("string"==typeof n&&0<n.length&&"\n"===n[0]?e.push("\n",n):e.push(""+n))}return"string"==typeof u&&"\n"===u[0]&&e.push("\n"),u;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var m in e.push(P(t)),n)if(i.call(n,m)&&null!=(u=n[m]))switch(m){case"children":case"dangerouslySetInnerHTML":throw Error(o(399,t));default:R(e,a,m,u)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return _(e,n,t,a);case"html":return 0===l.insertionMode&&e.push("<!DOCTYPE html>"),_(e,n,t,a);default:if(-1===t.indexOf("-")&&"string"!=typeof n.is)return _(e,n,t,a);for(p in e.push(P(t)),s=u=null,n)if(i.call(n,p)&&null!=(c=n[p]))switch(p){case"children":u=c;break;case"dangerouslySetInnerHTML":s=c;break;case"style":F(e,a,c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:f(p)&&"function"!=typeof c&&"symbol"!=typeof c&&e.push(" ",p,'="',v(c),'"')}return e.push(">"),T(e,s,u),u}}function z(e,t,n){if(l(e,'\x3c!--$?--\x3e<template id="'),null===n)throw Error(o(395));return l(e,n),l(e,'"></template>')}var D=Object.assign,N=Symbol.for("react.element"),V=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),j=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),X=Symbol.for("react.scope"),G=Symbol.for("react.debug_trace_mode"),Y=Symbol.for("react.legacy_hidden"),J=Symbol.for("react.default_value"),K=Symbol.iterator;function Q(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case $:return"Fragment";case V:return"Portal";case O:return"Profiler";case L:return"StrictMode";case H:return"Suspense";case W:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case q:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case U:return null!==(t=e.displayName||null)?t:Q(e.type)||"Memo";case Z:t=e._payload,e=e._init;try{return Q(e(t))}catch(e){}}return null}var ee={};function te(e,t){if(!(e=e.contextTypes))return ee;var n,r={};for(n in e)r[n]=t[n];return r}var ne=null;function re(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(o(401))}else{if(null===n)throw Error(o(401));re(e,n)}t.context._currentValue2=t.value}}function oe(e){var t=ne;t!==e&&(null===t?function e(t){var n=t.parent;null!==n&&e(n),t.context._currentValue2=t.value}(e):null===e?function e(t){t.context._currentValue2=t.parentValue,null!==(t=t.parent)&&e(t)}(t):t.depth===e.depth?re(t,e):t.depth>e.depth?function e(t,n){if(t.context._currentValue2=t.parentValue,null===(t=t.parent))throw Error(o(402));t.depth===n.depth?re(t,n):e(t,n)}(t,e):function e(t,n){var r=n.parent;if(null===r)throw Error(o(402));t.depth===r.depth?re(t,r):e(t,r),n.context._currentValue2=n.value}(t,e),ne=e)}var ae={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function le(e,t,n,r){var o=void 0!==e.state?e.state:null;e.updater=ae,e.props=n,e.state=o;var a={queue:[],replace:!1};e._reactInternals=a;var l=t.contextType;if(e.context="object"==typeof l&&null!==l?l._currentValue2:r,"function"==typeof(l=t.getDerivedStateFromProps)&&(o=null==(l=l(n,o))?o:D({},o,l),e.state=o),"function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate&&("function"==typeof e.UNSAFE_componentWillMount||"function"==typeof e.componentWillMount))if(t=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&ae.enqueueReplaceState(e,e.state,null),null!==a.queue&&0<a.queue.length)if(t=a.queue,l=a.replace,a.queue=null,a.replace=!1,l&&1===t.length)e.state=t[0];else{for(a=l?t[0]:e.state,o=!0,l=l?1:0;l<t.length;l++){var i=t[l];null!=(i="function"==typeof i?i.call(e,a,n,r):i)&&(o?(o=!1,a=D({},a,i)):D(a,i))}e.state=a}else a.queue=null}var ie={id:1,overflow:""};function ue(e,t,n){var r=e.id;e=e.overflow;var o=32-se(r)-1;r&=~(1<<o),n+=1;var a=32-se(t)+o;if(30<a){var l=o-o%5;return a=(r&(1<<l)-1).toString(32),r>>=l,o-=l,{id:1<<32-se(t)+o|n<<o|r,overflow:a+e}}return{id:1<<a|n<<o|r,overflow:e}}var se=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ce(e)/fe|0)|0},ce=Math.log,fe=Math.LN2;var de="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},pe=null,he=null,ge=null,me=null,ye=!1,be=!1,ve=0,Se=null,ke=0;function xe(){if(null===pe)throw Error(o(321));return pe}function we(){if(0<ke)throw Error(o(312));return{memoizedState:null,queue:null,next:null}}function Ce(){return null===me?null===ge?(ye=!1,ge=me=we()):(ye=!0,me=ge):null===me.next?(ye=!1,me=me.next=we()):(ye=!0,me=me.next),me}function Ee(){he=pe=null,be=!1,ge=null,ke=0,me=Se=null}function Fe(e,t){return"function"==typeof t?t(e):t}function Re(e,t,n){if(pe=xe(),me=Ce(),ye){var r=me.queue;if(t=r.dispatch,null!==Se&&void 0!==(n=Se.get(r))){Se.delete(r),r=me.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return me.memoizedState=r,[r,t]}return[me.memoizedState,t]}return e=e===Fe?"function"==typeof t?t():t:void 0!==n?n(t):t,me.memoizedState=e,e=(e=me.queue={last:null,dispatch:null}).dispatch=_e.bind(null,pe,e),[me.memoizedState,e]}function Te(e,t){if(pe=xe(),t=void 0===t?null:t,null!==(me=Ce())){var n=me.memoizedState;if(null!==n&&null!==t){var r=n[1];e:if(null===r)r=!1;else{for(var o=0;o<r.length&&o<t.length;o++)if(!de(t[o],r[o])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),me.memoizedState=[e,t],e}function _e(e,t,n){if(25<=ke)throw Error(o(301));if(e===pe)if(be=!0,e={action:n,next:null},null===Se&&(Se=new Map),void 0===(n=Se.get(t)))Se.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function Ie(){throw Error(o(394))}function Me(){}var Pe={readContext:function(e){return e._currentValue2},useContext:function(e){return xe(),e._currentValue2},useMemo:Te,useReducer:Re,useRef:function(e){pe=xe();var t=(me=Ce()).memoizedState;return null===t?(e={current:e},me.memoizedState=e):t},useState:function(e){return Re(Fe,e)},useInsertionEffect:Me,useLayoutEffect:function(){},useCallback:function(e,t){return Te((function(){return e}),t)},useImperativeHandle:Me,useEffect:Me,useDebugValue:Me,useDeferredValue:function(e){return xe(),e},useTransition:function(){return xe(),[!1,Ie]},useId:function(){var e=he.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-se(e)-1)).toString(32)+t;var n=Be;if(null===n)throw Error(o(404));return t=ve++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return xe(),t(e._source)},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(o(407));return n()}},Be=null,ze=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function De(e){console.error(e)}function Ne(){}function Ve(e,t,n,r,o,a,l,i){e.allPendingTasks++,null===n?e.pendingRootTasks++:n.pendingTasks++;var u={node:t,ping:function(){var t=e.pingedTasks;t.push(u),1===t.length&&Ke(e)},blockedBoundary:n,blockedSegment:r,abortSet:o,legacyContext:a,context:l,treeContext:i};return o.add(u),u}function $e(e,t,n,r){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n}}function Le(e,t){(e=e.onError)(t)}function Oe(e,t){var n=e.onShellError;n(t),(n=e.onFatalError)(t),null!==e.destination?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function Ae(e,t,n,r,o){for(pe={},he=t,ve=0,e=n(r,o);be;)be=!1,ve=0,ke+=1,me=null,e=n(r,o);return Ee(),e}function je(e,t,n,r){var a=n.render(),l=r.childContextTypes;if(null!=l){var i=t.legacyContext;if("function"!=typeof n.getChildContext)r=i;else{for(var u in n=n.getChildContext())if(!(u in l))throw Error(o(108,Q(r)||"Unknown",u));r=D({},i,n)}t.legacyContext=r,We(e,t,a),t.legacyContext=i}else We(e,t,a)}function qe(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function He(e,t,n,r,a){if("function"==typeof n)if(n.prototype&&n.prototype.isReactComponent){a=te(n,t.legacyContext);var l=n.contextType;le(l=new n(r,"object"==typeof l&&null!==l?l._currentValue2:a),n,r,a),je(e,t,l,n)}else{a=Ae(e,t,n,r,l=te(n,t.legacyContext));var i=0!==ve;if("object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof)le(a,n,r,l),je(e,t,a,n);else if(i){r=t.treeContext,t.treeContext=ue(r,1,0);try{We(e,t,a)}finally{t.treeContext=r}}else We(e,t,a)}else{if("string"!=typeof n){switch(n){case Y:case G:case L:case O:case $:case W:return void We(e,t,r.children);case X:throw Error(o(343));case H:e:{n=t.blockedBoundary,a=t.blockedSegment,l=r.fallback,r=r.children;var u={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:i=new Set},s=$e(0,a.chunks.length,u,a.formatContext);a.children.push(s);var c=$e(0,0,null,a.formatContext);c.parentFlushed=!0,t.blockedBoundary=u,t.blockedSegment=c;try{if(Ze(e,t,r),c.status=1,Ye(u,c),0===u.pendingTasks)break e}catch(t){c.status=4,Le(e,t),u.forceClientRender=!0}finally{t.blockedBoundary=n,t.blockedSegment=a}t=Ve(e,l,n,s,i,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if("object"==typeof n&&null!==n)switch(n.$$typeof){case q:if(r=Ae(e,t,n.render,r,a),0!==ve){n=t.treeContext,t.treeContext=ue(n,1,0);try{We(e,t,r)}finally{t.treeContext=n}}else We(e,t,r);return;case U:return void He(e,t,n=n.type,r=qe(n,r),a);case A:if(a=r.children,n=n._context,r=r.value,l=n._currentValue2,n._currentValue2=r,ne=r={parent:i=ne,depth:null===i?0:i.depth+1,context:n,parentValue:l,value:r},t.context=r,We(e,t,a),null===(e=ne))throw Error(o(403));return r=e.parentValue,e.context._currentValue2=r===J?e.context._defaultValue:r,e=ne=e.parent,void(t.context=e);case j:return void We(e,t,r=(r=r.children)(n._currentValue2));case Z:return void He(e,t,n=(a=n._init)(n._payload),r=qe(n,r),void 0)}throw Error(o(130,null==n?n:typeof n,""))}switch(l=B((a=t.blockedSegment).chunks,n,r,e.responseState,a.formatContext),i=a.formatContext,a.formatContext=function(e,t,n){switch(t){case"select":return w(1,null!=n.value?n.value:n.defaultValue);case"svg":return w(2,null);case"math":return w(3,null);case"foreignObject":return w(1,null);case"table":return w(4,null);case"thead":case"tbody":case"tfoot":return w(5,null);case"colgroup":return w(7,null);case"tr":return w(6,null)}return 4<=e.insertionMode||0===e.insertionMode?w(1,null):e}(i,n,r),Ze(e,t,l),a.formatContext=i,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:a.chunks.push("</",n,">")}}}function We(e,t,n){if(t.node=n,"object"==typeof n&&null!==n){switch(n.$$typeof){case N:return void He(e,t,n.type,n.props,n.ref);case V:throw Error(o(257));case Z:var r=n._init;return void We(e,t,n=r(n._payload))}if(x(n))return void Ue(e,t,n);if(null===n||"object"!=typeof n?r=null:r="function"==typeof(r=K&&n[K]||n["@@iterator"])?r:null,r&&(r=r.call(n))){if(!(n=r.next()).done){var a=[];do{a.push(n.value),n=r.next()}while(!n.done);Ue(e,t,a)}return}throw e=Object.prototype.toString.call(n),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}"string"==typeof n?(t=t.blockedSegment.chunks,e.responseState.generateStaticMarkup?t.push(v(n)):C(t,n)):"number"==typeof n&&(t=t.blockedSegment.chunks,n=""+n,e.responseState.generateStaticMarkup?t.push(v(n)):C(t,n))}function Ue(e,t,n){for(var r=n.length,o=0;o<r;o++){var a=t.treeContext;t.treeContext=ue(a,r,o);try{Ze(e,t,n[o])}finally{t.treeContext=a}}}function Ze(e,t,n){var r=t.blockedSegment.formatContext,o=t.legacyContext,a=t.context;try{return We(e,t,n)}catch(u){if(Ee(),"object"!=typeof u||null===u||"function"!=typeof u.then)throw t.blockedSegment.formatContext=r,t.legacyContext=o,t.context=a,oe(a),u;n=u;var l=t.blockedSegment,i=$e(0,l.chunks.length,null,l.formatContext);l.children.push(i),e=Ve(e,t.node,t.blockedBoundary,i,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=r,t.legacyContext=o,t.context=a,oe(a)}}function Xe(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,Je(this,t,e)}function Ge(e){var t=e.blockedBoundary;e.blockedSegment.status=3,null===t?(this.allPendingTasks--,2!==this.status&&(this.status=2,null!==this.destination&&this.destination.push(null))):(t.pendingTasks--,t.forceClientRender||(t.forceClientRender=!0,t.parentFlushed&&this.clientRenderedBoundaries.push(t)),t.fallbackAbortableTasks.forEach(Ge,this),t.fallbackAbortableTasks.clear(),this.allPendingTasks--,0===this.allPendingTasks&&(e=this.onAllReady)())}function Ye(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1===n.status&&Ye(e,n)}else e.completedSegments.push(t)}function Je(e,t,n){if(null===t){if(n.parentFlushed){if(null!==e.completedRootSegment)throw Error(o(389));e.completedRootSegment=n}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=Ne,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(n.parentFlushed&&1===n.status&&Ye(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(Xe,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&1===n.status&&(Ye(t,n),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function Ke(e){if(2!==e.status){var t=ne,n=ze.current;ze.current=Pe;var r=Be;Be=e.responseState;try{var o,a=e.pingedTasks;for(o=0;o<a.length;o++){var l=a[o],i=e,u=l.blockedSegment;if(0===u.status){oe(l.context);try{We(i,l,l.node),l.abortSet.delete(l),u.status=1,Je(i,l.blockedBoundary,u)}catch(e){if(Ee(),"object"==typeof e&&null!==e&&"function"==typeof e.then){var s=l.ping;e.then(s,s)}else{l.abortSet.delete(l),u.status=4;var c=l.blockedBoundary,f=e;if(Le(i,f),null===c?Oe(i,f):(c.pendingTasks--,c.forceClientRender||(c.forceClientRender=!0,c.parentFlushed&&i.clientRenderedBoundaries.push(c))),i.allPendingTasks--,0===i.allPendingTasks)(0,i.onAllReady)()}}}}a.splice(0,o),null!==e.destination&&ot(e,e.destination)}catch(t){Le(e,t),Oe(e,t)}finally{Be=r,ze.current=n,n===Pe&&oe(t)}}}function Qe(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=e.nextSegmentId++;return e=e.responseState,l(t,'<template id="'),l(t,e.placeholderPrefix),l(t,e=r.toString(16)),l(t,'"></template>');case 1:n.status=2;var a=!0;r=n.chunks;var i=0;n=n.children;for(var u=0;u<n.length;u++){for(a=n[u];i<a.index;i++)l(t,r[i]);a=et(e,t,a)}for(;i<r.length-1;i++)l(t,r[i]);return i<r.length&&(a=l(t,r[i])),a;default:throw Error(o(390))}}function et(e,t,n){var r=n.boundary;if(null===r)return Qe(e,t,n);if(r.parentFlushed=!0,r.forceClientRender)return e.responseState.generateStaticMarkup||l(t,"\x3c!--$!--\x3e"),Qe(e,t,n),e=!!e.responseState.generateStaticMarkup||l(t,"\x3c!--/$--\x3e");if(0<r.pendingTasks){r.rootSegmentID=e.nextSegmentId++,0<r.completedSegments.length&&e.partialBoundaries.push(r);var a=e.responseState,i=a.nextSuspenseID++;return a=a.boundaryPrefix+i.toString(16),r=r.id=a,z(t,e.responseState,r),Qe(e,t,n),l(t,"\x3c!--/$--\x3e")}if(r.byteSize>e.progressiveChunkSize)return r.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(r),z(t,e.responseState,r.id),Qe(e,t,n),l(t,"\x3c!--/$--\x3e");if(e.responseState.generateStaticMarkup||l(t,"\x3c!--$--\x3e"),1!==(n=r.completedSegments).length)throw Error(o(391));return et(e,t,n[0]),e=!!e.responseState.generateStaticMarkup||l(t,"\x3c!--/$--\x3e")}function tt(e,t,n){return function(e,t,n,r){switch(n.insertionMode){case 0:case 1:return l(e,'<div hidden id="'),l(e,t.segmentPrefix),l(e,t=r.toString(16)),l(e,'">');case 2:return l(e,'<svg aria-hidden="true" style="display:none" id="'),l(e,t.segmentPrefix),l(e,t=r.toString(16)),l(e,'">');case 3:return l(e,'<math aria-hidden="true" style="display:none" id="'),l(e,t.segmentPrefix),l(e,t=r.toString(16)),l(e,'">');case 4:return l(e,'<table hidden id="'),l(e,t.segmentPrefix),l(e,t=r.toString(16)),l(e,'">');case 5:return l(e,'<table hidden><tbody id="'),l(e,t.segmentPrefix),l(e,t=r.toString(16)),l(e,'">');case 6:return l(e,'<table hidden><tr id="'),l(e,t.segmentPrefix),l(e,t=r.toString(16)),l(e,'">');case 7:return l(e,'<table hidden><colgroup id="'),l(e,t.segmentPrefix),l(e,t=r.toString(16)),l(e,'">');default:throw Error(o(397))}}(t,e.responseState,n.formatContext,n.id),et(e,t,n),function(e,t){switch(t.insertionMode){case 0:case 1:return l(e,"</div>");case 2:return l(e,"</svg>");case 3:return l(e,"</math>");case 4:return l(e,"</table>");case 5:return l(e,"</tbody></table>");case 6:return l(e,"</tr></table>");case 7:return l(e,"</colgroup></table>");default:throw Error(o(397))}}(t,n.formatContext)}function nt(e,t,n){for(var r=n.completedSegments,a=0;a<r.length;a++)rt(e,t,n,r[a]);if(r.length=0,e=e.responseState,r=n.id,n=n.rootSegmentID,l(t,e.startInlineScript),e.sentCompleteBoundaryFunction?l(t,'$RC("'):(e.sentCompleteBoundaryFunction=!0,l(t,'function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),null===r)throw Error(o(395));return n=n.toString(16),l(t,r),l(t,'","'),l(t,e.segmentPrefix),l(t,n),l(t,'")<\/script>')}function rt(e,t,n,r){if(2===r.status)return!0;var a=r.id;if(-1===a){if(-1===(r.id=n.rootSegmentID))throw Error(o(392));return tt(e,t,r)}return tt(e,t,r),l(t,(e=e.responseState).startInlineScript),e.sentCompleteSegmentFunction?l(t,'$RS("'):(e.sentCompleteSegmentFunction=!0,l(t,'function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),l(t,e.segmentPrefix),l(t,a=a.toString(16)),l(t,'","'),l(t,e.placeholderPrefix),l(t,a),l(t,'")<\/script>')}function ot(e,t){try{var n=e.completedRootSegment;if(null!==n&&0===e.pendingRootTasks){et(e,t,n),e.completedRootSegment=null;var r=e.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)l(t,r[n]);n<r.length&&l(t,r[n])}var a,i=e.clientRenderedBoundaries;for(a=0;a<i.length;a++){r=t;var u=e.responseState,s=i[a].id;if(l(r,u.startInlineScript),u.sentClientRenderFunction?l(r,'$RX("'):(u.sentClientRenderFunction=!0,l(r,'function $RX(a){if(a=document.getElementById(a))a=a.previousSibling,a.data="$!",a._reactRetry&&a._reactRetry()};$RX("')),null===s)throw Error(o(395));if(l(r,s),!l(r,'")<\/script>'))return e.destination=null,a++,void i.splice(0,a)}i.splice(0,a);var c=e.completedBoundaries;for(a=0;a<c.length;a++)if(!nt(e,t,c[a]))return e.destination=null,a++,void c.splice(0,a);c.splice(0,a);var f=e.partialBoundaries;for(a=0;a<f.length;a++){var d=f[a];e:{i=e,u=t;var p=d.completedSegments;for(s=0;s<p.length;s++)if(!rt(i,u,d,p[s])){s++,p.splice(0,s);var h=!1;break e}p.splice(0,s),h=!0}if(!h)return e.destination=null,a++,void f.splice(0,a)}f.splice(0,a);var g=e.completedBoundaries;for(a=0;a<g.length;a++)if(!nt(e,t,g[a]))return e.destination=null,a++,void g.splice(0,a);g.splice(0,a)}finally{0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.push(null)}}function at(){}function lt(e,t,n){var r=!1,a=null,l="",i={push:function(e){return null!==e&&(l+=e),!0},destroy:function(e){r=!0,a=e}},u=!1;if(Ke(e=function(e,t,n,r,o,a,l,i,u){var s=[],c=new Set;return(n=$e(t={destination:null,responseState:t,progressiveChunkSize:void 0===r?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:c,pingedTasks:s,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===o?De:o,onAllReady:void 0===a?Ne:a,onShellReady:void 0===l?Ne:l,onShellError:void 0===i?Ne:i,onFatalError:void 0===u?Ne:u},0,null,n)).parentFlushed=!0,e=Ve(t,e,null,n,c,ee,null,ie),s.push(e),t}(e,function(e,t){return{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:(t=void 0===t?"":t)+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}(n,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,at,void 0,(function(){u=!0}),void 0,void 0)),function(e){try{var t=e.abortableTasks;t.forEach(Ge,e),t.clear(),null!==e.destination&&ot(e,e.destination)}catch(t){Le(e,t),Oe(e,t)}}(e),1===e.status)e.status=2,i.destroy(e.fatalError);else if(2!==e.status&&null===e.destination){e.destination=i;try{ot(e,i)}catch(t){Le(e,t),Oe(e,t)}}if(r)throw a;if(!u)throw Error(o(426));return l}t.renderToNodeStream=function(){throw Error(o(207))},t.renderToStaticMarkup=function(e,t){return lt(e,t,!0)},t.renderToStaticNodeStream=function(){throw Error(o(208))},t.renderToString=function(e,t){return lt(e,t,!1)},t.version="18.1.0"},561:function(e,t,n){"use strict";
/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(68);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=null,l=0;function i(e,t){if(0!==t.length)if(512<t.length)0<l&&(e.enqueue(new Uint8Array(a.buffer,0,l)),a=new Uint8Array(512),l=0),e.enqueue(t);else{var n=a.length-l;n<t.length&&(0===n?e.enqueue(a):(a.set(t.subarray(0,n),l),e.enqueue(a),t=t.subarray(n)),a=new Uint8Array(512),l=0),a.set(t,l),l+=t.length}}function u(e,t){return i(e,t),!0}function s(e){a&&0<l&&(e.enqueue(new Uint8Array(a.buffer,0,l)),a=null,l=0)}var c=new TextEncoder;function f(e){return c.encode(e)}function d(e){return c.encode(e)}function p(e,t){"function"==typeof e.error?e.error(t):e.close()}var h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function b(e){return!!h.call(y,e)||!h.call(m,e)&&(g.test(e)?y[e]=!0:(m[e]=!0,!1))}function v(e,t,n,r,o,a,l){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){S[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];S[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){S[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){S[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){S[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){S[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){S[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){S[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){S[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var k=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(k,x);S[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(k,x);S[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(k,x);S[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){S[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),S.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){S[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C=["Webkit","ms","Moz","O"];Object.keys(w).forEach((function(e){C.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),w[t]=w[e]}))}));var E=/["'&<>]/;function F(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=E.exec(e);if(t){var n,r="",o=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==n&&(r+=e.substring(o,n)),o=n+1,r+=t}e=o!==n?r+e.substring(o,n):r}return e}var R=/([A-Z])/g,T=/^ms-/,_=Array.isArray,I=d("<script>"),M=d("<\/script>"),P=d('<script src="'),B=d('<script type="module" src="'),z=d('" async=""><\/script>'),D=/(<\/|<)(s)(cript)/gi;function N(e,t,n,r){return t+("s"===n?"\\u0073":"\\u0053")+r}function V(e,t){return{insertionMode:e,selectedValue:t}}var $=d("\x3c!-- --\x3e"),L=new Map,O=d(' style="'),A=d(":"),j=d(";");function q(e,t,n){if("object"!=typeof n)throw Error(o(62));for(var r in t=!0,n)if(h.call(n,r)){var a=n[r];if(null!=a&&"boolean"!=typeof a&&""!==a){if(0===r.indexOf("--")){var l=f(F(r));a=f(F((""+a).trim()))}else{l=r;var i=L.get(l);void 0!==i||(i=d(F(l.replace(R,"-$1").toLowerCase().replace(T,"-ms-"))),L.set(l,i)),l=i,a="number"==typeof a?0===a||h.call(w,r)?f(""+a):f(a+"px"):f(F((""+a).trim()))}t?(t=!1,e.push(O,l,A,a)):e.push(j,l,A,a)}}t||e.push(U)}var H=d(" "),W=d('="'),U=d('"'),Z=d('=""');function X(e,t,n,r){switch(n){case"style":return void q(e,t,r);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=S.hasOwnProperty(n)?S[n]:null)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=f(t.attributeName),t.type){case 3:r&&e.push(H,n,Z);break;case 4:!0===r?e.push(H,n,Z):!1!==r&&e.push(H,n,W,f(F(r)),U);break;case 5:isNaN(r)||e.push(H,n,W,f(F(r)),U);break;case 6:!isNaN(r)&&1<=r&&e.push(H,n,W,f(F(r)),U);break;default:t.sanitizeURL&&(r=""+r),e.push(H,n,W,f(F(r)),U)}}else if(b(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(H,f(n),W,f(F(r)),U)}}var G=d(">"),Y=d("/>");function J(e,t,n){if(null!=t){if(null!=n)throw Error(o(60));if("object"!=typeof t||!("__html"in t))throw Error(o(61));null!=(t=t.__html)&&e.push(f(""+t))}}var K=d(' selected=""');function Q(e,t,n,r){e.push(re(n));var o,a=n=null;for(o in t)if(h.call(t,o)){var l=t[o];if(null!=l)switch(o){case"children":n=l;break;case"dangerouslySetInnerHTML":a=l;break;default:X(e,r,o,l)}}return e.push(G),J(e,a,n),"string"==typeof n?(e.push(f(F(n))),null):n}var ee=d("\n"),te=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ne=new Map;function re(e){var t=ne.get(e);if(void 0===t){if(!te.test(e))throw Error(o(65,e));t=d("<"+e),ne.set(e,t)}return t}var oe=d("<!DOCTYPE html>");function ae(e,t,n,a,l){switch(t){case"select":e.push(re("select"));var i=null,u=null;for(p in n)if(h.call(n,p)){var s=n[p];if(null!=s)switch(p){case"children":i=s;break;case"dangerouslySetInnerHTML":u=s;break;case"defaultValue":case"value":break;default:X(e,a,p,s)}}return e.push(G),J(e,u,i),i;case"option":u=l.selectedValue,e.push(re("option"));var c=s=null,d=null,p=null;for(i in n)if(h.call(n,i)&&null!=(t=n[i]))switch(i){case"children":s=t;break;case"selected":d=t;break;case"dangerouslySetInnerHTML":p=t;break;case"value":c=t;default:X(e,a,i,t)}if(null!=u)if(n=null!==c?""+c:function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(s),_(u)){for(a=0;a<u.length;a++)if(""+u[a]===n){e.push(K);break}}else""+u===n&&e.push(K);else d&&e.push(K);return e.push(G),J(e,p,s),s;case"textarea":for(s in e.push(re("textarea")),p=u=i=null,n)if(h.call(n,s)&&null!=(c=n[s]))switch(s){case"children":p=c;break;case"value":i=c;break;case"defaultValue":u=c;break;case"dangerouslySetInnerHTML":throw Error(o(91));default:X(e,a,s,c)}if(null===i&&null!==u&&(i=u),e.push(G),null!=p){if(null!=i)throw Error(o(92));if(_(p)&&1<p.length)throw Error(o(93));i=""+p}return"string"==typeof i&&"\n"===i[0]&&e.push(ee),null!==i&&e.push(f(F(""+i))),null;case"input":for(u in e.push(re("input")),c=p=s=i=null,n)if(h.call(n,u)&&null!=(d=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(399,"input"));case"defaultChecked":c=d;break;case"defaultValue":s=d;break;case"checked":p=d;break;case"value":i=d;break;default:X(e,a,u,d)}return null!==p?X(e,a,"checked",p):null!==c&&X(e,a,"checked",c),null!==i?X(e,a,"value",i):null!==s&&X(e,a,"value",s),e.push(Y),null;case"menuitem":for(var g in e.push(re("menuitem")),n)if(h.call(n,g)&&null!=(i=n[g]))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(o(400));default:X(e,a,g,i)}return e.push(G),null;case"listing":case"pre":for(c in e.push(re(t)),u=i=null,n)if(h.call(n,c)&&null!=(s=n[c]))switch(c){case"children":i=s;break;case"dangerouslySetInnerHTML":u=s;break;default:X(e,a,c,s)}if(e.push(G),null!=u){if(null!=i)throw Error(o(60));if("object"!=typeof u||!("__html"in u))throw Error(o(61));null!=(n=u.__html)&&("string"==typeof n&&0<n.length&&"\n"===n[0]?e.push(ee,f(n)):e.push(f(""+n)))}return"string"==typeof i&&"\n"===i[0]&&e.push(ee),i;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var m in e.push(re(t)),n)if(h.call(n,m)&&null!=(i=n[m]))switch(m){case"children":case"dangerouslySetInnerHTML":throw Error(o(399,t));default:X(e,a,m,i)}return e.push(Y),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Q(e,n,t,a);case"html":return 0===l.insertionMode&&e.push(oe),Q(e,n,t,a);default:if(-1===t.indexOf("-")&&"string"!=typeof n.is)return Q(e,n,t,a);for(d in e.push(re(t)),u=i=null,n)if(h.call(n,d)&&null!=(s=n[d]))switch(d){case"children":i=s;break;case"dangerouslySetInnerHTML":u=s;break;case"style":q(e,a,s);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:b(d)&&"function"!=typeof s&&"symbol"!=typeof s&&e.push(H,f(d),W,f(F(s)),U)}return e.push(G),J(e,u,i),i}}var le=d("</"),ie=d(">"),ue=d('<template id="'),se=d('"></template>'),ce=d("\x3c!--$--\x3e"),fe=d('\x3c!--$?--\x3e<template id="'),de=d('"></template>'),pe=d("\x3c!--$!--\x3e"),he=d("\x3c!--/$--\x3e");function ge(e,t,n){if(i(e,fe),null===n)throw Error(o(395));return i(e,n),u(e,de)}var me=d('<div hidden id="'),ye=d('">'),be=d("</div>"),ve=d('<svg aria-hidden="true" style="display:none" id="'),Se=d('">'),ke=d("</svg>"),xe=d('<math aria-hidden="true" style="display:none" id="'),we=d('">'),Ce=d("</math>"),Ee=d('<table hidden id="'),Fe=d('">'),Re=d("</table>"),Te=d('<table hidden><tbody id="'),_e=d('">'),Ie=d("</tbody></table>"),Me=d('<table hidden><tr id="'),Pe=d('">'),Be=d("</tr></table>"),ze=d('<table hidden><colgroup id="'),De=d('">'),Ne=d("</colgroup></table>");var Ve=d('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),$e=d('$RS("'),Le=d('","'),Oe=d('")<\/script>'),Ae=d('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),je=d('$RC("'),qe=d('","'),He=d('")<\/script>'),We=d('function $RX(a){if(a=document.getElementById(a))a=a.previousSibling,a.data="$!",a._reactRetry&&a._reactRetry()};$RX("'),Ue=d('$RX("'),Ze=d('")<\/script>'),Xe=Object.assign,Ge=Symbol.for("react.element"),Ye=Symbol.for("react.portal"),Je=Symbol.for("react.fragment"),Ke=Symbol.for("react.strict_mode"),Qe=Symbol.for("react.profiler"),et=Symbol.for("react.provider"),tt=Symbol.for("react.context"),nt=Symbol.for("react.forward_ref"),rt=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),at=Symbol.for("react.memo"),lt=Symbol.for("react.lazy"),it=Symbol.for("react.scope"),ut=Symbol.for("react.debug_trace_mode"),st=Symbol.for("react.legacy_hidden"),ct=Symbol.for("react.default_value"),ft=Symbol.iterator;function dt(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Je:return"Fragment";case Ye:return"Portal";case Qe:return"Profiler";case Ke:return"StrictMode";case rt:return"Suspense";case ot:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case tt:return(e.displayName||"Context")+".Consumer";case et:return(e._context.displayName||"Context")+".Provider";case nt:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case at:return null!==(t=e.displayName||null)?t:dt(e.type)||"Memo";case lt:t=e._payload,e=e._init;try{return dt(e(t))}catch(e){}}return null}var pt={};function ht(e,t){if(!(e=e.contextTypes))return pt;var n,r={};for(n in e)r[n]=t[n];return r}var gt=null;function mt(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(o(401))}else{if(null===n)throw Error(o(401));mt(e,n)}t.context._currentValue=t.value}}function yt(e){var t=gt;t!==e&&(null===t?function e(t){var n=t.parent;null!==n&&e(n),t.context._currentValue=t.value}(e):null===e?function e(t){t.context._currentValue=t.parentValue,null!==(t=t.parent)&&e(t)}(t):t.depth===e.depth?mt(t,e):t.depth>e.depth?function e(t,n){if(t.context._currentValue=t.parentValue,null===(t=t.parent))throw Error(o(402));t.depth===n.depth?mt(t,n):e(t,n)}(t,e):function e(t,n){var r=n.parent;if(null===r)throw Error(o(402));t.depth===r.depth?mt(t,r):e(t,r),n.context._currentValue=n.value}(t,e),gt=e)}var bt={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function vt(e,t,n,r){var o=void 0!==e.state?e.state:null;e.updater=bt,e.props=n,e.state=o;var a={queue:[],replace:!1};e._reactInternals=a;var l=t.contextType;if(e.context="object"==typeof l&&null!==l?l._currentValue:r,"function"==typeof(l=t.getDerivedStateFromProps)&&(o=null==(l=l(n,o))?o:Xe({},o,l),e.state=o),"function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate&&("function"==typeof e.UNSAFE_componentWillMount||"function"==typeof e.componentWillMount))if(t=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&bt.enqueueReplaceState(e,e.state,null),null!==a.queue&&0<a.queue.length)if(t=a.queue,l=a.replace,a.queue=null,a.replace=!1,l&&1===t.length)e.state=t[0];else{for(a=l?t[0]:e.state,o=!0,l=l?1:0;l<t.length;l++){var i=t[l];null!=(i="function"==typeof i?i.call(e,a,n,r):i)&&(o?(o=!1,a=Xe({},a,i)):Xe(a,i))}e.state=a}else a.queue=null}var St={id:1,overflow:""};function kt(e,t,n){var r=e.id;e=e.overflow;var o=32-xt(r)-1;r&=~(1<<o),n+=1;var a=32-xt(t)+o;if(30<a){var l=o-o%5;return a=(r&(1<<l)-1).toString(32),r>>=l,o-=l,{id:1<<32-xt(t)+o|n<<o|r,overflow:a+e}}return{id:1<<a|n<<o|r,overflow:e}}var xt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(wt(e)/Ct|0)|0},wt=Math.log,Ct=Math.LN2;var Et="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Ft=null,Rt=null,Tt=null,_t=null,It=!1,Mt=!1,Pt=0,Bt=null,zt=0;function Dt(){if(null===Ft)throw Error(o(321));return Ft}function Nt(){if(0<zt)throw Error(o(312));return{memoizedState:null,queue:null,next:null}}function Vt(){return null===_t?null===Tt?(It=!1,Tt=_t=Nt()):(It=!0,_t=Tt):null===_t.next?(It=!1,_t=_t.next=Nt()):(It=!0,_t=_t.next),_t}function $t(){Rt=Ft=null,Mt=!1,Tt=null,zt=0,_t=Bt=null}function Lt(e,t){return"function"==typeof t?t(e):t}function Ot(e,t,n){if(Ft=Dt(),_t=Vt(),It){var r=_t.queue;if(t=r.dispatch,null!==Bt&&void 0!==(n=Bt.get(r))){Bt.delete(r),r=_t.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return _t.memoizedState=r,[r,t]}return[_t.memoizedState,t]}return e=e===Lt?"function"==typeof t?t():t:void 0!==n?n(t):t,_t.memoizedState=e,e=(e=_t.queue={last:null,dispatch:null}).dispatch=jt.bind(null,Ft,e),[_t.memoizedState,e]}function At(e,t){if(Ft=Dt(),t=void 0===t?null:t,null!==(_t=Vt())){var n=_t.memoizedState;if(null!==n&&null!==t){var r=n[1];e:if(null===r)r=!1;else{for(var o=0;o<r.length&&o<t.length;o++)if(!Et(t[o],r[o])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),_t.memoizedState=[e,t],e}function jt(e,t,n){if(25<=zt)throw Error(o(301));if(e===Ft)if(Mt=!0,e={action:n,next:null},null===Bt&&(Bt=new Map),void 0===(n=Bt.get(t)))Bt.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function qt(){throw Error(o(394))}function Ht(){}var Wt={readContext:function(e){return e._currentValue},useContext:function(e){return Dt(),e._currentValue},useMemo:At,useReducer:Ot,useRef:function(e){Ft=Dt();var t=(_t=Vt()).memoizedState;return null===t?(e={current:e},_t.memoizedState=e):t},useState:function(e){return Ot(Lt,e)},useInsertionEffect:Ht,useLayoutEffect:function(){},useCallback:function(e,t){return At((function(){return e}),t)},useImperativeHandle:Ht,useEffect:Ht,useDebugValue:Ht,useDeferredValue:function(e){return Dt(),e},useTransition:function(){return Dt(),[!1,qt]},useId:function(){var e=Rt.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-xt(e)-1)).toString(32)+t;var n=Ut;if(null===n)throw Error(o(404));return t=Pt++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Dt(),t(e._source)},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(o(407));return n()}},Ut=null,Zt=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Xt(e){console.error(e)}function Gt(){}function Yt(e,t,n,r,o,a,l,i){e.allPendingTasks++,null===n?e.pendingRootTasks++:n.pendingTasks++;var u={node:t,ping:function(){var t=e.pingedTasks;t.push(u),1===t.length&&dn(e)},blockedBoundary:n,blockedSegment:r,abortSet:o,legacyContext:a,context:l,treeContext:i};return o.add(u),u}function Jt(e,t,n,r){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n}}function Kt(e,t){(e=e.onError)(t)}function Qt(e,t){var n=e.onShellError;n(t),(n=e.onFatalError)(t),null!==e.destination?(e.status=2,p(e.destination,t)):(e.status=1,e.fatalError=t)}function en(e,t,n,r,o){for(Ft={},Rt=t,Pt=0,e=n(r,o);Mt;)Mt=!1,Pt=0,zt+=1,_t=null,e=n(r,o);return $t(),e}function tn(e,t,n,r){var a=n.render(),l=r.childContextTypes;if(null!=l){var i=t.legacyContext;if("function"!=typeof n.getChildContext)r=i;else{for(var u in n=n.getChildContext())if(!(u in l))throw Error(o(108,dt(r)||"Unknown",u));r=Xe({},i,n)}t.legacyContext=r,on(e,t,a),t.legacyContext=i}else on(e,t,a)}function nn(e,t){if(e&&e.defaultProps){for(var n in t=Xe({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rn(e,t,n,r,a){if("function"==typeof n)if(n.prototype&&n.prototype.isReactComponent){a=ht(n,t.legacyContext);var l=n.contextType;vt(l=new n(r,"object"==typeof l&&null!==l?l._currentValue:a),n,r,a),tn(e,t,l,n)}else{a=en(e,t,n,r,l=ht(n,t.legacyContext));var i=0!==Pt;if("object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof)vt(a,n,r,l),tn(e,t,a,n);else if(i){r=t.treeContext,t.treeContext=kt(r,1,0);try{on(e,t,a)}finally{t.treeContext=r}}else on(e,t,a)}else{if("string"!=typeof n){switch(n){case st:case ut:case Ke:case Qe:case Je:case ot:return void on(e,t,r.children);case it:throw Error(o(343));case rt:e:{n=t.blockedBoundary,a=t.blockedSegment,l=r.fallback,r=r.children;var u={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:i=new Set},s=Jt(0,a.chunks.length,u,a.formatContext);a.children.push(s);var c=Jt(0,0,null,a.formatContext);c.parentFlushed=!0,t.blockedBoundary=u,t.blockedSegment=c;try{if(ln(e,t,r),c.status=1,cn(u,c),0===u.pendingTasks)break e}catch(t){c.status=4,Kt(e,t),u.forceClientRender=!0}finally{t.blockedBoundary=n,t.blockedSegment=a}t=Yt(e,l,n,s,i,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if("object"==typeof n&&null!==n)switch(n.$$typeof){case nt:if(r=en(e,t,n.render,r,a),0!==Pt){n=t.treeContext,t.treeContext=kt(n,1,0);try{on(e,t,r)}finally{t.treeContext=n}}else on(e,t,r);return;case at:return void rn(e,t,n=n.type,r=nn(n,r),a);case et:if(a=r.children,n=n._context,r=r.value,l=n._currentValue,n._currentValue=r,gt=r={parent:i=gt,depth:null===i?0:i.depth+1,context:n,parentValue:l,value:r},t.context=r,on(e,t,a),null===(e=gt))throw Error(o(403));return r=e.parentValue,e.context._currentValue=r===ct?e.context._defaultValue:r,e=gt=e.parent,void(t.context=e);case tt:return void on(e,t,r=(r=r.children)(n._currentValue));case lt:return void rn(e,t,n=(a=n._init)(n._payload),r=nn(n,r),void 0)}throw Error(o(130,null==n?n:typeof n,""))}switch(l=ae((a=t.blockedSegment).chunks,n,r,e.responseState,a.formatContext),i=a.formatContext,a.formatContext=function(e,t,n){switch(t){case"select":return V(1,null!=n.value?n.value:n.defaultValue);case"svg":return V(2,null);case"math":return V(3,null);case"foreignObject":return V(1,null);case"table":return V(4,null);case"thead":case"tbody":case"tfoot":return V(5,null);case"colgroup":return V(7,null);case"tr":return V(6,null)}return 4<=e.insertionMode||0===e.insertionMode?V(1,null):e}(i,n,r),ln(e,t,l),a.formatContext=i,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:a.chunks.push(le,f(n),ie)}}}function on(e,t,n){if(t.node=n,"object"==typeof n&&null!==n){switch(n.$$typeof){case Ge:return void rn(e,t,n.type,n.props,n.ref);case Ye:throw Error(o(257));case lt:var r=n._init;return void on(e,t,n=r(n._payload))}if(_(n))return void an(e,t,n);if(null===n||"object"!=typeof n?r=null:r="function"==typeof(r=ft&&n[ft]||n["@@iterator"])?r:null,r&&(r=r.call(n))){if(!(n=r.next()).done){var a=[];do{a.push(n.value),n=r.next()}while(!n.done);an(e,t,a)}return}throw t=Object.prototype.toString.call(n),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(n).join(", ")+"}":t))}"string"==typeof n?""!==n&&t.blockedSegment.chunks.push(f(F(n)),$):"number"==typeof n&&(""!==(e=""+n)&&t.blockedSegment.chunks.push(f(F(e)),$))}function an(e,t,n){for(var r=n.length,o=0;o<r;o++){var a=t.treeContext;t.treeContext=kt(a,r,o);try{ln(e,t,n[o])}finally{t.treeContext=a}}}function ln(e,t,n){var r=t.blockedSegment.formatContext,o=t.legacyContext,a=t.context;try{return on(e,t,n)}catch(u){if($t(),"object"!=typeof u||null===u||"function"!=typeof u.then)throw t.blockedSegment.formatContext=r,t.legacyContext=o,t.context=a,yt(a),u;n=u;var l=t.blockedSegment,i=Jt(0,l.chunks.length,null,l.formatContext);l.children.push(i),e=Yt(e,t.node,t.blockedBoundary,i,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=r,t.legacyContext=o,t.context=a,yt(a)}}function un(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,fn(this,t,e)}function sn(e){var t=e.blockedBoundary;e.blockedSegment.status=3,null===t?(this.allPendingTasks--,2!==this.status&&(this.status=2,null!==this.destination&&this.destination.close())):(t.pendingTasks--,t.forceClientRender||(t.forceClientRender=!0,t.parentFlushed&&this.clientRenderedBoundaries.push(t)),t.fallbackAbortableTasks.forEach(sn,this),t.fallbackAbortableTasks.clear(),this.allPendingTasks--,0===this.allPendingTasks&&(e=this.onAllReady)())}function cn(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1===n.status&&cn(e,n)}else e.completedSegments.push(t)}function fn(e,t,n){if(null===t){if(n.parentFlushed){if(null!==e.completedRootSegment)throw Error(o(389));e.completedRootSegment=n}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=Gt,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(n.parentFlushed&&1===n.status&&cn(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(un,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&1===n.status&&(cn(t,n),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function dn(e){if(2!==e.status){var t=gt,n=Zt.current;Zt.current=Wt;var r=Ut;Ut=e.responseState;try{var o,a=e.pingedTasks;for(o=0;o<a.length;o++){var l=a[o],i=e,u=l.blockedSegment;if(0===u.status){yt(l.context);try{on(i,l,l.node),l.abortSet.delete(l),u.status=1,fn(i,l.blockedBoundary,u)}catch(e){if($t(),"object"==typeof e&&null!==e&&"function"==typeof e.then){var s=l.ping;e.then(s,s)}else{l.abortSet.delete(l),u.status=4;var c=l.blockedBoundary,f=e;if(Kt(i,f),null===c?Qt(i,f):(c.pendingTasks--,c.forceClientRender||(c.forceClientRender=!0,c.parentFlushed&&i.clientRenderedBoundaries.push(c))),i.allPendingTasks--,0===i.allPendingTasks)(0,i.onAllReady)()}}}}a.splice(0,o),null!==e.destination&&bn(e,e.destination)}catch(t){Kt(e,t),Qt(e,t)}finally{Ut=r,Zt.current=n,n===Wt&&yt(t)}}}function pn(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=e.nextSegmentId++;return e=e.responseState,i(t,ue),i(t,e.placeholderPrefix),i(t,e=f(r.toString(16))),u(t,se);case 1:n.status=2;var a=!0;r=n.chunks;var l=0;n=n.children;for(var s=0;s<n.length;s++){for(a=n[s];l<a.index;l++)i(t,r[l]);a=hn(e,t,a)}for(;l<r.length-1;l++)i(t,r[l]);return l<r.length&&(a=u(t,r[l])),a;default:throw Error(o(390))}}function hn(e,t,n){var r=n.boundary;if(null===r)return pn(e,t,n);if(r.parentFlushed=!0,r.forceClientRender)u(t,pe),pn(e,t,n);else if(0<r.pendingTasks){r.rootSegmentID=e.nextSegmentId++,0<r.completedSegments.length&&e.partialBoundaries.push(r);var a=e.responseState,l=a.nextSuspenseID++;a=d(a.boundaryPrefix+l.toString(16)),r=r.id=a,ge(t,e.responseState,r),pn(e,t,n)}else if(r.byteSize>e.progressiveChunkSize)r.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(r),ge(t,e.responseState,r.id),pn(e,t,n);else{if(u(t,ce),1!==(n=r.completedSegments).length)throw Error(o(391));hn(e,t,n[0])}return u(t,he)}function gn(e,t,n){return function(e,t,n,r){switch(n.insertionMode){case 0:case 1:return i(e,me),i(e,t.segmentPrefix),i(e,f(r.toString(16))),u(e,ye);case 2:return i(e,ve),i(e,t.segmentPrefix),i(e,f(r.toString(16))),u(e,Se);case 3:return i(e,xe),i(e,t.segmentPrefix),i(e,f(r.toString(16))),u(e,we);case 4:return i(e,Ee),i(e,t.segmentPrefix),i(e,f(r.toString(16))),u(e,Fe);case 5:return i(e,Te),i(e,t.segmentPrefix),i(e,f(r.toString(16))),u(e,_e);case 6:return i(e,Me),i(e,t.segmentPrefix),i(e,f(r.toString(16))),u(e,Pe);case 7:return i(e,ze),i(e,t.segmentPrefix),i(e,f(r.toString(16))),u(e,De);default:throw Error(o(397))}}(t,e.responseState,n.formatContext,n.id),hn(e,t,n),function(e,t){switch(t.insertionMode){case 0:case 1:return u(e,be);case 2:return u(e,ke);case 3:return u(e,Ce);case 4:return u(e,Re);case 5:return u(e,Ie);case 6:return u(e,Be);case 7:return u(e,Ne);default:throw Error(o(397))}}(t,n.formatContext)}function mn(e,t,n){for(var r=n.completedSegments,a=0;a<r.length;a++)yn(e,t,n,r[a]);if(r.length=0,e=e.responseState,r=n.id,n=n.rootSegmentID,i(t,e.startInlineScript),e.sentCompleteBoundaryFunction?i(t,je):(e.sentCompleteBoundaryFunction=!0,i(t,Ae)),null===r)throw Error(o(395));return n=f(n.toString(16)),i(t,r),i(t,qe),i(t,e.segmentPrefix),i(t,n),u(t,He)}function yn(e,t,n,r){if(2===r.status)return!0;var a=r.id;if(-1===a){if(-1===(r.id=n.rootSegmentID))throw Error(o(392));return gn(e,t,r)}return gn(e,t,r),i(t,(e=e.responseState).startInlineScript),e.sentCompleteSegmentFunction?i(t,$e):(e.sentCompleteSegmentFunction=!0,i(t,Ve)),i(t,e.segmentPrefix),i(t,a=f(a.toString(16))),i(t,Le),i(t,e.placeholderPrefix),i(t,a),u(t,Oe)}function bn(e,t){a=new Uint8Array(512),l=0;try{var n=e.completedRootSegment;if(null!==n&&0===e.pendingRootTasks){hn(e,t,n),e.completedRootSegment=null;var r=e.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)i(t,r[n]);n<r.length&&u(t,r[n])}var c,f=e.clientRenderedBoundaries;for(c=0;c<f.length;c++){r=t;var d=e.responseState,p=f[c].id;if(i(r,d.startInlineScript),d.sentClientRenderFunction?i(r,Ue):(d.sentClientRenderFunction=!0,i(r,We)),null===p)throw Error(o(395));if(i(r,p),!u(r,Ze))return e.destination=null,c++,void f.splice(0,c)}f.splice(0,c);var h=e.completedBoundaries;for(c=0;c<h.length;c++)if(!mn(e,t,h[c]))return e.destination=null,c++,void h.splice(0,c);h.splice(0,c),s(t),a=new Uint8Array(512),l=0;var g=e.partialBoundaries;for(c=0;c<g.length;c++){var m=g[c];e:{f=e,d=t;var y=m.completedSegments;for(p=0;p<y.length;p++)if(!yn(f,d,m,y[p])){p++,y.splice(0,p);var b=!1;break e}y.splice(0,p),b=!0}if(!b)return e.destination=null,c++,void g.splice(0,c)}g.splice(0,c);var v=e.completedBoundaries;for(c=0;c<v.length;c++)if(!mn(e,t,v[c]))return e.destination=null,c++,void v.splice(0,c);v.splice(0,c)}finally{s(t),0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.close()}}function vn(e){try{var t=e.abortableTasks;t.forEach(sn,e),t.clear(),null!==e.destination&&bn(e,e.destination)}catch(t){Kt(e,t),Qt(e,t)}}t.renderToReadableStream=function(e,t){return new Promise((function(n,r){var o,a,l=new Promise((function(e,t){a=e,o=t})),i=function(e,t,n,r,o,a,l,i,u){var s=[],c=new Set;return(n=Jt(t={destination:null,responseState:t,progressiveChunkSize:void 0===r?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:c,pingedTasks:s,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===o?Xt:o,onAllReady:void 0===a?Gt:a,onShellReady:void 0===l?Gt:l,onShellError:void 0===i?Gt:i,onFatalError:void 0===u?Gt:u},0,null,n)).parentFlushed=!0,e=Yt(t,e,null,n,c,pt,null,St),s.push(e),t}(e,function(e,t,n,r,o){e=void 0===e?"":e,t=void 0===t?I:d('<script nonce="'+F(t)+'">');var a=[];if(void 0!==n&&a.push(t,f((""+n).replace(D,N)),M),void 0!==r)for(n=0;n<r.length;n++)a.push(P,f(F(r[n])),z);if(void 0!==o)for(r=0;r<o.length;r++)a.push(B,f(F(o[r])),z);return{bootstrapChunks:a,startInlineScript:t,placeholderPrefix:d(e+"P:"),segmentPrefix:d(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),function(e){return V("http://www.w3.org/2000/svg"===e?2:"http://www.w3.org/1998/Math/MathML"===e?3:0,null)}(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,a,(function(){var e=new ReadableStream({type:"bytes",pull:function(e){if(1===i.status)i.status=2,p(e,i.fatalError);else if(2!==i.status&&null===i.destination){i.destination=e;try{bn(i,e)}catch(e){Kt(i,e),Qt(i,e)}}},cancel:function(){vn(i)}});e.allReady=l,n(e)}),(function(e){l.catch((function(){})),r(e)}),o);if(t&&t.signal){var u=t.signal,s=function(){vn(i),u.removeEventListener("abort",s)};u.addEventListener("abort",s)}dn(i)}))},t.version="18.1.0"}}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-frontend:split_react-dom-server', location = 'react-dom-server.js' */
(window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73=window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73||[]).push([[28],{559:function(e,r,t){"use strict";t.r(r);var n=t(169),o=t.n(n),i=t(15);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object(i.a)("react-dom/server",()=>function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({default:o.a},n))}},[[559,0,3,4,40,1]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:EditorContextInit', location = 'EditorContextInit.chunk.js' */
(window.atlassianWebpackJsonp77bd9c8b87e6dc89db026400e110f339=window.atlassianWebpackJsonp77bd9c8b87e6dc89db026400e110f339||[]).push([["EditorContextInit"],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js?!./src/main/frontend/view/highlight-text/highlight-text.scss":function(e,n,t){"use strict";var i=t("./node_modules/css-loader/dist/runtime/api.js"),r=t.n(i)()((function(e){return e[1]}));r.push([e.i,".inline-comment-marker.valid{background-color:#f6c3424d}.inline-comment-marker.valid:hover{cursor:pointer}.ic-current-selection,.inline-comment-marker.valid.active{background-color:#f6c342;box-shadow:0 2px 2px #ccc}.inline-comment-link{padding:5px!important}.inline-comment-link a{display:inline-block;max-width:180px;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}.inline-comment-link .aui-icon{color:#707070;display:inline-block;padding-right:4px;vertical-align:middle}",""]),n.a=r},"./src/main/frontend/loader/context/editor/cursorHandler.ts":function(e,n,t){"use strict";t.d(n,"b",(function(){return c})),t.d(n,"a",(function(){return s}));var i=t("confluence.web.resources:jquery/require('backbone')"),r=t.n(i),o=t("./src/main/frontend/utils/utils.ts"),a=t("./src/main/frontend/loader/highlightTextView.ts");let l=null;function c(){l=null}const s=(e,n)=>{var t,i,s,d;const u=null===(t=Object(o.n)())||void 0===t?void 0:t.selection.getRng();if(void 0!==u&&!u.collapsed)return;if(null==n||null===(i=n.querySelectorAll(o.x))||void 0===i||!i.length)return;const m=e.parents[0],h=Object(o.B)(m)&&(null==m||null===(s=m.classList)||void 0===s?void 0:s.contains("valid")),f=null==m||null===(d=m.classList)||void 0===d?void 0:d.contains("active");if(h&&!f)return null===a.a||void 0===a.a||a.a.showComment(m),void(l=m);h||null==l||(()=>{const e=new Event("inlineCommentEvent");Object.defineProperty(e,"currentTarget",{writable:!1,value:l}),r.a.trigger("ic:hide-sidebar",e,!0),c()})()}},"./src/main/frontend/loader/context/editor/index.ts":function(e,n,t){"use strict";t.r(n),t.d(n,"originalPos",(function(){return g})),t.d(n,"setOriginalPos",(function(){return p}));var i=t("confluence.web.resources:event/require('confluence/api/event')"),r=t.n(i),o=t("./src/main/frontend/loader/app.ts"),a=t("./src/main/frontend/loader/highlightTextView.ts");let l=null;const c={COMMENT_COLLECTION:"Failed to fetch inline comments",DEFAULT:"Unable to fulfil request"},s=()=>{o.commentCollection.fetch({reset:!0,success:()=>{d()},error:()=>{var e;e="COMMENT_COLLECTION",console.error(null==c?void 0:c[e||"DEFAULT"])}})},d=()=>{null===o.commentCollection||void 0===o.commentCollection||o.commentCollection.reInitHighlights(),Object(a.c)()},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4;return setInterval(()=>{s()},e)};var m=t("./src/main/frontend/utils/utils.ts"),h=t("./src/main/frontend/loader/context/editor/cursorHandler.ts");const f={childList:!0,subtree:!0},v=e=>{const n=new MutationObserver(e=>{var n;null==e||null===(n=e.some)||void 0===n||n.call(e,e=>{var n,t,i;const r=null==e||null===(n=e.addedNodes)||void 0===n?void 0:n[0],o=null==e||null===(t=e.removedNodes)||void 0===t?void 0:t[(null==e||null===(i=e.removedNodes)||void 0===i?void 0:i.length)-1];if(Object(m.B)(r)||Object(m.B)(o)||Object(m.e)(r))return d(),!0})});e&&n.observe(e,f)};let g="";const p=e=>{g=e},b=()=>{var e,n,t,i;l||(l=u(i));const r=null===(e=Object(m.n)())||void 0===e?void 0:e.getBody();setTimeout(()=>v(r),0),null===(n=Object(m.n)())||void 0===n||n.on("NodeChange",e=>Object(h.a)(e,r)),null===(t=Object(m.p)())||void 0===t||t.addEventListener("scroll",()=>{Object(m.O)(g)})};n.default=()=>{if(Object(m.L)(),Object(m.A)())return console.log("direct entry by reloading editor"),void b();r.a.bind("rte-ready",()=>{Object(m.L)(),Object(m.A)()&&(Object(o.reinitializeComments)(),console.log("indirect entry via view page into the editor"),b())})}},"./src/main/frontend/loader/highlightTextView.ts":function(e,n,t){"use strict";t.d(n,"a",(function(){return y})),t.d(n,"b",(function(){return E})),t.d(n,"c",(function(){return T}));var i=t("./src/main/frontend/utils/utils.ts"),r=t("confluence.web.resources:ajs/require('ajs')"),o=t.n(r),a=t("confluence.web.resources:jquery/require('backbone')"),l=t.n(a),c=t("confluence.web.resources:event/require('confluence/api/event')"),s=t.n(c),d=t("com.atlassian.confluence.plugins.confluence-inline-comments:util-resource/require('confluence/ic/util/text-highlighter')"),u=t.n(d),m=t("confluence.web.resources:jquery/require('jquery')"),h=t.n(m),f=t("com.atlassian.confluence.plugins.confluence-frontend:react/require('react')"),v=t.n(f),g=t("com.atlassian.confluence.plugins.confluence-frontend:react-dom-server/require('react-dom/server')"),p=t.n(g),b=t("./src/main/frontend/view/AUI/index.ts");const k=e=>{let{link:n}=e;return v.a.createElement(v.a.Fragment,null,v.a.createElement(b.d,{useIconFont:!0,size:"small",icon:"link"}),v.a.createElement("a",{href:n},n))};var w=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),j=t.n(w),x=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js?!./src/main/frontend/view/highlight-text/highlight-text.scss"),C={insert:"head",singleton:!1};j()(x.a,C),x.a.locals;var O=l.a.View.extend({initialize:function(){this.collection&&(this.listenTo(this.collection,"sync remove change:deleted",this.render),this.listenTo(this.collection,"change:active",this.setActive)),this.listenTo(l.a,"ic:view ic:overlap ic:sidebar-hidden",this.clearSelection),this.listenTo(l.a,"ic:persist",this.persistComment),this.listenTo(l.a,"ic:delete",this.render),s.a.bind("qr:add-new-highlight-text",this._addQuickReloadMarker)},render:function(){this.inlineLinks=[],Object(i.k)().find(".inline-comment-marker").removeClass("valid"),this.collection.each(e=>{e.isResolved()||e.get("deleted")||!e.highlights||(e.highlights.addClass("valid"),this._pushToInlineLinks(e.highlights))},this),this._setupLinkDialog()},_pushToInlineLinks:function(e){e.each(()=>{Object(i.s)(this).each((e,n)=>{h()(n).attr("href")&&this.inlineLinks.push(h()(n))})})},_setupLinkDialog:function(){const e={width:200,onHover:!0,noBind:!0,calculatePositions:this._calculatePositions,hideDelay:1e3};h()(this.inlineLinks).each((n,t)=>{o.a.InlineDialog(this,"inline-comment-link",(function(e,n,i){return e.addClass("inline-comment-link"),e.html(p.a.renderToStaticMarkup(v.a.createElement(k,{link:t.attr("href")}))),i(),!1}),e)})},_calculatePositions:function(e,n,t){return{displayAbove:!0,popupCss:{top:n.target.offset().top-e.height()-10,left:t.x-e.width()/2},arrowCss:{top:e.height(),left:e.width()/2-4}}},setActive:function(e){this.$(".inline-comment-marker").removeClass("active");const n=this.$(`.inline-comment-marker[data-ref="${e.get("markerRef")}"]`);e.get("active")&&n.length&&n.addClass("active")},showComment:function(e){const n=this.$(e);this.displayComment(n)},commentClick:function(e){e.preventDefault();const n=this.$(e.currentTarget);n.hasClass("active")?l.a.trigger("ic:hide-sidebar",e,!0):this.displayComment(n)},displayComment:function(e,n){const t=Object(i.A)()?e.attr("data-ref"):e.data("ref"),r=this.collection.findWhere({markerRef:t});l.a.trigger("ic:view",r,n)},clearSelection:function(){(new u.a).removeHighlight()},persistComment:function(e){this.$(".ic-current-selection").removeClass("ic-current-selection").addClass("inline-comment-marker").attr("data-ref",e.get("markerRef")),this.collection.add(e)},_addQuickReloadMarker:function(e,n,t){const i=n.comment;if(this.$(`.inline-comment-marker[data-ref="${i.dataRef}"]`).length)return void t.resolve(n);(new u.a).deserializeHighlights(i.serializedHighlights,i.dataRef)?t.resolve(n):t.reject(n)}});let y;const E=e=>{y=Object(i.A)()?(e=>new O({collection:e,el:Object(i.k)()}))(e):(e=>new O({collection:e,el:Object(i.k)(),events:{"click .inline-comment-marker.valid":"commentClick"}}))(e),T()},T=()=>{var e;null===(e=y)||void 0===e||e.render()}},"./src/main/frontend/view/AUI/Avatar.tsx":function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var i=t("com.atlassian.confluence.plugins.confluence-frontend:react/require('react')"),r=t.n(i);const o=e=>{let{avatarImageUrl:n,size:t,extraClasses:i="",accessibilityText:o}=e;return r.a.createElement("span",{className:`aui-avatar aui-avatar-${t}${i&&" "+i}`},r.a.createElement("span",{className:"aui-avatar-inner"},r.a.createElement("img",{src:n,alt:o})))}},"./src/main/frontend/view/AUI/index.ts":function(e,n,t){"use strict";t.d(n,"d",(function(){return o})),t.d(n,"a",(function(){return l})),t.d(n,"c",(function(){return c})),t.d(n,"b",(function(){return s}));var i=t("com.atlassian.confluence.plugins.confluence-frontend:react/require('react')"),r=t.n(i);const o=e=>{let{useIconFont:n,size:t="small",icon:i="link",iconType:o="aui",iconClass:a,extraClasses:l}=e;const c=a||`${o}-icon-${t} ${n?`${o}-iconfont-${i}`:""}`;return r.a.createElement("span",{className:`${o}-icon ${c}${l?" "+l:""}`})};function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}const l=e=>{let{id:n,text:t="",type:i="",extraClasses:l="",isDisabled:c=!1,iconType:s,iconClass:d,extraAttributes:u={},dropdown2Target:m}=e;const h=Array.isArray(l)?l.join(" "):l;return r.a.createElement("button",a({id:n,className:`aui-button ${i?`aui-button-${i} `:""}${l&&h+" "}${m?"aui-dropdown2-trigger":""}`,disabled:c,"aria-controls":m,"aria-disabled":c},u),(s||d)&&r.a.createElement(o,{iconType:s,iconClass:d}),t)};t("./src/main/frontend/view/AUI/Avatar.tsx");const c=e=>{let{children:n,id:t,extraClasses:i}=e;return r.a.createElement("aui-dropdown-menu",{id:t,class:""+(i||"")},n)};t(1);const s=e=>{let{id:n,removeOnHide:t,extraClasses:i,modal:o,titleText:a,footerActionContent:l,content:c,layer:s=!0}=e;return r.a.createElement("section",{id:n,className:`aui-dialog2 aui-dialog2-medium${s?" aui-layer":""}${i?" "+i:""}`,role:"dialog",tabIndex:-1,"aria-labelledby":n+"--dialog-title","data-aui-modal":o,"data-aui-remove-on-hide":t},r.a.createElement("header",{className:"aui-dialog2-header"},r.a.createElement("h1",{className:"aui-dialog2-header-main",id:n+"--dialog-title"},a)),r.a.createElement("div",{id:n+"--panel",className:"aui-dialog2-content"},c),r.a.createElement("footer",{id:n+"--footer",className:"aui-dialog2-footer"},r.a.createElement("div",{className:"aui-dialog2-footer-actions"},l)))}},1:function(e,n,t){e.exports=void 0},"com.atlassian.confluence.plugins.confluence-frontend:react-dom-server/require('react-dom/server')":function(e,n){e.exports=require("react-dom/server")},"com.atlassian.confluence.plugins.confluence-inline-comments:util-resource/require('confluence/ic/util/text-highlighter')":function(e,n){e.exports=require("confluence/ic/util/text-highlighter")}}]);
}catch(e){WRMCB(e)};